/*! For license information please see image-manager-9ff8eef.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios"),require("canvas-confetti"),require("class-autobind"),require("classnames"),require("form-data"),require("lodash"),require("md5"),require("mirror-creator"),require("react-dropzone"),require("react-img-carousel"),require("react-redux"),require("redux"),require("redux-saga"),require("redux-saga/effects"),require("uuid"),require("prop-types"),require("react"),require("react-dom"),require("@ux/alert").default,require("@ux/button").default,require("@ux/dropdown").default,require("@ux/growl").default,require("@ux/modal").default,require("@ux/spinner").default,require("@ux/text").default,require("react-intl").default):"function"==typeof define&&define.amd?define(["axios","canvas-confetti","class-autobind","classnames","form-data","lodash","md5","mirror-creator","react-dropzone","react-img-carousel","react-redux","redux","redux-saga","redux-saga/effects","uuid","prop-types","react","react-dom","@ux/alert","@ux/button","@ux/dropdown","@ux/growl","@ux/modal","@ux/spinner","@ux/text","react-intl"],t):"object"==typeof exports?exports.bb=t(require("axios"),require("canvas-confetti"),require("class-autobind"),require("classnames"),require("form-data"),require("lodash"),require("md5"),require("mirror-creator"),require("react-dropzone"),require("react-img-carousel"),require("react-redux"),require("redux"),require("redux-saga"),require("redux-saga/effects"),require("uuid"),require("prop-types"),require("react"),require("react-dom"),require("@ux/alert").default,require("@ux/button").default,require("@ux/dropdown").default,require("@ux/growl").default,require("@ux/modal").default,require("@ux/spinner").default,require("@ux/text").default,require("react-intl").default):(e.bb=e.bb||{},e.bb.ImageManager=t(e.bb.axios,e.bb.canvasConfetti,e.bb.classAutobind,e.bb.classnames,e.bb.formData,e.bb.lodash,e.bb.md5,e.bb.mirrorCreator,e.bb.reactDropzone,e.bb.reactImgCarousel,e.bb.reactRedux,e.bb.redux,e.bb.reduxSaga,e.bb.reduxSaga.effects,e.bb.uuid,e.PropTypes,e.React,e.ReactDOM,e.ux.Alert,e.ux.Button,e.ux.Dropdown,e.ux.Growl,e.ux.Modal,e.ux.Spinner,e.ux.Text,e.ux.intl))}(self,((e,t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O,I,S,w)=>(()=>{var T={2535:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrow:()=>we,autoPlacement:()=>me,autoUpdate:()=>de,computePosition:()=>Oe,detectOverflow:()=>pe,flip:()=>ge,getOverflowAncestors:()=>$,hide:()=>ye,inline:()=>be,limitShift:()=>_e,offset:()=>fe,platform:()=>ue,shift:()=>he,size:()=>ve,useFloating:()=>Ae});const r=["top","right","bottom","left"],a=["start","end"],o=r.reduce(((e,t)=>e.concat(t,t+"-"+a[0],t+"-"+a[1])),[]),i=Math.min,s=Math.max,c=Math.round,l=Math.floor,u=e=>({x:e,y:e}),d={left:"right",right:"left",bottom:"top",top:"bottom"},p={start:"end",end:"start"};function f(e,t,n){return s(e,i(t,n))}function m(e,t){return"function"==typeof e?e(t):e}function h(e){return e.split("-")[0]}function g(e){return e.split("-")[1]}function v(e){return"x"===e?"y":"x"}function y(e){return"y"===e?"height":"width"}function E(e){return["top","bottom"].includes(h(e))?"y":"x"}function b(e){return v(E(e))}function _(e,t,n){void 0===n&&(n=!1);const r=g(e),a=b(e),o=y(a);let i="x"===a?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=I(i)),[i,I(i)]}function O(e){return e.replace(/start|end/g,(e=>p[e]))}function I(e){return e.replace(/left|right|bottom|top/g,(e=>d[e]))}function S(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function w(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function T(e,t,n){let{reference:r,floating:a}=e;const o=E(t),i=b(t),s=y(i),c=h(t),l="y"===o,u=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,p=r[s]/2-a[s]/2;let f;switch(c){case"top":f={x:u,y:r.y-a.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-a.width,y:d};break;default:f={x:r.x,y:r.y}}switch(g(t)){case"start":f[i]-=p*(n&&l?-1:1);break;case"end":f[i]+=p*(n&&l?-1:1)}return f}async function k(e,t){var n;void 0===t&&(t={});const{x:r,y:a,platform:o,rects:i,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:f=0}=m(t,e),h=S(f),g=s[p?"floating"===d?"reference":"floating":d],v=w(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(g)))||n?g:g.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),y="floating"===d?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,E=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),b=await(null==o.isElement?void 0:o.isElement(E))&&await(null==o.getScale?void 0:o.getScale(E))||{x:1,y:1},_=w(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:E,strategy:c}):y);return{top:(v.top-_.top+h.top)/b.y,bottom:(_.bottom-v.bottom+h.bottom)/b.y,left:(v.left-_.left+h.left)/b.x,right:(_.right-v.right+h.right)/b.x}}function C(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function A(e){return r.some((t=>e[t]>=0))}function x(e){const t=i(...e.map((e=>e.left))),n=i(...e.map((e=>e.top)));return{x:t,y:n,width:s(...e.map((e=>e.right)))-t,height:s(...e.map((e=>e.bottom)))-n}}function L(){return"undefined"!=typeof window}function P(e){return N(e)?(e.nodeName||"").toLowerCase():"#document"}function D(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function M(e){var t;return null==(t=(N(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function N(e){return!!L()&&(e instanceof Node||e instanceof D(e).Node)}function R(e){return!!L()&&(e instanceof Element||e instanceof D(e).Element)}function U(e){return!!L()&&(e instanceof HTMLElement||e instanceof D(e).HTMLElement)}function j(e){return!(!L()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof D(e).ShadowRoot)}function F(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=z(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function G(e){return["table","td","th"].includes(P(e))}function V(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function B(e){const t=H(),n=R(e)?z(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function H(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function K(e){return["html","body","#document"].includes(P(e))}function z(e){return D(e).getComputedStyle(e)}function W(e){return R(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function q(e){if("html"===P(e))return e;const t=e.assignedSlot||e.parentNode||j(e)&&e.host||M(e);return j(t)?t.host:t}function Y(e){const t=q(e);return K(t)?e.ownerDocument?e.ownerDocument.body:e.body:U(t)&&F(t)?t:Y(t)}function $(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const a=Y(e),o=a===(null==(r=e.ownerDocument)?void 0:r.body),i=D(a);if(o){const e=X(i);return t.concat(i,i.visualViewport||[],F(a)?a:[],e&&n?$(e):[])}return t.concat(a,$(a,[],n))}function X(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Q(e){const t=z(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=U(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:r,s=c(n)!==o||c(r)!==i;return s&&(n=o,r=i),{width:n,height:r,$:s}}function Z(e){return R(e)?e:e.contextElement}function J(e){const t=Z(e);if(!U(t))return u(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:o}=Q(t);let i=(o?c(n.width):n.width)/r,s=(o?c(n.height):n.height)/a;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}const ee=u(0);function te(e){const t=D(e);return H()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ee}function ne(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),o=Z(e);let i=u(1);t&&(r?R(r)&&(i=J(r)):i=J(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==D(e))&&t}(o,n,r)?te(o):u(0);let c=(a.left+s.x)/i.x,l=(a.top+s.y)/i.y,d=a.width/i.x,p=a.height/i.y;if(o){const e=D(o),t=r&&R(r)?D(r):r;let n=e,a=X(n);for(;a&&r&&t!==n;){const e=J(a),t=a.getBoundingClientRect(),r=z(a),o=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,d*=e.x,p*=e.y,c+=o,l+=i,n=D(a),a=X(n)}}return w({width:d,height:p,x:c,y:l})}function re(e,t){const n=W(e).scrollLeft;return t?t.left+n:ne(M(e)).left+n}function ae(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=D(e),r=M(e),a=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,s=0,c=0;if(a){o=a.width,i=a.height;const e=H();(!e||e&&"fixed"===t)&&(s=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:s,y:c}}(e,n);else if("document"===t)r=function(e){const t=M(e),n=W(e),r=e.ownerDocument.body,a=s(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=s(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+re(e);const c=-n.scrollTop;return"rtl"===z(r).direction&&(i+=s(t.clientWidth,r.clientWidth)-a),{width:a,height:o,x:i,y:c}}(M(e));else if(R(t))r=function(e,t){const n=ne(e,!0,"fixed"===t),r=n.top+e.clientTop,a=n.left+e.clientLeft,o=U(e)?J(e):u(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:a*o.x,y:r*o.y}}(t,n);else{const n=te(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return w(r)}function oe(e,t){const n=q(e);return!(n===t||!R(n)||K(n))&&("fixed"===z(n).position||oe(n,t))}function ie(e,t,n){const r=U(t),a=M(t),o="fixed"===n,i=ne(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const c=u(0);if(r||!r&&!o)if(("body"!==P(t)||F(a))&&(s=W(t)),r){const e=ne(t,!0,o,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else a&&(c.x=re(a));let l=0,d=0;if(a&&!r&&!o){const e=a.getBoundingClientRect();d=e.top+s.scrollTop,l=e.left+s.scrollLeft-re(a,e)}return{x:i.left+s.scrollLeft-c.x-l,y:i.top+s.scrollTop-c.y-d,width:i.width,height:i.height}}function se(e){return"static"===z(e).position}function ce(e,t){if(!U(e)||"fixed"===z(e).position)return null;if(t)return t(e);let n=e.offsetParent;return M(e)===n&&(n=n.ownerDocument.body),n}function le(e,t){const n=D(e);if(V(e))return n;if(!U(e)){let t=q(e);for(;t&&!K(t);){if(R(t)&&!se(t))return t;t=q(t)}return n}let r=ce(e,t);for(;r&&G(r)&&se(r);)r=ce(r,t);return r&&K(r)&&se(r)&&!B(r)?n:r||function(e){let t=q(e);for(;U(t)&&!K(t);){if(B(t))return t;if(V(t))return null;t=q(t)}return null}(e)||n}const ue={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const o="fixed"===a,i=M(r),s=!!t&&V(t.floating);if(r===i||s&&o)return n;let c={scrollLeft:0,scrollTop:0},l=u(1);const d=u(0),p=U(r);if((p||!p&&!o)&&(("body"!==P(r)||F(i))&&(c=W(r)),U(r))){const e=ne(r);l=J(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+d.x,y:n.y*l.y-c.scrollTop*l.y+d.y}},getDocumentElement:M,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[..."clippingAncestors"===n?V(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=$(e,[],!1).filter((e=>R(e)&&"body"!==P(e))),a=null;const o="fixed"===z(e).position;let i=o?q(e):e;for(;R(i)&&!K(i);){const t=z(i),n=B(i);n||"fixed"!==t.position||(a=null),(o?!n&&!a:!n&&"static"===t.position&&a&&["absolute","fixed"].includes(a.position)||F(i)&&!n&&oe(e,i))?r=r.filter((e=>e!==i)):a=t,i=q(i)}return t.set(e,r),r}(t,this._c):[].concat(n),r],c=o[0],l=o.reduce(((e,n)=>{const r=ae(t,n,a);return e.top=s(r.top,e.top),e.right=i(r.right,e.right),e.bottom=i(r.bottom,e.bottom),e.left=s(r.left,e.left),e}),ae(t,c,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:le,getElementRects:async function(e){const t=this.getOffsetParent||le,n=this.getDimensions,r=await n(e.floating);return{reference:ie(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Q(e);return{width:t,height:n}},getScale:J,isElement:R,isRTL:function(e){return"rtl"===z(e).direction}};function de(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:u="function"==typeof IntersectionObserver,animationFrame:d=!1}=r,p=Z(e),f=a||o?[...p?$(p):[],...$(t)]:[];f.forEach((e=>{a&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const m=p&&u?function(e,t){let n,r=null;const a=M(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function c(u,d){void 0===u&&(u=!1),void 0===d&&(d=1),o();const{left:p,top:f,width:m,height:h}=e.getBoundingClientRect();if(u||t(),!m||!h)return;const g={rootMargin:-l(f)+"px "+-l(a.clientWidth-(p+m))+"px "+-l(a.clientHeight-(f+h))+"px "+-l(p)+"px",threshold:s(0,i(1,d))||1};let v=!0;function y(e){const t=e[0].intersectionRatio;if(t!==d){if(!v)return c();t?c(!1,t):n=setTimeout((()=>{c(!1,1e-7)}),1e3)}v=!1}try{r=new IntersectionObserver(y,{...g,root:a.ownerDocument})}catch(e){r=new IntersectionObserver(y,g)}r.observe(e)}(!0),o}(p,n):null;let h,g=-1,v=null;c&&(v=new ResizeObserver((e=>{let[r]=e;r&&r.target===p&&v&&(v.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame((()=>{var e;null==(e=v)||e.observe(t)}))),n()})),p&&!d&&v.observe(p),v.observe(t));let y=d?ne(e):null;return d&&function t(){const r=ne(e);!y||r.x===y.x&&r.y===y.y&&r.width===y.width&&r.height===y.height||n(),y=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;f.forEach((e=>{a&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==m||m(),null==(e=v)||e.disconnect(),v=null,d&&cancelAnimationFrame(h)}}const pe=k,fe=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:o,placement:i,middlewareData:s}=t,c=await async function(e,t){const{placement:n,platform:r,elements:a}=e,o=await(null==r.isRTL?void 0:r.isRTL(a.floating)),i=h(n),s=g(n),c="y"===E(n),l=["left","top"].includes(i)?-1:1,u=o&&c?-1:1,d=m(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:v}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof v&&(f="end"===s?-1*v:v),c?{x:f*u,y:p*l}:{x:p*l,y:f*u}}(t,e);return i===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},me=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,a;const{rects:i,middlewareData:s,placement:c,platform:l,elements:u}=t,{crossAxis:d=!1,alignment:p,allowedPlacements:f=o,autoAlignment:v=!0,...y}=m(e,t),E=void 0!==p||f===o?function(e,t,n){return(e?[...n.filter((t=>g(t)===e)),...n.filter((t=>g(t)!==e))]:n.filter((e=>h(e)===e))).filter((n=>!e||g(n)===e||!!t&&O(n)!==n))}(p||null,v,f):f,b=await k(t,y),I=(null==(n=s.autoPlacement)?void 0:n.index)||0,S=E[I];if(null==S)return{};const w=_(S,i,await(null==l.isRTL?void 0:l.isRTL(u.floating)));if(c!==S)return{reset:{placement:E[0]}};const T=[b[h(S)],b[w[0]],b[w[1]]],C=[...(null==(r=s.autoPlacement)?void 0:r.overflows)||[],{placement:S,overflows:T}],A=E[I+1];if(A)return{data:{index:I+1,overflows:C},reset:{placement:A}};const x=C.map((e=>{const t=g(e.placement);return[e.placement,t&&d?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),L=(null==(a=x.filter((e=>e[2].slice(0,g(e[0])?2:3).every((e=>e<=0))))[0])?void 0:a[0])||x[0][0];return L!==c?{data:{index:I+1,overflows:C},reset:{placement:L}}:{}}}},he=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=m(e,t),l={x:n,y:r},u=await k(t,c),d=E(h(a)),p=v(d);let g=l[p],y=l[d];if(o){const e="y"===p?"bottom":"right";g=f(g+u["y"===p?"top":"left"],g,g-u[e])}if(i){const e="y"===d?"bottom":"right";y=f(y+u["y"===d?"top":"left"],y,y-u[e])}const b=s.fn({...t,[p]:g,[d]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:o,[d]:i}}}}}},ge=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:o,rects:i,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...b}=m(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const S=h(a),w=E(s),T=h(s)===s,C=await(null==c.isRTL?void 0:c.isRTL(l.floating)),A=p||(T||!y?[I(s)]:function(e){const t=I(e);return[O(e),t,O(t)]}(s)),x="none"!==v;!p&&x&&A.push(...function(e,t,n,r){const a=g(e);let o=function(e,t,n){const r=["left","right"],a=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?o:i;default:return[]}}(h(e),"start"===n,r);return a&&(o=o.map((e=>e+"-"+a)),t&&(o=o.concat(o.map(O)))),o}(s,y,v,C));const L=[s,...A],P=await k(t,b),D=[];let M=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&D.push(P[S]),d){const e=_(a,i,C);D.push(P[e[0]],P[e[1]])}if(M=[...M,{placement:a,overflows:D}],!D.every((e=>e<=0))){var N,R;const e=((null==(N=o.flip)?void 0:N.index)||0)+1,t=L[e];if(t)return{data:{index:e,overflows:M},reset:{placement:t}};let n=null==(R=M.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:R.placement;if(!n)switch(f){case"bestFit":{var U;const e=null==(U=M.filter((e=>{if(x){const t=E(e.placement);return t===w||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:U[0];e&&(n=e);break}case"initialPlacement":n=s}if(a!==n)return{reset:{placement:n}}}return{}}}},ve=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:o,platform:c,elements:l}=t,{apply:u=()=>{},...d}=m(e,t),p=await k(t,d),f=h(a),v=g(a),y="y"===E(a),{width:b,height:_}=o.floating;let O,I;"top"===f||"bottom"===f?(O=f,I=v===(await(null==c.isRTL?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(I=f,O="end"===v?"top":"bottom");const S=_-p.top-p.bottom,w=b-p.left-p.right,T=i(_-p[O],S),C=i(b-p[I],w),A=!t.middlewareData.shift;let x=T,L=C;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(L=w),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(x=S),A&&!v){const e=s(p.left,0),t=s(p.right,0),n=s(p.top,0),r=s(p.bottom,0);y?L=b-2*(0!==e||0!==t?e+t:s(p.left,p.right)):x=_-2*(0!==n||0!==r?n+r:s(p.top,p.bottom))}await u({...t,availableWidth:L,availableHeight:x});const P=await c.getDimensions(l.floating);return b!==P.width||_!==P.height?{reset:{rects:!0}}:{}}}},ye=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=m(e,t);switch(r){case"referenceHidden":{const e=C(await k(t,{...a,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:A(e)}}}case"escaped":{const e=C(await k(t,{...a,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:A(e)}}}default:return{}}}}},Ee=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:o,platform:s,elements:c,middlewareData:l}=t,{element:u,padding:d=0}=m(e,t)||{};if(null==u)return{};const p=S(d),h={x:n,y:r},v=b(a),E=y(v),_=await s.getDimensions(u),O="y"===v,I=O?"top":"left",w=O?"bottom":"right",T=O?"clientHeight":"clientWidth",k=o.reference[E]+o.reference[v]-h[v]-o.floating[E],C=h[v]-o.reference[v],A=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let x=A?A[T]:0;x&&await(null==s.isElement?void 0:s.isElement(A))||(x=c.floating[T]||o.floating[E]);const L=k/2-C/2,P=x/2-_[E]/2-1,D=i(p[I],P),M=i(p[w],P),N=D,R=x-_[E]-M,U=x/2-_[E]/2+L,j=f(N,U,R),F=!l.arrow&&null!=g(a)&&U!==j&&o.reference[E]/2-(U<N?D:M)-_[E]/2<0,G=F?U<N?U-N:U-R:0;return{[v]:h[v]+G,data:{[v]:j,centerOffset:U-j-G,...F&&{alignmentOffset:G}},reset:F}}}),be=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:a,platform:o,strategy:c}=t,{padding:l=2,x:u,y:d}=m(e,t),p=Array.from(await(null==o.getClientRects?void 0:o.getClientRects(r.reference))||[]),f=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),n=[];let r=null;for(let e=0;e<t.length;e++){const a=t[e];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map((e=>w(x(e))))}(p),g=w(x(p)),v=S(l),y=await o.getElementRects({reference:{getBoundingClientRect:function(){if(2===f.length&&f[0].left>f[1].right&&null!=u&&null!=d)return f.find((e=>u>e.left-v.left&&u<e.right+v.right&&d>e.top-v.top&&d<e.bottom+v.bottom))||g;if(f.length>=2){if("y"===E(n)){const e=f[0],t=f[f.length-1],r="top"===h(n),a=e.top,o=t.bottom,i=r?e.left:t.left,s=r?e.right:t.right;return{top:a,bottom:o,left:i,right:s,width:s-i,height:o-a,x:i,y:a}}const e="left"===h(n),t=s(...f.map((e=>e.right))),r=i(...f.map((e=>e.left))),a=f.filter((n=>e?n.left===r:n.right===t)),o=a[0].top,c=a[a.length-1].bottom;return{top:o,bottom:c,left:r,right:t,width:t-r,height:c-o,x:r,y:o}}return g}},floating:r.floating,strategy:c});return a.reference.x!==y.reference.x||a.reference.y!==y.reference.y||a.reference.width!==y.reference.width||a.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}},_e=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:o,middlewareData:i}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=m(e,t),u={x:n,y:r},d=E(a),p=v(d);let f=u[p],g=u[d];const y=m(s,t),b="number"==typeof y?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const e="y"===p?"height":"width",t=o.reference[p]-o.floating[e]+b.mainAxis,n=o.reference[p]+o.reference[e]-b.mainAxis;f<t?f=t:f>n&&(f=n)}if(l){var _,O;const e="y"===p?"width":"height",t=["top","left"].includes(h(a)),n=o.reference[d]-o.floating[e]+(t&&(null==(_=i.offset)?void 0:_[d])||0)+(t?0:b.crossAxis),r=o.reference[d]+o.reference[e]+(t?0:(null==(O=i.offset)?void 0:O[d])||0)-(t?b.crossAxis:0);g<n?g=n:g>r&&(g=r)}return{[p]:f,[d]:g}}}},Oe=(e,t,n)=>{const r=new Map,a={platform:ue,...n},o={...a.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,s=o.filter(Boolean),c=await(null==i.isRTL?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:d}=T(l,r,c),p=r,f={},m=0;for(let n=0;n<s.length;n++){const{name:o,fn:h}=s[n],{x:g,y:v,data:y,reset:E}=await h({x:u,y:d,initialPlacement:r,placement:p,strategy:a,middlewareData:f,rects:l,platform:i,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,f={...f,[o]:{...f[o],...y}},E&&m<=50&&(m++,"object"==typeof E&&(E.placement&&(p=E.placement),E.rects&&(l=!0===E.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):E.rects),({x:u,y:d}=T(l,p,c))),n=-1)}return{x:u,y:d,placement:p,strategy:a,middlewareData:f}})(e,t,{...a,platform:o})};var Ie=n(8036),Se=n(6047);const we=e=>{const{element:t,padding:n}=e;return{name:"arrow",options:e,fn(e){return r=t,Object.prototype.hasOwnProperty.call(r,"current")?null!=t.current?Ee({element:t.current,padding:n}).fn(e):{}:t?Ee({element:t,padding:n}).fn(e):{};var r}}};var Te="undefined"!=typeof document?Ie.useLayoutEffect:Ie.useEffect;function ke(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(!ke(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!=r--;){const n=a[r];if(!("_owner"===n&&e.$$typeof||ke(e[n],t[n])))return!1}return!0}return e!=e&&t!=t}function Ce(e){const t=Ie.useRef(e);return Te((()=>{t.current=e})),t}function Ae(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,whileElementsMounted:o,open:i}=e,[s,c]=Ie.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[l,u]=Ie.useState(r);ke(l,r)||u(r);const d=Ie.useRef(null),p=Ie.useRef(null),f=Ie.useRef(s),m=Ce(o),h=Ce(a),[g,v]=Ie.useState(null),[y,E]=Ie.useState(null),b=Ie.useCallback((e=>{d.current!==e&&(d.current=e,v(e))}),[]),_=Ie.useCallback((e=>{p.current!==e&&(p.current=e,E(e))}),[]),O=Ie.useCallback((()=>{if(!d.current||!p.current)return;const e={placement:t,strategy:n,middleware:l};h.current&&(e.platform=h.current),Oe(d.current,p.current,e).then((e=>{const t={...e,isPositioned:!0};I.current&&!ke(f.current,t)&&(f.current=t,Se.flushSync((()=>{c(t)})))}))}),[l,t,n,h]);Te((()=>{!1===i&&f.current.isPositioned&&(f.current.isPositioned=!1,c((e=>({...e,isPositioned:!1}))))}),[i]);const I=Ie.useRef(!1);Te((()=>(I.current=!0,()=>{I.current=!1})),[]),Te((()=>{if(g&&y){if(m.current)return m.current(g,y,O);O()}}),[g,y,O,m]);const S=Ie.useMemo((()=>({reference:d,floating:p,setReference:b,setFloating:_})),[b,_]),w=Ie.useMemo((()=>({reference:g,floating:y})),[g,y]);return Ie.useMemo((()=>({...s,update:O,refs:S,elements:w,reference:b,floating:_})),[s,O,S,w,b,_])}},490:(e,t,n)=>{var r=n(8036),a=n(6047),o=n(2345),i=n(9227),s=n(6489),c=n(3496);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=l(r),d=l(o),p=l(i);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}var m,h={width:180,height:220};function g(e,t){var n,r,a,o,i=function(e){return{width:e.width-65,height:e.height-88}}(e),s=(o=h,n={width:(a=t).width+o.width,height:a.height+o.height},r=i,Math.min(r.width/n.width,r.height/n.height)),c=Math.floor(s*t.height),l=Math.floor(s*t.width);return{height:c,width:l,left:Math.floor(.5*(e.width-l)),top:Math.floor(.5*(e.height-c))+44,scale:Math.floor(100*s)/100}}!function(e){e.white="#FFFFFF",e.gray10="#F3F3F3",e.gray20="#DCDCDC",e.gray100="#171717"}(m||(m={}));var v={height:"100%",position:"relative",width:"100%"},y={height:"100%",position:"relative",width:"100%"},E={bottom:0,height:"100vh",left:0,position:"fixed",right:0,top:0,width:"100%"},b={height:"100%",position:"relative",width:"100%"},_={alignItems:"center",backgroundColor:m.white,display:"flex",justifyContent:"center",zIndex:1201},O={alignItems:"center",backgroundColor:m.gray10,display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",zIndex:1300},I={display:"flex",flexDirection:"column",height:"100vh",left:0,overflow:"hidden",position:"absolute",top:0,width:"100%"},S={alignItems:"center",backgroundColor:m.white,borderBottom:"1px solid "+m.gray20,display:"flex",height:"64px",paddingLeft:"9px"},w={color:m.white,cursor:"pointer",textDecoration:"none",paddingLeft:"8px",paddingTop:"5px"},T={backgroundColor:m.gray10,display:"flex",position:"relative"},k={alignItems:"center",display:"flex",height:"calc(100vh - 64px)",justifyContent:"center",width:"calc(100vw - 72px)"},C={alignItems:"center",backgroundColor:m.white,borderRight:"1px solid "+m.gray20,boxShadow:"1px 5px 8px 0px rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",width:"72px"},A={alignItems:"center",backgroundColor:m.white,borderLeft:"1px solid "+m.gray20,boxShadow:"-1px 5px 8px 0px rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",position:"absolute",right:0,top:0,width:"192px",zIndex:1203},x={left:"-19px",position:"absolute",top:"calc(50% - 36px)"},L={alignItems:"center",display:"flex"},P={backgroundColor:m.gray20,borderRadius:"2px",height:"12px",width:"28px"},D={backgroundColor:m.gray20,borderRadius:"2px",height:"16px",width:"16px"},M={alignItems:"center",backgroundColor:m.white,borderRadius:"20px",bottom:"24px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",display:"flex",height:"40px",justifyContent:"space-around",left:"50%",position:"absolute",transform:"translateX(-50%)",width:"130px",zIndex:1203},N={backgroundColor:m.gray10,borderRadius:"12px",height:"24px",width:"24px"},R={alignItems:"center",animationDuration:"2s",animationFillMode:"forwards",animationIterationCount:"infinite",animationName:"shimmer",animationTimingFunction:"linear",backgroundColor:m.gray10,backgroundImage:"linear-gradient(to right, #f3f3f3 0%, #e7e7e7 20%, #f3f3f3 40%, #f3f3f3 100%)",backgroundRepeat:"no-repeat",display:"flex",height:"2048px",justifyContent:"center",width:"2048px"},U={boxShadow:"0 3px 5px 0 rgba(72, 66, 67, 0.08)"},j=function(e){var t=document.createElement("style");document.head.appendChild(t);var n=t.sheet;n&&n.insertRule(e,n.cssRules.length)},F=function(){return r.useEffect((function(){j("@keyframes shimmer { 0% { background-position: -1024px 0; } 100% { background-position: 1024px 0; }}")}),[]),u.default.createElement("div",{style:f({},I)},u.default.createElement("div",{style:f({},S)},u.default.createElement("div",{onClick:function(){return history.back()},style:f({},w)},u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},u.default.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M18.707 9.707a1 1 0 00-1.414-1.414l-7 7a1 1 0 000 1.414l7 7a1 1 0 001.414-1.414L12.414 16l6.293-6.293z"})))),u.default.createElement("div",{style:f({},T)},u.default.createElement("div",{style:f({},C)},u.default.createElement("div",{style:f({},D,{height:"24px",marginBottom:"8px",width:"24px"})}),u.default.createElement("div",{style:f({},P,{height:"12px",marginBottom:"24px",width:"36px"})}),u.default.createElement("div",{style:f({},D,{height:"24px",marginBottom:"8px",width:"24px"})}),u.default.createElement("div",{style:f({},P,{height:"12px",marginBottom:"24px",width:"36px"})}),u.default.createElement("div",{style:f({},D,{height:"24px",marginBottom:"8px",width:"24px"})}),u.default.createElement("div",{style:f({},P,{height:"12px",marginBottom:"24px",width:"36px"})}),u.default.createElement("div",{style:f({},D,{height:"24px",marginBottom:"8px",width:"24px"})}),u.default.createElement("div",{style:f({},P,{height:"12px",marginBottom:"24px",width:"36px"})})),u.default.createElement("div",{style:f({},k)}),u.default.createElement("div",{style:f({},A)},u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},L,{marginBottom:"24px"})},u.default.createElement("div",{style:f({},P,{marginRight:"8px",width:"96px"})}),u.default.createElement("div",{style:f({},D,{height:"32px",width:"32px"})})),u.default.createElement("div",{style:f({},x)},u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"90",viewBox:"0 0 20 90"},u.default.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M0 0l11.188 6.08c5.152 2.8 8.36 8.195 8.36 14.058v25.023l.324 23.892c.08 5.787-2.973 11.165-7.983 14.065L0 90V0z",transform:"translate(9.936767, 45.000000) rotate(180.000000) translate(-9.936767, -45.000000)"})))),u.default.createElement("div",{style:f({},M)},u.default.createElement("div",{style:f({},N)}),u.default.createElement("div",{style:f({},L)},u.default.createElement("div",{style:f({},P,{marginRight:"4px"})}),u.default.createElement("div",{style:f({},D)})),u.default.createElement("div",{style:f({},N)}))))},G=function(e){var t=e.id,n=e.projectSize,a=e.thumbnailUrl,o=r.useMemo((function(){if(t)return g({width:window.innerWidth,height:window.innerHeight},n||{width:0,height:0})}),[t]);return t?u.default.createElement("div",{style:f({animationName:"studioReveal",animationDuration:".2s",animationFillMode:"forwards",animationTimingFunction:"linear"},_,E)},u.default.createElement(F,null),u.default.createElement("div",{style:{marginTop:"44px",zIndex:1202}},u.default.createElement(d.default,{size:"lg"})),u.default.createElement("div",{style:f({},U,o,{position:"absolute"})},u.default.createElement("img",{width:"100%",height:"auto",src:a,alt:""}))):null},V=function(e){var t=e.projectSize,n=r.useMemo((function(){return g({width:window.innerWidth,height:window.innerHeight},t||{height:2048,width:2048})}),[]);return u.default.createElement("div",{style:f({},E,_,{backgroundColor:m.white})},u.default.createElement(F,null),u.default.createElement("div",{style:{marginTop:"44px",zIndex:1202}},u.default.createElement("div",{style:f({},U,R,{height:n.height,width:n.width})},u.default.createElement(d.default,{size:"lg"}))))};function B(){var e=window.location.hostname.toLowerCase();return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}function H(){return localStorage.getItem("owcLiveVersion")||p.default.parse(window.location.search).owcLiveVersion}function K(){var e=B();if("local"===H())return"https://overlocal."+e+":1235";var t=H();return t?"https://"+t:"https://studio."+e}var z;function W(e){var t=e.templateId,n=e.brandbookItem,a=e.websiteId,o=r.useState(!1),i=o[0],c=o[1];return r.useEffect((function(){i&&(t?window.location.href=function(e,t){return K()+"/app/editor/template/"+e+"?website="+t}(t,a):n&&(window.location.href=function(e,t){var n,r,a=(null==(n=e.sources)||null==(n=n.over)?void 0:n.projectId)||(null==(r=e.sources)||null==(r=r.over)||null==(r=r.metadata)?void 0:r.projectId);return a?K()+"/app/editor/"+a+"?website="+t+"&projectId="+a:K()+"/app/editor/brandbook?url="+e.url+"&height="+e.dimensions.height+"&width="+e.dimensions.width+"&website="+t}(n,a)))}),[i]),r.useEffect((function(){(t||n)&&(function(){if(window.navigator.userAgent.indexOf("GoDaddyPolaris")>-1)return!1;var e=!s.isMobile&&!s.isTablet,t=function(){if(void 0===HTMLCanvasElement.prototype.toBlob)return!1;try{var e=document.createElement("canvas");return void 0!==(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}(),n=!!window.localStorage;return e&&t&&n}()||c(!0))}),[t,a,n]),i}function q(){var e=new URL(window.location.toString());e.searchParams.delete("sessionId"),window.history.pushState({},document.title,e.toString());var t=new Event("pushstate");window.dispatchEvent(t)}var Y,$,X="over.inline_editor",Q={NAVIGATION_START:"navigationStart",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading"},Z={DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED:"domContentLoaded",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"},J=f({},Q,Z),ee="start",te="launch",ne="bundle-request";function re(e){return e?f({},e,{url:e.url?(t=e.url,0===t.indexOf("https")?t:"https:"+t):void 0}):void 0;var t}!function(e){e.default="default",e.logo="logo",e.socialPost="socialPost"}(Y||(Y={})),function(e){e.EditorAuthError="studio:editor.error.auth",e.EditorReady="studio:editor.ready",e.EditorClose="studio:editor.close",e.EditorSwitch="studio:editor.embeddedSwitch",e.LoaderUnmount="studio:loader.unmount"}($||($={}));var ae=function(){return u.default.createElement("div",{style:f({},O)},u.default.createElement(d.default,{size:"lg"}))},oe=function(){function e(e){var t;if("undefined"!=typeof window&&window.performance&&window.performance[e])return(t=window.performance)[e].apply(t,[].slice.call(arguments,1))}function t(e,t){return[X,e,t].join("-")}function n(t){var n=e("getEntriesByName",t);if(n&&!(n.length<1))return n[0]}function r(r){!function(r,a){var o=t(r,a);n(o)||e("mark",o)}(r,ee)}function a(r){if(r){var a=n(t(r,ee));if(a){var o=t(r,"end");e("mark",o);var i,s,c=e("getEntriesByName",o)[0];i=function(e,r,a){var o=function(e){var r={};return Object.values(J).forEach((function(a){r[a]=n(t(e,a))})),r}(e);function i(e,t){return o[e]&&o[e].startTime||t}var s={};Object.values(Q).forEach((function(e){s[e]=i(e,r)}));var c={};return Object.values(Z).forEach((function(e){c[e]=i(e,a)})),f({page:"/beacon/"+X+"/"+e},s,c)}(r,a.startTime,c.startTime),s=["cmdLog","pageperf",i],window._trfq=window._trfq||[],window._trfq.push(s),function(n){n&&(Object.values(J).forEach((function(r){return e("clearMarks",t(n,r))})),e("clearMarks",t(n,ee)),e("clearMarks",t(n,"end")))}(r)}}}return{markLaunchStart:function(){r(te)},markLaunchEnd:function(){a(te)},markBundleRequestStart:function(){r(ne)},markBundleRequestEnd:function(){a(ne)}}}();function ie(){var e,t;return null!=(e=null==(t=window.over)?void 0:t.editor)?e:void 0}t.c=function(e){var t=e.appName,n=e.onCancel,o=e.onProjectSynced,i=e.template,s=e.brandbookItem,l=e.websiteBuilderPayload,d=e.inferredBrandLogo,m=e.websiteId,h=e.ventureId,g=e.tracker,_=e.showTextWarning,O=e.disableWamUpgrade,I=e.featureOverrides,S=e.action,w=e.actionInputs,T=e.editor,k=e.embedded,C=r.useRef(!1),A=r.useState(!1),x=A[0],L=A[1],P=r.useState(void 0!==ie()),D=P[0],M=P[1],N=r.useState(null!=T?T:Y.default),R=N[0],U=N[1],F=r.useState(!k),H=F[0],X=F[1],Q=function(){var e=r.useState(void 0),t=e[0],n=e[1],a=r.useState(void 0),o=a[0],i=a[1],s=r.useState(window.location.search),c=s[0],l=s[1];r.useEffect((function(){function e(){l(window.location.search)}return window.addEventListener("popstate",e,!1),window.addEventListener("pushstate",e,!1),function(){window.removeEventListener("popstate",e),window.removeEventListener("pushstate",e)}}),[]);var u=p.default.parse(c).sessionId;return r.useEffect((function(){i(t),n(u)}),[u]),{sessionId:t,previousSessionId:o}}(),Z=Q.sessionId,J=Q.previousSessionId,ee=function(e,t){var n=r.useState(!1),a=n[0],o=n[1],i=r.useState(!1),s=i[0],c=i[1];function l(){a||s||(o(!0),t.markBundleRequestStart(),function(){try{var e="studio-bundle-bootstrap";return document.getElementById(e)?Promise.resolve():Promise.resolve(function(e,t){var n=document.createElement("script");n.setAttribute("id",t),n.setAttribute("crossorigin","true");var r=new Promise((function(e,t){n.onload=function(){n.onload=null,n.onerror=null,e()},n.onerror=function(e){n.onload=null,n.onerror=null,t(e)}}));return n.src=e,document.body.appendChild(n),r}(K()+"/bundle-bootstrap.js?ts="+Date.now(),e)).then((function(){}))}catch(e){return Promise.reject(e)}}().then((function(){c(!0),t.markBundleRequestEnd()})).catch((function(e){console.error(e),o(!1)})))}return r.useEffect((function(){window.overConfig={isModal:!0,modalBase:K()},z||(z=setTimeout((function(){l()}),4e3)),e&&z&&(window.clearTimeout(z),l())}),[e]),s}(Z,oe),te=re(s),ne=re(l),se=W({brandbookItem:te,templateId:null==i?void 0:i.id,websiteId:m}),ce=function(e,t){var n=r.useState(!1),a=n[0],o=n[1],i=r.useState(e),s=i[0],c=i[1];return r.useEffect((function(){e&&!t?function(){try{return o(!0),Promise.resolve(fetch("https://asset.api."+B()+"/v1/asset?assetUrl="+(null==e?void 0:e.url),{credentials:"include",headers:{accept:"application/json"}})).then((function(e){var t;function n(n){return t?n:e.json()}var r=function(){if(!e.ok)return Promise.resolve(e.text()).then((function(n){console.error(e.status+" error looking up asset URL: "+n),t=1}))}();return r&&r.then?r.then(n):n(r)}))}catch(e){return Promise.reject(e)}}().then((function(t){var n;c(f({},e,{sources:{over:{metadata:{projectId:null==t||null==(n=t.metadata)||null==(n=n.sources)||null==(n=n.over)?void 0:n.projectId}}}}))})).finally((function(){o(!1)})):c(e)}),[null==e?void 0:e.url,t]),{isLookingUpAssetUrl:a,updatedWebsiteBuilderPayload:s}}(ne,se),le=ce.isLookingUpAssetUrl,ue=ce.updatedWebsiteBuilderPayload,de=i||te||ue||d,pe=!!Z;r.useEffect((function(){U(null!=T?T:Y.default),X(!k)}),[T,k]);var fe=r.useCallback((function(){q(),e.onCancel&&e.onCancel()}),[Z,e.onCancel]),me=r.useCallback((function(e){q(),o(e)}),[Z,o]),he=r.useCallback((function(){oe.markLaunchEnd(),L(!1)}),[]);r.useEffect((function(){se||((de||Z)&&L(!0),null!=de&&de.id&&function(){var e=new URL(window.location.toString());e.searchParams.set("sessionId",c.v4()),window.history.pushState({},document.title,e.toString());var t=new Event("pushstate");window.dispatchEvent(t)}())}),[null==de?void 0:de.id]),r.useEffect((function(){!Z&&J&&n()}),[Z,J]),r.useEffect((function(){L(!!(Z||null!=de&&de.id))}),[Z,null==de?void 0:de.id]);var ge=r.useCallback((function(){M(!0),window.removeEventListener($.EditorReady,ge)}),[]),ve=r.useCallback((function(){L(!1),window.removeEventListener($.EditorAuthError,ve)}),[]),ye=r.useCallback((function(){fe(),window.removeEventListener($.EditorClose,ye)}),[]),Ee=r.useCallback((function(e){void 0!==e.detail.embedded&&(X(!e.detail.embedded),C.current=!0),void 0!==e.detail.editorType&&(U(e.detail.editorType),C.current=!0)}),[]);r.useEffect((function(){return window.addEventListener($.EditorReady,ge),window.addEventListener($.EditorAuthError,ve),window.addEventListener($.EditorClose,ye),window.addEventListener($.EditorSwitch,Ee),function(){window.removeEventListener($.EditorReady,ge),window.removeEventListener($.EditorAuthError,ve),window.removeEventListener($.EditorClose,ye),window.removeEventListener($.EditorSwitch,Ee),window.dispatchEvent(new CustomEvent($.LoaderUnmount))}}),[]),r.useEffect((function(){j("@keyframes studioReveal { from { transform: scale(0); } to { transform: scale(1); }}")}),[]);var be,_e=ie();x&&(H?i?be=u.default.createElement(G,{id:i.id,projectSize:i.schemaPageSize,thumbnailUrl:i.thumbnails[0].servingUrl}):te?be=u.default.createElement(G,{id:te.id,projectSize:te.dimensions,thumbnailUrl:te.thumbnailUrl}):d?be=u.default.createElement(G,{id:d.id,projectSize:d.dimensions,thumbnailUrl:d.url}):de?ue&&ue.thumbnailUrl?be=u.default.createElement(G,{id:ue.id,projectSize:ue.size,thumbnailUrl:ue.thumbnailUrl}):ue&&!ue.thumbnailUrl&&(be=u.default.createElement(V,{projectSize:null==l?void 0:l.size})):be=u.default.createElement(V,null):be=u.default.createElement(ae,null));var Oe=u.default.createElement("div",{style:f({},!H&&v)},be,ee&&_e&&D&&(de||pe)&&!le&&u.default.createElement("div",{id:"over-app-root",className:"studio-app-root",style:f({},!H&&y)},u.default.createElement("div",{id:"over-portal"}),u.default.createElement("div",{id:"over-root",style:f({},H?E:b,{zIndex:H?1200:void 0})},u.default.createElement(_e,{appName:t,templateId:null==i?void 0:i.id,brandbookItem:te,websiteBuilderPayload:ue,inferredBrandLogo:d,onCancel:fe,onProjectLoaded:he,onProjectSynced:me,websiteId:m,ventureId:h,tracker:g,showTextWarning:_,sessionId:Z,disableWamUpgrade:O,featureOverrides:I,action:S,actionInputs:w,editor:R,skipInitProject:C.current}))));return H?a.createPortal(Oe,document.body):Oe}},9227:(e,t,n)=>{"use strict";const r=n(324),a=n(454),o=n(528),i=n(3055),s=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?a(e):e}function d(e){return Array.isArray(e)?e.sort():"object"==typeof e?d(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function p(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=p(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return(e,n,r)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const a="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!a&&u(n,e).includes(e.arrayFormatSeparator);n=o?u(n,e):n;const i=a||o?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);r[t]=i};case"bracket-separator":return(t,n,r)=>{const a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!a)return void(r[t]=n?u(n,e):n);const o=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const a of e.split("&")){if(""===a)continue;let[e,i]=o(t.decode?a.replace(/\+/g," "):a,"=");i=void 0===i?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?i:u(i,t),n(u(e,t),i,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=m(n[e],t);else r[e]=m(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=d(n):e[t]=n,e}),Object.create(null))}t.extract=f,t.parse=h,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[",a,"]"].join("")]:[...n,[l(t,e),"[",l(a,e),"]=",l(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),":list="].join("")]:[...n,[l(t,e),":list=",l(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:(a=null===a?"":a,0===r.length?[[l(n,e),t,l(a,e)].join("")]:[[r,l(a,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,l(t,e)]:[...n,[l(t,e),"=",l(r,e)].join("")]}}(t),a={};for(const t of Object.keys(e))n(t)||(a[t]=e[t]);const o=Object.keys(a);return!1!==t.sort&&o.sort(t.sort),o.map((n=>{const a=e[n];return void 0===a?"":null===a?l(n,t):Array.isArray(a)?0===a.length&&"bracket-separator"===t.arrayFormat?l(n,t)+"[]":a.reduce(r(n),[]).join("&"):l(n,t)+"="+l(a,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:h(f(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[s]:!0},n);const r=p(e.url).split("?")[0]||"",a=t.extract(e.url),o=t.parse(a,{sort:!1}),i=Object.assign(o,e.query);let c=t.stringify(i,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u=`#${n[s]?l(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${r}${c}${u}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[s]:!1},r);const{url:a,query:o,fragmentIdentifier:c}=t.parseUrl(e,r);return t.stringifyUrl({url:a,query:i(o,n),fragmentIdentifier:c},r)},t.exclude=(e,n,r)=>{const a=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,a,r)}},324:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},224:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(n(3431)),o=r(n(6981));function i(e){let{children:t,breakpoints:n}=e;const{breakpoint:r}=(0,o.default)(...n);return t({breakpoint:r})}i.propTypes={breapoints:a.default.oneOfType([a.default.string,a.default.arrayOf("string")]),children:a.default.any}},1363:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a=new(r(n(1563)).default)([{name:"mobile",width:520},{name:"phablet",width:768},{name:"tablet",width:992},{name:"desktop",width:1200},{name:"large",width:1720},{name:"xlarge",width:1/0}]);t.default=a},2098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}},6862:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=e,e=void 0);const n=t.props,r=(0,a.default)(t).toLowerCase();let o=(n.id||n[e]||r).toString().trim();return o=o.replace(/[^\x00-\x7F]/g,(e=>encodeURIComponent(e).replace("%",":"))),/^[A-Za-z]/.test(o)||(o="id-"+o),o.replace(/[^A-Za-z\:\;\-\_0-9\.]+/g,"-")};var a=r(n(2294))},6981:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=(0,o.default)("ux:use-breakpoints"),[s,c]=(0,i.useState)("unknown"),[l,u]=(0,i.useState)(0),[d,p]=(0,i.useState)(0);function f(e){let{detail:n}=e;if(!t||!t.length)return;if(!t.includes(n)){const e=t.map((e=>Math.abs(a.default.compare(e,"width"))));n=t[e.indexOf(Math.min(...e))]}if(s===n)return;r("updating state as breakpoint changed to %s",n);const o=a.default.viewport();u(o.height),p(o.width),c(n)}return(0,i.useEffect)((()=>(f({detail:a.default.currently()}),window.addEventListener("breakpoint:hook:changed",f),()=>{window.removeEventListener("breakpoint:hook:changed",f)})),[s,r,t,d,l]),{breakpoint:s,viewport:{height:l,width:d}}};var a=r(n(1363)),o=r(n(7424)),i=n(8036);(0,r(n(2098)).default)()&&window.addEventListener("resize",(()=>{a.default.changed()&&window.dispatchEvent(new CustomEvent("breakpoint:hook:changed",{detail:{breakpoint:a.default.breakpoint}}))}))},8282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{prop:t,defaultProp:n,onChange:a=()=>{}}=e;const[o,i]=(0,r.useState)(t||n),s=(0,r.useRef)(void 0!==t),c=s.current,l=void 0!==t,u=(0,r.useRef)(o);c!==l&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}.`),s.current=l;const d=(0,r.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=function(e){if(a&&!Object.is(u.current,e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a(e,...n)}l||(u.current=e)};if("function"==typeof e){console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320");const t=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];const s=e(l?u.current:t,...a);return o(s,...n),l?t:s};i(t)}else l||i(e),o(e,...n)}),[l,a]);return l?u.current=t:t=o,[t,d]};var r=n(8036)},8937:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(4634)),o=r(n(1847)),i=r(n(8036)),s=r(n(3431)),c=r(n(342));const l=["children","className","disabled","invalid","stretch"],u="ux-field-frame",d=i.default.forwardRef((function(e,t){let{children:n,className:r,disabled:s,invalid:d,stretch:p=!0}=e,f=(0,o.default)(e,l);return delete f.style,i.default.createElement("div",(0,a.default)({"data-version":"2400.10",className:(0,c.default)(u,r,{[`${u}--invalid`]:d,[`${u}--stretch`]:p}),disabled:s,ref:t},f),n)}));d.propTypes={children:s.default.node,className:s.default.string,disabled:s.default.bool,invalid:s.default.bool,flyoutPlacement:s.default.string,stretch:s.default.bool},t.default=d},6708:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UX_FLYOUT_PLACEMENTS=void 0;var a=r(n(4634)),o=r(n(3693)),i=r(n(1847)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(8036)),c=r(n(6047)),l=r(n(3431)),u=r(n(342)),d=n(2535),p=n(4797);const f=["middlewareData","refs"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const v="ux-flyout",y=t.UX_FLYOUT_PLACEMENTS=["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"];function E(e){let t;try{t=getComputedStyle(e)}catch{return!1}return e.getClientRects().length>0&&parseInt(t.opacity,10)>0&&"visible"===t.visibility}const b=s.default.forwardRef(((e,t)=>s.default.createElement("div",{className:`${v}-arrow-reference`,ref:t})));function _(e){let{anchorRef:t,arrow:n,children:r,className:o,id:l,middleware:m,placement:h,strategy:y,portalElem:_,role:O,onClose:I=Function.prototype,onPlacement:S=Function.prototype}=e;const w=(0,s.useRef)(null),T=[(0,d.shift)(),(0,d.arrow)({element:w,padding:4})],k=(0,d.useFloating)({whileElementsMounted:function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,d.autoUpdate)(...t,{animationFrame:!0})}catch(e){return Function.prototype}},placement:h,strategy:y,middleware:T.concat(m)}),{middlewareData:C,refs:A}=k,x=(0,i.default)(k,f);if((0,s.useLayoutEffect)((()=>{var e;null!=t&&null!==(e=t.current)&&void 0!==e&&e.getBoundingClientRect&&A.setReference(t.current)}),[A.setReference,t,r]),(0,s.useEffect)((()=>{var e;if(null!=t&&null!==(e=t.current)&&void 0!==e&&e.getBoundingClientRect&&E(A.floating.current))return(0,p.outsideListeners)([t.current,A.floating.current],I)}),[t,A.floating,I]),(0,s.useLayoutEffect)((()=>{S(x.placement)}),[x.placement,S]),!t||!r)return null;const{arrow:L}=g({},C),P={size:(0,p.getArrowSize)(n),top:null==L?void 0:L.y,left:null==L?void 0:L.x},D=s.default.createElement("div",(0,a.default)({"data-version":"2400.10",onFocus:function(){E(A.floating.current)&&document.addEventListener("focus",(e=>{(0,p.isEventOutside)(e,[A.floating.current,t.current])&&I(e)}),{capture:!0,once:!0})},className:(0,u.default)(v,o),id:l,role:O,ref:A.setFloating,style:(0,p.getFlyoutStyle)(g({arrow:n&&P},x))},(0,p.getFlyoutAttributes)(g(g({},C),x))),r,n&&s.default.createElement(b,{ref:w}));return _?c.default.createPortal(D,_):D}b.propTypes={arrow:l.default.shape({x:l.default.number,y:l.default.number})},_.propTypes={anchorRef:l.default.oneOfType([l.default.func,l.default.shape({current:l.default.object})]),arrow:l.default.oneOfType([l.default.bool,l.default.string]),children:l.default.oneOfType([l.default.arrayOf(l.default.node),l.default.node]),id:l.default.string,placement:l.default.oneOf(y),strategy:l.default.oneOf(["absolute","fixed"]),role:l.default.string,onClose:l.default.func,onPlacement:l.default.func,className:l.default.string,portalElem:l.default.object,middleware:l.default.arrayOf(l.default.object)},_.displayName="Flyout",t.default=_},9780:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.size)({apply(e){let{rects:t,elements:n}=e;Object.assign(n.floating.style,{minWidth:`${t.reference.width}px`})}})};var r=n(2535)},4797:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.getArrowSize=function(e){switch(typeof e){case"boolean":return e?"1rem":0;case"number":return`${e}px`;default:return e}},t.getFlyoutAttributes=function(e){let{hide:t,placement:n}=e;const{escaped:r,referenceHidden:a}=t||{};return{"data-placement":n,"data-escaped":r,"data-refhidden":a}},t.getFlyoutStyle=function(e){let{x:t,y:n,strategy:r,arrow:c}=e;const l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:r,top:n,left:t,maxWidth:"100vw",width:"max-content"},(0,o.default)(e,i));return c?Object.assign(l,{"--ux-flyout-arrow-size":c.size||0,"--ux-flyout-arrow-top":`${c.top}px`||0,"--ux-flyout-arrow-left":`${c.left}px`||0}):l},t.isEventOutside=c,t.outsideListeners=function(e,t){function n(n){c(n,e)&&t(n)}function r(e){"Escape"===e.key&&t(e)}return"function"==typeof t&&(document.addEventListener("pointerdown",n),document.addEventListener("keydown",r)),()=>{document.removeEventListener("pointerdown",n),document.removeEventListener("keydown",r)}};var a=r(n(3693)),o=r(n(1847));const i=["x","y","strategy","arrow"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){return!e.composedPath().filter((e=>t.includes(e))).length}},9211:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("alert","false")},6371:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("apps2","false")},9137:(e,t,n)=>{"use strict";var r,a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(8036)),o=n(8483),i=(r=n(3431))&&r.__esModule?r:{default:r};const s=["width","height","placeholder","className","title","desc","role"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}"undefined"==typeof process||!process.versions||process.versions.node,e.exports=function(e,t){const n=a.default.forwardRef((function(t,n){let{width:r="1.5em",height:i="1.5em",placeholder:c,className:l,title:d,desc:p,role:f="presentation"}=t,m=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,s);const h=(0,a.useMemo)((()=>{let t=o.svgosm.get(e,(function(){const t=o.svgosm.extract(`uxp-icon-${e}`);if(t)return Object.assign(t,{title:d,desc:p})}))||c;return t||(t={link:`#${o.svgosm.uid(e)}`}),t}),[d,p,c]),g={},v={className:["uxicon-svg-container",l].join(" ").trim(),height:i||h.height,width:r||h.width,role:f,ref:n};if(Object.keys(m).forEach((function(e){e.startsWith("aria-")||e.startsWith("data-")?v[e]=m[e]:g[e]=m[e]})),!v["aria-labelledby"]&&(d||p)){const e=h.link.slice(1),t=[];d&&t.push(`${e}-title`),p&&t.push(`${e}-desc`),v["aria-labelledby"]=t.join(" ")}return a.default.createElement("svg",v,a.default.createElement("use",u(u({fill:"currentColor"},g),{},{xlinkHref:h.link})))}));return n.displayName=e+"Icon",n.propTypes={width:i.default.oneOfType([i.default.number,i.default.string]),height:i.default.oneOfType([i.default.number,i.default.string]),placeholder:i.default.shape({link:i.default.string}),className:i.default.string,desc:i.default.string,title:i.default.string,role:i.default.string},n}},6301:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("cart","false")},7584:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("checkmark","false")},3548:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("chevron-left","false")},921:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("chevron-right","false")},6732:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("chevron-up","false")},8022:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("cloud-upload","false")},4680:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("delete","false")},3939:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("download","false")},6699:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("edit","false")},6322:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("editor-larger","false")},4787:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("facebook","false")},5799:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("image-gallery","false")},2944:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("image","false")},2283:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("information","false")},3317:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("ok","false")},7312:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("page","false")},1203:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("paintbrush","false")},8171:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("plus","false")},5674:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("refresh","false")},8031:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("search","false")},3434:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("settings","false")},7984:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("sparkles","false")},5064:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("speedometer","false")},8483:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.svgosm=t.default=t.SVGOSM=void 0;const n=["viewBox","title","desc","shapes"];function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){var r,a,o;r=e,a=t,o=n[t],(a=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(a))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const o="undefined"!=typeof document?document.body||document.documentElement:null;class i{constructor(e,t=o){this.id=e,this.tracker={},this.mounted=[],this.root=t}mount(e){if(!e)return;const t=document.createElement("div");t.style="display:none",t.id=this.id;const n=document.createElementNS(i.xmlns,"svg");t.appendChild(n),e.appendChild(t),this.mounted.push({svg:n,root:e,container:t}),Object.keys(this.tracker).forEach((e=>{n.innerHTML+=this.tracker[e].sym}))}extract(e){if(!e)return;let t;return this.root&&(this.mount(this.root),this.root=null),this.mounted.some((function({container:n}){if(!window)return!!t;const r=window.getComputedStyle(n,":before"),a=e.startsWith("--")?e:`--${e}`,o=r.getPropertyValue(a);let i=r.getPropertyValue("content");if(3===i.length&&(i=i.charAt(1)),i)if(i.includes("svg"))t=i;else if(1===i.length&&!/[a-z\d]/i.test(i))return!!t;return o&&o.includes("svg")&&(t=o),!!t})),t?this.parse(t):void 0}parse(e){if(!~e.indexOf("svg"))return{};const t=(e=decodeURI(e).replace(/%23/g,"#").replace(/\\"/g,'"')).indexOf(">"),n=e.indexOf("</svg>"),r=/viewBox=.*?([\d\s.]+)/.exec(e.substr(0,t));return r?{shapes:e.slice(t+1,n),viewBox:r[1]}:{}}get(e,t){const n=this.tracker[e];return n||!t?n:(this.set(e,t(e)),this.tracker[e])}sym(e,t={}){let{viewBox:r,title:o,desc:i,shapes:s}=t,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,n);if(!s)return!1;const l=this.uid(e),u=`<symbol id="${l}" viewBox="${r}">${o?`<title id="${l}-title">${o}</title>`:""}${i?`<desc id="${l}-desc">${i}</desc>`:""}${s}</symbol>`;return this.tracker[e]=a(a({},c),{},{link:`#${l}`,viewBox:r,sym:u}),u}uid(e){return`${this.id}-${e}`}set(e,t){const n=this.sym(e,t);return!!n&&(this.root&&(this.mount(this.root),this.root=null),this.mounted.forEach((({svg:e})=>{e.innerHTML+=n})),!0)}}t.SVGOSM=t.default=i,i.xmlns="http://www.w3.org/2000/svg",t.svgosm=new i("svg-container")},3161:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("thumbs-down","false")},9644:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("thumbs-up","false")},9123:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("trash","false")},8692:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("unlink","false")},6934:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("video-camera","false")},4645:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("wand","false")},8768:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("website","false")},1828:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("window-new","false")},241:(e,t,n)=>{"use strict";const r=n(9137);e.exports=r("x","false")},2779:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.ensureLabelComponent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?"object"==typeof e&&e.type===l?e:a.default.createElement(l,t,e):null};var a=r(n(8036)),o=r(n(3431)),i=r(n(342)),s=r(n(1645));const c="ux-label",l=a.default.forwardRef((function(e,t){let{children:n,className:r,float:o,htmlFor:l,id:u,internal:d,required:p}=e;return a.default.createElement(s.default.label,{as:"label","data-version":"2400",className:(0,i.default)(c,r,{[`${c}--internal`]:d,[`${c}--floating`]:o&&d}),htmlFor:l,id:u,ref:t},n,p&&a.default.createElement(s.default.span,{"aria-hidden":!0,className:`${c}-required`,emphasis:"object"==typeof p&&p.emphasis||"critical",text:"object"==typeof p&&p.text||"*"}))}));l.propTypes={children:o.default.node.isRequired,className:o.default.string,float:o.default.bool,htmlFor:o.default.string.isRequired,id:o.default.string,internal:o.default.bool,required:o.default.oneOfType([o.default.bool,o.default.shape({emphasis:o.default.string,text:o.default.node})])},l.displayName="Label",t.default=l},2684:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(8036)),o=r(n(3431)),i=r(n(342)),s=r(n(4885)),c=r(n(5777));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u="ux-listbox";function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.findIndex((e=>e.id===t)),a=-1===r?0:r;return e[Math.max(0,Math.min(e.length-1,a+n))].id}function p(e){const{id:t,as:n,isSelected:r,isFocused:o,onSelect:i,children:c}=e,l=(0,a.useRef)();return(0,a.useEffect)((function(){o&&(null==l||l.current.scrollIntoView())}),[o]),a.default.createElement(s.default,{ref:l,id:t,design:"option",stretch:!0,tabIndex:-1,value:t,role:"menu"===n?"menuitem":"option","data-visually-focused":o||null,"aria-selected":r||null,onClick:i,text:c})}p.propTypes={id:o.default.string.isRequired,as:o.default.string.isRequired,isSelected:o.default.bool.isRequired,isFocused:o.default.bool.isRequired,onSelect:o.default.func.isRequired,children:o.default.node.isRequired};const f=a.default.forwardRef((function(e,t){let{id:n,as:r="listbox",stretch:o,className:s,items:l=[],tabIndex:f="0",onConfirm:m=Function.prototype,selected:h,onActiveItemChange:g=Function.prototype,loop:v=!1,anchorRef:y}=e;const E=(0,c.default)((0,a.useRef)(null),t),[b,_]=(0,a.useState)(null),O=null!=b?b:h,I=(0,a.useCallback)(((e,t)=>{_(e),g(e,t)}),[_,g]);(0,a.useEffect)((()=>{if(b)return[].concat(l).find((e=>(null==e?void 0:e.id)===b))?void 0:I(null,{event:null})}),[b,l,I]);const S=(0,a.useCallback)((e=>t=>{var n,r,a,o;m(e,{event:t}),null!==(n=E.current)&&void 0!==n&&null!==(r=n.matches)&&void 0!==r&&r.call(n,":focus-within")&&(null==y||null===(a=y.current)||void 0===a||null===(o=a.focus)||void 0===o||o.call(a))}),[m,y,E]),w=(0,a.useCallback)((e=>{const t=l[0].id,n=l[l.length-1].id;let r;switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),r=!O||v&&n===O?t:d(l,O,1);break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),r=!O||v&&t===O?n:d(l,O,-1);break;case"Home":e.preventDefault(),e.stopPropagation(),r=t;break;case"End":e.preventDefault(),e.stopPropagation(),r=n;break;case"Enter":if(null==O)return!1;e.preventDefault(),e.stopPropagation(),S(O)(e),r=O}r!==O&&I(r,{event:e})}),[l,v,O,S,I]);(0,a.useEffect)((()=>{const e=null==y?void 0:y.current;return null==e||e.addEventListener("keydown",w),()=>null==e?void 0:e.removeEventListener("keydown",w)}),[y,w]),(0,a.useEffect)((()=>{const e=null==y?void 0:y.current;return O&&(null==e||e.setAttribute("aria-activedescedent",O)),()=>null==e?void 0:e.removeAttribute("aria-activedescedent")}),[y,O]);const T=(0,a.useCallback)((e=>{var t,n;null!==(t=E.current)&&void 0!==t&&null!==(n=t.matches)&&void 0!==n&&n.call(t,":focus-within")||I(null,{event:e})}),[E,I]);return 0===l.length?null:a.default.createElement("div",{ref:E,id:n,"data-version":"2400.10","aria-orientation":"vertical",className:(0,i.default)(u,s,{[`${u}--stretch`]:o}),role:"menu"===r?"menu":"listbox",tabIndex:f,onBlur:T,onKeyDown:w,"aria-activedescendant":y?null:O},[].concat(l).map((e=>a.default.createElement(p,{key:e.id,id:e.id,as:r,isSelected:h===e.id,isFocused:O===e.id,onSelect:S(e.id)},e.children))))}));f.propTypes={id:o.default.string,className:o.default.string,as:o.default.oneOf(["listbox","menu"]),stretch:o.default.bool,items:o.default.arrayOf(o.default.shape({id:o.default.string.isRequired,children:o.default.node.isRequired})).isRequired,tabIndex:o.default.oneOfType([o.default.string,o.default.number]),onConfirm:o.default.func,selected:o.default.string,onActiveItemChange:o.default.func,loop:o.default.bool,anchorRef:o.default.object},f.displayName="Listbox",t.default=f},5020:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(8036)),o=r(n(3431)),i=r(n(6862)),s=r(n(224)),c=r(n(342));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u={Error:"error",Warning:"warning",Success:"success",Info:"info",Primary:"primary"},d={size:50,strokeWidth:4},p={size:100,strokeWidth:6},f={size:150,strokeWidth:14},m={size:250,strokeWidth:22},h=["mobile","phablet","tablet","desktop","large","xlarge"];class g extends a.Component{get _percent(){return Math.floor(this._exactPercent)}get _exactPercent(){return this.props.value/this.props.max*100}get _labelElement(){const e=(0,i.default)("label",{props:this.props}).toLowerCase();return this.props.label?a.default.createElement("div",{id:e,className:"ux-progress-label"},this.props.label):null}get _noticeElement(){return this.props.notice?a.default.createElement("small",{className:"ux-progress-bar-notice"},this.props.notice):null}_displayElement(e){const{showPercent:t,children:n,shape:r,startShiftPercent:o}=this.props,{value:i,unit:s}=this._size(e);let c,l=this._size(e);if(i&&s&&(l=i+s,c={lineHeight:l}),!t&&!n||"bar"===r&&~l.lastIndexOf("xs"))return null;const u=this._percent,d=["ux-progress-text"];u<o&&("bar"!==r||!~l.lastIndexOf("sm"))&&d.push("ux-progress-text-start");const p=n||`${u}%`;return a.default.createElement("span",{"aria-hidden":"true",className:d.join(" "),style:c},p)}_size(e){const{size:t}=this.props;if("string"==typeof t||t.value&&t.unit)return t;if(t[e])return t[e];let n;const r=h.indexOf(e);for(let e=h.length-1;e>=0&&!(t[h[e]]&&(n=h[e],e<r));e--);return n?t[n]:"md"}_progressClasses(e){const t=["ux-progress"];switch(t.push(`ux-progress-${this.props.shape}`),this._size(e)){case"xsmall":case"xs":t.push("ux-progress-xs");break;case"small":case"sm":t.push("ux-progress-sm");break;case"large":case"lg":t.push("ux-progress-lg");break;default:t.push("ux-progress-md")}switch(this.props.status){case u.Error:t.push("ux-progress-critical");break;case u.Warning:t.push("ux-progress-warning");break;case u.Info:t.push("ux-progress-info");break;case u.Success:t.push("ux-progress-success");break;default:t.push("ux-progress-primary")}return"circle"!==this.props.shape&&(this.props.striped&&t.push("ux-progress-striped"),this._tickCount&&t.push("ux-progress-tick-marks")),t.join(" ")}isSmall(e){const t=this._size(e),{value:n,unit:r}=t;return"sm"===t||"small"===t||n<1.5&&~r.indexOf("em")||n<24&&~r.indexOf("px")}get _tickCount(){return this.props.tickCount||this.props.ticks.length}tickLabel(e,t){const{min:n,max:r,ticks:o,tickCount:i}=this.props,s=(r-n)/(this._tickCount-1)+n,c=i?e*s:o[e];return a.default.createElement("span",{key:c,className:"ux-progress-tick-label"},a.default.createElement("span",{style:t},c))}get _tickLabels(){const e=[];let t=0;for(t<this._tickCount&&e.push(this.tickLabel(t,{transform:"translateX(0)"})),t=1;t<this._tickCount-1;t++)e.push(this.tickLabel(t));return t<this._tickCount&&e.push(this.tickLabel(t,{transform:"translateX(-100%)"})),a.default.createElement("div",{className:"ux-progress-tick-labels"},e)}get _tickLines(){const e=[];for(let t=0;t<this._tickCount-2;t++)e.push(a.default.createElement("span",{key:t,className:"ux-progress-tick-line",style:{width:this.props.tickWidth}}));return a.default.createElement("div",{className:"ux-progress-tick-lines"},e)}_bar(e){const{value:t,unit:n}=this._size(e),r=(0,i.default)("label",{props:this.props}).toLowerCase(),o=this.isSmall(e);let s;return t&&n&&(s={height:t+n}),a.default.createElement("div",{"data-version":"2400.10",className:(0,c.default)(this._progressClasses(e),this.props.className)},this._labelElement,!!this._tickCount&&!this.props.hideTickLabels&&this._tickLabels,a.default.createElement("div",{role:"progressbar","aria-valuenow":this._percent,"aria-valuemax":this.props.max,"aria-valuemin":this.props.min,"aria-labelledby":r,style:s,className:"ux-progress-area"},a.default.createElement("span",{className:"ux-progress-fill",style:{width:`${this._exactPercent}%`}},!o&&this._displayElement(e)),!!this._tickCount&&this._tickLines),!s&&o&&this._displayElement(e),this._noticeElement)}_circle(e){let t;switch(this._size(e)){case"xsmall":case"xs":t=d;break;case"small":case"sm":t=p;break;case"large":case"lg":t=m;break;default:t=f}const{size:n,strokeWidth:r}=t,o=this._percent,s=n/2,c=s-r,l=Math.PI*(2*c),u={strokeDashoffset:(100-o)/100*l,strokeDasharray:l},h=(0,i.default)("label",{props:this.props}).toLowerCase();return a.default.createElement("div",{"data-version":"2400.10","aria-valuenow":this._percent,role:"progressbar","aria-valuemax":this.props.max,"aria-valuemin":this.props.min,className:this._progressClasses(e),"aria-labelledby":h},a.default.createElement("svg",{width:n,height:n,viewBox:`0 0 ${n} ${n}`},a.default.createElement("circle",{fill:"none",strokeWidth:r,className:"ux-progress-area",r:c,cx:s,cy:s}),a.default.createElement("circle",{fill:"none",strokeWidth:r,className:"ux-progress-fill",r:c,cx:s,cy:s,style:u,strokeLinecap:"butt",transform:`rotate(-90 ${s} ${s})`})),this._displayElement(e),this._labelElement,this._noticeElement)}render(){return a.default.createElement(s.default,{breakpoints:h},(e=>{let{breakpoint:t}=e;return"circle"===this.props.shape?this._circle(t):this._bar(t)}))}}g.Status=u,g.propTypes={className:o.default.string,label:o.default.node,min:o.default.number,max:o.default.number,value:o.default.number,status:o.default.string,notice:o.default.node,showPercent:o.default.bool,startShiftPercent:o.default.number,size:o.default.oneOfType([o.default.oneOf(["xsmall","xs","sm","small","md","medium","lg","large","xl","xlarge"]),o.default.object]),shape:o.default.oneOf(["bar","circle"]),children:o.default.node,striped:o.default.bool,ticks:o.default.array,tickCount:o.default.number,tickWidth:o.default.number,hideTickLabels:o.default.bool},g.defaultProps={min:0,value:0,max:100,size:"md",shape:"bar",startShiftPercent:10,label:"",ticks:[],tickCount:0,tickWidth:2},t.A=g},75:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var a=r(n(4634)),o=r(n(3693)),i=r(n(1847)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(8036)),c=r(n(3431)),l=r(n(342)),u=r(n(8937)),d=r(n(4885)),p=r(n(2801)),f=r(n(6708)),m=r(n(9780)),h=r(n(2684)),g=r(n(4680)),v=r(n(5777)),y=r(n(8282));const E=["id","ariaLabels","button","className","clearable","onClear","children","onConfirm","onSelect","open","role","type","placement","items","onClose","portalElem","strategy","visualSize"];function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I="ux-search",S={clear:"Clear search field"};function w(e,t){return[e,"option",String(t).toLowerCase().replace(/[^a-z0-9-]+/g,"")].join("--")}const T=s.default.forwardRef((function(e,t){let{id:n,ariaLabels:r,button:o,className:c,clearable:b=!0,onClear:_,children:T,onConfirm:k,onSelect:C,open:A=!0,role:x="combobox",type:L="text",placement:P="bottom-start",items:D=[],onClose:M,portalElem:N,strategy:R,visualSize:U="md"}=e,j=(0,i.default)(e,E);const{invalid:F,disabled:G,onChange:V=Function.prototype,onKeyDown:B,value:H}=j||{},[K,z]=(0,y.default)({prop:H,defaultProp:"",onChange:V}),{clear:W}=O(O({},S),r),q=`${n}-listbox`,Y=(0,s.useMemo)((()=>function(e,t){return[].concat(e).map((e=>({id:w(t,e),children:e,value:e})))}(D,n)),[D,n]),$=(0,s.useMemo)((()=>[(0,m.default)()]),[]),X=(0,v.default)((0,s.useRef)(null),t),Q=(0,s.useRef)(null),Z=(0,s.useRef)(null),J=Y.length>0,ee=A&&Boolean(J||T),te=K&&(b||"function"==typeof _),ne=(0,s.useCallback)((e=>{var t,n;z("",{event:e}),"function"==typeof _&&_(e),null===(t=X.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)}),[z,_,X]),re=(0,s.useCallback)((e=>{"function"==typeof B&&B(e),"Enter"===e.key&&(null==k||k(e.target.value,e))}),[k,B]),ae=(0,s.useCallback)(((e,t)=>{const n=Y.findIndex((t=>t.id===e)),r=~n?D[n]:null;z(r,t),null==C||C(r,t),null==k||k(r,t)}),[z,C,k,D,Y]),oe=J?s.default.createElement(h.default,{className:`${I}-listbox`,ref:Z,anchorRef:X,id:q,items:Y,stretch:!0,loop:!0,onConfirm:ae}):T,ie=(0,l.default)(I,`${I}--size-${U}`,c,{[`${I}--composed`]:o});return s.default.createElement("div",{ref:t,className:ie,"data-version":"2400.10"},s.default.createElement(u.default,{className:c,disabled:G,invalid:F,ref:Q},s.default.createElement(p.default,(0,a.default)({autoComplete:"off"},j,{value:K,onChange:z,id:n,role:x,type:L,onKeyDown:re,ref:X,"aria-autocomplete":J?"list":null,"aria-controls":J?q:null,"aria-expanded":ee,visualSize:U})),ee&&s.default.createElement(f.default,{anchorRef:Q,placement:P,portalElem:N,strategy:R,middleware:$,onClose:M},oe),te?s.default.createElement(d.default,{"aria-label":W,design:"stateless",icon:s.default.createElement(g.default,null),onClick:ne,value:"",className:`${I}-clear-button`,size:U}):null),o)}));T.propTypes=O(O(O({},u.default.propTypes),p.default.propTypes),{},{ariaLabels:c.default.shape({clear:c.default.string}),button:c.default.element,className:c.default.string,clearable:c.default.bool,children:c.default.node,items:c.default.arrayOf(c.default.string),onConfirm:c.default.func,onSelect:c.default.func,onClear:c.default.func,open:c.default.bool,portalElem:c.default.object,strategy:c.default.oneOf(["absolute","fixed"]),visualSize:c.default.oneOf(["sm","md"])}),t.A=T},4758:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var a=r(n(4634)),o=r(n(3693)),i=r(n(1847)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(8036)),c=r(n(3431)),l=r(n(342)),u=r(n(2779)),d=r(n(1645));const p=["children","className","divider","gap","id","invalid","label","helpMessage","errorMessage","required","orientation","stretch","wrap"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const g="ux-sibling-set",v=s.default.forwardRef((function(e,t){let{children:n,className:r,divider:o,gap:c,id:f,invalid:m,label:v,helpMessage:y,errorMessage:E,required:b,orientation:_="horizontal",stretch:O,wrap:I}=e,S=(0,i.default)(e,p);if(delete S.style,!n)return null;const w=v&&f&&`${f}-label`,T=y&&f&&`${f}-help`,k=E&&f&&`${f}-error`;return s.default.createElement("div",{"data-version":"2400",className:(0,l.default)(g,r,`${g}-${_}`,{[`${g}-gap-${c}`]:c,[`${g}--stretch`]:O,[`${g}--wrap`]:I}),role:"group","aria-labelledby":w},w&&s.default.createElement(u.default,{className:`${g}-label`,id:w,htmlFor:f,required:b},v),o&&s.default.createElement("hr",null),s.default.createElement(d.default.div,(0,a.default)({id:f,ref:t,style:{"--ux-siblingset-amount":n.length},className:`${g}-children`,emphasis:m?"critical":null},S),s.Children.map(n,((e,t)=>{if(!e)return null;const n=null==e?void 0:e.props;return(0,s.cloneElement)(e,h(h({},n),{},{key:`${f}-child${t}`,"aria-invalid":m,"aria-errormessage":k,"aria-describedby":f?[T,n["aria-describedby"]].filter(Boolean).join(" "):null}))}))),y&&s.default.createElement(d.default.p,{text:y,as:"caption",id:T,emphasis:"passive"}),E&&s.default.createElement(d.default.p,{text:E,as:"caption",id:k,emphasis:"critical",role:"alert"}))}));function y(e,t,n){const r=e.label&&!e.id,a=e.helpMessage&&!e.id,o=e.errorMessage&&!e.id;return r||a||o?new Error("When using a label, helpMessage or errorMessage, the 'id' prop is required"):c.default.checkPropTypes({[t]:c.default.node},e,t,n)}v.propTypes={children:c.default.node,className:c.default.string,divider:c.default.bool,gap:c.default.oneOf(["sm","md","lg"]),id:y,invalid:c.default.oneOfType([c.default.bool,c.default.oneOf(["grammar","spelling"])]),label:y,helpMessage:y,errorMessage:y,orientation:c.default.oneOf(["horizontal","vertical"]),required:u.default.propTypes.required,stretch:c.default.bool,wrap:c.default.bool},v.displayName="SiblingSet",t.A=v},1815:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"UX_SPACE_SIZE",{enumerable:!0,get:function(){return l.UX_SPACE_SIZE}}),Object.defineProperty(t,"asOptions",{enumerable:!0,get:function(){return l.asOptions}}),t.default=void 0,Object.defineProperty(t,"sizeOptions",{enumerable:!0,get:function(){return l.sizeOptions}}),t.space=void 0,t.useSpace=p;var a=r(n(4634)),o=r(n(1847)),i=r(n(8036)),s=r(n(3431)),c=r(n(342)),l=n(4573);const u=["as","className","inline","block","gap"],d="ux-space";function p(e){const{as:t,className:n,inline:r=!1,block:a=!1,gap:o=!1}=e||{},i=Object.values(l.asOptions).includes(t),s=e=>!i&&"string"==typeof e&&Object.values(l.sizeOptions).includes(e)&&e;return(0,c.default)(d,n,{[`${d}--as-${t}`]:i,[`${d}--inline`]:i&&Boolean(r),[`${d}--block`]:i&&Boolean(a),[`${d}--gap`]:i&&Boolean(o),[`${d}--inline-${r}`]:s(r),[`${d}--block-${a}`]:s(a),[`${d}--gap-${o}`]:s(o)})}const f=t.space=new Proxy((function(){}),{get:function(e,t){return String(t).startsWith("_")||void 0!==e[t]||(e[t]=function(e){const t=i.default.forwardRef((function(t,n){let{as:r,className:s,inline:c,block:l,gap:d}=t,f=(0,o.default)(t,u);return i.default.createElement(e,(0,a.default)({"data-version":"2400",className:p({as:r,className:s,inline:c,block:l,gap:d}),ref:n},f))}));var n;return t.propTypes={as:(n=s.default.oneOf(Object.values(l.asOptions)),function(e,t){"as"===t&&e[t]&&console.warn("'as' is deprecated, please use either 'inline' or 'block' with a T-shirt size instead.");for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return n(e,t,...a)}),children:s.default.node,className:s.default.string,inline:s.default.oneOfType([s.default.bool,s.default.oneOf(Object.values(l.sizeOptions))]),block:s.default.oneOfType([s.default.bool,s.default.oneOf(Object.values(l.sizeOptions))]),gap:s.default.oneOfType([s.default.bool,s.default.oneOf(Object.values(l.sizeOptions))])},t}(t)),Reflect.get(...arguments)}});t.default=f},4573:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.sizeOptions=t.asOptions=t.UX_SPACE_SIZE=t.UX_SPACE_AS=void 0;var a=r(n(3693));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=t.UX_SPACE_AS={module:{paddingFactor:8,gapFactor:3},block:{paddingFactor:5,gapFactor:3},lockup:{paddingFactor:2,gapFactor:1}},c=t.UX_SPACE_SIZE={sm:{paddingFactor:1,gapFactor:1},md:{paddingFactor:2,gapFactor:2},lg:{paddingFactor:3,gapFactor:3},xl:{paddingFactor:5,gapFactor:5}};t.asOptions=Object.keys(s).reduce(((e,t)=>i({[t.toUpperCase()]:t},e)),[]),t.sizeOptions=Object.keys(c).reduce(((e,t)=>i({[t.toUpperCase()]:t},e)),[])},2801:(e,t,n)=>{"use strict";var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(4634)),o=r(n(1847)),i=m(n(8036)),s=r(n(3431)),c=r(n(342)),l=m(n(2779)),u=r(n(1645)),d=r(n(8282));const p=["className","center","defaultValue","disabled","id","invalid","label","multiline","onBlur","onChange","onFocus","placeholder","resize","required","size","stretch","suggestion","type","value","visualSize"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const h={md:0,sm:-1},g="ux-text-entry",v=i.default.forwardRef((function(e,t){let{className:n,center:r,defaultValue:s="",disabled:f,id:m,invalid:v,label:y,multiline:E,onBlur:b,onChange:_=Function.prototype,onFocus:O,placeholder:I,resize:S,required:w,size:T,stretch:k=!0,suggestion:C,type:A="text",value:x,visualSize:L}=e,P=(0,o.default)(e,p);delete P.style;const[D,M]=(0,i.useState)(!1),[N,R]=(0,d.default)({prop:x,defaultProp:s,onChange:_}),U=(0,i.useCallback)((e=>{M(!0),"function"==typeof O&&O(e)}),[M,O]),j=(0,i.useCallback)((e=>{M(!1),"function"==typeof b&&b(e)}),[M,b]),F=(0,i.useCallback)((e=>{R(e.target.value,{event:e})}),[R]),G=E?"textarea":"input",V=(0,c.default)(`${g}-shell`,`${g}--size-${L}`,n,{[`${g}--stretch`]:"number"!=typeof T&&k,[`${g}--center`]:r});return i.default.createElement(u.default.div,(0,a.default)({as:"input",emphasis:v?"critical":null,"data-version":"2400.10",className:V,size:h[L]},function(e){const{multiline:t,label:n,size:r,resize:a}=e,o=a?"both":"none",i={"--uxTextEntry-size":"number"!=typeof r||n?null:r};return t&&(i.resize="string"==typeof a?a:o),{style:i}}({multiline:E,label:y,size:T,resize:S})),C&&i.default.createElement("span",{className:`${g}-suggestion`},C),!I&&!E&&(0,l.ensureLabelComponent)(y,{float:Boolean(N)||D,internal:!0,required:w,htmlFor:m}),i.default.createElement(G,(0,a.default)({},P,{ref:t,className:`${g}-field`,disabled:f,id:m,placeholder:I,"aria-invalid":v,"aria-required":Boolean(w),type:A,value:N,onChange:F,onFocus:U,onBlur:j,size:T})))}));v.propTypes={className:s.default.string,center:s.default.bool,defaultValue:s.default.string,disabled:s.default.bool,id:s.default.string.isRequired,invalid:s.default.bool,label:s.default.node,multiline:s.default.bool,onBlur:s.default.func,onChange:s.default.func,onFocus:s.default.func,placeholder:s.default.string,resize:s.default.oneOfType([s.default.bool,s.default.oneOf(["horizontal","vertical"])]),required:l.default.propTypes.required,size:s.default.number,stretch:s.default.bool,suggestion:s.default.string,type:s.default.oneOf(["text","email","password","url","tel","number","search"]),value:s.default.node,visualSize:s.default.oneOf(["sm","md"])},v.displayName="TextEntry",t.default=v},4653:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var a=r(n(4634)),o=r(n(1847)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(8036)),s=r(n(3431)),c=r(n(342)),l=r(n(8937)),u=r(n(2801)),d=r(n(6708)),p=n(2779),f=r(n(1645));const m=["className","children","label","helpMessage","errorMessage","open","visualSize"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const g="ux-text-input",v=i.default.forwardRef((function(e,t){let{className:n,children:r,label:s,helpMessage:h,errorMessage:v,open:y=!0,visualSize:E="md"}=e,b=(0,o.default)(e,m);const{id:_,invalid:O,disabled:I,required:S,labelExperimentalFloat:w}=b||{},T=h&&`${_}-help`,k=v&&`${_}-error`,C=(0,i.useRef)(null),A=y&&r,x="sm"!==E&&w||!1,L=(0,c.default)(`${g}-shell`,`${g}--size-${E}`,n);return i.default.createElement("div",{"data-version":"2400.10",className:L},!x&&(0,p.ensureLabelComponent)(s,{htmlFor:_,required:S}),i.default.createElement(l.default,{disabled:I,invalid:O,ref:C},i.default.createElement(u.default,(0,a.default)({},b,{"aria-invalid":O,"aria-errormessage":k,"aria-describedby":T,label:x&&s,visualSize:E,ref:t})),A&&i.default.createElement(d.default,{anchorRef:C,placement:"bottom-start",stretch:!0},r)),h&&i.default.createElement(f.default.p,{text:h,as:"caption",id:T,emphasis:"passive"}),v&&i.default.createElement(f.default.p,{text:v,as:"caption",id:k,emphasis:"critical",role:"alert"}))}));v.propTypes={className:s.default.string,defaultValue:s.default.string,disabled:s.default.bool,id:s.default.string.isRequired,invalid:s.default.bool,label:s.default.node,multiline:s.default.bool,onBlur:s.default.func,onChange:s.default.func,onFocus:s.default.func,placeholder:s.default.string,resize:s.default.oneOfType([s.default.bool,s.default.oneOf(["horizontal","vertical"])]),required:u.default.propTypes.required,size:s.default.number,suggestion:s.default.string,type:u.default.propTypes.type,value:s.default.node,helpMessage:s.default.string,errorMessage:s.default.node,children:s.default.node,open:s.default.bool,visualSize:s.default.oneOf(["sm","md"])},v.displayName="TextInput",t.A=v},4742:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var a=r(n(4634)),o=r(n(1847)),i=r(n(8036)),s=r(n(3431)),c=r(n(6708)),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(1815)),u=r(n(342));const d=["anchorRef","children","className","open"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const f="ux-tooltip";function m(e){let{anchorRef:t,children:n,className:r,open:s=!0}=e,p=(0,o.default)(e,d);if(delete p.style,!t)return null;const m=i.default.createElement(c.default,(0,a.default)({anchorRef:t,className:(0,u.default)(f,r),placement:"top",arrow:!0,role:"tooltip"},p),i.default.createElement(l.default.div,{className:`${f}-content`,"data-version":"2400.10",inline:l.sizeOptions.MD,block:l.sizeOptions.MD},n));return s&&n&&m}m.propTypes={anchorRef:s.default.oneOfType([s.default.func,s.default.shape({current:s.default.object})]),arrow:s.default.oneOfType([s.default.bool,s.default.string]),children:s.default.oneOfType([s.default.arrayOf(s.default.node),s.default.node]),id:s.default.string,placement:c.default.propTypes.placement,strategy:s.default.oneOf(["absolute","fixed"]),role:s.default.string,onClose:s.default.func,onPlacement:s.default.func,stretch:s.default.bool,className:s.default.string,portalElem:s.default.object,open:s.default.bool},m.displayName="Tooltip",t.A=m},5093:(e,t,n)=>{"use strict";!function(e){var t,n,r,a,o;if(r=e.IDBObjectStore||e.webkitIDBObjectStore||e.mozIDBObjectStore||e.msIDBObjectStore,n=e.IDBIndex||e.webkitIDBIndex||e.mozIDBIndex||e.msIDBIndex,void 0!==r&&void 0!==n){var i=!1;"undefined"!=typeof WorkerGlobalScope&&(navigator.userAgent.indexOf("Safari/602")>=0||navigator.userAgent.indexOf("Safari/603")>=0)&&(i=!0),(i||void 0===r.prototype.getAll||void 0===n.prototype.getAll||void 0===r.prototype.getAllKeys||void 0===n.prototype.getAllKeys)&&(a=function(){this.result=null,this.error=null,this.source=null,this.transaction=null,this.readyState="pending",this.onsuccess=null,this.onerror=null,this.toString=function(){return"[object IDBRequest]"}},t=function(e){this.type=e,this.target=null,this.currentTarget=null,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.eventPhase=this.NONE,this.stopPropagation=function(){console.log("stopPropagation not implemented in IndexedDB-getAll-shim")},this.stopImmediatePropagation=function(){console.log("stopImmediatePropagation not implemented in IndexedDB-getAll-shim")},this.bubbles=!1,this.cancelable=!1,this.preventDefault=function(){console.log("preventDefault not implemented in IndexedDB-getAll-shim")},this.defaultPrevented=!1,this.isTrusted=!1,this.timestamp=Date.now()},o=function(e,n){return function(r,o){var i,s,c;return r=void 0!==r?r:null,s=new a,c=[],(i=this.openCursor(r)).onsuccess=function(r){var a,i,l;(a=r.target.result)&&(l="value"===n?a.value:"index"===e?a.primaryKey:a.key,c.push(l),void 0===o||c.length<o)?a.continue():"function"==typeof s.onsuccess&&((i=new t("success")).target={readyState:"done",result:c},s.result=c,s.onsuccess(i))},i.onerror=function(e){console.log("IndexedDB-getAll-shim error when getting data:",e.target.error),"function"==typeof s.onerror&&s.onerror(e)},s}},(i||void 0===r.prototype.getAll)&&(r.prototype.getAll=o("objectStore","value")),(i||void 0===n.prototype.getAll)&&(n.prototype.getAll=o("index","value")),(i||void 0===r.prototype.getAllKeys)&&(r.prototype.getAllKeys=o("objectStore","key")),(i||void 0===n.prototype.getAllKeys)&&(n.prototype.getAllKeys=o("index","key")))}}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:void 0!==n.g?n.g:Function("return this;")())},4956:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t){return h((function(n,r){m().then((function(a){var o=a.transaction(e).objectStore(e).get(t);o.onsuccess=function(e){n(e.target.result)},o.onerror=r})).catch(r)}))},t.set=function(e,t){return h((function(n,r){m().then((function(a){var o=a.transaction([e],"readwrite").objectStore(e).put(t);o.onsuccess=function(){n()},o.onerror=r})).catch(r)}))},t.getList=function(e){var t=e.objectStoreName,n=e.indexName,r=e.query;return h((function(e,a){m().then((function(o){var i=n?o.transaction(t).objectStore(t).index(n).getAll(IDBKeyRange.only(r)):o.transaction(t).objectStore(t).getAll();i.onsuccess=function(t){e(t.target.result)},i.onerror=a})).catch(a)}))},t.setList=function(e,t){return t&&t.length?h((function(n,r){m().then((function(a){var o=a.transaction([e],"readwrite");t.forEach((function(t){o.objectStore(e).put(t)})),o.oncomplete=function(){n()},o.onerror=r})).catch(r)})):Promise.resolve()},t.removeList=function(e,t){return t&&t.length?h((function(n,r){m().then((function(a){var o=a.transaction([e],"readwrite");t.forEach((function(t){o.objectStore(e).delete(t)})),o.oncomplete=function(){n()},o.onerror=r})).catch(n)})):Promise.resolve()},t.clear=function(e){return h((function(t,n){m().then((function(n){n.transaction([e],"readwrite").objectStore(e).clear().onsuccess=function(){t()}})).catch(n)}))},t.getDbName=f;var r=n(4411),a=i(n(2317)),o=i(n(8533));function i(e){return e&&e.__esModule?e:{default:e}}var s=r.STORES.ASSET,c=r.STORES.CONTAINER_LAST_SYNC,l=r.STORES.CONTAINER_MANIFEST,u=r.STORES.SEARCH_INDEX,d=r.INDEXES.CONTAINER_KEY,p=null;function f(){if(!(0,o.default)())return"bb-image-manager";var e=(0,a.default)("rootDomain");if(!e)throw new Error("missing rootDomain query string");return"bb-image-manager-".concat(e).toLocaleLowerCase()}function m(){return window.indexedDB?p?Promise.resolve(p):h((function(e,t){var n=window.indexedDB.open(f(),r.DB_VERSION);n.onupgradeneeded=function(e){p=e.target.result;for(var t=[],n=0;n<p.objectStoreNames.length;n++)t.push(p.objectStoreNames[n]);for(var r=0;r<t.length;r++)p.deleteObjectStore(t[r]);p.createObjectStore(s.name,{keyPath:s.key,autoIncrement:!0}).createIndex(d.name,d.key,{unique:!1}),p.createObjectStore(c.name,{keyPath:c.key}),p.createObjectStore(l.name,{keyPath:l.key}),p.createObjectStore(u.name,{keyPath:u.key})},n.onsuccess=function(){p=n.result,e(p)},n.onerror=function(e){p=null;var r=n.error||new Error("cannot get local storage DB");Object.assign(r,{meta:{request:n,event:e}}),t(r)}})):Promise.reject(new Error("The browser does not support indexedDB"))}function h(e){return new Promise(e)}},2317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return null;var t=window.location.href;if(!t)return null;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},8324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAsset=function(e){return(0,r.get)(s.name,e)},t.setAssets=function(e){var t=e.containerKey,n=e.lastSyncedAt,a=e.upsertList,o=e.deleteList;return Promise.all([(0,r.setList)(s.name,a),(0,r.removeList)(s.name,o)]).then((function(){return(0,r.set)(c.name,{containerKey:t,lastSyncedAt:n}).then((function(){return Promise.resolve()}))}))},t.addAssets=function(e){return(0,r.setList)(s.name,e)},t.removeAssets=function(e){return(0,r.removeList)(s.name,e)},t.getManifest=function(e){return(0,r.get)(l.name,e)},t.setManifest=function(e){return(0,r.set)(l.name,e)},t.getAssets=function(e){return Promise.all([(0,r.get)(c.name,e),(0,r.getList)({objectStoreName:s.name,indexName:d.name,query:e})]).then((function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=e)||function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(t.push(o.value),2!==t.length);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}();return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n[0],{images:n[1]})}))},t.setAsset=function(e){return(0,r.set)(s.name,e)},t.getSearchIndex=function(e){return(0,r.get)(u.name,e)},t.setSearchIndex=function(e){return(0,r.set)(u.name,e)},n(5093);var r=n(4956),a=n(4411);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=a.STORES.ASSET,c=a.STORES.CONTAINER_LAST_SYNC,l=a.STORES.CONTAINER_MANIFEST,u=a.STORES.SEARCH_INDEX,d=a.INDEXES.CONTAINER_KEY},8533:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){try{return window.self!==window.top&&void 0===window.bb}catch(e){return!0}}},4411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DB_VERSION=t.INDEXES=t.STORES=void 0,t.STORES={ASSET:{key:"id",name:"asset"},CONTAINER_LAST_SYNC:{key:"containerKey",name:"container_last_sync"},CONTAINER_MANIFEST:{key:"containerKey",name:"container_manifest"},SEARCH_INDEX:{key:"searchIndexKey",name:"search_index_key"}},t.INDEXES={CONTAINER_KEY:{name:"container_key",key:"containerKey"}},t.DB_VERSION=4},4199:(e,t)=>{"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.specification=this.normalize(t)}var t,r;return t=e,(r=[{key:"normalize",value:function(e){return Array.isArray(e)?e:Object.keys(e).reduce((function(t,n){var r=e[n];return r.name=r.name||n,t.push(r),t}),[])}},{key:"changed",value:function(e){var t=this.breakpoint;return this.breakpoint=this.currently(e),this.breakpoint!==t}},{key:"matches",value:function(e,t){e=e||this.viewport();var n=!1;return"height"in t&&!(n=e.height<t.height)||"width"in t&&(n=e.width<t.width),n}},{key:"currently",value:function(e){e=e||this.viewport();for(var t=0,n=this.specification.length;t<n;t++){var r=this.specification[t];if(this.matches(e,r))return r.name}return"unknown"}},{key:"compare",value:function(e,t){var n=this.specification.filter((function(t){return t.name===e}))[0];return n?n[t]?this[t]()-n[t]:new TypeError("".concat(e,".").concat(t," is not part of the given specifications")):new TypeError("".concat(e," is not part of the given specifications"))}}])&&n(t.prototype,r),e}();t.default=r},1563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4199)),a=o(n(5076));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}var u="undefined"!=typeof window?window:{innerWidth:1280,innerHeight:768},d=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,c(t).call(this,e))).window=n||u,r.breakpoint=r.currently(),r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"viewport",value:function(){return{height:this.height(),width:this.width()}}},{key:"width",value:function(){return(0,a.default)(this.window,"innerWidth")||(0,a.default)(this.window,"document.documentElement.clientWidth")||(0,a.default)(this.window,"document.body.clientWidth")||0}},{key:"height",value:function(){return(0,a.default)(this.window,"innerHeight")||(0,a.default)(this.window,"document.documentElement.clientHeight")||(0,a.default)(this.window,"document.body.clientHeight")||0}}])&&s(n.prototype,r),t}(r.default);t.default=d},454:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n)||[],r=1;r<t.length;r++)t=(e=a(t,r).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var a=o(n[0]);a!==n[0]&&(t[n[0]]=a)}n=r.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},7424:(e,t,n)=>{e.exports=n(9885)},9885:(e,t,n)=>{var r=n(5163)((function e(t,n){return(n=n||{}).namespace=t,n.prod=!0,n.dev=!1,n.force||e.force?e.yep(n):e.nope(n)}));e.exports=r},5163:e=>{var t=[],n=[],r=function(){};function a(e){return!~t.indexOf(e)&&(t.push(e),!0)}function o(e){r=e}function i(e){for(var n=[],r=0;r<t.length;r++)if(t[r].async)n.push(t[r]);else if(t[r](e))return!0;return!!n.length&&new Promise((function(t){Promise.all(n.map((function(t){return t(e)}))).then((function(e){t(e.some(Boolean))}))}))}function s(e){return!~n.indexOf(e)&&(n.push(e),!0)}function c(){r.apply(r,arguments)}function l(e){for(var t=0;t<n.length;t++)e=n[t].apply(n[t],arguments);return e}function u(e,t){var n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}function d(e){return e.enabled=!1,e.modify=s,e.set=o,e.use=a,u((function(){return!1}),e)}function p(e){return e.enabled=!0,e.modify=s,e.set=o,e.use=a,u((function(){var t=Array.prototype.slice.call(arguments,0);return c.call(c,e,l(t,e)),!0}),e)}e.exports=function(e){return e.introduce=u,e.enabled=i,e.process=l,e.modify=s,e.write=c,e.nope=d,e.yep=p,e.set=o,e.use=a,e}},6744:(e,t,n)=>{e.exports=n.p+"98daa7c23b2330a16eca6bbadf199403.png"},4678:(e,t,n)=>{e.exports=n.p+"a0e4f583de1e041fbe31de43500fd514.png"},123:(e,t,n)=>{e.exports=n.p+"d2c90418dc08d4d3c9947f5d2b0c5eed.png"},7507:(e,t,n)=>{e.exports=n.p+"7426a91d2035f99c03c7e95dfaf3c7dc.svg"},1186:(e,t,n)=>{e.exports=n.p+"19026ed840f96cfa2cb6dc95f9afcf76.png"},15:(e,t,n)=>{e.exports=n.p+"8d2803b34909167e438f23fda48d93a5.png"},2378:(e,t,n)=>{e.exports=n.p+"8a46fc2b438a8ca406cf6ace390dc846.png"},2717:(e,t,n)=>{e.exports=n.p+"348f96f594219b8ef38f1e0a18520246.png"},2863:(e,t,n)=>{e.exports=n.p+"a32deeaa7764d451ec42028f8361ff32.png"},6366:(e,t,n)=>{e.exports=n.p+"5bca3700858a77556cc1df0fe503ac9b.png"},801:(e,t,n)=>{e.exports=n.p+"b5a930d881abbfd526e3fd496565c57f.jpg"},8598:(e,t,n)=>{e.exports=n.p+"ee7b1d8f07395bf87105d4ee2d5602e7.jpg"},8707:(e,t,n)=>{e.exports=n.p+"0d8689456ce7b46dca1b7030d044b8b8.jpg"},4399:(e,t,n)=>{e.exports=n.p+"d7b4eb0e2ecdf50fba1770338b33951a.svg"},2573:(e,t,n)=>{e.exports=n.p+"8d3d967a13724bd34a81c9eefd76f5d4.png"},9973:(e,t,n)=>{e.exports=n.p+"eeb412be1917ccc5e1af37dc74b5492a.png"},3745:(e,t,n)=>{e.exports=n.p+"e60aa250ea0dd1b330f199755ec6aa82.png"},4433:(e,t,n)=>{e.exports=n.p+"6a612d47f77018f2717b455d19577875.png"},9910:(e,t,n)=>{e.exports=n.p+"5d1d62712d5ac49056e25c0baca47f28.svg"},4975:(e,t,n)=>{e.exports=n.p+"5f494d47c0b66dc65c8fd6fe67dc1ff7.png"},7751:(e,t,n)=>{e.exports=n.p+"207bb3a54357c8aa15a196cb9baddb36.png"},3055:e=>{"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),o=0;o<r.length;o++){var i=r[o],s=e[i];(a?-1!==t.indexOf(i):t(i,s,e))&&(n[i]=s)}return n}},8421:function(e,t,n){"use strict";function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o="undefined"!=typeof window&&window===this?this:void 0!==n.g&&null!=n.g?n.g:this;function i(){i=function(){},o.Symbol||(o.Symbol=l)}function s(e,t){this.b=e,a(this,"description",{configurable:!0,writable:!0,value:t})}s.prototype.toString=function(){return this.b};var c,l=(c=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new s("jscomp_symbol_"+(t||"")+"_"+c++,t)});function u(){i();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&a(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return function(e){return u(),(e={next:e})[o.Symbol.iterator]=function(){return this},e}(r(this))}}),u=function(){}}function d(e,t){if(t){var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function p(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}d("Array.prototype.keys",(function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}})),d("Promise",(function(e){function t(e){this.h=0,this.m=void 0,this.b=[];var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.b=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.b){this.b=[];var t=this;this.j((function(){t.m()}))}this.b.push(e)};var a=o.setTimeout;n.prototype.j=function(e){a(e,0)},n.prototype.m=function(){for(;this.b&&this.b.length;){var e=this.b;this.b=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.l(e)}}}this.b=null},n.prototype.l=function(e){this.j((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.L),reject:e(this.l)}},t.prototype.L=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.M(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.K(e):this.w(e)}},t.prototype.K=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.N(t,e):this.w(e)},t.prototype.l=function(e){this.B(2,e)},t.prototype.w=function(e){this.B(1,e)},t.prototype.B=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.m=t,this.I()},t.prototype.I=function(){if(null!=this.b){for(var e=0;e<this.b.length;++e)i.h(this.b[e]);this.b=null}};var i=new n;return t.prototype.M=function(e){var t=this.j();e.F(t.resolve,t.reject)},t.prototype.N=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(e){o(e)}}:t}var a,o,i=new t((function(e,t){a=e,o=t}));return this.F(r(e,a),r(n,o)),i},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.F=function(e,t){function n(){switch(r.h){case 1:e(r.m);break;case 2:t(r.m);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.b?i.h(n):this.b.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=p(e),o=a.next();!o.done;o=a.next())r(o.value).F(t,n)}))},t.all=function(e){var n=p(e),a=n.next();return a.done?r([]):new t((function(e,t){function o(t){return function(n){i[t]=n,0==--s&&e(i)}}var i=[],s=0;do{i.push(void 0),s++,r(a.value).F(o(i.length-1),t),a=n.next()}while(!a.done)}))},t})),function(t,n,r){var a;(a=r.define)&&a.amd?a([],(function(){return n})):(a=r.modules)?a["FlexSearch".toLowerCase()]=n:e.exports=n}(0,function e(t){function n(e,t){var n=t?t.id:e&&e.id;this.id=n||0===n?n:L++,this.init(e,t),s(this,"index",(function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].f):Object.keys(this.f)})),s(this,"length",(function(){return this.index.length}))}function r(e,t,n,r){return this.D!==this.i&&(this.A=this.A.concat(n),this.D++,r&&this.A.length>=r&&(this.D=this.i),this.D===this.i&&(this.cache&&this.u.set(t,this.A),this.H&&this.H(this.A))),this}function a(e){var t,n=S();for(t in e)if(e.hasOwnProperty(t)){var r=e[t];E(r)?n[t]=r.slice(0):_(r)?n[t]=a(r):n[t]=r}return n}function o(e,t){for(var n=e.length,r=b(t),a=[],o=0,i=0;o<n;o++){var s=e[o];(r&&t(s)||!r&&!t[s])&&(a[i++]=s)}return a}function i(e,t,n,r,a,o,i,s,c,l){if(n=v(n,i?0:a,s,o,t,c,l),s){s=n.page;var u=n.next;n=n.result}if(i)t=this.where(i,null,a,n);else{for(t=n,n=this.v,a=t.length,o=Array(a),i=0;i<a;i++)o[i]=n[t[i]];t=o}return n=t,r&&(b(r)||(1<(k=r.split(":")).length?r=h:(k=k[0],r=m)),n.sort(r)),n=g(s,u,n),this.cache&&this.u.set(e,n),n}function s(e,t,n){Object.defineProperty(e,t,{get:n})}function c(e){return new RegExp(e,"g")}function l(e,t){for(var n=0;n<t.length;n+=2)e=e.replace(t[n],t[n+1]);return e}function u(e,t,n,r,a,o,i,s){return t[n]?t[n]:(a=a?(s-(i||s/1.5))*o+(i||s/1.5)*a:o,t[n]=a,a>=i&&((e=(e=e[s-(a+.5|0)])[n]||(e[n]=[]))[e.length]=r),a)}function d(e,t){if(e)for(var n=Object.keys(e),r=0,a=n.length;r<a;r++){var o=n[r],i=e[o];if(i)for(var s=0,c=i.length;s<c;s++){if(i[s]===t){1===c?delete e[o]:i.splice(s,1);break}_(i[s])&&d(i[s],t)}}}function p(e){for(var t="",n="",r="",a=0;a<e.length;a++){var o=e[a];o!==n&&(a&&"h"===o?(r="a"===r||"e"===r||"i"===r||"o"===r||"u"===r||"y"===r,(("a"===n||"e"===n||"i"===n||"o"===n||"u"===n||"y"===n)&&r||" "===n)&&(t+=o)):t+=o),r=a===e.length-1?"":e[a+1],n=o}return t}function f(e,t){return 0>(e=e.length-t.length)?1:e?-1:0}function m(e,t){return(e=e[k])<(t=t[k])?-1:e>t?1:0}function h(e,t){for(var n=k.length,r=0;r<n;r++)e=e[k[r]],t=t[k[r]];return e<t?-1:e>t?1:0}function g(e,t,n){return e?{page:e,next:t?""+t:null,result:n}:n}function v(e,t,n,r,a,o,i){var s=[];if(!0===n){n="0";var c=""}else c=n&&n.split(":");var l=e.length;if(1<l){var u,d,p,f,m=S(),h=[],v=0,E=!0,b=0;if(c)if(2===c.length){var _=c;c=!1}else c=p=parseInt(c[0],10);if(i){for(u=S();v<l;v++)if("not"===a[v]){var I=e[v],w=I.length;for(d=0;d<w;d++)u["@"+I[d]]=1}else var T=v+1;if(O(T))return g(n,M,s);v=0}else var k=y(a)&&a;for(;v<l;v++){var C=v===(T||l)-1;if(!k||!v)if((d=k||a&&a[v])&&"and"!==d){if("or"!==d)continue;f=!1}else f=o=!0;if(w=(I=e[v]).length){if(E){if(!L){L=I;continue}var A=L.length;for(d=0;d<A;d++){var x="@"+(E=L[d]);i&&u[x]||(m[x]=1,o||(s[b++]=E))}var L=null;E=!1}for(x=!1,d=0;d<w;d++){var P="@"+(A=I[d]),D=o?m[P]||0:v;if(!(!D&&!r||i&&u[P]||!o&&m[P]))if(D===v){if(C){if((!p||--p<b)&&(s[b++]=A,t&&b===t))return g(n,b+(c||0),s)}else m[P]=v+1;x=!0}else r&&((P=h[D]||(h[D]=[]))[P.length]=A)}if(f&&!x&&!r)break}else if(f&&!r)return g(n,M,I)}if(L)if(v=L.length,i)for(d=c?parseInt(c,10):0;d<v;d++)u["@"+(e=L[d])]||(s[b++]=e);else s=L;if(r)for(b=s.length,_?(v=parseInt(_[0],10)+1,d=parseInt(_[1],10)+1):(v=h.length,d=0);v--;)if(A=h[v]){for(w=A.length;d<w;d++)if(r=A[d],(!i||!u["@"+r])&&(s[b++]=r,t&&b===t))return g(n,v+":"+d,s);d=0}}else!l||a&&"not"===a[0]||(s=e[0],c&&(c=parseInt(c[0],10)));if(t){i=s.length,c&&c>i&&(c=0);var M=(c=c||0)+t;M<i?s=s.slice(c,M):(M=0,c&&(s=s.slice(c)))}return g(n,M,s)}function y(e){return"string"==typeof e}function E(e){return e.constructor===Array}function b(e){return"function"==typeof e}function _(e){return"object"==typeof e}function O(e){return void 0===e}function I(e){for(var t=Array(e),n=0;n<e;n++)t[n]=S();return t}function S(){return Object.create(null)}function w(){var e,t;self.onmessage=function(n){if(n=n.data)if(n.search){var r=t.search(n.content,n.threshold?{limit:n.limit,threshold:n.threshold,where:n.where}:n.limit);self.postMessage({id:e,content:n.content,limit:n.limit,result:r})}else n.add?t.add(n.id,n.content):n.update?t.update(n.id,n.content):n.remove?t.remove(n.id):n.clear?t.clear():n.info?((n=t.info()).worker=e,console.log(n)):n.register&&(e=n.id,n.options.cache=!1,n.options.async=!1,n.options.worker=!1,t=new(t=new Function(n.register.substring(n.register.indexOf("{")+1,n.register.lastIndexOf("}")))())(n.options))}}function T(n,r,a,o){n=t("flexsearch","id"+n,w,(function(e){(e=e.data)&&e.result&&o(e.id,e.content,e.result,e.limit,e.where,e.cursor,e.suggest)}),r);var i=e.toString();return a.id=r,n.postMessage({register:i,options:a,id:r}),n}var k,C={encode:"icase",g:"forward",split:/\W+/,cache:!1,async:!1,i:!1,G:!1,a:!1,c:9,threshold:0,depth:0},A={memory:{encode:"extra",g:"strict",threshold:0,c:1},speed:{encode:"icase",g:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",g:"full",threshold:1,c:3},score:{encode:"extra",g:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",g:"strict",threshold:0,c:3,depth:3},fast:{encode:"icase",g:"strict",threshold:8,c:9,depth:1}},x=[],L=0,P={},D={};n.create=function(e,t){return new n(e,t)},n.registerMatcher=function(e){for(var t in e)e.hasOwnProperty(t)&&x.push(c(t),e[t]);return this},n.registerEncoder=function(e,t){return F[e]=t.bind(F),this},n.registerLanguage=function(e,t){return P[e]=t.filter,D[e]=t.stemmer,this},n.encode=function(e,t){return F[e](t)},n.prototype.init=function(e,t){if(this.h=[],t){var o=t.preset;e=t}else e||(e=C),o=e.preset;if(t={},y(e)?((t=A[e])||console.warn("Preset not found: "+e),e={}):o&&((t=A[o])||console.warn("Preset not found: "+o)),o=e.worker)if("undefined"==typeof Worker)e.worker=!1,this.b=null;else{var i=parseInt(o,10)||4;this.w=-1,this.D=0,this.A=[],this.H=null,this.b=Array(i);for(var s=0;s<i;s++)this.b[s]=T(this.id,s,e,r.bind(this))}if(this.g=e.tokenize||t.g||this.g||C.g,this.split=O(o=e.split)?this.split||C.split:y(o)?c(o):o,this.G=e.rtl||this.G||C.G,this.async="undefined"==typeof Promise||O(o=e.async)?this.async||C.async:o,this.i=O(o=e.worker)?this.i||C.i:o,this.threshold=O(o=e.threshold)?t.threshold||this.threshold||C.threshold:o,this.c=O(o=e.resolution)?o=t.c||this.c||C.c:o,o<=this.threshold&&(this.c=this.threshold+1),this.depth="strict"!==this.g||O(o=e.depth)?t.depth||this.depth||C.depth:o,this.j=(o=O(o=e.encode)?t.encode||C.encode:o)&&F[o]&&F[o].bind(F)||(b(o)?o:this.j||!1),(o=e.matcher)&&this.addMatcher(o),o=(t=e.lang)||e.filter){if(y(o)&&(o=P[o]),E(o)){i=this.j,s=S();for(var l=0;l<o.length;l++){var u=i?i(o[l]):o[l];s[u]=1}o=s}this.filter=o}if(o=t||e.stemmer){for(var d in t=y(o)?D[o]:o,i=this.j,s=[],t)t.hasOwnProperty(d)&&(l=i?i(d):d,s.push(c(l+"($|\\W)"),i?i(t[d]):t[d]));this.stemmer=s}if(this.a=s=(o=e.doc)?a(o):this.a||C.a,this.s=I(this.c-(this.threshold||0)),this.o=S(),this.f=S(),s){if(this.v=S(),e.doc=null,d=s.index={},t=s.keys=[],i=s.field,l=s.tag,u=s.store,E(s.id)||(s.id=s.id.split(":")),u){var p=S();if(y(u))p[u]=1;else if(E(u))for(var f=0;f<u.length;f++)p[u[f]]=1;else _(u)&&(p=u);s.store=p}if(l){if(this.B=S(),u=S(),i)if(y(i))u[i]=e;else if(E(i))for(p=0;p<i.length;p++)u[i[p]]=e;else _(i)&&(u=i);for(E(l)||(s.tag=l=[l]),i=0;i<l.length;i++)this.B[l[i]]=S();this.I=l,i=u}if(i){if(!E(i))if(_(i)){var m=i;s.field=i=Object.keys(i)}else s.field=i=[i];for(s=0;s<i.length;s++)E(l=i[s])||(m&&(e=m[l]),t[s]=l,i[s]=l.split(":")),d[l]=new n(e)}e.doc=o}return this.m=!0,this.u=!!(this.cache=o=O(o=e.cache)?this.cache||C.cache:o)&&new G(o),this},n.prototype.encode=function(e){return e&&(x.length&&(e=l(e,x)),this.h.length&&(e=l(e,this.h)),this.j&&(e=this.j(e)),this.stemmer&&(e=l(e,this.stemmer))),e},n.prototype.addMatcher=function(e){var t,n=this.h;for(t in e)e.hasOwnProperty(t)&&n.push(c(t),e[t]);return this},n.prototype.add=function(e,t,n,r,a){if(this.a&&_(e))return this.l("add",e,t);if(t&&y(t)&&(e||0===e)){var i="@"+e;if(this.f[i]&&!r)return this.update(e,t);if(this.i)return++this.w>=this.b.length&&(this.w=0),this.b[this.w].postMessage({add:!0,id:e,content:t}),this.f[i]=""+this.w,n&&n(),this;if(!a){if(this.async&&"function"!=typeof importScripts){var s=this;return i=new Promise((function(n){setTimeout((function(){s.add(e,t,null,r,!0),s=null,n()}))})),n?(i.then(n),this):i}if(n)return this.add(e,t,null,r,!0),n(),this}if(!(t=this.encode(t)).length)return this;a=b(n=this.g)?n(t):t.split(this.split),this.filter&&(a=o(a,this.filter));var c=S();c._ctx=S();for(var l=a.length,d=this.threshold,p=this.depth,f=this.c,m=this.s,h=this.G,g=0;g<l;g++){var v=a[g];if(v){var E=v.length,O=(h?g+1:l-g)/l,w="";switch(n){case"reverse":case"both":for(var T=E;--T;)u(m,c,w=v[T]+w,e,h?1:(E-T)/E,O,d,f-1);w="";case"forward":for(T=0;T<E;T++)u(m,c,w+=v[T],e,h?(T+1)/E:1,O,d,f-1);break;case"full":for(T=0;T<E;T++)for(var k=(h?T+1:E-T)/E,C=E;C>T;C--)u(m,c,w=v.substring(T,C),e,k,O,d,f-1);break;default:if(E=u(m,c,v,e,1,O,d,f-1),p&&1<l&&E>=d)for(E=c._ctx[v]||(c._ctx[v]=S()),v=this.o[v]||(this.o[v]=I(f-(d||0))),0>(O=g-p)&&(O=0),(w=g+p+1)>l&&(w=l);O<w;O++)O!==g&&u(v,E,a[O],e,0,f-(O<g?g-O:O-g),d,f-1)}}}this.f[i]=1,this.m=!1}return this},n.prototype.l=function(e,t,n){if(E(t)){var r=t.length;if(r--){for(var a=0;a<r;a++)this.l(e,t[a]);return this.l(e,t[r],n)}}else{var o,i=this.a.index,s=this.a.keys,c=this.a.tag;a=this.a.store;var l=this.a.id;r=t;for(var u=0;u<l.length;u++)r=r[l[u]];if("remove"===e&&(delete this.v[r],l=s.length,l--)){for(t=0;t<l;t++)i[s[t]].remove(r);return i[s[l]].remove(r,n)}if(c){for(o=0;o<c.length;o++){var d=c[o],p=t;for(l=d.split(":"),u=0;u<l.length;u++)p=p[l[u]];p="@"+p}o=(o=this.B[d])[p]||(o[p]=[])}for(c=0,d=(l=this.a.field).length;c<d;c++){u=l[c],p=t;for(var f=0;f<u.length;f++)p=p[u[f]];u=i[s[c]],f="add"===e?u.add:u.update,c===d-1?f.call(u,r,p,n):f.call(u,r,p)}if(a){for(n=Object.keys(a),e=S(),i=0;i<n.length;i++)if(a[s=n[i]])for(s=s.split(":"),c=l=void 0,d=0;d<s.length;d++)l=(l||t)[p=s[d]],c=(c||e)[p]=l;t=e}o&&(o[o.length]=t),this.v[r]=t}return this},n.prototype.update=function(e,t,n){return this.a&&_(e)?this.l("update",e,t):(this.f["@"+e]&&y(t)&&(this.remove(e),this.add(e,t,n,!0)),this)},n.prototype.remove=function(e,t,n){if(this.a&&_(e))return this.l("remove",e,t);var r="@"+e;if(this.f[r]){if(this.i)return this.b[this.f[r]].postMessage({remove:!0,id:e}),delete this.f[r],t&&t(),this;if(!n){if(this.async&&"function"!=typeof importScripts){var a=this;return r=new Promise((function(t){setTimeout((function(){a.remove(e,null,!0),a=null,t()}))})),t?(r.then(t),this):r}if(t)return this.remove(e,null,!0),t(),this}for(t=0;t<this.c-(this.threshold||0);t++)d(this.s[t],e);this.depth&&d(this.o,e),delete this.f[r],this.m=!1}return this},n.prototype.search=function(e,t,n,r){if(_(t)){if(E(t))for(var a=0;a<t.length;a++)t[a].query=e;else t.query=e;e=t,t=1e3}else t&&b(t)?(n=t,t=1e3):t||0===t||(t=1e3);if(!this.i){var s=[],c=e;if(_(e)&&!E(e)){n||(n=e.callback)&&(c.callback=null);var l=e.sort,u=e.page;t=e.limit,F=e.threshold;var d=e.suggest;e=e.query}if(this.a){F=this.a.index;var p,m,h=c.where,g=c.bool||"or",O=c.field,I=g;if(O)E(O)||(O=[O]);else if(E(c)){var w=c;O=[],I=[];for(var T=0;T<c.length;T++)a=(r=c[T]).bool||g,O[T]=r.field,I[T]=a,"not"===a?p=!0:"and"===a&&(m=!0)}else O=this.a.keys;for(g=O.length,T=0;T<g;T++)w&&(c=w[T]),u&&!y(c)&&(c.page=null,c.limit=0),s[T]=F[O[T]].search(c,0);if(n)return n(i.call(this,e,I,s,l,t,d,h,u,m,p));if(this.async){var k=this;return new Promise((function(n){Promise.all(s).then((function(r){n(i.call(k,e,I,r,l,t,d,h,u,m,p))}))}))}return i.call(this,e,I,s,l,t,d,h,u,m,p)}if(F||(F=this.threshold||0),!r){if(this.async&&"function"!=typeof importScripts){var C=this;return F=new Promise((function(e){setTimeout((function(){e(C.search(c,t,null,!0)),C=null}))})),n?(F.then(n),this):F}if(n)return n(this.search(c,t,null,!0)),this}if(!e||!y(e))return s;if(c=e,this.cache)if(this.m){if(n=this.u.get(e))return n}else this.u.clear(),this.m=!0;if(!(c=this.encode(c)).length)return s;n=b(n=this.g)?n(c):c.split(this.split),this.filter&&(n=o(n,this.filter)),w=n.length,r=!0,a=[];var A=S(),x=0;if(1<w&&(this.depth&&"strict"===this.g?g=!0:n.sort(f)),!g||(T=this.o))for(var L=this.c;x<w;x++){var P=n[x];if(P){if(g){if(!O)if(T[P])O=P,A[P]=1;else if(!d)return s;if(d&&x===w-1&&!a.length)g=!1,A[P=O||P]=0;else if(!O)continue}if(!A[P]){var D=[],M=!1,N=0,R=g?T[O]:this.s;if(R)for(var U=void 0,j=0;j<L-F;j++)(U=R[j]&&R[j][P])&&(D[N++]=U,M=!0);if(M)O=P,a[a.length]=1<N?D.concat.apply([],D):D[0];else if(!d){r=!1;break}A[P]=1}}}else r=!1;return r&&(s=v(a,t,u,d)),this.cache&&this.u.set(e,s),s}this.H=n,this.D=0,this.A=[];for(var F=0;F<this.i;F++)this.b[F].postMessage({search:!0,limit:t,content:e})},n.prototype.find=function(e,t){return this.where(e,t,1)[0]||null},n.prototype.where=function(e,t,n,r){var a,o=this.v,i=[],s=0;if(_(e)){n||(n=t);var c=Object.keys(e),l=c.length,u=!1;if(1===l&&"id"===c[0])return[o[e.id]];if((a=this.I)&&!r)for(var d=0;d<a.length;d++){var p=a[d],f=e[p];if(!O(f)){var m=this.B[p]["@"+f];if(0==--l)return m;c.splice(c.indexOf(p),1),delete e[p];break}}for(a=Array(l),d=0;d<l;d++)a[d]=c[d].split(":")}else{if(b(e)){for(n=(t=r||Object.keys(o)).length,c=0;c<n;c++)e(l=o[t[c]])&&(i[s++]=l);return i}if(O(t))return[o[e]];if("id"===e)return[o[t]];c=[e],l=1,a=[e.split(":")],u=!0}for(d=(r=m||r||Object.keys(o)).length,p=0;p<d;p++){f=m?r[p]:o[r[p]];for(var h=!0,g=0;g<l;g++){u||(t=e[c[g]]);var v=a[g],y=v.length,E=f;if(1<y)for(var I=0;I<y;I++)E=E[v[I]];else E=E[v[0]];if(E!==t){h=!1;break}}if(h&&(i[s++]=f,n&&s===n))break}return i},n.prototype.info=function(){if(!this.i)return{id:this.id,items:this.length,cache:!(!this.cache||!this.cache.C)&&this.cache.C.length,matcher:x.length+(this.h?this.h.length:0),worker:this.i,threshold:this.threshold,depth:this.depth,resolution:this.c,contextual:this.depth&&"strict"===this.g};for(var e=0;e<this.i;e++)this.b[e].postMessage({info:!0,id:this.id})},n.prototype.clear=function(){return this.destroy().init()},n.prototype.destroy=function(){if(this.cache&&(this.u.clear(),this.u=null),this.s=this.o=this.f=null,this.a){for(var e=this.a.keys,t=0;t<e.length;t++)this.a.index[e[t]].destroy();this.a=this.v=null}return this},n.prototype.export=function(e){var t=!e||O(e.serialize)||e.serialize;if(this.a){var n=!e||O(e.doc)||e.doc,r=!e||O(e.index)||e.index;e=[];var a=0;if(r)for(r=this.a.keys;a<r.length;a++){var o=this.a.index[r[a]];e[a]=[o.s,o.o,Object.keys(o.f)]}n&&(e[a]=this.v)}else e=[this.s,this.o,Object.keys(this.f)];return t&&(e=JSON.stringify(e)),e},n.prototype.import=function(e,t){(!t||O(t.serialize)||t.serialize)&&(e=JSON.parse(e));var n=S();if(this.a){var r=!t||O(t.doc)||t.doc,a=0;if(!t||O(t.index)||t.index){for(var o=(t=this.a.keys).length,i=e[0][2];a<i.length;a++)n[i[a]]=1;for(a=0;a<o;a++){i=this.a.index[t[a]];var s=e[a];s&&(i.s=s[0],i.o=s[1],i.f=n)}}r&&(this.v=_(r)?r:e[a])}else{for(r=e[2],a=0;a<r.length;a++)n[r[a]]=1;this.s=e[0],this.o=e[1],this.f=n}};var M,N,R,U,j=(N=c("\\s+"),R=c("[^a-z0-9 ]"),U=[c("[-/]")," ",R,"",N," "],function(e){return p(l(e.toLowerCase(),U))}),F={icase:function(e){return e.toLowerCase()},simple:function(){var e=c("\\s+"),t=c("[^a-z0-9 ]"),n=c("[-/]"),r=[c("[àáâãäå]"),"a",c("[èéêë]"),"e",c("[ìíîï]"),"i",c("[òóôõöő]"),"o",c("[ùúûüű]"),"u",c("[ýŷÿ]"),"y",c("ñ"),"n",c("[çc]"),"k",c("ß"),"s",c(" & ")," and ",n," ",t,"",e," "];return function(e){return" "===(e=l(e.toLowerCase(),r))?"":e}}(),advanced:function(){var e=c("ae"),t=c("ai"),n=c("ay"),r=c("ey"),a=c("oe"),o=c("ue"),i=c("ie"),s=c("sz"),u=c("zs"),d=c("ck"),f=c("cc"),m=[e,"a",t,"ei",n,"ei",r,"ei",a,"o",o,"u",i,"i",s,"s",u,"s",c("sh"),"s",d,"k",f,"k",c("th"),"t",c("dt"),"t",c("ph"),"f",c("pf"),"f",c("ou"),"o",c("uo"),"u"];return function(e,t){return e?(2<(e=this.simple(e)).length&&(e=l(e,m)),t||1<e.length&&(e=p(e)),e):e}}(),extra:(M=[c("p"),"b",c("z"),"s",c("[cgq]"),"k",c("n"),"m",c("d"),"t",c("[vw]"),"f",c("[aeiouy]"),""],function(e){if(!e)return e;if(1<(e=this.advanced(e,!0)).length){e=e.split(" ");for(var t=0;t<e.length;t++){var n=e[t];1<n.length&&(e[t]=n[0]+l(n.substring(1),M))}e=p(e=e.join(" "))}return e}),balance:j},G=function(){function e(e){this.clear(),this.J=!0!==e&&e}return e.prototype.clear=function(){this.cache=S(),this.count=S(),this.index=S(),this.C=[]},e.prototype.set=function(e,t){if(this.J&&O(this.cache[e])){var n=this.C.length;if(n===this.J){n--;var r=this.C[n];delete this.cache[r],delete this.count[r],delete this.index[r]}this.index[e]=n,this.C[n]=e,this.count[e]=-1,this.cache[e]=t,this.get(e)}else this.cache[e]=t},e.prototype.get=function(e){var t=this.cache[e];if(this.J&&t){var n=++this.count[e],r=this.index,a=r[e];if(0<a){for(var o=this.C,i=a;this.count[o[--a]]<=n&&-1!==a;);if(++a!==i){for(n=i;n>a;n--)i=o[n-1],o[n]=i,r[i]=n;o[a]=e,r[e]=a}}}return t},e}();return n}(function(){var e={},t="undefined"!=typeof Blob&&"undefined"!=typeof URL&&URL.createObjectURL;return function(n,r,a,o,i){return a=t?URL.createObjectURL(new Blob(["("+a.toString()+")()"],{type:"text/javascript"})):n+".es5.js",e[n+="-"+r]||(e[n]=[]),e[n][i]=new Worker(a),e[n][i].onmessage=o,console.log("Register Worker: "+n+"@"+i),e[n][i]}}()),this)},2294:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){if("string"==typeof e.displayName&&e.constructor.name)return e.displayName;if("string"==typeof e.name&&e.name)return e.name;if("object"==typeof e&&e.constructor&&"string"==typeof e.constructor.name)return e.constructor.name;var n=e.toString(),r=t.call(e).slice(8,-1);return(n="Function"===r?n.substring(n.indexOf("(")+1,n.indexOf(")")):r)||"anonymous"}},5777:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){r.forEach((function(t){"function"==typeof t?t(e):t.current=e}))}}n.r(t),n.d(t,{default:()=>r})},8166:()=>{},6489:e=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:{MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0},OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){"use strict";var r,a=n(2),o=n(0),i=o.BROWSER_TYPES,s=o.OS_TYPES,c=o.DEVICE_TYPES,l=n(4),u=l.checkType,d=l.broPayload,p=l.mobilePayload,f=l.wearPayload,m=l.consolePayload,h=l.stvPayload,g=l.getNavigatorInstance,v=l.isIOS13Check,y=new a,E=y.getBrowser(),b=y.getDevice(),_=y.getEngine(),O=y.getOS(),I=y.getUA(),S=i.CHROME,w=i.CHROMIUM,T=i.IE,k=i.INTERNET_EXPLORER,C=i.OPERA,A=i.FIREFOX,x=i.SAFARI,L=i.EDGE,P=i.YANDEX,D=i.MOBILE_SAFARI,M=c.MOBILE,N=c.TABLET,R=c.SMART_TV,U=c.BROWSER,j=c.WEARABLE,F=c.CONSOLE,G=s.ANDROID,V=s.WINDOWS_PHONE,B=s.IOS,H=s.WINDOWS,K=s.MAC_OS,z=function(){return O.name===s.WINDOWS&&"10"===O.version&&"string"==typeof I&&-1!==I.indexOf("Edg/")},W=function(){return E.name===L},q=function(){return v("iPad")},Y=b.type===R,$=b.type===F,X=b.type===j,Q=E.name===D||q(),Z=E.name===w,J=function(){switch(b.type){case M:case N:return!0;default:return!1}}()||q(),ee=b.type===M,te=b.type===N||q(),ne=b.type===U,re=O.name===G,ae=O.name===V,oe=O.name===B||q(),ie=E.name===S,se=E.name===A,ce=E.name===x||E.name===D,le=E.name===C,ue=E.name===k||E.name===T,de=O.version?O.version:"none",pe=O.name?O.name:"none",fe=E.major,me=E.version,he=E.name,ge=b.vendor?b.vendor:"none",ve=b.model?b.model:"none",ye=_.name,Ee=_.version,be=I,_e=W()||z(),Oe=E.name===P,Ie=b.type,Se=(r=g())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,we=q(),Te=v("iPhone"),ke=v("iPod"),Ce=function(){var e=g(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Ae=z(),xe=W(),Le=O.name===H,Pe=O.name===K,De=u(b.type);e.exports={deviceDetect:function(){var e=De.isBrowser,t=De.isMobile,n=De.isTablet,r=De.isSmartTV,a=De.isConsole,o=De.isWearable;return e?d(e,E,_,O,I):r?h(r,_,O,I):a?m(a,_,O,I):t||n?p(De,b,O,I):o?f(o,_,O,I):void 0},isSmartTV:Y,isConsole:$,isWearable:X,isMobileSafari:Q,isChromium:Z,isMobile:J,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ae,isIOS:oe,isChrome:ie,isFirefox:se,isSafari:ce,isOpera:le,isIE:ue,osVersion:de,osName:pe,fullBrowserVersion:fe,browserVersion:me,browserName:he,mobileVendor:ge,mobileModel:ve,engineName:ye,engineVersion:Ee,getUA:be,isEdge:_e,isYandex:Oe,deviceType:Ie,isIOS13:Se,isIPad13:we,isIPhone13:Te,isIPod13:ke,isElectron:Ce,isEdgeChromium:Ae,isLegacyEdge:xe,isWindows:Le,isMacOs:Pe}},function(e,t,n){var r;!function(a,o){"use strict";var i="function",s="undefined",c="object",l="model",u="name",d="type",p="vendor",f="version",m="architecture",h="console",g="mobile",v="tablet",y="smarttv",E="wearable",b={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},_={rgx:function(e,t){for(var n,r,a,s,l,u,d=0;d<t.length&&!l;){var p=t[d],f=t[d+1];for(n=r=0;n<p.length&&!l;)if(l=p[n++].exec(e))for(a=0;a<f.length;a++)u=l[++r],typeof(s=f[a])===c&&s.length>0?2==s.length?typeof s[1]==i?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3==s.length?typeof s[1]!==i||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4==s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;d+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(b.has(t[n][r],e))return"?"===n?o:n}else if(b.has(t[n],e))return"?"===n?o:n;return e}},O={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,f],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[u,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[u,"IE"],f],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[u,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[u,"Puffin"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[u,f],[/(QQ)\/([\d\.]+)/i],[u,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[u,f],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[u,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[u,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[u],[/(LBBROWSER)/i],[u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[u,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[u,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,f],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[u,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[u,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,u],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[u,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[f,_.str,O.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[m,b.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,p,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[p,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,l,[d,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[l,[p,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[l,_.str,O.device.amazon.model],[p,"Amazon"],[d,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,p,[d,g]],[/\((ip[honed|\s\w*]+);/i],[l,[p,"Apple"],[d,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,l,[d,g]],[/\(bb10;\s(\w+)/i],[l,[p,"BlackBerry"],[d,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[p,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[p,"Sony"],[l,"Xperia Tablet"],[d,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[l,[p,"Sony"],[d,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,l,[d,h]],[/android.+;\s(shield)\sbuild/i],[l,[p,"Nvidia"],[d,h]],[/(playstation\s[34portablevi]+)/i],[l,[p,"Sony"],[d,h]],[/(sprint\s(\w+))/i],[[p,_.str,O.device.sprint.vendor],[l,_.str,O.device.sprint.model],[d,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,l,[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[p,[l,/_/g," "],[d,g]],[/(nexus\s9)/i],[l,[p,"HTC"],[d,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[l,[p,"Huawei"],[d,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[p,l,[d,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[p,"Microsoft"],[d,h]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,"Microsoft"],[d,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[p,"Motorola"],[d,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[p,"Motorola"],[d,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[p,b.trim],[l,b.trim],[d,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,"Samsung"],[d,y]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[d,y]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],l,[d,v]],[/smart-tv.+(samsung)/i],[p,[d,y],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[p,"Samsung"],l,[d,g]],[/sie-(\w*)/i],[l,[p,"Siemens"],[d,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[p,"Nokia"],l,[d,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[p,"Acer"],[d,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[l,[p,"LG"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],l,[d,v]],[/(lg) netcast\.tv/i],[p,l,[d,y]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[l,[p,"LG"],[d,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[p,"Lenovo"],[d,v]],[/linux;.+((jolla));/i],[p,l,[d,g]],[/((pebble))app\/[\d\.]+\s/i],[p,l,[d,E]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[p,l,[d,g]],[/crkey/i],[[l,"Chromecast"],[p,"Google"]],[/android.+;\s(glass)\s\d/i],[l,[p,"Google"],[d,E]],[/android.+;\s(pixel c)\s/i],[l,[p,"Google"],[d,v]],[/android.+;\s(pixel xl|pixel)\s/i],[l,[p,"Google"],[d,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[p,"Xiaomi"],[d,g]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[p,"Xiaomi"],[d,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[p,"Meizu"],[d,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[l,[p,"OnePlus"],[d,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[l,[p,"RCA"],[d,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[l,[p,"Dell"],[d,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[p,"Verizon"],[d,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[p,"Barnes & Noble"],l,[d,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[l,[p,"NuVision"],[d,v]],[/android.+;\s(k88)\sbuild/i],[l,[p,"ZTE"],[d,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[l,[p,"Swiss"],[d,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[l,[p,"Swiss"],[d,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[p,"Zeki"],[d,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[p,"Dragon Touch"],l,[d,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[l,[p,"Insignia"],[d,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[l,[p,"NextBook"],[d,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[p,"Voice"],l,[d,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[p,"LvTel"],l,[d,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[p,"Envizen"],[d,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[p,l,[d,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[l,[p,"MachSpeed"],[d,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[p,l,[d,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[l,[p,"Rotor"],[d,v]],[/android.+(KS(.+))\s+build/i],[l,[p,"Amazon"],[d,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[p,l,[d,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,b.lowerize],p,l],[/(android[\w\.\s\-]{0,9});.+build/i],[l,[p,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[f,_.str,O.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[f,_.str,O.os.windows.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[u,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[u,"Symbian"],f],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[u,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[u,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[u,f],[/(haiku)\s(\w+)/i],[u,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[u,f]]},S=function(e,t){if("object"==typeof e&&(t=e,e=o),!(this instanceof S))return new S(e,t).getResult();var n=e||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),r=t?b.extend(I,t):I;return this.getBrowser=function(){var e={name:o,version:o};return _.rgx.call(e,n,r.browser),e.major=b.major(e.version),e},this.getCPU=function(){var e={architecture:o};return _.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return _.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:o,version:o};return _.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:o,version:o};return _.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};S.VERSION="0.7.18",S.BROWSER={NAME:u,MAJOR:"major",VERSION:f},S.CPU={ARCHITECTURE:m},S.DEVICE={MODEL:l,VENDOR:p,TYPE:d,CONSOLE:h,MOBILE:g,SMARTTV:y,TABLET:v,WEARABLE:E,EMBEDDED:"embedded"},S.ENGINE={NAME:u,VERSION:f},S.OS={NAME:u,VERSION:f},typeof t!==s?(typeof e!==s&&e.exports&&(t=e.exports=S),t.UAParser=S):n(3)?(r=function(){return S}.call(t,n,t,e))===o||(e.exports=r):a&&(a.UAParser=S);var w=a&&(a.jQuery||a.Zepto);if(typeof w!==s){var T=new S;w.ua=T.getResult(),w.ua.get=function(){return T.getUA()},w.ua.set=function(e){T.setUA(e);var t=T.getResult();for(var n in t)w.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=a.DEVICE_TYPES,i=a.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},c=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return i}},broPayload:function(e,t,n,r,a){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:a}},mobilePayload:function(e,t,n,a){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:a})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:s,isIOS13Check:c}}])},5076:e=>{"use strict";e.exports=function(e,t){if((t=t||"")in(e=e||{}))return e[t];for(var n=Array.prototype.slice.call(arguments,2),r=t.split("."),a=r.length,o=e,i=t,s=0;s<a&&o;s++){var c=/(.+)\(([^\)]+?)?\)$/g.exec(r[s]);i=c?c[2]?o[c[1]].apply(null,n.splice(0,c[2].split(/[\s,]+/).length)):o[c[1]]():o[r[s]],o=i}return i}},3992:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,a,o=[];for(a in"string"!=typeof t&&(t="?"),e)if(n.call(e,a)){if((r=e[a])||null!=r&&!isNaN(r)||(r=""),a=encodeURIComponent(a),r=encodeURIComponent(r),null===a||null===r)continue;o.push(a+"="+r)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,a={};t=n.exec(e);){var o=r(t[1]),i=r(t[2]);null===o||null===i||o in a||(a[o]=i)}return a}},2063:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},528:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},1160:(e,t,n)=>{"use strict";var r=n(2063),a=n(3992),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var p=[["#","hash"],["?","query"],function(e,t){return h(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function m(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},a={},o=typeof(e=e||r);if("blob:"===e.protocol)a=new v(unescape(e.pathname),{});else if("string"===o)for(t in a=new v(e,{}),f)delete a[t];else if("object"===o){for(t in e)t in f||(a[t]=e[t]);void 0===a.slashes&&(a.slashes=s.test(e.href))}return a}function h(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(i,""),t=t||{};var n,r=l.exec(e),a=r[1]?r[1].toLowerCase():"",o=!!r[2],s=!!r[3],c=0;return o?s?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):s?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===a?c>=2&&(n=n.slice(2)):h(a)?n=r[4]:a?o&&(n=n.slice(2)):c>=2&&h(t.protocol)&&(n=r[4]),{protocol:a,slashes:o||h(a),slashesCount:c,rest:n}}function v(e,t,n){if(e=(e=d(e)).replace(i,""),!(this instanceof v))return new v(e,t,n);var o,s,c,l,f,y,E=p.slice(),b=typeof t,_=this,O=0;for("object"!==b&&"string"!==b&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),o=!(s=g(e||"",t=m(t))).protocol&&!s.slashes,_.slashes=s.slashes||o&&t.slashes,_.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!h(_.protocol)))&&(E[3]=[/(.*)/,"pathname"]);O<E.length;O++)"function"!=typeof(l=E[O])?(c=l[0],y=l[1],c!=c?_[y]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(_[y]=e.slice(0,f),e=e.slice(f+l[2])):(_[y]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(_[y]=f[1],e=e.slice(0,f.index)),_[y]=_[y]||o&&l[3]&&t[y]||"",l[4]&&(_[y]=_[y].toLowerCase())):e=l(e,_);n&&(_.query=n(_.query)),o&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,a=n[r-1],o=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(o=!0),n.splice(r,1),i--);return o&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}(_.pathname,t.pathname)),"/"!==_.pathname.charAt(0)&&h(_.protocol)&&(_.pathname="/"+_.pathname),r(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(f=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,f),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(f+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&h(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||a.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";o[e]=t.charAt(0)!==i?i+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(o.username=t.slice(0,s),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(s+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&h(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var i=o+(n.protocol&&n.slashes||h(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):"file:"!==n.protocol&&h(n.protocol)&&!r&&"/"!==n.pathname&&(i+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),i+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},v.extractProtocol=g,v.location=m,v.trimLeft=d,v.qs=a,e.exports=v},3232:t=>{"use strict";t.exports=e},1915:e=>{"use strict";e.exports=t},1305:e=>{"use strict";e.exports=n},342:e=>{"use strict";e.exports=r},8183:e=>{"use strict";e.exports=a},7240:e=>{"use strict";e.exports=o},3624:e=>{"use strict";e.exports=i},945:e=>{"use strict";e.exports=s},6051:e=>{"use strict";e.exports=c},2564:e=>{"use strict";e.exports=l},2687:e=>{"use strict";e.exports=u},3628:e=>{"use strict";e.exports=d},6345:e=>{"use strict";e.exports=p},7322:e=>{"use strict";e.exports=f},3496:e=>{"use strict";e.exports=m},3431:e=>{"use strict";e.exports=h},8036:e=>{"use strict";e.exports=g},6047:e=>{"use strict";e.exports=v},4625:e=>{"use strict";e.exports=y},4885:e=>{"use strict";e.exports=E},7753:e=>{"use strict";e.exports=b},7489:e=>{"use strict";e.exports=_},3361:e=>{"use strict";e.exports=O},2345:e=>{"use strict";e.exports=I},1645:e=>{"use strict";e.exports=S},3721:e=>{"use strict";e.exports=w},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},1847:(e,t,n)=>{var r=n(4893);e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4633:(e,t,n)=>{var r=n(3738).default;function a(){"use strict";e.exports=a=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},o=Object.prototype,i=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),i=new D(r||[]);return s(o,"_invoke",{value:A(e,n,i)}),o}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var h="suspendedStart",g="suspendedYield",v="executing",y="completed",E={};function b(){}function _(){}function O(){}var I={};p(I,l,(function(){return this}));var S=Object.getPrototypeOf,w=S&&S(S(M([])));w&&w!==o&&i.call(w,l)&&(I=w);var T=O.prototype=b.prototype=Object.create(I);function k(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,o,s,c){var l=m(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var a;s(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}})}function A(e,n,r){var a=h;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=x(s,r);if(c){if(c===E)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var l=m(e,n,r);if("normal"===l.type){if(a=r.done?y:g,l.arg===E)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=y,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),E;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,E;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,E):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,E)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(i.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return _.prototype=O,s(T,"constructor",{value:O,configurable:!0}),s(O,"constructor",{value:_,configurable:!0}),_.displayName=p(O,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,p(e,d,"GeneratorFunction")),e.prototype=Object.create(T),e},n.awrap=function(e){return{__await:e}},k(C.prototype),p(C.prototype,u,(function(){return this})),n.AsyncIterator=C,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var i=new C(f(e,t,r,a),o);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(T),p(T,d,"Generator"),p(T,l,(function(){return this})),p(T,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=M,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),E}},n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736:(e,t,n)=>{var r=n(3738).default,a=n(9045);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4756:(e,t,n)=>{var r=n(4633)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},k={};function C(e){var t=k[e];if(void 0!==t)return t.exports;var n=k[e]={exports:{}};return T[e].call(n.exports,n,n.exports,C),n.exports}C.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return C.d(t,{a:t}),t},C.d=(e,t)=>{for(var n in t)C.o(t,n)&&!C.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},C.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),C.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),C.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},C.p="https://img1.wsimg.com/blobby/go/static/brandbook/";var A={};return(()=>{"use strict";C.r(A),C.d(A,{MediaManager:()=>sP,socialAuthCallbackHtml:()=>lP});var e={};function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(null,arguments)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}C.r(e),C.d(e,{apiStatusChange:()=>Sa,clearAllSelection:()=>Ao,clearSearchResults:()=>$o,closeGettyImageSpinner:()=>si,closeUploadNotification:()=>oi,copyInsertImages:()=>co,debug:()=>ti,deleteGoogleTokens:()=>Ai,dismissGooglePhotosDisconnectAlert:()=>Di,doneLoadingDimensions:()=>zo,endFBLoading:()=>To,endGPLoading:()=>ki,endIGLoading:()=>Eo,endVideoRefresh:()=>to,fetchNextMixedAssetPage:()=>di,filesDelete:()=>Ya,filesExternallyUploaded:()=>Ra,filesUpload:()=>Na,getGPAuthorizationUrl:()=>Li,getGooglePhotosAlbums:()=>Ni,getGooglePhotosMediaItems:()=>Ui,getGoogleScopes:()=>xi,getGoogleTokens:()=>Ci,getNextPageDimensions:()=>Ho,getNextPageVideos:()=>ui,getPlanFeatures:()=>ko,getSocialAccessToken:()=>po,getVentureInferredData:()=>Si,getVimeoLink:()=>za,getVimeoUser:()=>Ka,hideVimeoModal:()=>qa,imageProgress:()=>Xa,imageUploadFail:()=>no,imagesDeleted:()=>Fo,imagesLoad:()=>Da,imagesSort:()=>$a,imagesStage:()=>La,imagesUpload:()=>Pa,imagesUploaded:()=>jo,initSPAQ:()=>vi,insertItems:()=>io,insertProducts:()=>li,itemClicked:()=>Co,itemShiftClicked:()=>xo,loadFBAlbums:()=>Oo,loadFBPhotos:()=>Io,loadFirstGCSiteImages:()=>lo,loadIGPosts:()=>vo,loadOtherMedia:()=>gi,loadSiteImages:()=>so,loadViewableSitesNextPage:()=>ni,logError:()=>ei,logInfo:()=>Zo,logSPAQ:()=>yi,logSPAQDone:()=>Ei,logWarning:()=>Jo,metadataUpdated:()=>Go,modalHide:()=>ro,monitorImageProgress:()=>Ii,multiSelect:()=>Po,onDimensionsRetrieved:()=>Ko,onImageRenderError:()=>wi,openGettyImageSpinner:()=>ii,openModal:()=>Oa,openUploadNotification:()=>ai,openVideoSelectorModal:()=>Ia,perfLoadVenture:()=>No,perfLoadVentureEnd:()=>Ro,populateContainerManifest:()=>Bo,populateGooglePhotosAlbumId:()=>Fi,populateGooglePhotosAlbumMediaItems:()=>Gi,populateGooglePhotosAlbums:()=>Ri,populateGooglePhotosAuth:()=>Mi,populateGooglePhotosFlattenMediaItems:()=>Vi,populateGooglePhotosMediaItems:()=>ji,populateSocialAccessToken:()=>fo,populateSocialAuthUrl:()=>ho,populateSocialPageAccessToken:()=>mo,rangeSelect:()=>Lo,reconnectVimeoUser:()=>hi,rejectFiles:()=>ri,resetGooglePhotos:()=>Pi,resetRecentImages:()=>Ma,resetRecentVideos:()=>Ha,searchAssets:()=>Wo,searchAssetsDone:()=>qo,selectedImageMetadataUpdated:()=>Vo,setAssetContainerId:()=>fi,setCurrentCollectionView:()=>ci,setFlyoutVisible:()=>pi,showVimeoModal:()=>Wa,stageVideo:()=>mi,startFBLoading:()=>wo,startGPLoading:()=>Ti,startIGLoading:()=>yo,startVideoRefresh:()=>eo,stockImagesFetchGettyImageUrl:()=>Ca,stockImagesPopulate:()=>ao,stockImagesReset:()=>Ta,stockImagesSearch:()=>wa,stockImagesSearchNextPage:()=>ka,stockVideosPopulate:()=>oo,stockVideosReset:()=>xa,stockVideosSearch:()=>Aa,switchFBAlbum:()=>_o,switchFBPage:()=>bo,switchSocialProvider:()=>go,toggleFiv:()=>Qo,traceAuditEventEnd:()=>_i,traceAuditEventStart:()=>bi,track:()=>uo,trackPerfBegin:()=>Do,trackPerfEnd:()=>Mo,trackPerfEndDone:()=>Uo,trackSearchResults:()=>Yo,trackUsage:()=>Oi,updateCoverImage:()=>Xo,uploadFBVideo:()=>So,videoDelete:()=>Ja,videoProgress:()=>Qa,videoRefresh:()=>Ba,videoUpload:()=>Ua,videoUploadComplete:()=>Za,videosEdit:()=>Va,videosLoad:()=>ja,videosLoadMore:()=>Ga,videosSearch:()=>Fa});var c=C(8036),l=C.n(c),u=C(3431),d=C.n(u),p=C(3721),f=C(2687),m="social-ads";function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function _(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var I=C(7489),S=C.n(I),w=C(3496),T=C(7240),k=C(2345),x=C.n(k),L=C(1305),P=C.n(L),D=C(490),M=C(241),N=C.n(M),R="gc",U="venture",j="v7",F="ols",G="logo",V="generated_logo",B="images",H="header",K="facebook",z="instagram",W="google-photos",q="photoshoot",Y="generated",$="vimeo",X="wordpress",Q="documents",Z="over",J="wsc",ee="vnext-dashboard",te="website",ne="brand",re="getty-images",ae="ELASTIC_SEARCH",oe="GETTY_IMAGES_SEARCH",ie="VECTOR_SEARCH",se=[R,U,j,X],ce=[R,U,j,K,z,X,W,re],le=[].concat(ce,[$]),ue=[K,z,W],de={thumbnailSize:d().oneOfType([d().number,d().shape({width:d().number.isRequired,height:d().number.isRequired})]),minDimensions:d().shape({width:d().number,height:d().number}),preloadParams:d().string},pe={trackEvent:d().func,postLog:d().func,selectItem:d().func,intl:d().object.isRequired,selectedItems:d().array,statusMessage:d().element},fe={config:d().object},me=d().oneOf([R,F,G,H,$,Q]),he={id:d().string,altText:d().string,references:d().arrayOf(d().string),dify:d().object,originalFilename:d().string,filename:d().string,basePath:d().string,dimensions:d().shape({width:d().number.isRequired,height:d().number.isRequired}),size:d().number,updatedAt:d().string,createdAt:d().string,imageUrl:d().string.isRequired,mediaType:d().string.isRequired,sourceType:d().oneOf([me,d().arrayOf(me)])},ge="INDEX",ve="MY_UPLOADS",ye="GENERATED_IMAGES",Ee="OLS_UPLOADS",be="PHOTOSHOOT",_e="STOCK_MEDIA",Oe="MY_SITES",Ie="SOCIAL_MEDIA",Se="LOGO_UPLOADS",we="GENERATED_LOGOS",Te="COVER_UPLOADS",ke="DOCUMENTS_UPLOADS",Ce="OVER_UPLOADS",Ae="PRODUCTS",xe="VIDEO_UPLOADS",Le="IMAGE_UPLOADS",Pe="WSC_UPLOADS",De="IMAGE",Me="VIDEO",Ne="PDF",Re="WORD",Ue="EXCEL",je="UNKNOWN",Fe="PRODUCT",Ge="OTHER",Ve=[De,Me,Ne,Re,Ue,Ge],Be=[Ne,Re,Ue,Ge],He="vimeo",Ke="over",ze="vimeo_create",We="studio_bg_removal",qe="floating_upload",Ye="NEWEST",$e="OLDEST",Xe="application/postscript",Qe="text/csv",Ze="application/msword",Je="application/vnd.openxmlformats-officedocument.wordprocessingml.document",et="application/vnd.openxmlformats-officedocument.presentationml.presentation",tt="image/vnd.adobe.photoshop",nt="application/vnd.ms-excel",rt="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",at="image/heic",ot="image/heif",it="image/*",st="/",ct="ols",lt="logo",ut="downloads",dt=C(3232),pt=C.n(dt);function ft(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}function ht(e){var t="function"==typeof Map?new Map:void 0;return ht=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(mt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var a=new(e.bind.apply(e,r));return n&&E(a,n.prototype),a}(e,arguments,O(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),E(n,e)},ht(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yt=function(){return!!e})()}var Et=function(e){b(a,e);var t,n,r=(t=a,n=yt(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t,n=e.message,o=ft(e,["message"]);return h(this,a),t=r.call(this,n),Object.assign(y(t),vt({name:"ApiError"},o)),t}return a}(ht(Error));function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ot=function e(t){var n=t.method,r=void 0===n?"GET":n,a=t.headers,o=void 0===a?{}:a,i=t.withCredentials,s=void 0===i||i,c=_t(_t({},ft(t,["method","headers","withCredentials"])),{},{method:r,headers:o,withCredentials:s});return pt()(c).catch((function(t){var n,r;if((null!==(n=c.timeout)&&void 0!==n?n:0)>0&&(null!==(r=c.retry)&&void 0!==r?r:0)>0)return e(_t(_t({},c),{},{retry:c.retry-1,timeout:2*c.timeout}));!function(e){throw e.response?new Et(vt({source:"server",message:e.message},e.response)):e.request?new Et({source:"client",message:"Network Error"}):new Et({source:"unknown",message:"Unknown Error"})}(t)}))};var It="";function St(){return It||""}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kt=function(e){var t=e.headers,n=void 0===t?{}:t,r=ft(e,["headers"]),a=St();return a&&(n["BB-IM-Live-Version"]=a),Ot(Tt(Tt({},r),{},{headers:n}))};var Ct=function(e){return e.replace(/:\d+/,"")},At=function(e){return(0,T.isEmpty)(e)||0===e.indexOf("https")?e:"https:".concat(e)},xt=function(e){e=Ct(e);var t=function(e,t){if(!e)return null;if(!(t=t||(0,T.get)(window,"location.href","")))return null;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("assetApiShaVersion"),n=t?"".concat(t,"."):"";return"https://".concat(n,"asset.api.").concat(e,"/")},Lt=function(e){return"https://social-connect.api.".concat(Ct(e),"/v2")},Pt=function(e){return"https://websites.api.".concat(Ct(e),"/v2")},Dt=function(e){return"https://social.api.".concat(Ct(e))},Mt=function(e){return"https://social-sdk.api.".concat(Ct(e))},Nt=function(e){var t=e.rootDomain;return"https://social-auth.api.".concat(Ct(t),"/platforms/google/tokens")},Rt=function(e){return"https://social-v2.api.".concat(Ct(e),"/google/proxy/photoslibrary/v1")},Ut=function(e){var t=e.rootDomain,n=e.params,r=new URLSearchParams(n);return"".concat(Rt(t),"/albums/?").concat(r.toString())},jt=function(e){var t=e.rootDomain,n=e.params,r=new URLSearchParams(n);return"".concat(Rt(t),"/mediaItems:search?").concat(r.toString())},Ft=function(e){return e.replace(/^dev-|^test-|:\d+$/g,"")};function Gt(e){return(-1!==e.indexOf(".")&&e.split(".").pop()||"").toLowerCase()}var Vt=new Set(["jpg","jpeg","png","gif","webp","svg","tif","tiff"]);function Bt(e){var t=e.contentType,n=e.filename;if(!t&&(-1===n.indexOf("/")||n.split("/").shift()===ct)){var r=Gt(n);return r&&!Vt.has(r)?je:De}return/^(image\/(?!vnd.adobe.photoshop|heic|heif))/i.test(t)?De:/pdf$/i.test(t)?Ne:[Je,Ze].includes(t)?Re:/^video/i.test(t)?Me:[Qe,nt,rt].includes(t)?Ue:[et,tt,Xe,at,ot].includes(t)?Ge:je}function Ht(e){return!Array.isArray(e)||(0,T.isEmpty)(e)||e.every((function(e){return e.mediaType===De}))}function Kt(e){return Array.isArray(e)?!(0,T.isEmpty)(e)&&e.every((function(e){return e.mediaType===Me})):!!e&&e.mediaType===Me}function zt(e,t){return Array.isArray(e)&&1===e.length&&e[0]===t}function Wt(e){return Array.isArray(e)&&e.length>1&&e.includes(Me)}function qt(e){return(0,T.isEmpty)(e)?it:e.map((function(e){switch(e){case De:return it;case Ne:return"application/pdf";case Me:return"video/*";case Re:return".doc,.docx";case Ue:return[Qe,nt,rt].join(",");case Ge:return[et,tt,Xe,at,ot].join(",");default:return""}})).filter((function(e){return""!==e})).join(",")}var Yt="ImageManager",$t=function(e){return e[Yt]};function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qt=function(e,t){var n=t.config,r=n.mediaTypes,a=n.featureFlags;if(!r)return!0;var o=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(s(t={},ve,n.enableVimeo?[Me,De,Ne]:[De,Ne]),s(t,be,[De]),s(t,Oe,[De]),s(t,_e,[Me,De]),s(t,Ie,n.enableSocialMediaCollection?[De]:[]),s(t,Ee,[De]),s(t,Se,[De]),s(t,Ce,n.enableOverCollection?[De]:[]),s(t,ke,[Ne]),s(t,Te,[De]),s(t,xe,[Me]),s(t,Le,[De]),s(t,Pe,[De,Ne,Re]),s(t,ye,[De]),t)[e]}(e,a).filter((function(e){return-1!==r.indexOf(e)}));return!!o.length},Zt=function(e){var t=e.config.mediaTypes,n=e.appOptions,r=n.appName,a=n.placement;if(zt(t,Ne))return[ke];if(zt(t,Fe))return[Ae];if(r===ee&&"LOGO"===a)return[Se];var o=[];(function(e){return Qt(ve,e)})(e)&&o.push(ve),function(e){var t=e.config.mediaTypes;return t&&t.includes(De)}(e)&&o.push(Le),function(e){var t=e.config.removeSources,n=e.otherSites.hasOthersites;return-1===t.indexOf(Oe)&&n&&Qt(Oe,e)}(e)&&o.push(Oe),function(e){return-1===e.config.removeSources.indexOf(_e)&&Qt(_e,e)}(e)&&o.push(_e),function(e){return-1===e.config.removeSources.indexOf(Ie)&&Qt(Ie,e)}(e)&&o.push(Ie),function(e){var t=e.config.mediaTypes;return t&&t.length>1&&t.includes(Me)}(e)&&o.push(xe);var i=[Ee,Se,Te,ke,Ce,Pe,be].filter((function(t){return Qt(t,e)}));return o.concat(i)},Jt=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({activeCollections:Zt($t(e))},$t(e).collections)},en=C(945),tn=C.n(en);const nn=tn()(["IM_API_STATUS_CHANGE","IM_CONFIG_LOAD","IM_IMAGE_PROGRESS","IM_IMAGES_STAGE","IM_IMAGES_UPLOAD","IM_IMAGES_UPLOADED","IM_IMAGES_LOAD","IM_FILES_DELETE","IM_FILES_UPLOAD","IM_FILES_EXTERNALLY_UPLOADED","IM_IMAGES_DELETED","IM_IMAGES_COPY_INSERT","IM_IMAGES_SORT","IM_IMAGE_UPLOAD_FAIL","IM_OPEN_MODAL","IM_STOCK_IMAGES_POPULATE","IM_STOCK_IMAGES_SEARCH","IM_STOCK_IMAGES_RESET","IM_STOCK_IMAGES_NEXTPAGE","IM_STOCK_IMAGES_FETCH_GETTY_URLS","IM_STOCK_VIDEOS_POPULATE","IM_STOCK_VIDEOS_SEARCH","IM_STOCK_VIDEOS_RESET","IM_VIDEOS_UPLOAD","IM_VIDEOS_DELETE","IM_VIDEOS_LOAD","IM_VIDEOS_LOAD_MORE","IM_VIDEOS_EDIT","IM_VIDEO_REFRESH","IM_VIDEOS_SEARCH","IM_VIDEOS_GET_USER","IM_VIDEO_PROGRESS","IM_VIDEO_STAGE","IM_VIDEO_UPLOAD_COMPLETE","IM_VIDEOS_REFRESH_START","IM_VIDEOS_REFRESH_END","IM_MODAL_HIDE","IM_SWITCH_TAB","IM_INSERT_ITEMS","IM_PRE_INSERT_ITEMS","IM_SITE_IMAGES_LOAD","IM_VIEWABLE_SITES_NEXTPAGE","IM_GC_FIRST_SITE_IMAGES_LOAD","IM_TRACK","IM_SOCIAL_ACCESS_TOKEN_GET","IM_SOCIAL_ACCESS_TOKEN_POPULATE","IM_SOCIAL_PAGE_ACCESS_TOKEN_POPULATE","IM_SOCIAL_AUTH_URL_POPULATE","IM_SOCIAL_FB_PAGES_LOAD","IM_SOCIAL_FB_ALBUMS_LOAD","IM_SOCIAL_FB_PHOTOS_LOAD","IM_SOCIAL_FB_PAGE_SWITCH","IM_SOCIAL_FB_ALBUM_SWITCH","IM_SOCIAL_FB_LOAD_START","IM_SOCIAL_FB_LOAD_END","IM_SOCIAL_FB_VIDEO_UPLOAD","IM_SOCIAL_IG_LOAD_END","IM_SOCIAL_IG_LOAD_START","IM_SOCIAL_SWITCH_PROVIDER","IM_SOCIAL_IG_POST_LOAD","IM_PLAN_FEATURES_GET","IM_PERF_TRACK_BEGIN","IM_PERF_TRACK_END","IM_PERF_TRACK_END_DONE","IM_PERF_LOAD_VENTURE","IM_PERF_LOAD_VENTURE_END","IM_UPLOADED_IMAGES_POPULATE","IM_IMAGE_METADATA_UPDATE","IM_IMAGE_METADATA_UPDATED","IM_IMAGE_SELECTED_METADATA_UPDATED","IM_CONTAINER_MANIFEST_POPULATE","IM_PAGE_DIMENSIONS_GET","IM_DIMENSIONS_BATCH_RETRIEVED","IM_DONE_LOADING_DIMENSIONS","IM_ASSET_SEARCH","IM_ASSET_SEARCH_DONE","IM_ASSET_SEARCH_CLEAR","IM_TRACK_SEARCH_RESULTS","IM_UPDATE_COVER_IMAGE","IM_TOGGLE_FIV","IM_LOGGER_INFO","IM_LOGGER_WARN","IM_LOGGER_ERROR","IM_DEBUG","IM_SELECTION_MULTI_SELECT","IM_SELECTION_ITEM_CLICKED","IM_SELECTION_ITEM_SHIFT_CLICKED","IM_SELECTION_RANGE_SELECT","IM_SELECTION_CLEAR_ALL","IM_VIMEO_GET_LINK","IM_VIMEO_SHOW_MODAL","IM_VIMEO_HIDE_MODAL","IM_DRAG_DROP_FILES_REJECTED","IM_OPEN_UPLOAD_NOTIFICATION","IM_CLOSE_UPLOAD_NOTIFICATION","IM_OPEN_GETTY_IMAGE_SPINNER","IM_CLOSE_GETTY_IMAGE_SPINNER","IM_COLLECTION_VIEW_SET_CURRENT","IM_INSERT_PRODUCTS","IM_VIDEOS_TRIGGER_LOAD_MORE","IM_MIXED_ASSET_NEXT_PAGE","IM_SET_VIDEO_FLYOUT","IM_ASSET_CONTAINER_ID_SET","IM_VIDEOS_USER_RECONNECT","IM_IMAGES_RESET_RECENT","IM_VIDEOS_RESET_RECENT","IM_OPEN_VIDEO_SELECTOR_MODAL","IM_LOAD_OTHER_MEDIA","IM_SPAQ_INIT","IM_SPAQ_LOG","IM_SPAQ_LOG_DONE","IM_TRACE_AUDIT_EVENT_START","IM_TRACE_AUDIT_EVENT_END","IM_TRACK_USAGE","IM_MONITOR_IMAGE_PROGRESS","IM_VENTURE_INFERRED_DATA_GET","IM_ON_IMG_RENDER_ERROR","IM_SOCIAL_GOOGLE_PHOTOS_LOAD_START","IM_SOCIAL_GOOGLE_PHOTOS_LOAD_END","IM_SOCIAL_GOOGLE_PHOTOS_AUTH_URL_GET","IM_SOCIAL_GOOGLE_TOKENS_GET","IM_SOCIAL_GOOGLE_TOKENS_DELETE","IM_SOCIAL_GOOGLE_PHOTOS_RESET","IM_SOCIAL_GOOGLE_PHOTOS_DISMISS_DISCONNECT_ALERT","IM_SOCIAL_GOOGLE_SCOPES_GET","IM_SOCIAL_GOOGLE_PHOTOS_AUTH_POPULATE","IM_SOCIAL_GOOGLE_PHOTOS_ALBUMS_GET","IM_SOCIAL_GOOGLE_PHOTOS_ALBUMS_POPULATE","IM_SOCIAL_GOOGLE_PHOTOS_MEDIA_ITEMS_GET","IM_SOCIAL_GOOGLE_PHOTOS_MEDIA_ITEMS_POPULATE","IM_SOCIAL_GOOGLE_PHOTOS_ALBUM_ID_POPULATE","IM_SOCIAL_GOOGLE_PHOTOS_ALBUM_MEDIA_ITEMS_POPULATE","IM_SOCIAL_GOOGLE_PHOTOS_FLATTEN_MEDIA_ITEMS_POPULATE"]);var rn=nn.IM_API_STATUS_CHANGE,an=nn.IM_ASSET_SEARCH,on=nn.IM_ASSET_SEARCH_DONE,sn=nn.IM_ASSET_SEARCH_CLEAR,cn=nn.IM_TRACK_SEARCH_RESULTS,ln=nn.IM_CONTAINER_MANIFEST_POPULATE,un=nn.IM_DIMENSIONS_BATCH_RETRIEVED,dn=nn.IM_DONE_LOADING_DIMENSIONS,pn=nn.IM_GC_FIRST_SITE_IMAGES_LOAD,fn=nn.IM_IMAGE_METADATA_UPDATED,mn=nn.IM_IMAGE_SELECTED_METADATA_UPDATED,hn=nn.IM_IMAGE_PROGRESS,gn=nn.IM_IMAGE_UPLOAD_FAIL,vn=nn.IM_IMAGES_COPY_INSERT,yn=nn.IM_IMAGES_RESET_RECENT,En=nn.IM_IMAGES_LOAD,bn=nn.IM_FILES_DELETE,_n=nn.IM_FILES_UPLOAD,On=nn.IM_FILES_EXTERNALLY_UPLOADED,In=nn.IM_IMAGES_DELETED,Sn=nn.IM_IMAGES_UPLOAD,wn=nn.IM_VIDEOS_UPLOAD,Tn=nn.IM_VIDEO_STAGE,kn=nn.IM_VIDEOS_DELETE,Cn=nn.IM_VIDEOS_LOAD,An=nn.IM_VIDEOS_LOAD_MORE,xn=nn.IM_VIDEOS_TRIGGER_LOAD_MORE,Ln=nn.IM_VIDEOS_EDIT,Pn=nn.IM_VIDEO_REFRESH,Dn=nn.IM_VIDEOS_GET_USER,Mn=nn.IM_VIDEO_PROGRESS,Nn=nn.IM_VIDEO_UPLOAD_COMPLETE,Rn=nn.IM_VIDEOS_REFRESH_START,Un=nn.IM_VIDEOS_REFRESH_END,jn=nn.IM_VIDEOS_SEARCH,Fn=nn.IM_VIDEOS_USER_RECONNECT,Gn=nn.IM_VIDEOS_RESET_RECENT,Vn=nn.IM_IMAGES_UPLOADED,Bn=nn.IM_IMAGES_SORT,Hn=nn.IM_IMAGES_STAGE,Kn=nn.IM_PRE_INSERT_ITEMS,zn=nn.IM_INSERT_PRODUCTS,Wn=nn.IM_LOGGER_INFO,qn=nn.IM_LOGGER_WARN,Yn=nn.IM_LOGGER_ERROR,$n=nn.IM_DEBUG,Xn=nn.IM_MODAL_HIDE,Qn=nn.IM_OPEN_MODAL,Zn=nn.IM_PAGE_DIMENSIONS_GET,Jn=nn.IM_PERF_TRACK_BEGIN,er=nn.IM_PERF_TRACK_END,tr=nn.IM_PERF_TRACK_END_DONE,nr=nn.IM_PERF_LOAD_VENTURE,rr=nn.IM_PERF_LOAD_VENTURE_END,ar=nn.IM_PLAN_FEATURES_GET,or=nn.IM_SITE_IMAGES_LOAD,ir=nn.IM_SOCIAL_ACCESS_TOKEN_GET,sr=nn.IM_SOCIAL_ACCESS_TOKEN_POPULATE,cr=nn.IM_SOCIAL_PAGE_ACCESS_TOKEN_POPULATE,lr=nn.IM_SOCIAL_AUTH_URL_POPULATE,ur=nn.IM_SOCIAL_FB_ALBUM_SWITCH,dr=nn.IM_SOCIAL_FB_ALBUMS_LOAD,pr=nn.IM_SOCIAL_FB_LOAD_END,fr=nn.IM_SOCIAL_FB_LOAD_START,mr=nn.IM_SOCIAL_FB_PAGE_SWITCH,hr=nn.IM_SOCIAL_FB_PHOTOS_LOAD,gr=nn.IM_SOCIAL_FB_VIDEO_UPLOAD,vr=nn.IM_SOCIAL_IG_LOAD_END,yr=nn.IM_SOCIAL_IG_LOAD_START,Er=nn.IM_SOCIAL_SWITCH_PROVIDER,br=nn.IM_SOCIAL_IG_POST_LOAD,_r=nn.IM_STOCK_IMAGES_NEXTPAGE,Or=nn.IM_STOCK_IMAGES_FETCH_GETTY_URLS,Ir=nn.IM_STOCK_IMAGES_POPULATE,Sr=nn.IM_STOCK_IMAGES_SEARCH,wr=nn.IM_STOCK_IMAGES_RESET,Tr=nn.IM_STOCK_VIDEOS_POPULATE,kr=nn.IM_STOCK_VIDEOS_SEARCH,Cr=nn.IM_STOCK_VIDEOS_RESET,Ar=nn.IM_TOGGLE_FIV,xr=nn.IM_TRACK,Lr=nn.IM_UPDATE_COVER_IMAGE,Pr=nn.IM_VIEWABLE_SITES_NEXTPAGE,Dr=nn.IM_SELECTION_MULTI_SELECT,Mr=nn.IM_SELECTION_ITEM_SHIFT_CLICKED,Nr=nn.IM_SELECTION_CLEAR_ALL,Rr=nn.IM_SELECTION_ITEM_CLICKED,Ur=nn.IM_SELECTION_RANGE_SELECT,jr=nn.IM_VIMEO_GET_LINK,Fr=nn.IM_VIMEO_SHOW_MODAL,Gr=nn.IM_VIMEO_HIDE_MODAL,Vr=nn.IM_DRAG_DROP_FILES_REJECTED,Br=nn.IM_OPEN_UPLOAD_NOTIFICATION,Hr=nn.IM_CLOSE_UPLOAD_NOTIFICATION,Kr=nn.IM_OPEN_GETTY_IMAGE_SPINNER,zr=nn.IM_CLOSE_GETTY_IMAGE_SPINNER,Wr=nn.IM_COLLECTION_VIEW_SET_CURRENT,qr=nn.IM_MIXED_ASSET_NEXT_PAGE,Yr=nn.IM_SET_VIDEO_FLYOUT,$r=nn.IM_ASSET_CONTAINER_ID_SET,Xr=nn.IM_OPEN_VIDEO_SELECTOR_MODAL,Qr=nn.IM_LOAD_OTHER_MEDIA,Zr=nn.IM_SPAQ_INIT,Jr=nn.IM_SPAQ_LOG,ea=nn.IM_SPAQ_LOG_DONE,ta=nn.IM_TRACE_AUDIT_EVENT_START,na=nn.IM_TRACE_AUDIT_EVENT_END,ra=nn.IM_TRACK_USAGE,aa=nn.IM_VENTURE_INFERRED_DATA_GET,oa=nn.IM_ON_IMG_RENDER_ERROR,ia=nn.IM_SOCIAL_GOOGLE_PHOTOS_LOAD_START,sa=nn.IM_SOCIAL_GOOGLE_PHOTOS_LOAD_END,ca=nn.IM_SOCIAL_GOOGLE_PHOTOS_AUTH_URL_GET,la=nn.IM_SOCIAL_GOOGLE_TOKENS_GET,ua=nn.IM_SOCIAL_GOOGLE_TOKENS_DELETE,da=nn.IM_SOCIAL_GOOGLE_PHOTOS_RESET,pa=nn.IM_SOCIAL_GOOGLE_PHOTOS_DISMISS_DISCONNECT_ALERT,fa=nn.IM_SOCIAL_GOOGLE_SCOPES_GET,ma=nn.IM_SOCIAL_GOOGLE_PHOTOS_AUTH_POPULATE,ha=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUMS_GET,ga=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUMS_POPULATE,va=nn.IM_SOCIAL_GOOGLE_PHOTOS_MEDIA_ITEMS_POPULATE,ya=nn.IM_SOCIAL_GOOGLE_PHOTOS_MEDIA_ITEMS_GET,Ea=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUM_ID_POPULATE,ba=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUM_MEDIA_ITEMS_POPULATE,_a=nn.IM_SOCIAL_GOOGLE_PHOTOS_FLATTEN_MEDIA_ITEMS_POPULATE,Oa=function(e){return{type:Qn,payload:e}},Ia=function(e){return{type:Xr,payload:e}},Sa=function(e,t){return{type:rn,payload:{key:e,status:t,payload:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},requestArgs:arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]}}},wa=function(e){return{type:Sr,payload:{query:e}}},Ta=function(){return{type:wr}},ka=function(e){return{type:_r,payload:{nextPageUrl:e}}},Ca=function(e,t,n){return{type:Or,payload:[e,t,n]}},Aa=function(e){return{type:kr,payload:{query:e}}},xa=function(){return{type:Cr}},La=function(e){return{type:Hn,payload:e}},Pa=function(e){return{type:Sn,payload:e}},Da=function(){return{type:En}},Ma=function(){return{type:yn}},Na=function(e){return{type:_n,payload:e}},Ra=function(e){return{type:On,payload:e}},Ua=function(e){return{type:wn,payload:e}},ja=function(){return{type:Cn}},Fa=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).search;return{type:jn,payload:{search:e}}},Ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=e.pageSize,r=e.search;return{type:An,payload:{page:t,pageSize:n,search:r}}},Va=function(e){return{type:Ln,payload:e}},Ba=function(e){return{type:Pn,payload:e}},Ha=function(){return{type:Gn}},Ka=function(){return{type:Dn}},za=function(e){var t=e.redirectAction,n=e.videoId;return{type:jr,payload:{redirectAction:t,videoId:n}}},Wa=function(e){return{type:Fr,payload:e}},qa=function(){return{type:Gr}},Ya=function(e){return{type:bn,payload:e}},$a=function(e){return{type:Bn,payload:e}},Xa=function(e){return{type:hn,payload:e}},Qa=function(e){return{type:Mn,payload:e}},Za=function(e){return{type:Nn,payload:e}},Ja=function(e){return{type:kn,payload:e}},eo=function(){return{type:Rn}},to=function(){return{type:Un}},no=function(e){return{type:gn,payload:e}},ro=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).continueToDashboardClicked;return{type:Xn,payload:{continueToDashboardClicked:void 0!==e&&e}}},ao=function(e){return{type:Ir,payload:e}},oo=function(e){return{type:Tr,payload:e}},io=function(e){var t=e.selectedItems,n=e.placement,r=e.fromPostLogo,a=void 0!==r&&r,o=e.silentInsert;return{type:Kn,payload:{selectedItems:t,placement:n,fromPostLogo:a,silentInsert:void 0!==o&&o}}},so=function(e){return{type:or,payload:e}},co=function(e){return{type:vn,payload:e}},lo=function(){return{type:pn}},uo=function(e){return{type:xr,payload:e}},po=function(e){return{type:ir,socialProvider:e}},fo=function(e){var t=e.socialProvider,n=e.accessToken;return{type:sr,payload:{socialProvider:t,accessToken:n}}},mo=function(e){var t=e.socialProvider,n=e.pageAccessToken;return{type:cr,payload:{socialProvider:t,pageAccessToken:n}}},ho=function(e){var t=e.socialProvider,n=e.authUrl;return{type:lr,payload:{socialProvider:t,authUrl:n}}},go=function(e){return{type:Er,payload:{socialProvider:e}}},vo=function(){return{type:br}},yo=function(){return{type:yr}},Eo=function(){return{type:vr}},bo=function(e){return{type:mr,payload:e}},_o=function(e){return{type:ur,payload:e}},Oo=function(e){return{type:dr,payload:e}},Io=function(e){return{type:hr,payload:e}},So=function(e){return{type:gr,payload:e}},wo=function(){return{type:fr}},To=function(){return{type:pr}},ko=function(){return{type:ar}},Co=function(e){return{type:Rr,payload:e}},Ao=function(){return{type:Nr}},xo=function(e){var t=e.dataSource,n=e.item,r=e.selectionLimit,a=e.enableDelete;return{type:Mr,payload:{item:n,dataSource:t,selectionLimit:r,enableDelete:a}}},Lo=function(e){var t=e.items,n=e.selectionLimit,r=e.allowUnlimitedSelect;return{type:Ur,payload:{items:t,selectionLimit:n,allowUnlimitedSelect:r}}},Po=function(e){return{type:Dr,payload:e}},Do=function(e,t){return{type:Jn,payload:{eventName:e,meta:t}}},Mo=function(e,t){return{type:er,payload:{eventName:e,meta:t}}},No=function(){return{type:nr}},Ro=function(){return{type:rr}},Uo=function(){return{type:tr}},jo=function(e){return{type:Vn,payload:e}},Fo=function(e){return{type:In,payload:e}},Go=function(e){return{type:fn,payload:e}},Vo=function(e){return{type:mn,payload:e}},Bo=function(e){return{type:ln,payload:e}},Ho=function(e){return{type:Zn,payload:e}},Ko=function(e){return{type:un,payload:e}},zo=function(){return{type:dn}},Wo=function(e){return{type:an,payload:e}},qo=function(e){return{type:on,payload:e}},Yo=function(e){return{type:cn,payload:e}},$o=function(){return{type:sn}},Xo=function(e){return{type:Lr,payload:e}},Qo=function(e){return{type:Ar,payload:e}},Zo=function(e){var t=e.message,n=e.meta;return{type:Wn,payload:{message:t,meta:n}}},Jo=function(e){var t=e.error,n=e.message,r=e.meta;return{type:qn,payload:{error:t,message:n,meta:r}}},ei=function(e){var t=e.error,n=e.message,r=e.meta;return{type:Yn,payload:{error:t,message:n,meta:r}}},ti=function(e){return{type:$n,payload:e}},ni=function(){return{type:Pr}},ri=function(e){return{type:Vr,payload:e}},ai=function(){return{type:Br}},oi=function(){return{type:Hr}},ii=function(e){return{type:Kr,payload:e}},si=function(){return{type:zr}},ci=function(e){return{type:Wr,payload:e}},li=function(e){return{type:zn,products:e}},ui=function(){return{type:xn}},di=function(e){return{type:qr,payload:{pageId:e}}},pi=function(e){return{type:Yr,payload:e}},fi=function(e){return{type:$r,payload:{assetContainerId:e}}},mi=function(e){return{type:Tn,payload:e}},hi=function(){return{type:Fn}},gi=function(){return{type:Qr}},vi=function(e){return{type:Zr,payload:e}},yi=function(){return{type:Jr}},Ei=function(){return{type:ea}},bi=function(e){return{type:ta,payload:e}},_i=function(e){return{type:na,payload:e}},Oi=function(){return{type:ra}},Ii=function(e){return{type:"IM_MONITOR_IMAGE_PROGRESS",payload:e}},Si=function(e){return{type:aa,ventureId:e}},wi=function(e){return{type:oa,payload:e}},Ti=function(){return{type:ia}},ki=function(){return{type:sa}},Ci=function(){return{type:la}},Ai=function(){return{type:ua}},xi=function(){return{type:fa}},Li=function(){return{type:ca}},Pi=function(e){return{type:da,payload:e}},Di=function(){return{type:pa}},Mi=function(e){return{type:ma,payload:e}},Ni=function(e){return{type:ha,payload:e}},Ri=function(e){return{type:ga,payload:e}},Ui=function(e){return{type:ya,payload:e}},ji=function(e){return{type:va,payload:e}},Fi=function(e){return{type:Ea,payload:e}},Gi=function(e){return{type:ba,payload:e}},Vi=function(e){return{type:_a,payload:e}},Bi=C(921),Hi=C.n(Bi),Ki=C(9123),zi=C.n(Ki),Wi=C(8022),qi=C.n(Wi),Yi=C(3939),$i=C.n(Yi),Xi=C(5799),Qi=C.n(Xi),Zi=C(2944),Ji=C.n(Zi),es=C(6301),ts=C.n(es),ns=C(6934),rs=C.n(ns),as=C(7312),os=C.n(as),is=C(2283),ss=C.n(is),cs=C(4885),ls=C.n(cs),us=C(4645),ds=C.n(us);const ps=C(4758).A,fs=C(4742).A;var ms=C(4625),hs=C.n(ms),gs=C(342),vs=C.n(gs);function ys(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Es=C(8171),bs=C.n(Es);var _s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Ss=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=Is(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,a=e.onResize;if(r._parentNode){var o=r._parentNode.offsetHeight||0,i=r._parentNode.offsetWidth||0,s=window.getComputedStyle(r._parentNode)||{},c=parseInt(s.paddingLeft,10)||0,l=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,p=o-u-d,f=i-c-l;(!t&&r.state.height!==p||!n&&r.state.width!==f)&&(r.setState({height:o-u-d,width:i-c-l}),a({height:o,width:i}))}},r._setRef=function(e){r._autoSizer=e},Is(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),_s(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:C.g;var n,r,a="undefined"!=typeof document&&document.attachEvent;if(!a){var o=(r=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},function(e){return r(e)}),i=(n=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout,function(e){return n(e)}),s=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,a=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=n.offsetWidth+1+"px",a.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},c=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;s(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=o((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},l=!1,u="",d="animationstart",p="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(l=!0),!1===l)for(var h=0;h<p.length;h++)if(void 0!==m.style[p[h]+"AnimationName"]){u="-"+p[h].toLowerCase()+"-",d=f[h],l=!0;break}var g="resizeanim",v="@"+u+"keyframes "+g+" { from { opacity: 0; } to { opacity: 0; } } ",y=u+"animation: 1ms "+g+"; "}return{addResizeListener:function(n,r){if(a)n.attachEvent("onresize",r);else{if(!n.__resizeTriggers__){var o=n.ownerDocument,i=t.getComputedStyle(n);i&&"static"==i.position&&(n.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var n=(v||"")+".resize-triggers { "+(y||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=t.head||t.getElementsByTagName("head")[0],a=t.createElement("style");a.id="detectElementResize",a.type="text/css",null!=e&&a.setAttribute("nonce",e),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(t.createTextNode(n)),r.appendChild(a)}}(o),n.__resizeLast__={},n.__resizeListeners__=[],(n.__resizeTriggers__=o.createElement("div")).className="resize-triggers",n.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',n.appendChild(n.__resizeTriggers__),s(n),n.addEventListener("scroll",c,!0),d&&(n.__resizeTriggers__.__animationListener__=function(e){e.animationName==g&&s(n)},n.__resizeTriggers__.addEventListener(d,n.__resizeTriggers__.__animationListener__))}n.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(a)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",c,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.disableHeight,a=e.disableWidth,o=e.style,i=this.state,s=i.height,l=i.width,u={overflow:"visible"},d={},p=!1;return r||(0===s&&(p=!0),u.height=0,d.height=s),a||(0===l&&(p=!0),u.width=0,d.width=l),(0,c.createElement)("div",{className:n,ref:this._setRef,style:Os({},u,o)},!p&&t(d))}}]),t}(c.PureComponent);Ss.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};const ws=Ss;var Ts=C(6732),ks=C.n(Ts);function Cs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cs=function(){return!!e})()}var As=function(e){b(a,e);var t,n,r=(t=a,n=Cs(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){var e;return h(this,a),(e=r.apply(this,arguments)).state={hasScrolled:!1},e.scrollableParent=null,e.containerRef=e.containerRef.bind(y(e)),e.handleScroll=e.handleScroll.bind(y(e)),e.throttledScrollHandler=(0,T.throttle)(e.handleScroll,100),e}return v(a,[{key:"parentContainer",value:function(){return this.props.enableFullScroll?window:document.querySelector("div.image-modal div.modal.fade div.modal-body")}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.throttledSetHeight);var e=this.parentContainer();e&&e.addEventListener("scroll",this.throttledScrollHandler,{passive:!0})}},{key:"componentWillUnmount",value:function(){var e=this.parentContainer();e&&e.removeEventListener("scroll",this.throttledScrollHandler,{passive:!0}),window.removeEventListener("resize",this.throttledSetHeight)}},{key:"containerRef",value:function(e){e?(this.scrollableParent=e,this.scrollableParent.addEventListener("scroll",this.throttledScrollHandler,{passive:!0})):this.scrollableParent&&(this.scrollableParent.removeEventListener("scroll",this.throttledScrollHandler,{passive:!0}),this.scrollableParent=null)}},{key:"handleScroll",value:function(){var e=this.props,t=e.onScrollEnd,n=e.hasGalleryOverlay,r=e.enableFullScroll;if(!n&&(r||this.scrollableParent)){var a=r?this.scrollableParent.getBoundingClientRect().top<150:this.parentContainer().scrollTop>300;this.setState({hasScrolled:a}),this.isScrollCloseToEnd()&&t&&t()}}},{key:"isScrollCloseToEnd",value:function(){var e,t,n=this.props,r=n.scrollEndTriggerDistance,a=n.enableFullScroll,o=this.scrollableParent;if(!a&&!o)return!1;if(o){var i=o.getBoundingClientRect();e=i.top,t=i.height}var s=document,c=s.documentElement,l=s.documentElement.clientHeight;return(a?window.scrollY:Math.abs(e))+l>=(a?c.scrollHeight:t)-r}},{key:"renderBackToTopButton",value:function(){var e=this,t=this.state.hasScrolled,n=this.props.onBackToTopButtonClick;return l().createElement("div",{className:vs()("scrolltop-container header-position",{"has-scrolled":t})},l().createElement("div",{className:"scrolltop-button primary",onClick:function(){n?n():e.parentContainer().scrollTo({top:0,left:0,behavior:"smooth"})}},l().createElement("span",{className:"icon-chevron-up"},l().createElement(ks(),{height:14,width:14})),l().createElement(p.FormattedMessage,{id:"BACK_TO_TOP"})))}},{key:"render",value:function(){var e=this.props,t=e.hideBackToTop,n=e.className,r=e.dataAid,a=e.children,o=e.style;return l().createElement("ul",{ref:this.containerRef,className:n,"data-aid":r,style:o},!t&&this.renderBackToTopButton(),l().Children.toArray(a))}}]),a}(c.Component);As.propTypes={onScrollEnd:d().func,scrollEndTriggerDistance:d().number,children:d().array,totalCount:d().number,containerElementType:d().string,className:d().string,style:d().object,dataAid:d().string,enableFullScroll:d().bool,hasGalleryOverlay:d().bool,hideBackToTop:d().bool},As.defaultProps={scrollEndTriggerDistance:50};const xs=As;var Ls=C(6322),Ps=C.n(Ls),Ds=C(7584),Ms=C.n(Ds),Ns=C(7984),Rs=C.n(Ns);const Us=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=navigator.userAgent,n=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1;return e?!!window.MSInputMethodContext&&!!document.documentMode||/Edge/.test(t):n};var js="available",Fs="uploading_error",Gs="refresh_error",Vs=200,Bs=175,Hs={},Ks=null;function zs(e){var t=e.url,n=void 0===t?"":t,r=e.width,a=e.height;if(!r&&!a)return n;if(!new RegExp(function(e){return(0,T.get)(Hs,e)}("urls.isteamregex")).test(n))return n;var o=[];return r&&o.push("w:".concat(r)),a&&o.push("h:".concat(a)),"".concat(n,"/:/rs=").concat(o.join(","),",m")}function Ws(e){return zs({url:e,height:Bs})}const qs=function(e){return!e||-1!==e.indexOf("default_")};var Ys=640,$s=768;function Xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:992;return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||Qs(e)}function Qs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:992;return!(!window||!window.matchMedia||window.matchMedia("(min-width: ".concat(e,"px)")).matches)}function Zs(e){var n=e.styles,r=e.hasIrregularDims,a=e.src,o=e.dataAid,i=e.draggable,s=e.onThumbnailClick,c=e.isSelected,u=e.renderDarkOverlay,d=e.isImage,p=e.onImageError,f={src:a,draggable:i,"data-testid":"thumbnail"};return r?l().createElement("div",{onClick:s,style:n,"data-aid":o,className:vs()("irregular-container",{"primary-border":c})},u&&l().createElement("div",{className:"asset-overlay no-gradient"}),l().createElement("img",t({className:vs()({"active-selector-item":c,"checkered-background":d})},f,{alt:"",onError:p}))):l().createElement("div",{className:"thumbnail-img-container",onClick:s,"data-aid":o},u&&l().createElement("div",{className:"asset-overlay no-gradient"}),l().createElement("img",t({key:Date.now(),role:"presentation",style:n,className:vs()("img-container",{"active-selector-item primary-border":c,"checkered-background":d})},f,{alt:"",onError:p})))}Zs.propTypes={styles:d().object,hasIrregularDims:d().bool,imgProps:d().object,onThumbnailClick:d().func,isSelected:d().bool,isImage:d().bool,src:d().string,draggable:d().bool,dataAid:d().string,onImageError:d().func};const Js=Zs;function ec(e){var t=e.id,n=e.src,r=e.productName,a=e.productPrice,o=e.salePrice,i=e.onThumbnailClick,s=e.isSelected;return l().createElement("div",{className:vs()("product-card-container",{"selected-product primary-border":s}),onClick:i},l().createElement("div",{className:vs()("product-selected-indicator primary-background",{"is-active":s})},l().createElement(Ms(),{fill:"white"})),l().createElement("div",{className:"product-image-container"},l().createElement("img",{className:"product-image",alt:t,src:n})),l().createElement("div",{className:"product-info-container"},l().createElement("div",{className:"product-name"},r),l().createElement("div",{className:"product-price primary"},o?l().createElement(l().Fragment,null,l().createElement("strike",{className:"gray-light"},a)," ",o):a)))}ec.propTypes={id:d().string,src:d().string.isRequired,productName:d().string.isRequired,productPrice:d().string.isRequired,onThumbnailClick:d().func,isSelected:d().bool};const tc=ec;function nc(e){var t=e.label,n=e.icon,r=e.dark,a=e.alignLeft,o=n;return l().createElement("div",{className:vs()("media-label-container",{"align-left":a}),"data-testid":"media-type-label"},l().createElement("div",{className:vs()("media-type-label",{dark:r})},t),n&&!a&&l().createElement(o,{height:20,width:20,fill:r?"black":"white"}))}nc.propTypes={label:d().string.isRequired,icon:d().elementType,dark:d().bool},nc.defaultProps={dark:!1};const rc=nc;var ac=C(9211),oc=C.n(ac),ic="embed",sc="modal";function cc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cc=function(){return!!e})()}var lc=function(e){b(a,e);var t,n,r=(t=a,n=cc(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e,t=this.props,n=t.mediaType,r=t.filename,a=t.hideMediaTypeLabel,o=t.renderMode,i=t.isProcessedVideo,s=t.isErroredVideo,c=n===Me,u=c?rs():os(),d=c&&!Xs($s)||!c;return e=i&&!Xs($s)?l().createElement("div",{className:"ready-tag primary"},l().createElement("span",null,l().createElement(Ms(),{height:14,width:14,fill:"currentColor"})),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:"READY_TO_USE"}))):s?l().createElement("div",{className:"error-message"},l().createElement("div",null,l().createElement(oc(),{className:"text-error"}),l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}))),!Xs($s)&&l().createElement("p",null,l().createElement(p.FormattedMessage,{id:"REMOVE_AND_RETRY_VIDEO"}))):c?l().createElement("div",null,l().createElement("div",{className:"processing-spinner"},l().createElement(x(),{size:"xs",inline:!0}),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:"PROCESSING"}))),l().createElement("div",{className:"transcoding-overlay"},l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:"VIDEO_NOT_READY"})),!Xs($s)&&l().createElement("p",null,l().createElement(p.FormattedMessage,{id:"WAIT_FOR_VIDEO"})))):null,l().createElement("div",{className:vs()("asset-loading",{"video-placeholder":c,"product-background":o===ic})},!a&&!c&&l().createElement(rc,{label:n,dark:!0}),!s&&l().createElement("div",{className:"loading-message"},d&&l().createElement("span",{className:"asset-icon"},l().createElement(u,{fill:"#000"})),l().createElement("p",null,r)),e)}}]),a}(l().Component);lc.propTypes={mediaType:d().string.isRequired,filename:d().string.isRequired,renderMode:d().string,hideMediaTypeLabel:d().bool,isProcessedVideo:d().bool,isErroredVideo:d().bool},lc.defaultProps={hideMediaTypeLabel:!1};const uc=lc;function dc(e){var t=e.docType,n=e.isSelected,r=e.className,a=e.filename,o=e.style;return l().createElement("div",{style:o,className:vs()("pdf-viewer",r,{"primary-border":n})},l().createElement(uc,{filename:a,hideMediaTypeLabel:!0}),l().createElement(l().Fragment,null,l().createElement("div",{className:"asset-overlay"}),l().createElement(rc,{label:t,icon:os()})))}dc.propTypes={docType:d().string.isRequired,filename:d().string.isRequired,className:d().string,isSelected:d().bool,style:d().object};const pc=dc;var fc="icon",mc="link",hc=C(1828),gc=C.n(hc),vc=C(3434),yc=C.n(vc);function Ec(e){var t=e.type,n=e.connected,r=e.trackEvent,a=e.openEditLink,o=e.showVimeoModal,i=function(){n?a():o();var e="IM_TRACK_VIMEO_EDIT_CTA_".concat(t,"_CLICK").toUpperCase();r(e)};return t===mc?l().createElement("span",{className:"primary vimeo-cta-link-button",onClick:i,"data-aid":"vimeo_edit_cta_linkbutton"},l().createElement(p.FormattedMessage,{id:"VIDEO_SETTINGS"}),l().createElement(gc(),{width:18,height:18,fill:"currentColor"})):l().createElement("span",{className:"settings-icon product-dark-border",onClick:i,"data-aid":"vimeo_edit_cta_icon"},l().createElement(yc(),{fill:"currentColor"}))}Ec.propTypes={type:d().oneOf([fc,mc]),trackEvent:d().func,connected:d().bool,showVimeoModal:d().func,openEditLink:d().func};const bc=Ec;function _c(e,t){return e===t}var Oc=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=0,i=r.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),c=e.apply(void 0,[function(){return o++,i.apply(null,arguments)}].concat(n)),l=e((function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return c.apply(null,e)}));return l.resultFunc=i,l.dependencies=s,l.recomputations=function(){return o},l.resetRecomputations=function(){return o=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_c,n=null,r=null;return function(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));function Ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Sc(Sc(Sc({},(0,T.pick)(t,["intl","enableDelete","selectionLimit","preloadParams","minDimensions"])),n),{},{item:e})}function Tc(e){return e.basePath===ct}function kc(e){if(e){var t=[],n=[],r=[];return e.forEach((function(e){e.mediaType===je?r.push(e):(function(e){return e.basePath!==ct||e.sources&&e.sources.ols}(e)&&n.push(e),Tc(e)&&t.push(e))})),{gcImages:n,olsImages:t,notSupported:r}}}const Cc=function(e){return!!Array.isArray(e)&&((0,T.isEmpty)(e)||e.every((function(e){return Object.prototype.hasOwnProperty.call(e,"id")})))};var Ac=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=$t(e).search,r=(void 0===n?{}:n).searchResults,a=[],o=(0,T.get)($t(e),t,[]),i=t.join(".");if(r&&r[i]&&r[i].size){var s=r[i];a=(Array.isArray(o)?o:Object.values(o)).filter((function(e){return s.has(e.id)}))}return{searchResultDocuments:a}};const xc=function(e,t,n){return ys((Array.isArray(e)?e:(0,T.toArray)(e)).sort((function(e,r){return a=r,o=t===Ye,i=new Date(n(e)),s=new Date(n(a)),o?s-i:i-s;var a,o,i,s})))},Lc=function(e){var t=e.references,n=void 0===t?[]:t,r=e.metadata,a=(r=void 0===r?{}:r).references,o=void 0===a?[]:a;return[].concat(ys(n),ys(o))};function Pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pc(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mc=function(e){return $t(e).planFeatures},Nc=function(e){return $t(e).appContext},Rc=function(e){var t=$t(e).config,n=void 0===t?{}:t,r=(Mc(e)||{}).planFeatures,a=n.websiteId,o=n.accountId,i=n.ventureId,s=n.websiteType,c=r&&"disabled"===r.website,l=i||a||o;return Object.assign(n,{isWebsitelessContainer:!a,containerId:l,inWebsiteContext:Boolean(a&&"external"!==s&&!c)})},Uc=function(e){return $t(e).appOptions},jc=function(e){return $t(e).images},Fc=function(e){return $t(e).videos},Gc=function(e){return $t(e).products},Vc=function(e){return $t(e).onboarding},Bc=function(e){return $t(e).collections},Hc=function(e){var t=function(e){return $t(e).stockImages}(e);return{stockImages:t.stock,stockTotalCount:t.stockTotalCount,isLoadingNextStock:t.isLoadingNextStock,isLoadingStock:t.isLoadingStock,isSearching:t.isSearching,stockNextPageUrl:t.stockNextPageUrl,stockImageQuery:t.stockImageQuery,pathToDataSource:[t.key,"stock"]}},Kc=function(e){var t=jc(e),n=t.uploaded,r=t.uploadedImagesFetched,a=t.recentUploadedImages,o=t.stagingCount,i=t.staged,s=t.key,c=t.hasExistingSelection,l=t.isSavingMetadata,u=t.showSlowUploadNotification,d=t.gettyImageSpinnerType,p=t.isLoadingUploadedImages,f=t.deletedAllUploaded,m=[s,"uploaded"],h=function(e){var t=e.state,n=e.dataSource,r=void 0===n?[]:n,a=e.pathToDataSource,o=void 0===a?[]:a,i=$t(t).search,s=void 0===i?{}:i,c=s.searchText,l=void 0===c?"":c,u=s.pendingSearchText;if(!l)return{imagesAfterSearch:r,pendingSearchText:u,searchText:l};var d=Ac(t,o).searchResultDocuments;return{imagesAfterSearch:void 0===d?[]:d,pendingSearchText:u,searchText:l}}({state:e,pathToDataSource:m,dataSource:n}),g=h.imagesAfterSearch,v=h.searchText,y=h.pendingSearchText,E=g,b=E.slice(0,15),_=g.filter((function(e){return Lc(e).includes(Y)}));return{previewUploadedImages:b,uploadedImages:E,uploadedImagesFetched:r,previewGeneratedImages:_.slice(0,15),generatedImages:_,recentUploadedImages:a,stagingCount:o,staged:i,pathToDataSource:m,hasExistingSelection:!!c,shouldShowMetadata:Cc(n),hasUploaded:n&&n.length>0,searchText:v,pendingSearchText:y,isSavingMetadata:l,showSlowUploadNotification:u,gettyImageSpinnerType:d,isLoadingUploadedImages:p,deletedAllUploaded:f}},zc=function(e){var t=jc(e),n=t.olsImages,r=t.key,a=t.hasExistingSelection,o=$t(e).search,i=(o=void 0===o?{}:o).searchText,s=void 0===i?"":i,c=n&&n.length>0,l=[r,"olsImages"];if(!s)return{olsImages:n,pathToDataSource:l,hasExistingSelection:!!a,shouldShowMetadata:Cc(n),hasOLS:c};var u=Ac(e,l).searchResultDocuments,d=void 0===u?[]:u,p=Ac(e,[r,"uploaded"]).searchResultDocuments,f=void 0===p?[]:p;return{olsImages:ys(new Set([].concat(ys(d),ys(f)).filter(Tc))),pathToDataSource:l,hasExistingSelection:!!a,shouldShowMetadata:Cc(n),hasOLS:c}},Wc=function(e){return Kc(e).uploadedImages.filter((function(e){return Be.includes(e.mediaType)}))},qc=function(e,t,n){var r,a=function(e){return Lc(e).includes(t)},o=[];n.includes(De)&&(r=function(e){var t=Kc(e).uploadedImages,n=zc(e).olsImages;return t.concat(n)}(e).filter(a)),n.some((function(e){return[Ne,Re].includes(e)}))&&(o=Wc(e).filter(a));var i=r.concat(o);return ys(new Set(i))},Yc=function(e,t){return qc(e,t,[De])},$c=function(e){return Kc(e).uploadedImages.filter((function(e){return e.mediaType===De}))},Xc=function(e){var t=Fc(e),n=t.vimeoUser,r=t.vimeoCreateCount,a=t.vimeoDraftCount,o=t.totalVideosInAccount,i=t.editVideoId,s=t.uploadedVideos,c=t.reconnectRequired;if(!n)return{};var l=n.uploadQuota,u=l&&l.periodic.free,d=l&&l.lifetime.free,p=s.filter((function(e){return e.isVimeoCreate})).length;return Dc(Dc({},n),{},{periodicFree:u,lifetimeFree:d,totalVideosInAccount:o,vimeoCreateCount:r,vimeoDraftCount:a,currentCreateCount:p,editVideoId:i,reconnectRequired:c})},Qc=function(e){var t=Rc(e).timeToStopRefreshingVideo,n=Fc(e).uploadedVideos,r=new Date;return n.filter((function(e){var n=e.status,a=e.transcode,o=(a=void 0===a?{}:a).status,i=e.imageUrl,s=void 0===i?"":i,c=e.modified_time;return n!==Fs&&n!==Gs&&("complete"!==o||!c||!!qs(s)&&r-new Date(c)<t)}))};function Zc(e){var t=e.status,n=e.imageUrl;return t===js&&!qs(void 0===n?"":n)}var Jc=Oc(Fc,(function(e){var t=e.uploadedVideos,n=void 0===t?[]:t,r=e.uploadedVideosFetched,a=e.totalVideosLoaded,o=e.totalVideosInAccount,i=e.isLoadingMoreVideos,s=e.currentVideoFileUpload,c=e.uploadLink,l=e.key,u=e.videoUploadProgress,d=e.uploadedVideosSearchQuery,p=e.isRefreshingVideos,f=e.vimeoModalType,m=e.flyoutIsOpen,h=e.isVimeoLoading,g=e.vimeoCreateCount,v=e.vimeoDraftCount,y=[l,"uploadedVideos"],E=n.find(Zc),b=E?[E]:[];return{uploadedVideos:n,uploadLink:c,uploadedVideosFetched:r,hasUploaded:n.length>0,collectionPreviewVideos:b,totalVideosLoaded:a,totalVideosInAccount:o,isLoadingMoreVideos:i,pathToDataSource:y,currentVideoFileUpload:s,videoUploadProgress:u,uploadedVideosSearchQuery:d,isRefreshingVideos:p,shouldShowMetadata:!0,vimeoModalType:f,flyoutIsOpen:m,isVimeoLoading:h,vimeoCreateCount:g,vimeoDraftCount:v}})),el=function(e){return Kc(e).uploadedImages.filter((function(e){var t=e.sources,n=void 0===t?{}:t;return Object.prototype.hasOwnProperty.call(n,Z)}))},tl=Oc(Kc,Jc,(function(e,t){var n=t.uploadedVideos,r=void 0===n?[]:n,a=t.uploadedVideosFetched,o=t.totalVideosInAccount,i=t.isVimeoLoading,s=e.uploadedImages,c=void 0===s?[]:s,l=e.uploadedImagesFetched;return{uploadedAssetsTotal:c.length+o,isVimeoLoading:i,uploadedAssets:xc([].concat(ys(c),ys(r)),Ye,(function(e){var t=e.createdAt;return e.modified_time||t})),uploadedAssetsFetched:l&&a}})),nl=function(e){var t=Fc(e),n=t.stockVideos,r=t.stockVideosQuery,a=void 0===r?"":r,o=t.isSearching,i=void 0!==o&&o,s=t.key;return{stockVideos:n,stockVideosTotalCount:n?n.length:0,stockVideosQuery:a,isSearching:i,pathToDataSource:[s,"stockVideos"]}},rl=function(e){return $t(e).cache},al=function(e){var t,n,r=$t(e),a=r.otherSites,o=r.otherSites,i=o.key,s=o.hasPhotoshoot,c=o.websites,l=o.selectedWebsiteId,u=o.currentMaxWebsiteViewableIndex,d=c&&c.filter((function(e){return se.includes(e.type)}));d&&d.length&&(n=d.find((function(e){return e.id===l}))||d.find((function(e){return e.type===R}))||d.find((function(e){return e.type===U}))||d[0],t=[i,"websites",c.findIndex((function(e){return e.id===n.id})),"images"]);var p=d.slice(0,u+1);return Dc(Dc({},a),{},{websites:d,viewableWebsites:p,selectedWebsiteId:n&&n.id,selectedSiteType:n&&n.type,selectedWebsite:n,hasPhotoshoot:s,pathToDataSource:t})},ol=function(e){var t,n=$t(e).socialMedia,r=n.key,a=n[K],o=a.selectedPageId,i=a.selectedAlbumId,c=n.selectedProvider,l=(s(t={},K,[r,K,"pages",o,"albums",i,"photos"]),s(t,z,[r,z,"posts"]),s(t,W,[r,W,"allMediaItems"]),t);return Dc(Dc({},n),{},{pathToDataSource:l[c]})},il=function(e){var t=$t(e).otherSites;if(t){var n,r,a,o=t.websites,i=t.key;return o&&(a=o.findIndex((function(e){return e.type===q})),r=(n=o[a])&&[i,"websites",a,"images"]),{photoshoot:n,pathToDataSource:r,photoshootIndex:a}}},sl=function(e){var t=$t(e).selection,n=t.anchor,r=t.fivIndex,a=t.selectedItemsById,o=void 0===a?new Map:a,i=Array.from(o.values()),s=-1!==i.findIndex((function(e){return!e.permission||!e.permission.delete})),c=-1!==i.findIndex((function(e){return!e.permission||!e.permission.download}));return{anchor:n,fivIndex:r,selectedItems:Array.from(o.values()),selectedItemsById:o,selectedDeleteDisabled:s,selectedDownloadDisabled:c}},cl=Oc(jc,Fc,(function(e,t){var n=e.stagingCount,r=e.recentlyStagedCount,a=void 0===r?0:r,o=e.staged,i=void 0===o?{}:o,s=e.recentUploadedImages,c=void 0===s?[]:s,l=t.currentVideoFileUpload,u=t.recentlyUploadedVideos,d=void 0===u?[]:u,p=Object.keys(i);return p.length>0?{stagingCount:n,filename:i[p[0]].filename,uploadProgress:e.uploadProgress}:l?{stagingCount:1,filename:l.name,uploadProgress:t.videoUploadProgress}:{stagingCount:0,recentlyStagedImagesCount:a,recentlyStagedVideosCount:d.length,imageUploadSuccess:c.length>0&&-1===e.uploadProgress,videoUploadSuccess:0===t.videoUploadProgress&&!l&&d.length>0}})),ll=function(e){var t,n=$t(e),r=n.images,a=r.recentUploadedImages,o=r.uploadedImagesFetched,i=r.uploadedOrder,s=n.stockImages,c=s.stock,l=s.stockTotalCount,u=s.stockNextPageUrl,d=n.videos,p=d.uploadedVideosFetched,f=d.isVimeoLoading,m=d.stockVideos,h=n.products.productsFetched,g=n.planFeatures,v=n.socialMedia,y=Rc(e),E=Kc(e),b=E.previewUploadedImages,_=E.previewGeneratedImages,O=E.generatedImages,I=E.searchText,S=E.pendingSearchText,w=E.shouldShowMetadata,k=E.stagingCount,C=E.staged,A=E.showSlowUploadNotification,x=E.gettyImageSpinnerType,L=E.isLoadingUploadedImages,P=E.deletedAllUploaded,D=$c(e),M=zc(e),N=M.olsImages,R=M.hasOLS,U=y.businessCategory,j=y.market,F=y.inWebsiteContext,B=y.selectedMediaType,K=sl(e),z=K.fivIndex,W=K.selectedItems,Y=K.selectedItemsById,$=K.selectedDeleteDisabled,X=K.selectedDownloadDisabled,Q=il(e).photoshootIndex,Z=Hc(e).isLoadingNextStock,ee=[].concat(ys(Yc(e,G)),ys(Yc(e,V))).reduce((function(e,t){return e.some((function(e){return e.id===t.id}))?e:[].concat(ys(e),[t])}),[]),te=ee.slice(0,15),ne=qc(e,J,[De,Ne,Re]),re=Yc(e,H),ae=Yc(e,q),oe=Jc(e),ie=oe.uploadedVideos,se=oe.totalVideosInAccount,ce=oe.currentVideoFileUpload,le=oe.flyoutIsOpen,ue=oe.collectionPreviewVideos,de=Wc(e),pe=Xc(e);switch(B){case Fe:t=h;break;case Me:t=p;break;default:t=o}return{config:y,recentUploadedImages:a,photoshootImages:ae,logoImages:ee,wscAssets:ne,headerImages:re,documents:de,uploadedVideos:ie,totalVideosInAccount:se,searchText:I,pendingSearchText:S,uploadedImages:D,previewUploadedImages:b,previewGeneratedImages:_,previewLogoImages:te,generatedImages:O,stagingCount:k,staged:C,vimeoUser:pe,currentVideoFileUpload:ce,collectionPreviewVideos:ue,isUploadingVideos:null!==ce,hasUploaded:B===Me?oe.hasUploaded:E.hasUploaded,stockImages:c,stockVideos:m,olsImages:N,hasOLS:R,businessCategory:U,market:j,stockTotalCount:l,stockNextPageUrl:u,isLoadingNextStock:Z,otherSites:(0,T.omit)(al(e),"pathToDataSource"),socialMedia:v,planFeatures:g,uploadedAssetsFetched:t,selectedItems:W,selectedItemsById:Y,selectedMediaType:B,uploadedOrder:i,photoshoot:(0,T.get)(il(e).photoshoot,"images"),photoshootIndex:Q,fivIndex:z,inWebsiteContext:F,selectedDeleteDisabled:$,selectedDownloadDisabled:X,flyoutIsOpen:le,isVimeoLoading:f,shouldShowUploadedMetadata:w,mediaTypes:y.mediaTypes,overImages:el(e),showSlowUploadNotification:A,gettyImageSpinnerType:x,mixedAssetData:tl(e),isLoadingUploadedImages:L,deletedAllUploaded:P}},ul=function(e){return $t(e).assetDimensions},dl=function(e){return $t(e).perfBeacon},pl=function(e){return $t(e).venture},fl=function(e){return jc(e).monitorImageProgress};const ml=tn()(["VIMEO_CONVERT","VIMEO_CONVERT_CREATE","VIMEO_CREATE","VIMEO_EDIT","VIMEO_UPGRADE"]);var hl=ml.VIMEO_EDIT,gl=ml.VIMEO_CREATE,vl=ml.VIMEO_CONVERT,yl=ml.VIMEO_CONVERT_CREATE,El=ml.VIMEO_UPGRADE;const bl=function(e,t){var n=t.videoId;return{openConvertLink:function(t){e(za({redirectAction:vl,videoId:t}))},openConvertCreateLink:function(){e(za({redirectAction:yl}))},openEditLink:function(){e(za({redirectAction:hl,videoId:n}))},openCreateLink:function(){e(za({redirectAction:gl}))},openUpgradeLink:function(){e(za({redirectAction:El}))}}};var _l="connect",Ol="connect and create",Il="connect and upgrade",Sl="upgrade",wl="none";const Tl=(0,f.connect)((function(e){return{connected:Boolean(Xc(e).convertedOn)}}),(function(e,t){return{openEditLink:function(){bl(e,t).openEditLink()},showVimeoModal:function(){e(Wa({modalType:_l,videoId:t.videoUrlHash?t.videoId+"/"+t.videoUrlHash:t.videoId}))}}}))(bc);var kl=C(6699),Cl=C.n(kl);function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ll(e){var t=e.editItem,n=e.trackEvent,r=e.openOverCanvas,o=e.isFullCta,i=e.selectionCount,s=e.stockImageSearchType,c=(0,f.useDispatch)(),u=i>1||0===i,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(e),n("IM_TRACK_OVER_EDIT_CTA_CLICK"),t&&n("IM_TRACK_OVER_THUMBNAIL_EDIT_CTA_CLICK")},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(s){case oe:!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(Ca([t],(function(n){var r=a(n,1)[0],o=xl(xl({},t),{},{imageUrl:r,thumbnailUrl:r});d(o,e)}),"EDIT"))}(e);break;case ie:!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new Image;n.src=t.imageUrl,n.onload=function(){var r={width:n.width,height:n.height},a=xl(xl({},t),{},{dimensions:r,thumbnailUrl:t.imageUrl});d(a,e),n.remove()},n.onerror=function(){n.remove()}}(e);break;default:!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=xl(xl({},t),{},{thumbnailUrl:t.imageUrl});d(n,e)}(e)}};return o?l().createElement(ls(),{"data-click-eid":"image_modal_edit_click","data-aid":"over_edit_cta",design:"secondary",className:"btn-secondary-pastel",onClick:m.bind(this,!1),text:l().createElement(p.FormattedMessage,{id:"EDIT"}),icon:l().createElement(Cl(),null),disabled:u}):l().createElement("span",{className:"settings-icon product-dark-border",onClick:m.bind(this,!0)},l().createElement(Cl(),{fill:"currentColor"}))}Ll.propTypes={trackEvent:d().func,editItem:d().object,openOverCanvas:d().func,isFullCta:d().bool,selectionCount:d().number,stockImageSearchType:d().oneOf([ae,oe,ie])},Ll.defaultProps={isFullCta:!1,disabled:!1};const Pl=Ll;function Dl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dl=function(){return!!e})()}var Ml=function(e){b(a,e);var t,n,r=(t=a,n=Dl(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props,t=e.mediaType,n=e.filename,r=e.renderMode,a=t===Me,o=a?rs():os(),i=a&&!Xs($s)||!a;return l().createElement("div",{className:vs()("asset-loading",{"video-placeholder":a,"product-background":r===ic}),"data-testid":"disabled-thumbnail"},!a&&l().createElement(rc,{label:t,dark:!0}),l().createElement("div",{className:"loading-message"},i&&l().createElement("span",{className:"asset-icon"},l().createElement(o,{fill:"#000"})),l().createElement("p",null,n)))}}]),a}(l().Component);Ml.propTypes={mediaType:d().string.isRequired,filename:d().string.isRequired,renderMode:d().string},Ml.defaultProps={hideMediaTypeLabel:!1};const Nl=Ml;function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jl=function(){return!!e})()}var Fl=function(e){b(a,e);var t,n,r=(t=a,n=jl(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),(t=r.call(this,e)).onThumbnailClick=t.onThumbnailClick.bind(y(t)),t.onView=t.onView.bind(y(t)),t}return v(a,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.enableEditWithOver,r=t.isSelected,a=t.imageUrl,o=t.status,i=t.styles,s=t.children,c=t.hasRenderError;return r!==e.isSelected||a!==e.imageUrl||n!==e.enableEditWithOver||o!==e.status||s!==e.children||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.width!==t.width||e.height!==t.height}(i,e.styles)||c!==e.hasRenderError}},{key:"getThumbnailUrl",value:function(){return Ws(this.props.thumbnailUrl||this.props.imageUrl)}},{key:"isAssetDisabled",value:function(){var e,t=this.props,n=t.fileExtension,r=void 0===n?"":n,a=t.config;return null==a||null===(e=a.disabledFileExtensions)||void 0===e?void 0:e.includes(r)}},{key:"onThumbnailClick",value:function(e){var t=this.props,n=t.id,r=t.preloadParams,a=t.onThumbnailClick,o=t.onThumbnailShiftClick,i=t.originalAsset;(e&&e.shiftKey?o:a)(Ul(Ul({},i),{},{id:n,preloadParams:r,thumbnailUrl:this.getThumbnailUrl()}))}},{key:"onView",value:function(e){this.props.onView(this.props.index,e)}},{key:"renderImage",value:function(e){var t=this,n=this.props,r=n.hasIrregularDims,a=n.isSelected,o=n.renderDarkOverlay,i=n.mediaType,s=n.filename,c=n.renderMode;return this.isAssetDisabled()?l().createElement(Nl,{mediaType:i,filename:s,renderMode:c}):l().createElement(Js,{hasIrregularDims:r,onThumbnailClick:this.onThumbnailClick,src:this.getThumbnailUrl(),dataAid:"asset_thumbnail",draggable:!1,isSelected:a,styles:e,renderDarkOverlay:o,isImage:i===De,onImageError:function(){return t.onImageError()}})}},{key:"onImageError",value:function(){var e=this.props,t=e.onError,n=e.id;null==t||t(n)}},{key:"renderProduct",value:function(){var e=this.props,t=e.id,n=e.imageUrl,r=e.name,a=e.price,o=e.isSelected,i=e.salePrice;return l().createElement(tc,{id:t,src:n,productName:r,productPrice:a,salePrice:i,isSelected:o,onThumbnailClick:this.onThumbnailClick})}},{key:"renderDoc",value:function(e,t){var n=this.props,r=n.isSelected,a=n.filename;return l().createElement(pc,{docType:e,style:t,isSelected:r,filename:a})}},{key:"renderVideoOverlay",value:function(){var e=this.props,t=e.duration,n=e.url,r=e.shouldShowFilenames,a=qs(n);if(t){var o=0,i=0;t&&t>-1&&(o=Math.floor(t/60),i=t%60);var s=o.toString().padStart(1,"0")+":"+i.toString().padStart(2,"0");return l().createElement(l().Fragment,null,!a&&l().createElement("div",{className:"asset-overlay",onClick:this.onThumbnailClick}),l().createElement(rc,{label:s,icon:a&&!Xs($s)?null:rs(),dark:a,alignLeft:r}))}}},{key:"renderThumbnail",value:function(e,t,n){var r=this.props,a=r.url,o=r.originalFilename,i=r.isSelected,s=r.renderMode;switch(e){case Me:return l().createElement(l().Fragment,null,qs(a)?l().createElement("div",{className:vs()("video-placeholder-container",{"primary-border":i}),onClick:this.onThumbnailClick},l().createElement(uc,{filename:o,mediaType:Me,renderMode:s,isProcessedVideo:!0})):this.renderImage(t),n&&this.renderVideoOverlay());case Re:case Ue:case Ge:return this.renderDoc(e,t);case Fe:return this.renderProduct();default:return this.renderImage(t)}}},{key:"render",value:function(){var e=this.props,t=e.canSelect,n=e.isSelected,r=e.index,a=e.onView,o=e.galleryOverlay,i=e.mediaType,s=e.thumbnailSettings,c=e.enableEditWithOver,u=e.trackEvent,d=e.status,p=e.sourceType,f=e.originalFilename,m=e.originalAsset,h=e.openOverCanvas,g=e.renderMode,v=e.filename,y=e.shouldShowFilenames,E=e.permission,b=void 0===E?{}:E,_=e.references,O=void 0===_?[]:_,I=e.onMouseEnter,S=e.onMouseLeave,w=e.children,T=e.styles,k=e.typeLabel,C=e.config,A=(C=void 0===C?{}:C).stockImageSearchType,x=O.includes(Y),L=p===$&&d===Fs,P=p===$&&d!==js&&!L,D=!o&&i!==Fe&&!this.isAssetDisabled(),M=c&&b.edit&&"function"==typeof h,N=l().createElement(l().Fragment,null,i===Me&&s&&l().createElement(Tl,{type:fc,trackEvent:u,videoId:this.props.id,videoUrlHash:this.props.urlHash}),i===De&&M&&l().createElement(Pl,{editItem:m,trackEvent:u,openOverCanvas:h,stockImageSearchType:A}),l().createElement("span",{onClick:this.onView,"data-aid":"view_image_icon",className:"zoom-icon","data-testid":"fiv-target-icon"},l().createElement(Ps(),{fill:"currentColor"}))),R={className:"thumbnail-click-container"};return w&&(R.onClick=this.onThumbnailClick),this.props.hasRenderError?null:l().createElement("li",{"data-click-eid":"select_button_click",key:r,className:vs()("modal-image-selector-item-container",{"ie-fix":Us(),"image-is-selected":n}),onMouseEnter:I,onMouseLeave:S,style:T},x&&l().createElement("div",{className:"generated-overlay"},l().createElement("div",{className:"icon"},l().createElement(Rs(),{height:22,width:22,fill:"white"}))),o,(L||P)&&l().createElement("div",{className:vs()("video-placeholder-container",{"primary-border":n}),onClick:this.onThumbnailClick},l().createElement(uc,{filename:f,mediaType:Me,isProcessedVideo:!1,isErroredVideo:L,renderMode:g})),l().createElement("div",R,w||this.renderThumbnail(i,T,D),!o&&k&&l().createElement(l().Fragment,null,l().createElement(rc,{label:k,icon:os(),alignLeft:y})),a&&D&&l().createElement(l().Fragment,null,l().createElement("div",{className:"fiv-click-container"},l().createElement("div",{className:"click-overlay",onClick:this.onView,"data-testid":"fiv-target-overlay"}),l().createElement("div",{className:"view-image"},!y&&l().createElement(l().Fragment,null,l().createElement("div",{onClick:this.onThumbnailClick,className:"view-image-background","data-testid":"select-target"}),l().createElement("span",{className:"icon-container"},N)))),y&&l().createElement(l().Fragment,null,l().createElement("div",{className:"view-image-alt"},l().createElement("span",{className:"icon-container-alt"},N)),!(L||P)&&l().createElement("div",{className:"filename-container"},l().createElement("p",null,v||f))))),t&&D&&l().createElement("div",{className:"select-container",onClick:this.onThumbnailClick,"data-testid":"role-checkbox"},l().createElement("div",{className:vs()({"image-multiple-select":!n},{"image-multiple-check primary-background":n})},n&&l().createElement(Ms(),{fill:"white"}))))}}]),a}(c.Component);Fl.propTypes={id:d().string,imageUrl:d().string,url:d().string,isSelected:d().bool,index:d().number,onThumbnailClick:d().func,onThumbnailShiftClick:d().func,onMouseEnter:d().func,onMouseLeave:d().func,onView:d().func,mediaType:d().oneOf([De,Me,Fe,Ne,Re,Ue]),sourceType:d().oneOf(le),config:d().object,galleryOverlay:d().object,postLog:d().func,preloadParams:d().string,canSelect:d().bool,hasIrregularDims:d().bool,filename:d().string,fileExtension:d().string,permission:d().object,references:d().array,originalAsset:d().object,trackEvent:d().func,enableEditWithOver:d().bool,shouldShowFilenames:d().bool,hasRenderError:d().bool,onError:d().func},Fl.defaultProps={canSelect:!0,sourceType:R};const Gl=Fl;var Vl=C(2564),Bl=C.n(Vl),Hl=C(3548),Kl=C.n(Hl);const zl=function(e){var t=navigator.userAgent,n=/iPad|iPhone|iPod/i.test(t)&&!window.MSStream,r=window.devicePixelRatio||1,a=n&&window.screen.width*r==1125&&window.screen.height*r==2436,o=n&&window.screen.width*r==828&&window.screen.height*r==1792,i=n&&window.screen.width*r==1242&&window.screen.height*r==2688;return(a||o||i)&&(e+=" iphone-x"),e};function Wl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wl=function(){return!!e})()}var ql=function(e){b(o,e);var n,r,a=(n=o,r=Wl(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(){return h(this,o),a.apply(this,arguments)}return v(o,[{key:"render",value:function(){var e=this.props,n=e.statusMessage,r=e.count,a=e.type,o=e.bright,i=e.excludeClasses,s=e.typeSuffix;if(n)return n;var c=a.toUpperCase()+s,u={other:l().createElement(p.FormattedMessage,{id:c+"_OTHER",values:{count:l().createElement(p.FormattedNumber,{value:r})}}),zero:l().createElement(p.FormattedMessage,{id:c+"_ZERO",values:{count:l().createElement(p.FormattedNumber,{value:r})}}),one:l().createElement(p.FormattedMessage,{id:c+"_ONE",values:{count:l().createElement(p.FormattedNumber,{value:r})}}),two:l().createElement(p.FormattedMessage,{id:c+"_TWO",values:{count:l().createElement(p.FormattedNumber,{value:r})}}),few:l().createElement(p.FormattedMessage,{id:c+"_FEW",values:{count:l().createElement(p.FormattedNumber,{value:r})}}),many:l().createElement(p.FormattedMessage,{id:c+"_MANY",values:{count:l().createElement(p.FormattedNumber,{value:r})}})},d=l().createElement(p.FormattedPlural,t({value:r},u));return i?d:l().createElement("div",{className:vs()("found-images-count",{"text-muted":!o})},d)}}]),o}(c.Component);ql.propTypes={count:d().number.isRequired,type:d().string.isRequired,statusMessage:d().element,bright:d().bool,excludeClasses:d().bool,typeSuffix:d().string},ql.defaultProps={typeSuffix:""};const Yl=ql,$l="_FILE",Xl="_VIDEOS";function Ql(e){var t=e.imageUrl,n=e.minDimensions;return new Promise((function(e){var r=n||{},a=r.width,o=r.height,i=new Image;i.onload=function(){e({dimensions:{width:i.width,height:i.height},valid:(!a||i.width>=a)&&(!o||i.height>=o)})},i.src=t}))}function Zl(e,t){if(e){var n,r=e.width,a=e.height;return n=r&&a?"SIZE_WARNING_MESSAGE":r?"SIZE_WARNING_MESSAGE_WIDTH_ONLY":"SIZE_WARNING_MESSAGE_HEIGHT_ONLY",{title:t.formatMessage({id:"WARNING"}),content:t.formatMessage({id:n},{width:r,height:a})}}}var Jl=C(9644),eu=C.n(Jl),tu=C(3161),nu=C.n(tu);const ru=function(e){var t=e.reduce((function(e,t){return e+t.size}),0);if(Number.isNaN(t))return{isValid:!1};var n,r,a,o=1048576;return t>o?(n=(t/o).toFixed(1),r="IMAGE_SIZE_MB",a="MB"):(n=(t/1024).toFixed(),r="IMAGE_SIZE_KB",a="KB"),{formattedSize:n,intlSize:r,suffix:a,isValid:!0}};var au="number of images",ou="sort order",iu="search query",su="upload click origin",cu=100;function lu(){var e=window.ux.versions;if(!e)return null;var t=Object.values(e)[0].split(".");return parseInt(t[0],10)}function uu(e){return e<=lu()}function du(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(du=function(){return!!e})()}var pu=function(e){b(a,e);var t,n,r=(t=a,n=du(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){var e;h(this,a),e=r.apply(this,arguments),P()(y(e));var t=e.props,n=t.altText,o=t.dify,i=void 0===o?{}:o,s=t.updateDelay,c=t.handleOnAltTextChange,l=t.handleOnDIFYChange;return e.state={altText:n,difyApprove:i.approve,difyFeedback:i.feedback,isFocused:!1},e.handleOnAltTextChange=(0,T.debounce)(c,s),e.handleOnDIFYChange=(0,T.debounce)(l,s),e}return v(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.id!==e.id&&this.setState({altText:e.altText})}},{key:"onFocus",value:function(e){this.setState({isFocused:e})}},{key:"onAltTextChange",value:function(e){var t=e.target.value;this.setState({altText:t}),this.handleOnAltTextChange(t)}},{key:"onDIFYApproveChange",value:function(e){var t=this.state.difyApprove===e?0:e;this.setState({difyApprove:t}),this.handleOnDIFYChange({dify:{approve:t,feedback:this.state.difyFeedback}})}},{key:"onDIFYFeedbackChange",value:function(e){var t=e.target.value;this.setState({difyFeedback:t}),this.handleOnDIFYChange({dify:{approve:this.state.difyApprove,feedback:t}})}},{key:"renderSavingMessage",value:function(e){var t=e.feedback,n=this.props.isSavingMetadata,r=n?"SAVING":t?"FEEDBACK_SAVED":"CHANGES_SAVED";return l().createElement("p",{className:"saving-text text-muted"},n?l().createElement(x(),{inline:!0,size:"sm"}):l().createElement("span",{className:"icon icon-checkmark"},l().createElement(Ms(),{height:16,width:16})),l().createElement(p.FormattedMessage,{id:r}))}},{key:"renderFileSizeSection",value:function(){var e=this.props,t=e.size,n=e.mediaType,r=e.dimensions;if(!t&&!r)return null;var a,o=ru([{size:t}]),i=o.isValid,s=o.formattedSize,c=o.intlSize,u=[];return i?(a=n===De?"IMAGE_SIZE":"FILE_SIZE",u.push(l().createElement(p.FormattedMessage,{id:c,values:{formattedSize:s}})),r&&u.push(", ")):a="RESOLUTION",u.push(function(e){return e&&e.width&&e.height?"".concat(e.width,"x").concat(e.height):""}(r)),l().createElement(l().Fragment,null,l().createElement("span",{className:"text-muted data-label"},l().createElement(p.FormattedMessage,{id:a})),l().createElement("p",null,u))}},{key:"render",value:function(){var e=this,t=this.props,n=t.paneIsOpen,r=t.renderMode,a=t.link,o=t.toggleInfoPane,i=t.originalFilename,s=t.createdAt,c=t.intl,u=t.mediaType,d=t.references,f=void 0===d?[]:d,m=t.enableDifyFeedback,h=this.state,g=h.isFocused,v=h.altText,y=h.difyApprove,E=h.difyFeedback,b=c.locale,_=v||"",O=y||0,I=E||"",S=Xs()?vs()("info-wrapper-mobile",{"open-pane":Xs()&&n}):vs()("info-wrapper",{"open-pane":!Xs()&&n}),w=new Date(s),T=i&&i.includes("/")?i.split("/").pop():i,k=r===ic&&u===Me,C=m&&f.includes("photoshoot")&&l().createElement("div",{className:"dify-feedback-section product-faint-background"},l().createElement("span",{className:"text-muted data-label"},l().createElement(p.FormattedMessage,{id:"PHOTO_FEEDBACK"}),l().createElement(fs,{id:"dify-tooltip",title:l().createElement(p.FormattedMessage,{id:"WHATS_THIS"}),message:l().createElement(p.FormattedMessage,{id:"PHOTO_FEEDBACK_DESCRIPTION"}),"aria-label":"feedback tooltip"})),l().createElement("div",{className:"dify-feedback-btn-container"},l().createElement("div",{className:vs()("dify-feedback-btn",{active:1===O}),onClick:this.onDIFYApproveChange.bind(this,1)},l().createElement(eu(),{className:"primary",height:14,width:14})," ",l().createElement(p.FormattedMessage,{id:"LIKE"})),l().createElement("div",{className:vs()("dify-feedback-btn",{active:-1===O}),onClick:this.onDIFYApproveChange.bind(this,-1)},l().createElement(nu(),{className:"text-error",height:14,width:14})," ",l().createElement(p.FormattedMessage,{id:"DISLIKE"}))),l().createElement("textarea",{className:"text-area form-control",onChange:this.onDIFYFeedbackChange,value:I,placeholder:c.formatMessage({id:"ADDITIONAL_FEEDBACK"})}),this.renderSavingMessage({feedback:!0})),A=i&&l().createElement(l().Fragment,null,l().createElement("span",{className:"text-muted data-label"},l().createElement(p.FormattedMessage,{id:"FILENAME"})),l().createElement("p",null,T)),x=u!==Me;return l().createElement("div",{className:S},l().createElement("span",{className:"title-container"},l().createElement("h3",null,l().createElement(p.FormattedMessage,{id:u===De?"PHOTO_DETAILS":"FILE_DETAILS"})),l().createElement(ls(),{className:"infopane-close-btn",design:"link",size:"small",onClick:o,text:c.formatMessage({id:"HIDE"})})),C,A,l().createElement("span",{className:"text-muted data-label"},l().createElement(p.FormattedMessage,{id:"DATE_ADDED"})),l().createElement("p",null,w.toLocaleDateString(b,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})),this.renderFileSizeSection(),x&&l().createElement(l().Fragment,null,l().createElement("div",{className:"textarea-label"},l().createElement("span",{className:"text-muted data-label"},l().createElement(p.FormattedMessage,{id:u===De?"ALT_TEXT_TITLE":"ALT_TEXT_TITLE_FILE"})),l().createElement("span",{className:vs()("textarea-count",{visible:_.length>0||g,"text-error":_.length>cu})},cu-_.length)),l().createElement("textarea",{placeholder:c.formatMessage({id:u===De?"ALT_TEXT_GUIDANCE":"ALT_TEXT_GUIDANCE_FILE"}),className:vs()("text-area form-control",{"text-area-fullwidth":uu(2300)}),onChange:this.onAltTextChange,onFocus:function(){return e.onFocus(!0)},onBlur:function(){return e.onFocus(!1)},value:_}),_.length>cu?l().createElement("p",{className:"text-error"},l().createElement(p.FormattedMessage,{id:"EDIT_FIELD_LIMIT_EXCEED"})):this.renderSavingMessage({feedback:!1})),k&&l().createElement("div",{className:"video-link"},l().createElement("div",null,l().createElement("span",{className:"text-muted data-label"},l().createElement(p.FormattedMessage,{id:"LINK"}))),l().createElement("div",null,l().createElement("a",{href:a,target:"_"},a))))}}]),a}(c.Component);pu.propTypes=Object.assign({locale:d().string,paneIsOpen:d().bool,toggleInfoPane:d().func.isRequired},he),pu.defaultProps={updateDelay:1e3};const fu=pu;var mu="info",hu="warn",gu="error";function vu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vu=function(){return!!e})()}var yu=function(e){b(a,e);var t,n,r=(t=a,n=vu(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t.pdf=null,t.canvas=l().createRef(),t.state={currentPageIndex:1,isLoading:!0,pdfWidth:0,pdfHeight:0},t}return v(a,[{key:"componentDidMount",value:function(){this.renderPdf()}},{key:"componentDidUpdate",value:function(e){e.url!==this.props.url&&(this.pdf=null,this.renderPdf())}},{key:"getPdf",value:function(){var e=this,t=this.props.url;return this.pdf?Promise.resolve(this.pdf):function(e){return pt().get(e,{responseType:"arraybuffer"}).then((function(e){return e.data})).catch((function(){return null}))}(t).then((function(t){return window.pdfjsLib.getDocument({data:t}).promise.then((function(t){return e.pdf=t,t}))}))}},{key:"getFullScreenDefaultScale",value:function(){var e=this.state,t=e.pdfWidth,n=e.pdfHeight;return Math.min(.8*window.innerWidth/t,.7*(window.innerHeight-80)/n)}},{key:"renderPdf",value:function(){var e=this;if(window.pdfjsLib){var t=this.state.currentPageIndex,n=this.props,r=n.onLoad,a=n.styles,o=n.postLog,i=n.url;this.getPdf().then((function(n){r&&r(),n.getPage(t).then((function(t){var n=t.getViewport({scale:1}),r=n.width,o=n.height;e.setState({pdfWidth:r,pdfHeight:o,isLoading:!1},(function(){var n=a&&a.height?a.height/o:e.getFullScreenDefaultScale(),r=t.getViewport({scale:n}),i=e.canvas.current,s=i.getContext("2d");i.height=r.height,i.width=r.width;var c={canvasContext:s,viewport:r};t.render(c)}))}))})).catch((function(e){o&&o({level:hu,message:"Failed to load or render a pdf",meta:{url:i},error:e})}))}else this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this.props,t=e.styles,n=e.className,r=e.isSelected,a=e.filename,o=e.renderMode,i=this.state.isLoading,s=i?"none":"block";return l().createElement("div",{style:t,className:vs()("pdf-viewer",n,{"active-selector-item primary-border":r})},l().createElement("div",{className:"asset-overlay"}),i&&l().createElement(uc,{hideMediaTypeLabel:!0,filename:a,renderMode:o}),l().createElement("div",{style:{display:s}},l().createElement("canvas",{ref:this.canvas})))}}]),a}(l().Component);const Eu=yu;yu.propTypes={onLoad:d().func,url:d().string,styles:d().object,className:d().string,isSelected:d().bool,filename:d().string,postLog:d().func};const bu={mediaType:null,sourceType:null,title:null,sourceUrl:null,thumbnailUrl:null,ref:null,width:null,height:null,className:null,style:null,dataAid:null,muted:!0,loop:!0,autoPlay:!0,hideControls:!0,onLoad:function(){}};function _u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Iu=function(e,n){var r=Ou(Ou({},bu),e);switch(n){case $:return function(e){var n="fullscreen",r=e.sourceUrl.match(/(\d+)\/?([a-zA-Z0-9]*)/),a=r&&r[1],o=r&&r[2],i=new URL("https://player.vimeo.com/video/"+a),s=new URLSearchParams(i.search);o&&s.set("h",o),e.autoPlay&&(n+="; autoplay",s.set("autoplay","1"),s.set("autopause","0")),e.loop&&(n+="; loop",s.set("loop","1")),e.muted&&s.set("muted","1"),e.hideControls&&(s.set("controls","0"),s.set("background","1")),i.search=s.toString();var c={src:i.toString(),ref:e.ref,onLoad:e.onLoad||void 0,className:e.className,style:e.style,title:e.title,width:e.width,height:e.height,allow:n,"data-aid":e.dataAid},u=(0,T.omit)(c,T.isNil);return l().createElement("iframe",t({allowFullScreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,frameBorder:"0"},u))}(r);case R:return function(e){var n={src:e.sourceUrl,poster:e.thumbnailUrl,ref:e.ref,onLoadedData:e.onLoad||void 0,className:e.className,style:e.style,title:e.title,width:e.width,height:e.height,loop:e.loop,muted:e.muted,autoPlay:e.autoPlay,"data-aid":e.dataAid},r=(0,T.omit)(n,T.isNil);return l().createElement("video",t({type:"video/mp4",playsInline:!0},r))}(r);default:return""}};function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Tu=function(){function e(t){var n;h(this,e),this._schema=wu({},bu),this._sourceType=t.sourceType,t.mediaType===Me&&(this._schema=wu(wu({},this._schema),(n=t).sourceType===$?{mediaType:Me,sourceType:$,title:n.name,sourceUrl:n.link,thumbnailUrl:n.imageUrl,width:n.width,height:n.height}:n.isStockMedia&&n.sourceType===R?{mediaType:Me,sourceType:R,sourceUrl:At(n.videoUrl),thumbnailUrl:At(n.imageUrl)}:void 0),this._generateHtml=Iu)}return v(e,[{key:"getSchema",value:function(){return this._schema}},{key:"generateHtml",value:function(){return this._generateHtml(this._schema,this._sourceType)}}]),e}();function ku(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ku=function(){return!!e})()}var Cu=function(e){b(o,e);var n,r,a=(n=o,r=ku(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(){var e;return h(this,o),(e=a.apply(this,arguments)).state={selectedIndex:e.props.initialImageIndex,initialImageLoaded:!1,paneIsOpen:e.shouldRenderInfoPane()&&!Xs(),isFocused:!1,coverImageUpdated:!1,hasChangedAltText:!1},P()(y(e)),e.carousel=l().createRef(),e}return v(o,[{key:"componentDidMount",value:function(){var e=this.props.images,t=this.state.selectedIndex,n=e[t]&&e[t].url;n&&(this.checkImageSize("".concat(n).concat(this.getImageSizingUrlParams())),this.preloadCurrentImage()),document.attachEvent?document.attachEvent("onkeydown",this.onKeyboardPress):window.addEventListener&&window.addEventListener("keydown",this.onKeyboardPress,!0)}},{key:"componentWillUnmount",value:function(){document.detachEvent?document.detachEvent("onkeydown",this.onKeyboardPress):window.removeEventListener&&window.removeEventListener("keydown",this.onKeyboardPress,!0),this.props.onClose()}},{key:"onKeyboardPress",value:function(e){switch(e.key){case"ArrowLeft":this.carousel.current.prevSlide();break;case"ArrowRight":this.carousel.current.nextSlide();break;default:return}}},{key:"handleChange",value:function(e){this.setState({selectedIndex:e,coverImageUpdated:!1,hasChangedAltText:!1});var t=this.props.images,n=t[e]&&t[e].url;n&&(this.checkImageSize("".concat(n).concat(this.getImageSizingUrlParams())),this.preloadCurrentImage())}},{key:"getImageSizingUrlParams",value:function(){return this.props.sourceType===R?"/:/rs=w:1440,h:1440":""}},{key:"initialImageHasLoaded",value:function(){this.setState({initialImageLoaded:!0})}},{key:"checkImageSize",value:function(e){var t=this,n=this.props,r=n.minDimensions,a=n.intl;r&&Ql({imageUrl:e,minDimensions:r}).then((function(e){var n=e.valid?null:Zl(r,a).content;t.setState({warningMessage:n})}))}},{key:"preloadCurrentImage",value:function(){var e=this.props.preloadParams;e&&((new Image).src="".concat(this.props.images[this.state.selectedIndex].url).concat(e))}},{key:"isVideo",value:function(){var e=this.props.images,t=this.state.selectedIndex;return e[t]&&e[t].mediaType===Me}},{key:"shouldRenderDownloadBtn",value:function(){var e=this.props.onDownloadButtonClick;return!this.isVideo()&&!Xs()&&!!e}},{key:"shouldRenderInfoPane",value:function(){return this.props.shouldShowMetadata}},{key:"renderSliderControls",value:function(e){var t=e.nextSlide,n=e.prevSlide;return this.props.images.length>1&&l().createElement("div",null,l().createElement("span",{className:"carousel-arrow-left",onClick:n},l().createElement(Kl(),{height:18,width:18,fill:"white"})),l().createElement("span",{className:"carousel-arrow-right",onClick:t},l().createElement(Hi(),{height:18,width:18,fill:"white"})))}},{key:"renderSelectAction",value:function(){var e=this.props,t=e.images,n=e.selectedItemsById,r=this.state.selectedIndex,a=n.has(t[r].id),o=vs()("select-bubble",{"image-multiple-select":!a},{"image-multiple-check primary-background":a});return l().createElement("span",{className:"fiv-select-container"},l().createElement("div",{className:"select-container"},l().createElement("div",{className:o,onClick:this.onSelect},a&&l().createElement(Ms(),{fill:"white"}))),l().createElement("p",null,a?l().createElement(p.FormattedMessage,{id:"SELECTED_LABEL"}):l().createElement(p.FormattedMessage,{id:"SELECT_LABEL"})))}},{key:"renderCloseButton",value:function(){var e=this.props,t=e.renderMode,n=e.onClose,r=e.intl,a=t===ic?"CLOSE":"CANCEL";return l().createElement(ls(),{design:"secondary",className:"btn-secondary-light","data-aid":"full-image-view-close",onClick:n,text:r.formatMessage({id:a})})}},{key:"renderActionButtons",value:function(){var e=this,t=this.props,n=t.images,r=t.onInsertButtonClick,a=t.renderMode,o=t.selectedItems,i=t.onCoverImageUpdate,s=t.trackEvent,c=t.inWebsiteContext,u=t.intl,d=t.insertLabel,p=this.state,f=p.selectedIndex,m=p.coverImageUpdated,h=l().createElement(ls(),{disabled:!r,design:"primary",className:"btn-light","data-aid":"full-image-view-insert",text:d,onClick:function(){r(n[f])}}),g=c&&i&&l().createElement(ls(),{disabled:m,design:"primary",className:"btn-light","data-aid":"full-image-view-update-cover-image",text:u.formatMessage({id:"UPDATE_COVER_IMAGE"}),onClick:function(){n[f]&&(e.setState({coverImageUpdated:!0}),i(n[f]),s("IM_TRACK_FULL_IMAGE_VIEW_UPDATE_HEADER"))}});return Xs()&&a===ic?l().createElement("div",{className:vs()("action-buttons",{flex:o.length>0})},o.length>0&&this.renderSelectAction(),g||this.renderCloseButton()):l().createElement(ps,{className:"action-buttons"},a===sc&&h,a===ic&&g,this.renderCloseButton())}},{key:"toggleInfoPane",value:function(){var e=!this.state.paneIsOpen;this.setState({paneIsOpen:e}),e&&this.props.trackEvent("IM_TRACK_PHOTO_DETAILS_OPEN")}},{key:"handleDownloadButtonClick",value:function(){var e=this.props,t=e.images;(0,e.onDownloadButtonClick)(t[this.state.selectedIndex])}},{key:"onChange",value:function(e){var t=this.props,n=t.images,r=t.onMetadataUpdate,a=t.trackEvent,o=this.state,i=o.selectedIndex;o.hasChangedAltText||(this.setState({hasChangedAltText:!0}),a("IM_TRACK_FULL_IMAGE_VIEW_ALT_TEXT_CHANGE")),r(n[i],{altText:e.substring(0,cu)})}},{key:"onDIFYChange",value:function(e){var t=this.props,n=t.images;(0,t.onMetadataUpdate)(n[this.state.selectedIndex],e)}},{key:"onFocus",value:function(e){this.setState({isFocused:e})}},{key:"renderInfoPane",value:function(){var e=this.props,n=e.images,r=e.intl,a=e.config,o=e.isSavingMetadata,i=e.renderMode,s=this.state,c=s.selectedIndex,u=s.paneIsOpen,d=n[c]||{},p=a.infopaneSettings,f=(p=void 0===p?{}:p).updateDelay,m=a.featureFlags,h=(m=void 0===m?{}:m).enableDifyFeedback;return l().createElement(fu,t({renderMode:i,paneIsOpen:u,toggleInfoPane:this.toggleInfoPane,handleOnAltTextChange:this.onChange,handleOnDIFYChange:this.onDIFYChange,intl:r,updateDelay:f,isSavingMetadata:o,enableDifyFeedback:h},d))}},{key:"onSelect",value:function(){var e=this.props.images[this.state.selectedIndex],t=e.id,n=e.imageUrl,r=e.index,a=e.isSelected,o=e.preloadParams;this.props.onSelect({id:t,imageUrl:n,preloadParams:o,index:r,isSelected:a,shiftClicked:!1})}},{key:"renderSelectedState",value:function(e){return Xs()?l().createElement("span",{className:"fiv-selected-container"},l().createElement(Yl,{count:e,type:"selected",bright:!0,typeSuffix:Ht(this.props.selectedItems)?"":$l})):this.renderSelectAction()}},{key:"renderTopBtns",value:function(){var e=this.props,t=e.images,n=e.onDeleteButtonClick,r=this.state.selectedIndex;return l().createElement(l().Fragment,null,n&&l().createElement("span",{className:"delete-btn icon-wrapper","data-aid":"full-image-view-delete",onClick:function(){n(t[r])}},l().createElement("span",{className:"icon icon-trash"},l().createElement(zi(),{height:22,width:22,fill:"white"}))),this.shouldRenderDownloadBtn()&&l().createElement("span",{className:"image-download-btn icon-wrapper",onClick:this.handleDownloadButtonClick},l().createElement("span",{className:"icon icon-download"},l().createElement($i(),{height:22,width:22,fill:"white"}))),this.shouldRenderInfoPane()&&l().createElement("span",{className:"info-toggle icon-wrapper",onClick:this.toggleInfoPane},l().createElement("span",{className:"icon icon-information"},l().createElement(ss(),{height:22,width:22,fill:"white"}))))}},{key:"formatURL",value:function(e){return e?e.replace(/( )/g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29"):""}},{key:"renderPopup",value:function(){var e=this,t=this.props,n=t.config,r=t.trackEvent,a=this.state.coverImageUpdated,o=n.rootDomain,i=n.accountId,s="https://websites.".concat(o,"/launch?account_uid=").concat(i,"&path=edit"),c=l().createElement("a",{href:s,onClick:function(){return r("IM_TRACK_FULL_IMAGE_VIEW_EDIT_CLICK")},className:"primary-light"},l().createElement(p.FormattedMessage,{id:"OPEN_EDITOR"}));return l().createElement("div",{className:vs()("fiv-popup",{"open-popup":a,"close-popup":!a})},l().createElement("p",{className:"fiv-popup-message"},l().createElement(p.FormattedMessage,{id:"COVER_IMAGE_UPDATED",values:{openEditor:c}})),l().createElement("span",{className:"close-popup-btn",onClick:function(){e.setState({coverImageUpdated:!1})}},l().createElement("span",{className:"icon icon-x"},l().createElement(N(),null))))}},{key:"getBackgroundStyle",value:function(){var e=this.props.images,t=this.state.selectedIndex;if(!e[t])return{};var n=e[t],r=n.mediaType,a=n.url;if(r!==De)return{};var o=this.getImageSizingUrlParams(),i="".concat(o,"/fx-bl=s:").concat(20);return{backgroundImage:"url('".concat(this.formatURL(a)).concat(Us(!0)?i:o,"')"),filter:"blur(".concat(20,"px) brightness(30%)")}}},{key:"renderImageViewer",value:function(e,t,n,r){return l().createElement("img",{alt:"",src:"".concat(e).concat(this.getImageSizingUrlParams()),className:vs()("carousel-image",{"warning-on":t}),onLoad:n===r?this.initialImageHasLoaded:void 0,"data-testid":"carousel-image"})}},{key:"renderVideoViewer",value:function(e,t,n){var r=new Tu(e),a=r.getSchema(),o=e.sourceType===$&&e.status===Fs,i=e.sourceType===$&&e.status!==js;return o?l().createElement(uc,{filename:e.originalFilename,mediaType:Me,isErroredVideo:!0}):i?l().createElement(uc,{filename:e.originalFilename,mediaType:Me,videoIsTranscoding:!0}):(e.sourceType===$?(a.height="60%",a.width="60%",a.style={"pointer-events":"none"}):a.className="carousel-image",a.onLoad=t===n?this.initialImageHasLoaded:void 0,r.generateHtml())}},{key:"renderPDFViewer",value:function(e,t,n,r,a){return l().createElement(Eu,{postLog:t,url:e,onLoad:r===a?this.initialImageHasLoaded:void 0,filename:n[a]&&n[a].filename})}},{key:"renderUnsupportedViewer",value:function(){return this.initialImageHasLoaded(),null}},{key:"renderActionBottom",value:function(e,t,n,r){if(e!==De){var a=e===Me&&n===sc?this.renderActionButtons:this.renderCloseButton;return l().createElement("div",{className:"action-bottom"},t?a():null)}return l().createElement("div",{className:"action-bottom"},r&&l().createElement("div",{className:"warnings-container"},l().createElement("p",null,l().createElement("b",null,l().createElement(p.FormattedMessage,{id:"WARNING"}),":"," "),l().createElement("span",{className:"warning"},r))),n===ic&&this.renderPopup(),t?this.renderActionButtons():null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.images,r=t.initialImageIndex,a=t.onClose,o=t.onDeleteButtonClick,i=t.selectedItems,s=t.renderMode,c=t.postLog,u=t.trackEvent,d=this.state,p=d.paneIsOpen,f=d.warningMessage,m=d.initialImageLoaded,h=d.selectedIndex,g=this.shouldRenderInfoPane(),v=this.shouldRenderDownloadBtn(),y=[{component:this.renderSliderControls}],E=i.length,b=s===ic&&E>0,_=s===sc||s===ic&&0===E,O=n[h],I=O&&O.id,S=O&&O.urlHash,w=this.isVideo()&&O&&O.sourceType===$,T=g||o||v||b;return b&&Xs()&&(T=!1),l().createElement("div",{className:zl("img-carousel-wrapper"),"data-aid":"image-fullscreen-mode"},l().createElement("div",{className:"img-blur-lightbox",style:this.getBackgroundStyle()}),l().createElement("div",{className:vs()("infopane-overlay",{"open-pane":Xs()&&p})}),Us()&&l().createElement("div",{className:"blur-overlay"}),l().createElement("div",{className:vs()("view-wrapper",{"open-pane":!Xs()&&p})},l().createElement("div",{className:"top-btn-container"},b&&this.renderSelectedState(E),w&&!b&&l().createElement(Tl,{type:mc,trackEvent:u,videoId:I,videoUrlHash:S}),l().createElement("span",{className:"info-btns"},_&&this.renderTopBtns(),!Xs()&&b&&l().createElement(Yl,{count:E,type:"selected",bright:!0,typeSuffix:Ht(this.props.selectedItems)?"":$l}),T&&l().createElement("span",{className:"divider product-background"}),l().createElement("span",{className:"lightbox-close-btn icon-wrapper",onClick:a},l().createElement("span",{className:"icon icon-x"},l().createElement(N(),{height:22,width:22,fill:"white"}))))),l().createElement(Bl(),{slideWidth:"100vw",slideHeight:"100vh",initialSlide:r,transition:"fade",transitionDuration:0,dots:!1,arrows:!1,controls:m?y:void 0,beforeChange:this.handleChange,ref:this.carousel},n.map((function(t,r){var a;return a=t.mediaType===Me?e.renderVideoViewer(t,h,r):t.mediaType===Ne?e.renderPDFViewer(t.url,c,n,h,r):t.mediaType===De?e.renderImageViewer(t.url,f,h,r):e.renderUnsupportedViewer(),l().createElement("div",{className:vs()("img-wrapper",{"open-pane":!Xs()&&p}),key:r},a,e.renderActionBottom(t.mediaType,m,s,f))})))),g&&this.renderInfoPane())}}]),o}(c.PureComponent);Cu.defaultProps={sourceType:R,selectedItems:[],selectedItemsById:new Map},Cu.propTypes={images:d().array,initialImageIndex:d().number,onClose:d().func,onInsertButtonClick:d().func,onDeleteButtonClick:d().func,onMetadataUpdate:d().func,onCoverImageUpdate:d().func,intl:d().object.isRequired,minDimensions:d().object,insertLabel:d().oneOfType([d().string,d().object]),preloadParams:d().string,sourceType:d().oneOf(ce),config:d().object,onDownloadButtonClick:d().func,renderMode:d().oneOf([ic,sc]),inWebsiteContext:d().bool,selectedItems:d().array,selectedItemsById:d().any,onSelect:d().func,shouldShowMetadata:d().bool,trackEvent:d().func.isRequired,postLog:d().func};const Au=Cu;function xu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xu=function(){return!!e})()}var Lu=function(e){b(a,e);var t,n,r=(t=a,n=xu(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props.intl;return l().createElement("div",{className:"loading-spinner-container"},l().createElement(x(),{inline:!0,size:"lg",label:e.formatMessage({id:"LOADING"})}))}}]),a}(c.Component);Lu.propTypes={intl:d().object};const Pu=Lu;function Du(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Du=function(){return!!e})()}var Mu=function(e){b(a,e);var t,n,r=(t=a,n=Du(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"showVimeoModal",value:function(){var e=this.props,t=e.trackEvent,n=e.showVimeoModal;t("IM_TRACK_VIMEO_BANNER_CLICK"),n()}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.vimeoUser,r=n.convertedOn,a=n.currentCreateCount,o=void 0===a?0:a,i=n.totalVideosInAccount,s=void 0===i?0:i,c=Math.max(3-s+o,0);return!r&&s>0&&l().createElement("div",{className:"vimeo-card"},l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:"DO_MORE_WITH_VIMEO_TITLE"}),l().createElement("img",{src:C(4975),width:"50",alt:""})),l().createElement("p",null,1===c?l().createElement(p.FormattedMessage,{id:"DO_MORE_WITH_VIMEO_REASON_ONE"}):l().createElement(p.FormattedMessage,{id:"DO_MORE_WITH_VIMEO_REASON",values:{freeUploadCount:c}})),l().createElement(ls(),{className:"btn",design:"primary",size:"small",onClick:this.showVimeoModal,text:t.formatMessage({id:"DO_MORE_WITH_VIMEO_CTA"}),as:"external"}))}}]),a}(c.Component);Mu.propTypes={showVimeoModal:d().func,vimeoUser:d().object,trackEvent:d().func};const Nu=Mu,Ru=(0,f.connect)((function(e){return{vimeoUser:Xc(e)}}),(function(e){return{showVimeoModal:function(){e(Wa({modalType:_l}))},trackEvent:function(t,n){e(uo({eventName:t,data:n}))}}}))(Nu),Uu="launch",ju="upload",Fu="load_ventures",Gu="secondary";var Vu="IM_LAUNCH",Bu="LOAD_IMAGES",Hu="LOAD_IMAGES_FROM_LS",Ku="SYNC_LS",zu="LOAD_IMAGES_FROM_API",Wu="RENDER_SINGLE_IMAGE";function qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qu(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($u=function(){return!!e})()}var Xu=function(e){b(o,e);var n,r,a=(n=o,r=$u(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),(t=a.call(this,e)).state={hovering:!1},t.toggleHoverState=t.toggleHoverState.bind(y(t)),t}return v(o,[{key:"componentDidUpdate",value:function(e){!e.isSelected&&this.props.isSelected&&this.toggleHoverState(!1)}},{key:"toggleHoverState",value:function(e){this.setState({hovering:e&&!this.props.isSelected})}},{key:"render",value:function(){var e=this.props,n=e.imageUrl,r=e.hoverUrl,a=ft(e,["imageUrl","hoverUrl"]);return l().createElement(Gl,t({},a,{onMouseEnter:this.toggleHoverState.bind(this,!!r),onMouseLeave:this.toggleHoverState.bind(this,!1),imageUrl:this.state.hovering?r:n}))}}]),o}(c.Component);Xu.propTypes=Yu(Yu({},Gl.propTypes),{},{hoverUrl:d().string});const Qu=Xu;function Zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ju(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ed(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ed=function(){return!!e})()}var td=[].concat(ys(Ve),[Fe]),nd=function(e){b(o,e);var n,r,a=(n=o,r=ed(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),(t=a.call(this,e)).state={isFivOpen:!1,rows:[]},P()(y(t)),t.registerOnloadEventListeners(),t.container=l().createRef(),t}return v(o,[{key:"componentDidMount",value:function(){this.props.mediaType!==Fe&&this.calculateLayout()}},{key:"componentDidUpdate",value:function(e){e.clientWidth===this.props.clientWidth&&e.dataSource===this.props.dataSource&&e.localDimensions===this.props.localDimensions||this.props.mediaType===Fe||this.calculateLayout()}},{key:"registerOnloadEventListeners",value:function(){var e=this.props,t=e.onTrackPerfLaunchEnd,n=e.shouldTrackPerf,r=e.dataSource,a=e.trackPerfEndLimit,o=e.traceAuditEventStart,i=e.traceAuditEventEnd;if(n)for(var s=0;s<Math.min(r.length,a);s++){var c=r[s];if([De,Me].includes(c.mediaType)){var l=new Image;l.onload=function(){i({name:Wu}),t()};var u=c&&(c.url||c.imageUrl);l.src=Ws(u),o({name:Wu})}}}},{key:"shouldShowFilenames",value:function(){return!Xs()&&(this.props.isDifyAgent||this.props.isAllowedDelegate)}},{key:"calculateLayout",value:function(){var e=this.props,t=e.dataSource,n=e.enableInlineUpload,r=e.localDimensions,a=[],o=this.props.clientWidth,i=this.props,s=i.galleryOverlay,c=i.numRows,l=o<$s?160:Bs,u=o,d=this.shouldShowFilenames()?.7:.5,p=[],f=[],m=0,h=1,g=0,v=function(e,t){var n=t.width,r=t.height,a=!1;r/n<.5&&(n=300,r=l,a=!0),(r<l||n<Vs||n/r<d)&&(n=Vs,r=l,a=!0);var o=l/r*n,i=o*(r/n);m+=o,p.push({newWidth:o,newHeight:i});var h=m>=u,v=s&&h&&g===c-1;return f.push(Ju(Ju({},e),{},{hasIrregularDims:a,renderOverlay:v,originalAsset:e})),h};n&&!Xs($s)&&v({isUploadButton:!0},{width:Vs,height:Bs});for(var y=0;y<t.length;y++){var E=t[y];if(td.includes(E.mediaType)){var b=E.dimensions||r[E.id]||[].concat(ys(Be),[Fe]).includes(E.mediaType)&&{width:700,height:842};if(!b)break;if(v(E,b)&&(h=u/m,a.push({thumbnails:f,dimensions:p,resize:h}),p=[],f=[],m=0,h=1,g+=1,s&&g===c))break}}p.length&&a.push({thumbnails:f,dimensions:p,resize:h}),this.setState(Ju(Ju({},this.state),{},{rows:a}))}},{key:"onView",value:function(e,t){var n=this.props,r=n.onFivToggle,a=n.trackEvent;t.stopPropagation(),this.setState(Ju(Ju({},this.state),{},{isFivOpen:!0})),r(e),a("IM_TRACK_FULL_VIEW_OPEN")}},{key:"canViewFullImage",value:function(e){return Ve.includes(e)}},{key:"closeFiv",value:function(e){var t=this.props,n=t.onFivToggle,r=t.trackEvent;this.setState(Ju(Ju({},this.state),{},{isFivOpen:!1})),n(-1),r(e)}},{key:"trimBounds",value:function(e){return{width:e.newWidth-4,height:e.newHeight-4}}},{key:"renderThumbnailWithProps",value:function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=this.props,c=s.sourceType,u=s.onThumbnailClick,d=s.onThumbnailShiftClick,p=s.preloadParams,f=s.config,m=s.trackEvent,h=s.postLog,g=s.galleryOverlay,v=s.selectedItemsById,y=s.enableEditWithOver,E=s.openOverCanvas,b=s.renderMode,_={};a.dimensions&&(_=Object.assign({backgroundColor:"#fff"},this.trimBounds(a.dimensions)));var O=v.has(e),I=Ju({id:e,key:e,isSelected:O,imageUrl:n,url:n,onThumbnailClick:u,onThumbnailShiftClick:d,onView:this.canViewFullImage(a.mediaType)?this.onView:null,sourceType:c,trackEvent:m,config:f,preloadParams:p,postLog:h,hasIrregularDims:o,galleryOverlay:i?g:null,enableEditWithOver:y,openOverCanvas:E,renderDarkOverlay:b===ic,renderMode:b,shouldShowFilenames:this.shouldShowFilenames(),styles:_},a),S=Gl;if(a.mediaType===Ne){var w={filename:a.filename,styles:_,url:n,isSelected:O};I.children=l().createElement(Eu,w),I.typeLabel=Ne}return r&&(c===R?(I.hoverUrl=r,S=Qu):I.imageUrl=r),l().createElement(S,t({},I,{"data-test-id":I.hoverUrl?"videohoverthumbnail":"thumbnail"}))}},{key:"renderVimeoCard",value:function(){return l().createElement("li",{"data-test-id":"vimeocard"},l().createElement(Ru,{intl:this.props.intl}))}},{key:"renderInlineUpload",value:function(e){var t=this.props,n=t.renderUploader,r=t.uploadCtaId,a=t.onUploadButtonClick,o=t.uploadIcon,i=this.trimBounds(e);return l().createElement("li",{className:"inline-upload-cta primary-border",style:i,onClick:a},n(),l().createElement("div",{className:"add-btn"},o||l().createElement(bs(),{fill:"currentColor"})),l().createElement("h6",{className:"primary"},l().createElement(p.FormattedMessage,{id:r})))}},{key:"renderProductList",value:function(){var e=this,t=this.props,n=t.intl,r=t.dataSource,a=t.onScrollEnd,o=this.props.className?" "+this.props.className:"",i=zl("enabled-scroll product-grid"+o);return l().createElement(xs,{className:i,style:{width:this.props.clientWidth},onScrollEnd:a,hideBackToTop:!0,intl:n},r.map((function(t){var n=t.imageUrl,r=t.mediaType,a=t.id,o={originalAsset:t,name:t.name,price:t.price,salePrice:t.salePrice,mediaType:r};return e.renderThumbnailWithProps(a,n,null,o)})))}},{key:"renderThumbnailList",value:function(){for(var e=this.props,t=e.dataSource,n=e.dataSourceFullLength,r=e.onScrollEnd,a=e.isLoading,o=e.intl,i=e.renderMode,s=e.selectedItems,c=e.isLoadingNext,u=e.canSelect,d=e.galleryOverlay,p=e.collectionKey,f=e.thumbnailSettings,m=e.onBackToTopButtonClick,h=e.onImageError,g=e.loadEmpty,v=void 0!==g&&g,y=s.length,E=this.props.className?" "+this.props.className:"",b=i===ic,_=[],O=this.state.rows,I=!Xs($s)&&"MY_UPLOADS"===p&&this.props.mediaType===Me||"VIDEO_UPLOADS"===p,S=v||[ye,we].includes(p),w=0,T=0;T<O.length;T++)for(var k=O[T],C=k.thumbnails,A=k.dimensions,L=k.resize,P=0;P<C.length;P++){var D=C[P],M=D.id,N=D.imageUrl,R=D.thumbnail,U=D.hasIrregularDims,j=D.renderOverlay,F=D.isUploadButton,G=ft(D,["id","imageUrl","thumbnail","hasIrregularDims","renderOverlay","isUploadButton"]);F||(w+=1);var V=A[P],B={newWidth:V.newWidth*L,newHeight:V.newHeight*L},H=Ju(Ju({},G),{},{index:w-1,key:w-1,dimensions:B,canSelect:u,thumbnailSettings:f,onError:function(e){var n=t.find((function(t){return t.id===e}));h(n)}}),K=F?this.renderInlineUpload(B):this.renderThumbnailWithProps(M,N,R,H,U,j,F);_.push(K)}var z=n||t.length;if(!S&&(c||_.length<z&&!d)){var W=l().createElement("li",{"data-test-id":"spinner"},l().createElement("div",{className:"thumbnail-spinner-container"},l().createElement(x(),{inline:!0,size:"xs"})));_.push(W)}I&&_.push(this.renderVimeoCard());var q=zl("justified-container thumbnail-list scrollable enabled-scroll"+E),Y=l().createElement(xs,{className:vs()(q,{"select-mode":y>0||i===sc}),dataAid:"thumbnail-list",onScrollEnd:c?null:r,enableFullScroll:b,intl:o,hasGalleryOverlay:!!d,onBackToTopButtonClick:m},_),$=l().createElement(Pu,{intl:o});return a||0!==O.length||S?l().createElement("div",{className:vs()("thumbnail-scroll-wrapper",{standalone:b})},l().createElement("div",{className:"thumbnail-list-wrapper"},a&&!S?$:Y)):$}},{key:"renderCarousel",value:function(){var e=this,t=this.props,n=t.dataSource,r=t.onInsertButtonClick,a=t.onDeleteButtonClick,o=t.onMetadataUpdate,i=t.trackEvent,s=t.insertLabel,c=t.minDimensions,u=t.intl,d=t.preloadParams,p=t.sourceType,f=t.config,m=t.onDownloadButtonClick,h=t.renderMode,g=t.selectedItems,v=t.onThumbnailClick,y=t.shouldShowMetadata,E=t.onCoverImageUpdate,b=t.fivIndex,_=t.inWebsiteContext,O=t.isSavingMetadata,I=t.postLog,S=t.selectedItemsById,w=b;return this.state.isFivOpen&&w>=0&&n[w]?l().createElement(Au,{images:n,initialImageIndex:w,onClose:function(){e.closeFiv("IM_TRACK_FULL_VIEW_CLOSE")},onInsertButtonClick:r?function(t){r(t,e.props.collectionKey)}:null,onDeleteButtonClick:a?function(e){a(e),i("IM_TRACK_FULL_VIEW_DELETE_BUTTON_CLICK")}:null,onDownloadButtonClick:m,dots:!1,insertLabel:s,minDimensions:c,intl:u,preloadParams:d,sourceType:p,config:f,renderMode:h,selectedItems:g,selectedItemsById:S,onSelect:v,shouldShowMetadata:y,onMetadataUpdate:o,trackEvent:i,onCoverImageUpdate:E,inWebsiteContext:_,isSavingMetadata:O,postLog:I}):null}},{key:"render",value:function(){return this.props.mediaType===Fe?this.renderProductList():l().createElement("div",{ref:this.container,style:{width:this.props.clientWidth}},this.renderThumbnailList(),this.renderCarousel())}}]),o}(c.PureComponent);nd.propTypes=Object.assign({onThumbnailClick:d().func.isRequired,onThumbnailShiftClick:d().func.isRequired,onScrollEnd:d().func,dataSource:d().array,mediaType:d().oneOf([De,Me]),renderMode:d().oneOf([ic,sc]),onInsertButtonClick:d().oneOfType([d().func,d().bool]),onDeleteButtonClick:d().oneOfType([d().func,d().bool]),onUploadButtonClick:d().func,uploadIcon:d().node,insertLabel:d().string,minDimensions:d().object,preloadParams:d().string,className:d().string,sourceType:d().oneOf(le),trackPerfEndLimit:d().number,shouldTrackPerf:d().bool,onDownloadButtonClick:d().func,onFivToggle:d().func,fivIndex:d().number,inWebsiteContext:d().bool,isLoadingNext:d().bool,canSelect:d().bool,selectedItemsById:d().object,clientWidth:d().number,enableInlineUpload:d().bool,enableEditWithOver:d().bool,localDimensions:d().object,onImageError:d().func},de,pe,fe),nd.defaultProps={isLoading:!1,sourceType:R,onScrollEnd:function(){},trackPerfEndLimit:3,onTrackPerfLaunchEnd:function(){},shouldTrackPerf:!1,selectedItems:[],isLoadingNext:!1,canSelect:!0,galleryOverlay:null,selectedItemsById:new Map,enableEditWithOver:!1,localDimensions:{}};const rd=function(e){var t,n=$t(e).user,r=void 0===n?{}:n;return{isDifyAgent:!!r.dify,difyCustomerId:null==r||null===(t=r.dify)||void 0===t?void 0:t.customerId,isAllowedDelegate:!!(null==r?void 0:r.isAllowedDelegate)}};var ad={cohortId:"ineligible",data:{}},od=function(e){var t=$t(e).config,n=(void 0===t?{}:t).hivemind,r=(n=void 0===n?{}:n).cohorts;return(void 0===r?{}:r)||{}},id=function(e,t){return function(e,t){return od(e)["".concat(t)]||ad}(e,t).cohortId},sd=function(e,t){var n=$t(e).config,r=(void 0===n?{}:n).featureFlags;return(void 0===r?{}:r)[t]},cd=function(e,t){return!!sd(e,t)},ld=function(e,t){var n=$t(e).config,r=(void 0===n?{}:n).featureFlags,a=void 0===r?{}:r,o=(0,T.get)(a,t);return"string"==typeof o?"experimental"===id(e,o):!!o},ud=function(e){var t=$t(e).config;return(void 0===t?{}:t).placement!==Z&&(Xs()?cd(e,"enableMobileEditWithOver"):cd(e,"enableEditWithOver"))},dd=function(e){return cd(e,"enableLogoCreate")},pd=function(e){var t=Uc(e).appName;return cd(e,"enableOverFlyout")&&!cd(e,"disableFlyouts")&&t!==ee&&"commerce-catalog"!==t},fd=function(e){return ld(e,"enableOverGenerateLogo")},md=function(e){return cd(e,"enableVimeoCreateFlyout")&&!cd(e,"disableFlyouts")},hd=function(e){return cd(e,"enableVimeoStandaloneFlyout")&&!cd(e,"disableFlyouts")},gd=function(e){return cd(e,"enableImageCreate")},vd=function(e){return cd(e,"enableRemoveInsertBar")},yd=function(e){var t=$t(e).appOptions,n=(void 0===t?{}:t).appName;return cd(e,"enableStudioBgRemovalTooltip")&&!cd(e,"disableFlyouts")&&n===F},Ed=function(e){return ld(e,"experiments.enableStudioLogoCreate")},bd=function(e){return cd(e,"enableMobileLogoCreateCta")},_d=function(e){var t=$t(e),n=t.appOptions,r=void 0===n?{}:n,a=t.config,o=(void 0===a?{}:a).placement;return r.appName===ee&&"LOGO"===o},Od=function(e){return cd(e,"enableReducedUploadArea")},Id=function(e){return cd(e,"enableInlineUpload")},Sd=function(e){return cd(e,"enableFloatingUpload")},wd=function(e){return cd(e,"enableVPInlineUpload")},Td=function(e){return!!cd(e,"enableStudioResize")||void 0},kd=function(e){return cd(e,"enableLogoZeroState")},Cd=function(e){var t=Uc(e).appName,n=id(e,"airo_plus_experiment_4");return("on"===n||"off"===n)&&[ne,ee].includes(t)},Ad=function(e){var t=Uc(e).appName,n=id(e,"airo_plus_experiment_4");return("on"===n||"off"===n)&&[ne].includes(t)},xd=function(e){return cd(e,"enablePhotoshootService")},Ld=function(e){return"on"===id(e,"editor_google_photos_uploader_27052024")},Pd=function(e){return"on"===id(e,"editor_google_photos_uploader_27052024")||"default"===id(e,"editor_google_photos_uploader_27052024")},Dd=function(e){return sd(e,"warnStudioLanguage")||[]};const Md=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collectionKey;return!(e.renderMode===ic&&[Ie].includes(t))};function Nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nd(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ud=(0,f.connect)((function(e,t){var n,r=Rc(e).callbacks,a=void 0===r?{}:r;return Object.assign(Rd(Rd({canSelect:Md(t)},sl(e)),{},{dataSource:t.dataSource,enableEditWithOver:ud(e),localDimensions:ul(e),onBackToTopButtonClick:a.onBackToTopButtonClick,planFeatures:Mc(e),isDifyAgent:rd(e).isDifyAgent,isAllowedDelegate:null===(n=rd(e))||void 0===n?void 0:n.isAllowedDelegate}),dl(e))}),(function(e,t){return{onThumbnailShiftClick:function(n){var r=t.dataSource;e(xo(Rd({item:n,dataSource:r},wc(n,t))))},onThumbnailClick:function(n){e(Co(wc(n,t)))},onFivToggle:function(n){var r=t.pathToDataSource;e(Qo({index:n,pathToDataSource:r}))},onImageError:function(t){e(wi(t))}}}))((function(e){return l().createElement(ws,{disableHeight:!0},(function(n){var r=n.width;return l().createElement(nd,t({},e,{clientWidth:r}))}))}));function jd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jd=function(){return!!e})()}var Fd=function(e){b(a,e);var t,n,r=(t=a,n=jd(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"handleChange",value:function(e){var t=(0,T.toArray)(e.target.files);t.length&&(this.props.onUpload(t),this.inputRef.value="")}},{key:"setInputRef",value:function(e){this.inputRef=e}},{key:"clickUpload",value:function(){this.inputRef.click()}},{key:"onInputClick",value:function(){var e=this.props.onAddCtaButtonClick;"function"==typeof e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.mediaTypes,r=t.allowMultiple,a=void 0===r||r;return l().createElement("input",{className:"upload-image-input",ref:function(t){return e.setInputRef(t)},type:"file",accept:qt(n),multiple:!zt(n,Me)&&a,onChange:this.handleChange,"data-testid":"image-uploader",onClick:this.onInputClick})}}]),a}(c.Component);Fd.propTypes={onUpload:d().func.isRequired,mediaTypes:d().arrayOf(d().oneOf(Ve)),onAddCtaButtonClick:d().func,allowMultiple:d().bool},Fd.defaultProps={mediaTypes:[De]};const Gd=Fd,Vd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.level,n=e.message,r=e.meta,a=e.error,o=e.props,i=void 0===o?{}:o,s=i.rootDomain,c=i.appName,l=i.websiteId,u=i.accountId,d=i.postLog;if(d){[mu,hu,gu].includes(t)||(t=mu),a&&a.message&&(n+=" ".concat(a.message));var p={level:t,message:n,meta:(0,T.merge)({},r,{websiteId:l,accountId:u,appName:c,imLiveVersion:St()})};a&&(a.meta&&Object.assign(p.meta,a.meta),a.stack&&(p.meta.stack=a.stack)),d({rootDomain:s,log:p})}};function Bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Hd=function(e,t){var n,r,a,o=t.map((function(e){return e.mediaType=function(e){return Bt({contentType:e.type,filename:e.name})}(e),e})),i=e.searchText,c=e.selectedCollection,l=i?"SEARCH_RESULTS":c,u=(s(n={},au,0),s(n,su,l),s(n,"numOfAssets",0),n),d=o.filter((function(e){return e.mediaType!==Me})),p=ru(t),f=p.formattedSize,m=p.suffix,h=p.isValid;if(d&&d.length>0){var g=h?f+m:"No file size available";r=function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],o=a.size,i=a.name,s=a.type;o?n.push(e[r]):t({level:hu,message:"trying to upload empty file",meta:{file:{size:o,name:i,type:s}}})}return n}(d,Vd),u[au]+=d.length,u["number of non-videos"]=d.length,u["total upload size"]=g,u.numOfAssets+=d.length}if((0,T.get)(e,"config.featureFlags.enableVimeo",!1)){var v=o.filter((function(e){return e.mediaType===Me}));if(v&&v.length)if(e.mediaTypes.includes(Me))a=v,u[au]+=v.length,u["number of videos"]=v.length,u.numOfAssets+=v.length;else{var y=v[0],E=y.size,b=y.name,_=y.type;Vd({level:hu,message:"trying to upload video file in NON-VIDEO mediaType context",meta:{file:{size:E,name:b,type:_}},props:e})}}return(r||a)&&e.onFilesUpload({images:r,videos:a}),u};function Kd(e,t){(0,e.trackEvent)("IM_TRACK_UPLOAD_BUTTON_CLICK",Hd(e,t))}function zd(e){var t=e.trackEvent,n=e.searchText,r=e.selectedCollection,a=e.mediaTypes,o=n?"SEARCH_RESULTS":r,i=(void 0===a?[]:a).reduce((function(e,t){return e["".concat(t,"_ACCEPTED")]=!0,e}),{}),c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(s({},su,o),i);return function(){t("IM_TRACK_ADD_CTA_BUTTON_CLICK",c)}}function Wd(e,t,n){var r=e.trackEvent,a=Hd(e,t);if(n&&n.length>0){var o=n.map((function(e){return e.type})).join(", ");a["rejected file types"]=o}delete a.numOfAssets,r("IM_TRACK_DRAG_AND_DROP",a)}function qd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qd=function(){return!!e})()}var Yd=function(e){b(a,e);var t,n,r=(t=a,n=qd(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props,t=e.onImagesUpload,n=e.mediaTypes,r=e.enableFloatingUpload,a=e.hasStockImages,o=e.trackEvent,i=e.selectedCollection,s="UPLOAD_OR_DRAG_FILES",c="ADD_FILES";return zt(n,Me)?(s="UPLOAD_OR_DRAG_VIDEO",c="ADD_VIDEO"):zt(n,De)&&(s="UPLOAD_OR_DRAG",c="ADD_IMAGES"),l().createElement("div",{className:zl("no-images")},l().createElement("div",{className:"col-sx-12"},l().createElement("span",{className:"icon icon-img"},l().createElement(Ji(),null)),l().createElement("h2",{className:"no-images-heading"},l().createElement(p.FormattedMessage,{id:c})),l().createElement("p",{className:"no-image-subtext gray-light"},Xs()&&a?l().createElement(p.FormattedMessage,{id:"UPLOAD_OR_CHOOSE"}):l().createElement(p.FormattedMessage,{id:s})),!r&&!Xs()&&l().createElement("p",{className:"or-subtext gray-light"},"— ",l().createElement(p.FormattedMessage,{id:"OR"})," —"),!r&&l().createElement(ls(),{className:"btn btn-primary btn-primary-dark ux-btn-set-item image-upload-btn","data-click-eid":"no_images_upload_click"},l().createElement(p.FormattedMessage,{id:"UPLOAD"}),l().createElement(Gd,{onUpload:t,mediaTypes:n,onAddCtaButtonClick:zd({trackEvent:o,selectedCollection:i,mediaTypes:n})}))))}}]),a}(l().Component);Yd.propTypes={onImagesUpload:d().func.isRequired,postLog:d().func,mediaTypes:d().arrayOf(d().oneOf(Ve)),hasStockImages:d().bool,trackEvent:d().func,selectedCollection:d().string};const $d=Yd;function Xd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xd=function(){return!!e})()}var Qd=function(e){b(a,e);var t,n,r=(t=a,n=Xd(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"openFiv",value:function(e){var t=this.props.openFivWithInfoPane;e.stopPropagation(),t()}},{key:"render",value:function(){var e=this.props,t=e.messageID,n=e.searchQuery,r=e.isProduct,a=r?ts():Ji(),o=l().createElement("a",{className:"open-fiv-link primary",onClick:this.openFiv},l().createElement(p.FormattedMessage,{id:"ADD_DESCRIPTION"}));return l().createElement("div",{className:zl("no-images")},l().createElement("span",{className:vs()("icon",{"icon-cart":r})},l().createElement(a,null)),l().createElement("h4",null,l().createElement(p.FormattedMessage,{id:t,values:{searchQuery:n}})),n&&l().createElement("p",{className:"no-results-subtext"},l().createElement(p.FormattedMessage,{id:"NO_RESULTS_SUBTEXT",values:{link:o}})))}}]),a}(l().Component);Qd.propTypes={messageID:d().string.isRequired,searchQuery:d().string,openFivWithInfoPane:d().func};const Zd=Qd;var Jd=C(7753),ep=C.n(Jd);function tp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tp=function(){return!!e})()}var np=ep().DropdownItem,rp=function(e){b(a,e);var t,n,r=(t=a,n=tp(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"onSortClick",value:function(e){var t=this.props,n=t.onSort,r=t.sortOrder,a=t.trackEventCallback;r!==e&&(a(e),n(e))}},{key:"render",value:function(){var e=this.props,t=e.defaultSelected,n=e.intl;return l().createElement(ep(),{type:"select",name:"orderSort",className:"sort-select",defaultSelected:t,menuAlignment:"right",enableFullscreen:!1,id:"im-sort-dropdown"},l().createElement(np,{key:0,title:n.formatMessage({id:"NEWEST_FIRST"}),onClick:this.onSortClick.bind(this,Ye),"data-testid":"dropdown-item"},l().createElement(p.FormattedMessage,{id:"NEWEST_FIRST"})),l().createElement(np,{key:1,title:n.formatMessage({id:"OLDEST_FIRST"}),onClick:this.onSortClick.bind(this,$e),"data-testid":"dropdown-item"},l().createElement(p.FormattedMessage,{id:"OLDEST_FIRST"})))}}]),a}(c.Component);rp.propTypes={defaultSelected:d().number};const ap=rp;function op(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(op=function(){return!!e})()}var ip=function(e){b(a,e);var t,n,r=(t=a,n=op(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props,t=e.mediaTypes,n=e.enableVimeo,r=e.selectedMediaType,a="DROP_FILES",o=function(e){return!Array.isArray(e)||!e.includes(Ne)}(t);return n&&r===Me?a="DROP_VIDEO":o&&(a="DROP_IMAGES"),l().createElement("div",{className:"row drag-hover-state"},l().createElement("div",{className:"col-sx-12 hover-container"},l().createElement("span",{className:"icon-container primary-background"},l().createElement("span",{className:"icon"},l().createElement(qi(),{fill:"#FFFFFF"}))),l().createElement("h2",{className:"drag-hover-heading"},l().createElement(p.FormattedMessage,{id:"UPLOAD_TO_SITE"})),l().createElement("p",{className:"drag-hover-subtext"},l().createElement(p.FormattedMessage,{id:a}))))}}]),a}(l().Component);const sp=ip;ip.propTypes={mediaTypes:d().arrayOf(d().oneOf(Ve)),enableVimeo:d().bool,selectedMediaType:d().oneOf(Ve)};var cp=C(6051),lp=C.n(cp);function up(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(up=function(){return!!e})()}var dp=function(e){b(a,e);var t,n,r=(t=a,n=up(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),(t=r.call(this,e)).state={isHovering:!1},P()(y(t)),t}return v(a,[{key:"handleDrop",value:function(){var e;this.setState({isHovering:!1}),(e=this.props).onDrop.apply(e,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.mediaTypes,r=void 0===n?[]:n,a=t.className,o=t.disabled,i=t.enableVimeo,s=t.selectedMediaType,c=t.rejectFiles,u=t.disableHover,d=t.enableClick;return Xs()?this.props.children:l().createElement(lp(),{className:a,activeClassName:"active-dropzone primary-border product-background",accept:qt(r),multiple:!zt(r,Me),disableClick:!d,onDrop:this.handleDrop,onDropRejected:c,onDragEnter:function(){return e.setState({isHovering:!0})},onDragLeave:function(){return e.setState({isHovering:!1})},disabled:o||!1,"data-testid":"dropzone"},!u&&l().createElement(sp,{mediaTypes:r,enableVimeo:i,selectedMediaType:s}),(u||!this.state.isHovering)&&this.props.children)}}]),a}(c.Component);function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mp=function(){return!!e})()}dp.propTypes={onDrop:d().func.isRequired,className:d().string.isRequired,children:d().node.isRequired,disabled:d().bool,mediaTypes:d().arrayOf(d().oneOf(Ve)),enableVimeo:d().bool,selectedMediaType:d().oneOf(Ve),rejectFiles:d().func,disableHover:d().bool};const hp=function(e){var n=function(n){b(i,n);var r,a,o=(r=i,a=mp(),function(){var e,t=O(r);if(a){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function i(e){var t;return h(this,i),(t=o.call(this,e)).state={offset:e.pageSize,pageId:1},P()(y(t)),t}return v(i,[{key:"handleOnScrollEnd",value:function(){var e=this.props,t=e.dataSourceFullLength,n=e.onLoadMore,r=e.pageSize,a=this.state,o=a.offset,i=a.pageId;if(!(o>t)){var s={pageId:i+1,offset:o+r};this.setState(s,(function(){n(fp(fp({},s),{},{pageSize:r}))}))}}},{key:"getItemsToRender",value:function(){var e=this.props.dataSource,t=this.state.offset;return t>e.length?e:e.slice(0,t)}},{key:"render",value:function(){var n=(0,T.omit)(this.props,["dataSource","pageSize"]),r=this.getItemsToRender();return l().createElement(e,t({dataSource:r,onScrollEnd:this.handleOnScrollEnd},n))}}]),i}(c.Component);return n.propTypes={dataSource:d().array,dataSourceFullLength:d().number,onLoadMore:d().func,pageSize:d().number},n.defaultProps={onLoadMore:function(){},pageSize:100},n};function gp(e){return(0,T.get)(e,"config.featureFlags.enableVimeo",!1)}function vp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vp=function(){return!!e})()}var yp=hp(Ud),Ep=function(e){b(o,e);var n,r,a=(n=o,r=vp(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;h(this,o);var n=(t=a.call(this,e)).props.sourceType,r=void 0===n?R:n;return t.state={sourceType:r},P()(y(t)),t}return v(o,[{key:"componentDidMount",value:function(){var e=this.props.onTrackPerfLaunchEnd;this.hasNoAssets()&&e&&e()}},{key:"resetState",value:function(){this.clearSearch(),this.setState({sourceType:R})}},{key:"onUploadClick",value:function(e){Kd(this.props,e),this.resetState()}},{key:"onModalFileDrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Wd(this.props,e,t),this.resetState()}},{key:"clearSearch",value:function(){(0,this.props.onSearchImages)({searchText:""})}},{key:"handleOnLoadMore",value:function(e){var t=this.props,n=t.collectionAssets,r=t.sourceType,a=t.onLoadMoreMixedAssets,o=t.onLoadMoreImageDimensions,i=t.onLoadMoreVideos,s=e.nextPageId,c=e.offset,l=e.pageSize;Array.isArray(r)?a(s):r===$&&i(),o(n.slice(c-l,c+1))}},{key:"renderUploadedImages",value:function(){var e=this.props,n=e.config,r=e.collectionAssets,a=e.collectionAssetsTotal,o=e.insertItem,i=e.deleteItem,s=e.enableDelete,c=e.uploadedAssetsFetched,u=e.pathToDataSource,d=e.OLSImageData,p=e.isSavingMetadata,f=e.collectionKey,m=e.renderNoResults,h=e.searchText,g=e.enableInlineUpload,v=e.mediaTypes,y=this.state.sourceType,E=d.olsImages;if((y===H||y===G)&&0===r.length)return l().createElement(Zd,{messageID:"FOUND_ZERO"});if(c&&0===r.length&&h)return m();var b=y===F?d.pathToDataSource:u,_=E&&E.length>0?"ols-images-list":"uploaded-list",O=(0,T.pick)(this.props,["selectionLimit","trackEvent","thumbnailSize","collectionKey","renderMode","inWebsiteContext","minDimensions","preloadParams","intl","config","enableDelete","onMetadataUpdate","onTrackPerfLaunchEnd","onDownloadButtonClick","onCoverImageUpdate","postLog","thumbnailSettings","renderUploader","mediaTypes","selectedMediaType","uploadCtaId","openOverCanvas","insertLabel"]),I=y===F?d.shouldShowMetadata:this.props.shouldShowMetadata;return l().createElement(yp,t({dataSource:r,dataSourceFullLength:a,mediaType:De,pageSize:n.pageSize,onInsertButtonClick:o,onDeleteButtonClick:s&&i,isLoading:!c,pathToDataSource:b,className:_,shouldShowMetadata:I,isSavingMetadata:p,enableInlineUpload:g&&(f===ve||zt(v,Ne)),onLoadMore:this.handleOnLoadMore},O))}},{key:"renderNoImages",value:function(e){var t=this.props,n=t.onBrowseStockClick,r=t.sourceType,a=t.showStockImages,o=t.postLog,i=t.mediaTypes,s=t.selectedMediaType,c=t.enableFloatingUpload,u=t.trackEvent,d=t.selectedCollection;if(!e)return r===H||r===G?l().createElement(Zd,{messageID:"FOUND_ZERO"}):l().createElement($d,{onImagesUpload:this.onUploadClick,onBrowseStockClick:n,hasStockImages:a,postLog:o,mediaTypes:i,enableVimeo:gp(this.props),selectedMediaType:s,enableFloatingUpload:c,trackEvent:u,selectedCollection:d})}},{key:"hasVideo",value:function(){var e=this.props.mediaTypes;return e&&e.includes(Me)}},{key:"hasNoAssets",value:function(){var e=this.props,t=e.collectionAssets,n=e.hasUploaded,r=e.searchText,a=this.state.sourceType,o=t&&t.length>0;return a===G?!o:this.hasVideo()?!o&&!n&&!r:!o&&!n}},{key:"renderImageCount",value:function(){var e=this.props,t=e.breadcrumb,n=e.statusMessage,r=e.collectionAssets,a=e.collectionAssetsTotal,o=r&&a;return this.hasNoAssets()?null:l().createElement(Yl,{statusMessage:t?null:n,count:o,typeSuffix:Ht(r)?"":$l,type:"found"})}},{key:"trackSort",value:function(e){this.props.trackEvent("IM_TRACK_UPLOADED_SORT",s({},ou,e))}},{key:"renderDropdown",value:function(){var e=this.props,t=e.uploadedOrder,n=e.intl,r=e.onImagesSort,a=t===Ye?0:1;return l().createElement(ap,{intl:n,defaultSelected:a,onSort:r,sortOrder:t,trackEventCallback:this.trackSort})}},{key:"render",value:function(){var e=this.props,t=e.selectedMediaType,n=e.uploadedAssetsFetched,r=e.renderMode,a=e.searchText,o=e.title,i=e.breadcrumb,s=e.mediaTypes,c=e.supportsDropZone,u=e.enableProgressPopup,d=e.rejectFiles,f=e.isVimeoLoading,m=e.sourceType,h=e.renderGalleryZeroState,g=e.renderCtaArea,v=e.enableCtaSection,y=e.isVentureHomeLogo,E=e.enableInlineUpload,b=e.enableFloatingUpload,_=!n||!this.hasNoAssets(),O=(Array.isArray(m)?m.includes($):m===$)&&f,I=!E&&!b&&zt(s,Ne)&&c&&h&&_&&!a,S=l().createElement("div",{className:"toolbar-info-container gray"},this.renderImageCount(),_&&!this.hasVideo()&&this.renderDropdown()),w=_?{className:"dropzone-with-images",fn:this.renderUploadedImages()}:{className:vs()("dropzone-no-images",{"product-light-border has-border":c}),fn:this.renderNoImages(v)};return l().createElement(l().Fragment,null,(i||y)&&!O&&l().createElement(l().Fragment,null,i,v&&g&&l().createElement("div",null,l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"ADD_TO_LIBRARY"})),g(m,this.hasNoAssets())),!(v&&this.hasNoAssets())&&l().createElement("div",{className:vs()("image-selector-toolbar uploaded-toolbar",{"no-progress":u})},l().createElement("h5",{className:"subtitle"},a?l().createElement(p.FormattedMessage,{id:"RESULTS_LABEL",values:{searchText:a}}):l().createElement(p.FormattedMessage,{id:o||"RECENTLY_ADDED"})),S)),l().createElement(dp,{className:vs()(w.className,{"full-scroll":r===ic}),onDrop:this.onModalFileDrop,disabled:!c,mediaTypes:s,enableVimeo:gp(this.props),selectedMediaType:t,rejectFiles:d},I&&l().createElement(l().Fragment,null,l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"ADD_TO_LIBRARY"})),h(),l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"MY_UPLOADS"}))),l().createElement("div",{className:"uploaded-images-container"},O?l().createElement("div",{className:"spinner-container"},l().createElement(x(),{size:"lg"})):w.fn)))}}]),o}(c.Component);Ep.propTypes=Object.assign({collectionAssets:d().array,collectionAssetsTotal:d().number,OLSImageData:d().object,recentUploadedImages:d().arrayOf(d().shape({filename:d().string,imageUrl:d().string})),enableDelete:d().bool,autoSelectAfterUpload:d().bool,onFilesDelete:d().func,onImagesUpload:d().func,onMetadataUpdate:d().func,onLoadMoreImages:d().func,onCoverImageUpdate:d().func,renderGalleryZeroState:d().func,onBrowseStockClick:d().func,uploadedAssetsFetched:d().bool,selectionLimit:d().number,showStockImages:d().bool,uploadedOrder:d().oneOf([Ye,$e]),hasUploaded:d().bool,searchText:d().string,title:d().string,onFivToggle:d().func,back:d().func,renderNoResults:d().func,enableCtaSection:d().bool},de,pe,fe);const bp=Ep;function _p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Op(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ip=function(e,t){var n=Rc(e),r=n.renderMode,a=n.placement,o=n.showGeneratedLogos,i=n.showGeneratedImages;return Uc(e).appName===ee&&"LOGO"===a||r===ic&&(t===B||(t===G?dd(e)&&function(e){return cd(e,"enableLogoPromo")}(e):t===$?function(e){return cd(e,"enableVideoPromo")}(e):!(!o||t!==G)||!(!i||t!==Y)))};const Sp=(0,f.connect)((function(e,t){var n=t.sourceType,r=Rc(e),a=sl(e).selectedItems,o=zc(e),i=function(e,t){if(Array.isArray(t)){if(t.length>1)return tl(e);t=t[0]}var n=Kc(e),r=n.uploadedImages,a=Dc({uploadedAssetsFetched:n.uploadedImagesFetched},ft(n,["uploadedImages","uploadedImagesFetched"]));switch(t){case F:var o=zc(e).olsImages;return Dc({uploadedAssets:o,uploadedAssetsTotal:o.length},a);case G:var i=Yc(e,G);return Dc({uploadedAssets:i,uploadedAssetsTotal:i.length},a);case J:var s=qc(e,J,[De,Ne,Re]);return Dc({uploadedAssets:s,uploadedAssetsTotal:s.length},a);case H:var c=Yc(e,H);return Dc({uploadedAssets:c,uploadedAssetsTotal:c.length},a);case Q:var l=Wc(e);return Dc({uploadedAssets:l,uploadedAssetsTotal:l.length},a);case B:var u=$c(e);return Dc({uploadedAssets:u,uploadedAssetsTotal:u.length},a);case Y:var d=qc(e,Y,[De]);return Dc({uploadedAssets:d,uploadedAssetsTotal:d.length},a);case Z:var p=el(e);return Dc({uploadedAssets:p,uploadedAssetsTotal:p.length},a);case $:var f=Jc(e),m=f.uploadedVideos,h=f.uploadedVideosFetched,g=ft(f,["uploadedVideos","uploadedVideosFetched"]);return Dc({uploadedAssets:m,uploadedAssetsTotal:g.totalVideosInAccount,uploadedAssetsFetched:h},g);case q:var v=Yc(e,q);return Dc({uploadedAssets:v,uploadedAssetsTotal:v.length},a);default:return Dc({uploadedAssets:r,uploadedAssetsTotal:r.length},a)}}(e,n),s=i.uploadedAssets,c=ft(i,["uploadedAssets"]);return Op(Op({config:r,OLSImageData:o},c),{},{selectedItems:a,collectionAssets:s,collectionAssetsTotal:c.uploadedAssetsTotal,enableCtaSection:Ip(e,n)})}),(function(e){return{onFilesDelete:function(t){e(Ya(t))},onFilesUpload:function(t){var n=t.images,r=t.videos;e(Na({images:n,videos:r}))},onImagesSort:function(t){e($a(t))},onSearchImages:function(t){e(Wo(t))},onLoadMoreVideos:function(){e(ui())},onLoadMoreImageDimensions:function(t){e(Ho(t))},onLoadMoreMixedAssets:function(t){e(di(t))}}}))(bp);function wp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wp=function(){return!!e})()}var Tp=function(e){b(o,e);var n,r,a=(n=o,r=wp(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),t=a.call(this,e),P()(y(t)),t}return v(o,[{key:"renderImages",value:function(){var e,n=this.props,r=n.stockImages,a=n.isLoadingNextStock,o=n.onStockScrollEnd,i=n.stockNextPageUrl,s=n.insertItem,c=(0,T.pick)(this.props,["tabKey","pathToDataSource","selectionLimit","trackEvent","thumbnailSize","preloadParams","intl","renderMode","config","openOverCanvas","insertLabel"]);return r.length>0?l().createElement(Ud,t({dataSource:r,sourceType:null===(e=r[0])||void 0===e?void 0:e.sourceType,isLoadingNext:a,onScrollEnd:o.bind(this,i),mediaType:De,onInsertButtonClick:s},c)):l().createElement(Zd,{messageID:"NO_STOCK_MEDIA_LABEL"})}},{key:"render",value:function(){var e=this.props,t=e.isSearching,n=e.isLoadingStock,r=e.intl,a=e.renderQuickSummary,o=e.stockImageQuery,i=e.stockTotalCount,s=t||n;return l().createElement(l().Fragment,null,a({searchText:o,totalCount:i}),s?l().createElement(Pu,{intl:r}):this.renderImages())}}]),o}(c.Component);Tp.propTypes=Object.assign({stockImages:d().array.isRequired,defaultSearchKeyword:d().string,onStockScrollEnd:d().func,stockTotalCount:d().number,stockNextPageUrl:d().string,insertItem:d().func,renderQuickSummary:d().func},de,pe,fe),Tp.defaultProps={renderQuickSummary:function(){}};const kp=Tp;var Cp="GET",Ap="SEARCH",xp="NEXTPAGE",Lp="STOCKIMAGES",Pp="SOURCE_NOTIFY",Dp="PRODUCTS",Mp=C(4756),Np=C.n(Mp);function Rp(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Up(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Rp(o,r,a,i,s,"next",e)}function s(e){Rp(o,r,a,i,s,"throw",e)}i(void 0)}))}}const jp=function(e){var t=e.market,n=e.businessCategory;return"".concat(t,"#").concat(n,"#images")},Fp=function(e){var t=e.market,n=e.businessCategory;return"".concat(t,"#").concat(n,"#videos")};var Gp=new Set(["jpg","jpeg","png","gif","webp","svg","tif","tiff"]);const Vp=function(e){try{var t=new URL(e).pathname.split(".").pop().toLocaleLowerCase();return Gp.has(t)?".".concat(t):""}catch(e){return""}};function Bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bp(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kp(e){return e.mediaType===De?Hp(Hp({},e),{},{imageUrl:e.url}):Hp(Hp({},e),{},{url:e.dataUrl,imageUrl:e.dataUrl})}function zp(e,t){return{stock:e.result.map((function(e){var n;return Hp(Hp({},e),{},{gdSource:t,sourceType:R,mediaType:De,imageUrl:e.url,isStockMedia:!0,size:null===(n=e.size)||void 0===n?void 0:n.resized,dimensions:(0,T.pick)(e.dimensions,["width","height"]),permission:{edit:!0,download:!1,delete:!1}})})),stockTotalCount:e.totalCount,stockNextPageUrl:e.nextPage}}function Wp(e,t){return{stock:e.images.map((function(e){var n=e.display_sizes.find((function(e){return"high_res_comp_webp"===e.name})),r=e.display_sizes.find((function(e){return"comp_webp"===e.name}));return{id:e.id,url:n.uri,thumbnailUrl:r.uri,gdSource:t,sourceType:re,mediaType:De,imageUrl:n.uri,isStockMedia:!0,dimensions:e.max_dimensions,permission:{edit:!0,download:!1,delete:!1}}})),stockTotalCount:e.result_count,stockNextPageUrl:e.next_page_url}}function qp(e){var t,n=(s(t={},ae,zp),s(t,ie,zp),s(t,oe,Wp),s(t,"default",zp),t);return n[e]||n.default}function Yp(e){var t=e.result.map((function(e){return Hp(Hp({},e),{},{isStockMedia:!0,sourceType:R,mediaType:Me,imageUrl:e.image,videoUrl:e.video})}));return Hp(Hp({},e),{},{result:t})}function $p(e,t){var n,r,o,i,s=Hp(Hp({},e),{},{size:e.size?Number.parseInt(e.size,10):null,sourceType:R,mediaType:Bt(e),basePath:(n=e.filename,r=a(n.split("/"),2),o=r[0],i=r[1],o&&i?o:null),fileExtension:Gt(e.filename),permission:{delete:!0,download:!0,edit:!0}});return t&&(s.originalFilename=t),Kp(s)}function Xp(e,t){return e.map((function(e){return $p(e,t)}))}function Qp(e){var t=e.videos,n=ft(e,["videos"]);return Hp({videos:t.map((function(e){return Hp(Hp({},e),{},{originalFilename:e.name,createdAt:e.created_time,isVimeoCreate:(0,T.get)(e,"metadata.is_vimeo_create",!1),permission:{download:!1,delete:!0}})}))},n)}function Zp(e,t){var n=t.containerId,r=t.assetBaseUrl,a=t.assetBaseDataUrl,o=t.originalFilename,i=t.containerIdLoopkup;return e.map((function(e){var t;try{t=e.filename.split("/").map(encodeURIComponent).join("/")}catch(n){t=e.filename}var s=Hp(Hp({},e),{},{url:"".concat(r,"/").concat(i[e.containerKey]||n,"/").concat(t),dataUrl:"".concat(a,"/").concat(i[e.containerKey]||n,"/").concat(t)});return delete s.containerKey,$p(s,o)}))}function Jp(e){var t=e.data.reduce((function(e,t){var n=function(e){e.images.sort((function(e,t){return e.height<t.height?-1:e.height>t.height?1:0}));var t=e.images[e.images.length-1],n=e.images.find((function(e){return e.height>=Bs}))||t;return{url:t.source,height:t.height,width:t.width,thumbnail:n.source}}(t),r=n.width,a=n.height,o=n.url,i=n.thumbnail;return e[t.id]={id:t.id,name:t.name,thumbnail:i,url:o,imageUrl:o,filename:"fb_".concat(t.id,"_").concat(r,"x").concat(a).concat(Vp(o)),sourceType:K,mediaType:De,dimensions:{width:r,height:a}},e}),{});return Hp(Hp({},e),{},{data:t})}function ef(e){var t=(e||{}).payload,n=(t=void 0===t?{}:t).posts,r=t.next,a=void 0===r?"":r;return{posts:n.filter((function(e){return e.mediaType===De})).map((function(e){var t=e.mediaURL.match(/s[1-9][0-9]*x[1-9][0-9]*/g),n=Hp(Hp({},e),{},{sourceType:z,imageUrl:e.mediaURL,url:e.mediaURL,filename:"ig_".concat(e.id).concat(Vp(e.mediaURL))});if(t){var r=t[0].slice(1).split("x");n.dimensions={width:parseInt(r[0],10),height:parseInt(r[1],10)}}return n})),next:a}}function tf(e,t){return t.map((function(t){return Kp(Hp(Hp({},t),{},{size:t.size?Number.parseInt(t.size,10):null,sourceType:e,mediaType:Bt(t),permission:{download:!0,edit:!0}}))}))}function nf(e){var t=e.slug,n=e.name,r=e.description_text,a=void 0===r?"":r,o=e.relative_url;return{id:t,name:n,description:a,mediaType:Fe,url:o}}function rf(e){var t=e.pages,n=e.total_count,r=e.current_page;return{data:e.products.map((function(e){var t=e.default_asset_url,n=e.updated_at,r=e.price,a=void 0===r?{}:r,o=e.sale_price,i=void 0===o?{}:o,s=i&&i.numeric?i.display:null;return Hp({image:t,price:a.display,salePrice:s,updatedAt:n,permission:{download:!1,delete:!1,edit:!1}},nf(e))})),totalCount:n,page:r,hasNext:r<t}}function af(e){var t=e.name,n=e.description,r=e.master,a=(r=void 0===r?{}:r).display_price,o=r.display_sale_price,i=r.images,s=void 0===i?[]:i,c=e.url;return Hp(Hp({},nf(e)),{},{descriptionRaw:n,price:a,salePrice:o,images:s.map((function(e){return{url:e.original_url}})),url:c,productName:t})}function of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?of(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):of(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cf(){return(cf=Up(Np().mark((function e(t,n,r){var a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O,I,S,w;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Rc(t),o=a.renderMode,i=a.pageSize,s=a.mediaTypes,c=a.market,l=a.businessCategory,u=a.businessCategoryDisplayName,d=a.rootDomain,p=a.stockImageSearchType,e.prev=2,zt(s,Me)||zt(s,Fe)||o===ic||!l&&!u&&ie===p){e.next=20;break}if(f=rl(t),m=f.categoryStockImages,h=jp({market:c,businessCategory:l}),g=m[h],(0,T.isEmpty)(g)){e.next=11;break}return n({changeState:function(e){return sf(sf({},e),{},{stock:g,stockTotalCount:g.length,stockNextPageUrl:"",stockImageQuery:""})},inProgress:!1}),e.abrupt("return");case 11:return n({inProgress:!0}),v=Nc(t),y=v.api,e.next=15,y.stockImages.load.makeRequest({market:c,businessCategory:l,businessCategoryDisplayName:u,rootDomain:d,pageSize:i,stockImageSearchType:p});case 15:E=e.sent,b=E.data,_=qp(p),O=_(b,p),I=O.stock,S=O.stockTotalCount,w=O.stockNextPageUrl,n({changeState:function(e){return sf(sf({},e),{},{stock:I,stockTotalCount:S,stockNextPageUrl:w,stockImageQuery:""})},inProgress:!1});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),r(e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))).apply(this,arguments)}function lf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lf(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function df(){return(df=Up(Np().mark((function e(t,n,r,a){var o,i,s,c,l,u,d,p,f,m,h,g,v,y;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=Rc(t),i=o.pageSize,s=o.market,c=o.rootDomain,l=o.stockImageSearchType,s&&c){e.next=5;break}return e.abrupt("return");case 5:return n({inProgress:!0}),u=Nc(t),d=u.api,e.next=9,d.stockImages.search.makeRequest({market:s,rootDomain:c,query:a,pageSize:i,stockImageSearchType:l});case 9:p=e.sent,f=p.data,m=qp(l),h=m(f,l),g=h.stock,v=h.stockTotalCount,y=h.stockNextPageUrl,n({changeState:function(e){return uf(uf({},e),{},{stock:g,stockTotalCount:v,stockNextPageUrl:y,stockImageQuery:a})},inProgress:!1}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),r(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mf(){return(mf=Up(Np().mark((function e(t,n,r,a){var o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n({inProgress:!0}),o=Rc(t),i=o.stockImageSearchType,s=Nc(t),c=s.api,e.next=8,c.stockImages.nextPage.makeRequest(a);case 8:l=e.sent,u=l.data,d=qp(i),p=d(u,i),f=p.stock,m=p.stockTotalCount,h=p.stockNextPageUrl,n({changeState:function(e){return ff(ff({},e),{},{stock:e.stock.concat(f),stockTotalCount:m,stockNextPageUrl:h})},inProgress:!1}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),r(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hf(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vf(e,t,n){return yf.apply(this,arguments)}function yf(){return yf=Up(Np().mark((function e(t,n,r){var a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O,I,S=arguments;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(a=S.length>3&&void 0!==S[3]?S[3]:{}).sortOrder,i=a.keywords,s=a.page,c=void 0===s?1:s,e.prev=1,n({inProgress:!0}),l=Nc(t),u=l.api,d=Rc(t),p=d.rootDomain,f=d.websiteId,m=d.market,h=Gc(t),o||(o=h.sortOrder||Ye),"string"!=typeof i&&(i=h.keywords),g={rootDomain:p,websiteId:f,page:c,sortOrder:o},i&&Object.assign(g,{market:m,keywords:i}),e.next=12,u.products.load.makeRequest(g);case 12:v=e.sent,y=v.data,E=rf(y),b=E.data,_=E.page,O=E.totalCount,I=E.hasNext,n({changeState:function(e){return gf(gf({},e),{},{page:_,hasNext:I,products:c>1?h.products.concat(b):b,productsFetched:!0,totalCount:O,sortOrder:o,keywords:i})},inProgress:!1}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),n({changeState:function(){return{productsFetched:!0}},inProgress:!1}),r(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])}))),yf.apply(this,arguments)}function Ef(){return Ef=Up(Np().mark((function e(t,n,r){var a,o,i,s,c;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=Gc(t),o=a.page,i=void 0===o?0:o,s=a.sortOrder,c=a.keywords,!a.isLoadingNext){e.next=5;break}return e.abrupt("return");case 5:vf(t,n,r,{sortOrder:s,keywords:c,page:i+1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),Ef.apply(this,arguments)}const bf={get:vf,search:function(e,t,n,r){return vf(e,t,n,{keywords:r})},nextPage:function(e,t,n){return Ef.apply(this,arguments)}};var _f,Of=(s(_f={},Lp,{get:function(e,t,n){return cf.apply(this,arguments)},search:function(e,t,n,r){return df.apply(this,arguments)},nextPage:function(e,t,n,r){return mf.apply(this,arguments)}}),s(_f,Dp,bf),_f),If=function(){function e(t,n,r,a){h(this,e),this.key=t,this.actions=n,this.stateCallback=r,this.errorCallback=a}return v(e,[{key:"action",value:function(e){switch(e){case Cp:return this.actions.get;case Ap:return this.actions.search;case xp:return this.actions.nextPage;default:return null}}},{key:"get",value:function(e,t){var n=t.getState,r=t.dispatch;this.actions&&this.actions.get&&this.actions.get(n(),this.stateCallback.bind(null,r,Cp),this.errorCallback.bind(null,r,Cp),e)}},{key:"search",value:function(e,t){var n=t.getState,r=t.dispatch;this.actions&&this.actions.search&&this.actions.search(n(),this.stateCallback.bind(null,r,Ap),this.errorCallback.bind(null,r,Ap),e)}},{key:"nextPage",value:function(e,t){var n=t.getState,r=t.dispatch;this.actions&&this.actions.nextPage&&this.actions.nextPage(n(),this.stateCallback.bind(null,r,xp),this.errorCallback.bind(null,r,xp),e)}}]),e}();function Sf(e){return e in Of?new If(e,Of[e],(function(t,n,r){t({type:Pp,payload:{notifyResult:r,sourceType:e,action:n}})}),(function(t,n,r){t({type:"SOURCE_ERROR",payload:{notifyResult:r,sourceType:e,action:n}})})):null}function wf(e,t,n){return{sourceKey:e,action:t,payload:n}}var Tf=function(){function e(t,n){h(this,e),this.sources=t,this.dispatch=n}return v(e,[{key:"dispatchAction",value:function(e,t){var n=this;this.sources.map((function(r){r.action(e)&&n.dispatch({type:"SOURCE_INVOKE",payload:wf(r.key,e,t)})}))}}]),e}();function kf(e,t){var n=[];return e.map((function(e){var t=Sf(e);t&&n.push(t)})),new Tf(n,t)}const Cf=(0,f.connect)((function(e){return Object.assign({config:Rc(e)},Hc(e))}),(function(e){var t=kf([Lp],e);return{onStockScrollEnd:function(e){t.dispatchAction(xp,e)}}}))(kp);function Af(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Af=function(){return!!e})()}var xf=function(e){b(o,e);var n,r,a=(n=o,r=Af(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),t=a.call(this,e),P()(y(t)),t}return v(o,[{key:"renderThumbnailList",value:function(){var e=this.props,n=e.tabKey,r=e.stockVideos,a=e.selectItem,o=e.insertItem,i=(0,T.pick)(this.props,["selectionLimit","trackEvent","thumbnailSize","intl","renderMode","config","insertLabel"]);return r.stockVideosTotalCount>0?l().createElement(Ud,t({tabKey:n,dataSource:r.stockVideos,pathToDataSource:r.pathToDataSource,onThumbnailClick:a,mediaType:Me,onInsertButtonClick:o},i)):l().createElement(Zd,{messageID:"NO_STOCK_MEDIA_LABEL"})}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.renderQuickSummary,r=e.stockVideos,a=r.stockVideosQuery,o=r.isSearching,i=r.stockVideosTotalCount;return l().createElement(l().Fragment,null,n({searchText:a,totalCount:i}),o?l().createElement(Pu,{intl:t}):this.renderThumbnailList())}}]),o}(c.Component);xf.propTypes=Object.assign({stockVideos:d().object,onStockVideosSearch:d().func.isRequired,stockVideosTotalCount:d().number,renderQuickSummary:d().func},de,pe,fe),xf.defaultProps={renderQuickSummary:function(){}};const Lf=xf,Pf=(0,f.connect)((function(e){return Object.assign({stockVideos:nl(e),config:Rc(e)})}),(function(e){return{onStockVideosSearch:function(t){t&&e(Aa(t))}}}))(Lf);var Df=C(1186),Mf=C.n(Df);const Nf=function(){return l().createElement("span",{className:"getty-image-label"},l().createElement(p.FormattedMessage,{id:"STOCK_GETTY_IMAGES_LABEL",values:{iStock:l().createElement("strong",null,"iStock"),gettyImagesLogo:l().createElement("img",{src:Mf(),alt:"Getty Images Logo",className:"getty-logo",draggable:"false"})}}))};function Rf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rf=function(){return!!e})()}var Uf=function(e){b(o,e);var n,r,a=(n=o,r=Rf(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t,n,r,i;return h(this,o),s(y(t=a.call(this,e)),"renderQuickSummary",(function(e){var n=e.totalCount,r=e.searchText,a=t.props,o=a.breadcrumb,i=a.config,s=(i=void 0===i?{}:i).stockImageSearchType,c=t.state.selectedMediaType;return o?l().createElement(l().Fragment,null,o,l().createElement("div",{className:"image-selector-toolbar gray flex"},l().createElement("h5",null,r?l().createElement(p.FormattedMessage,{id:"RESULTS_LABEL",values:{searchText:r}}):c===Me?l().createElement(p.FormattedMessage,{id:"STOCK_VIDEOS"}):s===oe?l().createElement(Nf,null):l().createElement(p.FormattedMessage,{id:"STOCK_MEDIA"})),l().createElement(Yl,{statusMessage:null,count:n,type:"found",typeSuffix:t.state.selectedMediaType===Me?Xl:""}))):null})),P()(y(t)),t.state={selectedMediaType:(n=t.props,r=n.selectedMediaType,i=n.mediaTypes,i.includes(r)?r:i[0])},t}return v(o,[{key:"render",value:function(){var e=(0,T.pick)(this.props,["selectionLimit","trackEvent","thumbnailSize","multiSelect","statusMessage","intl","collectionKey","renderMode","onLoadMoreImages","insertLabel"]);return e.renderQuickSummary=this.renderQuickSummary,l().createElement("div",{className:"stock-media"},l().createElement("div",{className:"stock-media-container"},this.state.selectedMediaType===De?l().createElement(Cf,t({},e,(0,T.pick)(this.props,["insertItem","onStockImagesSearch","onStockScrollEnd","stockNextPageUrl","defaultSearchKeyword","stockTotalCount","openOverCanvas"]))):l().createElement(Pf,t({},e,(0,T.pick)(this.props,["insertItem","onStockVideosSearch","stockVideosTotalCount","defaultSearchKeyword"])))))}}]),o}(c.Component);Uf.propTypes=Object.assign({defaultSearchKeyword:d().string,onStockScrollEnd:d().func,stockTotalCount:d().number,stockNextPageUrl:d().string,insertItem:d().func,statusMessage:d().element,selectedMediaType:d().string},de,pe,fe),Uf.defaultProps={selectedMediaType:De,mediaTypes:[De,Me]};const jf=Uf;function Ff(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ff=function(){return!!e})()}var Gf=function(e){b(a,e);var t,n,r=(t=a,n=Ff(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props,t=e.back,n=e.hasMargin,r=e.searchText?"SEARCH_ALL_MEDIA":"BACK_TO_ALL_MEDIA";return l().createElement("div",{className:vs()("collection-breadcrumb",{"has-margin":n})},l().createElement("span",{className:"primary",onClick:t},l().createElement(Kl(),{width:18,height:18}),l().createElement(p.FormattedMessage,{id:r})))}}]),a}(c.Component);Gf.propTypes={back:d().func.isRequired,hasMargin:d().bool,searchText:d().string};const Vf=Gf;function Bf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bf=function(){return!!e})()}var Hf=hp(Ud),Kf=function(e){b(a,e);var t,n,r=(t=a,n=Bf(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){var e;h(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return s(y(e=r.call.apply(r,[this].concat(n))),"getWebsiteImages",(function(){var t=e.props.website;return(0,T.get)(t,"images",[])})),s(y(e),"onLoadMore",(function(t){var n=t.offset,r=t.pageSize;(0,e.props.onLoadMoreImageDimensions)(e.getWebsiteImages().slice(n-r,n+1))})),e}return v(a,[{key:"renderThumbnailList",value:function(){var e=this.props,t=e.website,n=e.isLoading,r=e.trackEvent,a=e.postLog,o=e.intl,i=e.onFullScreenInsertClick,s=e.minDimensions,c=e.preloadParams,u=e.selectionLimit,d=e.collectionKey,p=e.config,f=e.renderMode,m=e.openOverCanvas,h=e.insertLabel,g=this.getWebsiteImages();return 0!==g.length||n?l().createElement(Hf,{collectionKey:d,selectionLimit:u,dataSource:g,mediaType:De,sourceType:t&&t.type,isLoading:n,trackEvent:r,postLog:a,intl:o,minDimensions:s,preloadParams:c,onInsertButtonClick:i,pageSize:p.pageSize,onLoadMore:this.onLoadMore,renderMode:f,openOverCanvas:m,insertLabel:h,config:p}):l().createElement(Zd,{messageID:"NO_IMAGES_LABEL"})}},{key:"render",value:function(){var e=this.props,t=e.website,n=e.renderDownloadButton,r=e.renderMode,a=((0,T.get)(t,"domainName","")||(0,T.get)(t,"name","")).toUpperCase(),o=this.getWebsiteImages(),i=o.filter((function(e){return!e.hasRenderError})).length,s=r===sc?"default":"primary",c=Ht(o);return l().createElement("div",{className:"image-list"},i>0&&l().createElement("div",{className:"asset-label image-selector-toolbar gray"},l().createElement("div",{className:"action-button-container"},l().createElement("div",null,n(s)),l().createElement("div",{className:"other-sites-label"},l().createElement(p.FormattedMessage,{id:c?"OTHER_SITES_IMAGES_LABEL":"OTHER_SITES_FILES_LABEL",values:{domainName:a}}))),l().createElement(Yl,{typeSuffix:c?"":$l,count:i,type:"found"})),this.renderThumbnailList())}}]),a}(c.Component);Kf.defaultProps={renderDownloadButton:function(){}},Kf.propTypes=Object.assign({website:d().object,isLoading:d().bool,onFullScreenInsertClick:d().func,renderDownloadButton:d().func},de,pe,fe);const zf=Kf;function Wf(e){var t,n,r=e.items,o=e.fullView,i=void 0!==o&&o,c=e.collectionKey,l=e.trackEvent,u=e.recentUploadedImages,d=void 0===u?[]:u,p=e.appName,f=void 0===p?"":p;if(r.length){var m=r[0].sourceType,h=r.some((function(e){return e.mediaType===Me})),g=function(e,t){var n=new Set(t.filter((function(e){return Boolean(e.id)})).map((function(e){return e.id})));return e.some((function(e){return Boolean(e.id)&&n.has(e.id)}))}(r,d),v=function(e,t){return!e||t!==Oe&&t!==Ie?t||"default":"".concat(t,"_").concat(e.toUpperCase())}(m,c),y=function(e){return e.reduce((function(e,t){var n=a(e,3),r=n[0],o=n[1],i=n[2];return[r+("ols"===t.basePath?1:0),o+(t.isStockMedia?1:0),i+(t.isStockMedia||t.mediaType!==Me?0:1)]}),[0,0,0])}(r),E=a(y,3),b=E[0],_=E[1],O=E[2],I=(s(t={},au,r.length),s(t,"image type",v),s(t,"OLS",b>0),s(t,"recentlyUploaded",String(g)),s(t,"is stock media",_>0),s(t,"stock media count",_),t);h&&(I["user video count"]=O),l(i?"IM_TRACK_FULL_VIEW_INSERT_BUTTON_CLICK":"IM_TRACK_INSERT_BUTTON_CLICK",I),f===te&&((n={uploadedDirectlyFromDevice:d.length>0,isFromSocialMedia:c===Ie,isImage:r.some((function(e){return e.mediaType===De})),trackEvent:l}).isImage&&(n.isFromSocialMedia||n.uploadedDirectlyFromDevice)&&(0,n.trackEvent)("IM_TRACK_NON_STOCK_IMAGE_INSERT_CLICK"))}}function qf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qf=function(){return!!e})()}var Yf=function(e){b(a,e);var t,n,r=(t=a,n=qf(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"onOtherSiteClick",value:function(e){(0,this.props.onOtherSiteClick)(e)}},{key:"onSiteTypeClick",value:function(e){(0,this.props.trackEvent)("IM_TRACK_".concat(e.toUpperCase(),"_SITE_TYPE_CLICK"))}},{key:"render",value:function(){var e=this.props,t=e.otherSites,n=t.selectedWebsite,r=t.isLoadingImages,a=e.config,o=e.trackEvent,i=e.postLog,s=e.intl,c=e.insertImages,u=e.minDimensions,d=e.preloadParams,p=e.statusMessage,f=e.selectionLimit,m=e.onLoadMoreImageDimensions,h=e.renderMode,g=e.breadcrumb,v=e.openOverCanvas,y=e.insertLabel;return l().createElement(l().Fragment,null,g,l().createElement("div",{className:"other-sites"},l().createElement(zf,{selectionLimit:f,website:n,isLoading:r,trackEvent:o,postLog:i,intl:s,config:a,statusMessage:p,minDimensions:u,preloadParams:n&&n.type===R?d:null,renderMode:h,onLoadMoreImageDimensions:m,onFullScreenInsertClick:function(e){c(e),Wf({items:[e],collectionKey:Oe,trackEvent:o,fullView:!0})},openOverCanvas:v,insertLabel:y})))}}]),a}(c.Component);Yf.propTypes=Object.assign({otherSites:d().object.isRequired,onOtherSiteClick:d().func.isRequired,insertImages:d().func.isRequired,onLoadMoreImages:d().func},de,pe,fe);const $f=Yf,Xf=(0,f.connect)((function(e){return{config:Rc(e),otherSites:al(e)}}),(function(e){return{onOtherSiteClick:function(t){e(so(t))},onLoadMoreImageDimensions:function(t){e(Ho(t))}}}))($f);function Qf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qf=function(){return!!e})()}var Zf=function(e){b(a,e);var t,n,r=(t=a,n=Qf(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"componentDidUpdate",value:function(e){this.props.onImagesLoaded&&e.isLoading&&!this.props.isLoading&&this.props.onImagesLoaded()}},{key:"formatThumbnailUrl",value:function(e,t){var n=zs({url:e,width:t?155:75,height:t?110:55});return'url("'.concat(n,'")')}},{key:"renderDocument",value:function(e){var t=e.mediaType,n=e.url,r=e.style,a=e.className,o=e.key,i=e.filename,s=this.props.postLog;switch(t){case Ne:return l().createElement(Eu,{filename:i,postLog:s,key:o,url:n,styles:r,className:a});case Re:case Ue:case Ge:return l().createElement(pc,{docType:t,filename:i,className:a,style:r});default:return null}}},{key:"renderGallery",value:function(){var e=this,t=this.props,n=t.gallery,r=t.url,a=t.isLoading,o=["mb mr","mb ml","mt mr","mt ml"];if(a)return l().createElement("div",{className:"image-selector-item"},o.map((function(e){return l().createElement("div",{className:"gradient-animation "+e,key:e})})));if((0,T.get)(n,"length",0)<4){var i=(0,T.get)(n,"0.mediaType");if(!r&&Be.includes(i))return l().createElement("div",{className:"image-selector-item"},this.renderDocument({mediaType:i,url:n[0].url,style:{width:155,height:110},filename:n[0].filename}));var s=r||(0,T.get)(n,"0.url"),c=this.formatThumbnailUrl(s,!0);return l().createElement("div",{className:"image-selector-item",style:{backgroundImage:c}})}return l().createElement("div",{className:"image-selector-item has-gallery"},n.slice(0,4).map((function(t,n){var r=t.url,a=t.imageUrl,i=t.mediaType,s=t.galleryMultipleUrl;return Be.includes(i)?e.renderDocument({mediaType:i,url:r,key:n,className:vs()(o[n],"gallery-pdf-item product-background"),style:{width:75,height:55}}):l().createElement("div",{key:n,className:vs()(o[n],"gallery-item product-background"),style:{backgroundImage:e.formatThumbnailUrl(s||a,!1)}})})))}},{key:"render",value:function(){var e=this.props,t=e.onCollectionClick,n=e.gallery,r=e.isLoading,a=e.zeroState,o=e.renderMode,i=e.EmptyStateIcon,s=n&&0===n.length&&!r,c=a?l().createElement("img",{src:a,alt:""}):l().createElement("div",null,l().createElement(i,{height:32,width:32}));return l().createElement("li",{role:"presentation","data-click-eid":"select_button_click",onClick:t,className:vs()("modal-image-selector-item-container product-light-border",{"collection-item":!s,"collection-zero-state":s,"product-background embedded-collection-container":o===ic})},s?c:l().createElement(l().Fragment,null,l().createElement("div",{className:"collection-background product-light-border"}),l().createElement("div",{className:"background-overlay"}),this.renderGallery()))}}]),a}(c.Component);Zf.propTypes={url:d().string,onCollectionClick:d().func.isRequired,gallery:d().array,zeroState:d().string,isLoading:d().bool,renderMode:d().oneOf([sc,ic]),postLog:d().func,EmptyStateIcon:d().oneOfType([d().func,d().object]),onImagesLoaded:d().func},Zf.defaultProps={isLoading:!1,EmptyStateIcon:Qi()};const Jf=Zf;function em(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(em=function(){return!!e})()}var tm=function(e){b(a,e);var t,n,r=(t=a,n=em(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"renderNoAlbums",value:function(){return l().createElement(Zd,{messageID:"NO_ALBUMS_LABEL"})}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.page,o=r.onAlbumClick,i=r.onScrollEnd,s=r.isLoadingAlbum,c=r.intl,u=(e=this.props.thumbnailSize,{width:(t="number"==typeof e)?e:e.width,height:t?e:e.height}),d=u.width,p=u.height;if(!a)return this.renderNoAlbums();var f=(0,T.values)(a.albums);if(0===f.length)return this.renderNoAlbums();var m=a.id,h=a.after,g=f.map((function(e,t){return l().createElement("span",{key:t,className:"image-collection"},l().createElement(Jf,{index:t,key:t,url:e.coverPhoto,width:d,height:p,onCollectionClick:o.bind(n,{albumId:e.id})}),l().createElement("p",{className:"collection-title"},e.name))})),v=l().createElement(xs,{className:zl("thumbnail-list scrollable uploaded-list"),dataAid:"thumbnail-list",mediaType:De,onScrollEnd:i.bind(this,{pageId:m,after:h})},g);return s?l().createElement(Pu,{intl:c}):l().createElement("div",{className:"thumbnail-list-wrapper"},v)}}]),a}(c.Component);tm.propTypes=Object.assign({page:d().object,onAlbumClick:d().func,onScrollEnd:d().func},de,pe,fe),tm.defaultProps={thumbnailSize:{width:Vs,height:105}};const nm=tm;var rm=C(8768),am=C.n(rm),om=C(4787),im=C.n(om);function sm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sm=function(){return!!e})()}var cm=nn.IM_SOCIAL_ACCESS_TOKEN_GET,lm=function(e){b(a,e);var t,n,r=(t=a,n=sm(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"receiveMessage",value:function(e){e.origin===window.location.origin&&e.data===cm&&(0,this.props.getSocialAccessToken)(K)}},{key:"componentDidMount",value:function(){window.addEventListener("message",this.receiveMessage,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receiveMessage)}},{key:"onClickLoginButton",value:function(){var e=this.props,t=e.authUrl,n=e.trackEvent;window.open(t,"bb_media_manager_auth","status=0,toolbar=0,location=0,menubar=0,directories=0,resizable=1,scrollbars=1,width=960,height=540"),n("IM_TRACK_FACEBOOK_CONNECT_CLICK")}},{key:"render",value:function(){var e=this.props,t=e.authUrl,n=e.intl;return t?l().createElement("div",{className:"fb-login"},l().createElement("div",{className:"col-sx-12"},l().createElement("span",{className:"icon-website"},l().createElement(am(),null)),l().createElement("h2",{className:"fb-login-heading"},l().createElement(p.FormattedMessage,{id:"CONNECT_FB_PAGE"})),l().createElement("p",{className:"fb-login-subtext"},l().createElement(p.FormattedMessage,{id:"ADD_FB_IMAGES"})),l().createElement(ls(),{design:"primary",onClick:this.onClickLoginButton,"data-aid":"connect_fb_button",icon:l().createElement(im(),{height:14,width:14,fill:"white"}),text:n.formatMessage({id:"CONNECT_FB"})}))):null}}]),a}(c.Component);lm.propTypes={getSocialAccessToken:d().func,authUrl:d().string,trackEvent:d().func};const um=lm;function dm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dm=function(){return!!e})()}var pm=function(e){b(a,e);var t,n,r=(t=a,n=dm(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props,t=e.businessPlus,n=e.accountId,r=e.rootDomain,a=t?"https://dashboard.".concat(r,"/facebook/connect?accountId=").concat(n,"&ua_placement=image_library"):"https://www.facebook.com/pages/create",o=l().createElement("a",{className:"create-page-link",href:a,target:"_blank",rel:"noreferrer"},l().createElement(p.FormattedMessage,{id:"HERE"}));return l().createElement("div",{className:"social-zero-state"},l().createElement("div",{className:"col-sx-12"},l().createElement("span",{className:"icon icon-website"},l().createElement(am(),null)),l().createElement("h2",{className:"social-zero-state-heading"},l().createElement(p.FormattedMessage,{id:"NO_PAGES_LABEL"})),l().createElement("p",{className:"social-zero-state-subtext gray-light"},l().createElement(p.FormattedMessage,{id:"CREATE_FB_PAGE",values:{here:o}}))))}}]),a}(l().Component);pm.propTypes={intl:d().object.isRequired,trackEvent:d().func,businessPlus:d().bool,accountId:d().string,rootDomain:d().string};const fm=pm;function mm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mm=function(){return!!e})()}var hm=function(e){b(a,e);var t,n,r=(t=a,n=mm(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t.state={authComplete:!1},t.onAlbumClick=(0,T.throttle)(t.onAlbumClick,1e3),t}return v(a,[{key:"getSelectedPage",value:function(){var e=this.props.socialMedia[K],t=e.pages,n=e.selectedPageId;return n?t[n]:null}},{key:"getSelectedAlbum",value:function(){var e=this.props.socialMedia[K].selectedAlbumId;if(!e)return null;var t=this.getSelectedPage();return t?t.albums[e]:null}},{key:"onAlbumClick",value:function(e){var t=e.albumId,n=e.after,r=this.props;(0,r.onFBAlbumClick)({albumId:t,accessToken:r.socialMedia[K].auth.accessToken,after:n})}},{key:"renderThumbnailList",value:function(){var e=this.props,t=e.appName,n=e.trackEvent,r=e.intl,a=e.minDimensions,o=e.preloadParams,i=e.insertImages,s=e.selectionLimit,c=e.insertLabel,u=e.socialMedia,d=u.pathToDataSource,p=u[K].isLoadingNextPhotos,f=e.collectionKey,m=e.renderMode,h=e.config,g=e.inWebsiteContext,v=e.onCoverImageUpdate,y=this.getSelectedAlbum();if(!y)return null;var E=(0,T.values)((0,T.get)(y,"photos",{}),"id"),b=y.id,_=y.after;return 0===E.length?l().createElement(Zd,{messageID:"SOCIAL_NO_IMAGES_LABEL"}):l().createElement(Ud,{collectionKey:f,selectionLimit:s,dataSource:E,pathToDataSource:d,mediaType:De,sourceType:K,trackEvent:n,intl:r,renderMode:m,className:"social-images-list",minDimensions:a,preloadParams:o,onInsertButtonClick:function(e){i(e),Wf({items:[e],collectionKey:f,trackEvent:n,fullView:!0,appName:t})},onScrollEnd:this.onAlbumClick.bind(this,{albumId:b,after:_}),config:h,isLoadingNext:p,inWebsiteContext:g,onCoverImageUpdate:v,insertLabel:c})}},{key:"renderBreadcrumb",value:function(){var e=this.getSelectedPage(),t=this.getSelectedAlbum(),n=e?(0,T.values)(e.albums).length:0,r=t?t.count:0,a=e?e.name:"",o=this.props,i=o.onPageClick,s=o.socialMedia[K].selectedPageId,c=o.statusMessage;return l().createElement("div",{className:"asset-label gray image-selector-toolbar"},t?l().createElement("span",{className:"page-name"},l().createElement("span",{className:"breadcrumb-root primary",onClick:i.bind(this,{pageId:s})},a),l().createElement("span",{className:"breadcrumb-divide"},"/"),l().createElement("span",{className:"breadcrumb-tail"},t.name)):l().createElement("span",{className:"page-name"},a),t?l().createElement("div",{className:"mobile-breadcrumb"},l().createElement("span",{className:"breadcrumb-back primary",onClick:i.bind(this,{pageId:s})},l().createElement("span",null,l().createElement("span",{className:"icon primary"},l().createElement(Kl(),null)),l().createElement(p.FormattedMessage,{id:"BACK_TO_ALBUMS"}))),r>0&&l().createElement(Yl,{statusMessage:c,count:r,type:"found"})):n>0&&l().createElement(Yl,{count:n,type:"found_albums"}))}},{key:"renderFBData",value:function(){var e=this.props,t=e.socialMedia[K],n=t.pages,r=t.selectedAlbumId,a=e.planFeatures,o=e.thumbnailSize,i=e.config,c=e.config,u=c.accountId,d=c.rootDomain,p=e.intl,f=e.trackEvent,m=e.onPageClick,h=e.inWebsiteContext,g=this.state.authComplete,v=Object.keys(n).length,y=a&&a.planFeatures.socialMediaManager;if(0===v)return l().createElement(fm,{intl:p,trackEvent:f,businessPlus:y,accountId:u,rootDomain:d});g||(f("IM_TRACK_FACEBOOK_AUTH_COMPLETE",s({},"number of Facebook pages",v)),this.setState({authComplete:!0}));var E=this.getSelectedPage();return l().createElement("div",{className:vs()("album-list",{"with-albums":!r})},this.renderBreadcrumb(),r?this.renderThumbnailList():l().createElement(nm,{page:E,intl:p,config:i,onAlbumClick:this.onAlbumClick,onScrollEnd:m,thumbnailSize:o,inWebsiteContext:h}))}},{key:"render",value:function(){var e=this.props,t=e.socialMedia[K],n=t.isLoading,r=t.auth,a=r.accessToken,o=r.authUrl,i=e.getSocialAccessToken,s=e.intl,c=e.trackEvent;return n?l().createElement(Pu,{intl:s}):a?this.renderFBData():l().createElement(um,{getSocialAccessToken:i,authUrl:o,trackEvent:c,intl:s})}}]),a}(c.Component);hm.propTypes=Object.assign({insertImages:d().func.isRequired,getSocialAccessToken:d().func.isRequired,onFBAlbumClick:d().func.isRequired,onFBPageClick:d().func.isRequired,onProviderClick:d().func},de,pe,fe);const gm=hm;var vm=function(e){var t=e.rootDomain,n=e.accountId,r=e.trackEvent,a=function(e){var t=e.rootDomain,n=e.accountId,r=encodeURIComponent(window.location.href);return"https://dashboard.".concat(Ct(t),"/instagram/connect?accountId=").concat(n,"&redirect=").concat(r)}({rootDomain:t,accountId:n}),o=l().createElement("a",{className:"connect-ig-link",href:a,onClick:function(){return r("IM_TRACK_INSTAGRAM_DASHBOARD_LINK_CLICK")}},l().createElement(p.FormattedMessage,{id:"INSTAGRAM_CONNECT"}));return l().createElement("div",{className:"social-zero-state"},l().createElement("div",{className:"col-sx-12"},l().createElement("span",{className:"icon-website"},l().createElement(am(),null)),l().createElement("h2",{className:"social-zero-state-heading"},l().createElement(p.FormattedMessage,{id:"INSTAGRAM_NOT_CONNECTED"})),l().createElement("p",{className:"social-zero-state-subtext gray-light"},l().createElement(p.FormattedMessage,{id:"INSTAGRAM_CONNECT_SUBTITLE",values:{link:o}}))))};vm.propTypes={accountId:d().string.isRequired,rootDomain:d().string.isRequired,trackEvent:d().func.isRequired};const ym=vm;function Em(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Em=function(){return!!e})()}var bm=function(e){b(a,e);var t,n,r=(t=a,n=Em(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"renderPosts",value:function(){var e=this.props,t=e.appName,n=e.trackEvent,r=e.intl,a=e.minDimensions,o=e.preloadParams,i=e.insertImages,s=e.selectionLimit,c=e.insertLabel,u=e.socialMedia,d=u.pathToDataSource,p=u[z],f=p.posts,m=p.name,h=e.collectionKey,g=e.renderMode,v=e.config,y=e.statusMessage,E=e.inWebsiteContext,b=e.onCoverImageUpdate;return 0===f.length?l().createElement(Zd,{messageID:"INSTAGRAM_NO_IMAGES_LABEL"}):l().createElement("div",{className:"album-list"},l().createElement("div",{className:"asset-label gray image-selector-toolbar"},l().createElement("span",{className:"page-name"},m),l().createElement(Yl,{statusMessage:y,count:f.length,type:"found"})),l().createElement(Ud,{collectionKey:h,selectionLimit:s,dataSource:f,pathToDataSource:d,mediaType:De,sourceType:z,trackEvent:n,intl:r,renderMode:g,className:"social-images-list",minDimensions:a,preloadParams:o,onInsertButtonClick:function(e){i(e),Wf({items:[e],collectionKey:h,trackEvent:n,fullView:!0,appName:t})},config:v,inWebsiteContext:E,onCoverImageUpdate:b,insertLabel:c}))}},{key:"renderNotConnected",value:function(){var e=this.props,t=e.config,n=t.accountId,r=t.rootDomain,a=e.trackEvent;return l().createElement(ym,{accountId:n,rootDomain:r,trackEvent:a})}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.socialMedia[z],r=n.authorized,a=n.connected;return n.isLoading?l().createElement(Pu,{intl:t}):l().createElement(l().Fragment,null,a&&r?this.renderPosts():this.renderNotConnected())}}]),a}(c.Component);bm.propTypes=Object.assign({onProviderClick:d().func},de,pe,fe);const _m=bm,Om=function(e){var t=e.appName,n=e.socialMedia[W],r=n.mediaItems.pages,a=n.albums.pages,o=n.albumMediaItems,i=n.selectedAlbumId,s=n.isLoading,c=n.auth,u=c.tokens.tokenId,d=c.scopes.deletable,f=e.getGooglePhotosMediaItems,m=e.getGooglePhotosAlbums,h=e.populateGooglePhotosAlbumId,g=e.deleteGoogleTokens,v=e.setCurrentCollectionView,y=e.collectionKey,E=e.selectionLimit,b=e.intl,_=e.renderMode,O=e.minDimensions,I=e.preloadParams,S=e.trackEvent,w=e.insertImages,T=e.config,k=e.inWebsiteContext,C=e.onCoverImageUpdate,A=e.insertLabel,x=e.statusMessage,L=function(){var e=a.length-1;a[e].fetched||m({fill:e})},P=function(){var e=i?o[i].pages:r,t=e.length-1;e[t].fetched||f({fill:t})};if(!a[0].fetched)return L(),l().createElement(Pu,{intl:b});if(i&&!o[i].pages[0].fetched)return P(),l().createElement(Pu,{intl:b});var D=a.flatMap((function(e){return e.albums.map((function(e){return l().createElement("span",{key:e.id,className:"image-collection"},l().createElement(Jf,{url:e.galleryUniqueUrl,width:155,height:110,onCollectionClick:function(){return h({selectedAlbumId:e.id})}}),l().createElement("p",{className:"collection-title"},e.title))}))})),M=i?o[i].pages.flatMap((function(e){return e.photos})):r.flatMap((function(e){return e.photos})),N=i&&a.flatMap((function(e){return e.albums})).find((function(e){return e.id===i}));if(!M.length&&!D.length)return l().createElement(Zd,{messageID:"GOOGLE_PHOTOS_NO_IMAGES_LABEL"});var R=!i&&a[a.length-1].fetched,U=i&&!!M.length;return l().createElement("div",{className:"google-photos"},!N&&l().createElement("div",{className:"title-wrapper"},l().createElement("span",{className:"title"},l().createElement(p.FormattedMessage,{id:"GOOGLE_PHOTOS"})),d&&l().createElement(ls(),{design:"inline",onClick:function(){g(u),v(ge)},text:l().createElement(p.FormattedMessage,{id:"DISCONNECT_GOOGLE_PHOTOS"}),className:"google-photos-disconnect"})),i&&l().createElement("div",{className:"album-list"},l().createElement("div",{className:"album-navigation asset-label gray image-selector-toolbar"},l().createElement("div",null,l().createElement("span",{className:"breadcrumb-root primary",onClick:function(){return h({selectedAlbumId:null})}},l().createElement(p.FormattedMessage,{id:"GOOGLE_PHOTOS"})),l().createElement("span",{className:"breadcrumb-divide"},"/"),l().createElement("span",{className:"breadcrumb-tail"},N.title)),l().createElement("div",null,N.mediaItemsCount>0&&l().createElement(Yl,{statusMessage:x,count:N.mediaItemsCount,type:"found"})))),!!D.length&&!i&&l().createElement("div",{className:vs()("album-list",{"with-albums":!0})},l().createElement(xs,{className:"thumbnail-list scrollable uploaded-list",dataAid:"thumbnail-list",mediaType:De,onScrollEnd:a[a.length-1].fetched?null:L},D)),(R||U)&&l().createElement("div",null,l().createElement(Ud,{collectionKey:y,selectionLimit:E,dataSource:M,pathToDataSource:["socialMedia",W,"allMediaItems"],mediaType:De,sourceType:W,trackEvent:S,intl:b,renderMode:_,className:"social-images-list",minDimensions:O,preloadParams:I,onInsertButtonClick:function(e){w(e),Wf({items:[e],collectionKey:y,trackEvent:S,fullView:!0,appName:t})},onScrollEnd:P,config:T,isLoadingNext:s,inWebsiteContext:k,onCoverImageUpdate:C,insertLabel:A,isLoading:!1})),i&&!M.length&&l().createElement(Zd,{messageID:"GOOGLE_PHOTOS_NO_IMAGES_IN_ALBUM"}))};var Im;const Sm=(s(Im={},K,"https://img1.wsimg.com/ceph-p3-01/social-provider-assets-assets/static/d120e37/v1/abstract-logo-fb.svg"),s(Im,z,"https://img1.wsimg.com/rad/IG-Logo.svg"),s(Im,W,"https://img1.wsimg.com/isteam/ip/static/google_photos.svg"),Im);function wm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wm=function(){return!!e})()}var Tm=function(e){b(o,e);var n,r,a=(n=o,r=wm(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(){return h(this,o),a.apply(this,arguments)}return v(o,[{key:"renderListItem",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return l().createElement("li",t({className:vs()({"asset-selected gray":e})},n),l().createElement("span",{className:"list-container"},n&&n.title||r),e&&l().createElement("span",{className:"icon icon-drop-right"},l().createElement(Hi(),{height:14,width:14})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.createProps,a=t.selectedId,o=t.shouldSelect,i=t.switchToFB;return l().createElement("ul",{className:"asset-sub-list"},n.length>0?n.map((function(t){var n=r(t,K),i=!1;return t.id===a&&(i=o),e.renderListItem(i,n)})):this.renderListItem(o,{onClick:i},l().createElement(p.FormattedMessage,{id:"CREATE_PAGE"})))}}]),o}(c.Component);Tm.propTypes={list:d().array.isRequired,selectedId:d().string,shouldSelect:d().bool,createProps:d().func.isRequired,switchToFB:d().func},Tm.defaultProps={shouldSelect:!0};const km=Tm;function Cm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cm=function(){return!!e})()}var Am=function(e){b(a,e);var t,n,r=(t=a,n=Cm(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"render",value:function(){var e=this.props,t=e.pages,n=e.selectedId,r=e.selectedProvider,a=e.createProps,o=e.switchToFB;return l().createElement(l().Fragment,null,l().createElement(km,{list:t,selectedId:n,createProps:a,shouldSelect:r===K,switchToFB:o}))}}]),a}(c.Component);Am.propTypes={pages:d().array.isRequired,selectedId:d().string,selectedProvider:d().string,createProps:d().func,switchToFB:d().func};const xm=Am;function Lm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lm=function(){return!!e})()}var Pm=ep().DropdownItem,Dm=function(e){b(a,e);var t,n,r=(t=a,n=Lm(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.createProps;return l().createElement(ep(),{type:"select",name:"myDropdown",id:"im-asset-source-dropdown",className:"mobile-select",defaultSelected:0},t.map((function(e){var t=n(e);return l().createElement(Pm,t,t&&t.title)})))}}]),a}(c.Component);Dm.propTypes={list:d().array.isRequired,createProps:d().func.isRequired};const Mm=Dm;function Nm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nm=function(){return!!e})()}var Rm=function(e){b(a,e);var t,n,r=(t=a,n=Nm(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"renderBadgeTitle",value:function(e){var t=e.provider,n=e.titleMessageId,r=Sm[t];return l().createElement("span",{className:"text-muted"},l().createElement("img",{src:r,alt:""}),l().createElement("span",{className:"asset-source-name"},l().createElement(p.FormattedMessage,{id:n})))}},{key:"renderMobileControls",value:function(){var e=this.props,t=e.createProps,n=e.igPage,r=e.selectedProvider,a=e.fbPages,o=r===z?[n]:a;return l().createElement(l().Fragment,null,r===K&&l().createElement(Mm,{list:o,createProps:t}))}},{key:"renderFb",value:function(){var e=this.props,t=e.selectedProvider,n=e.selectedId,r=e.fbPages,a=e.createProps,o=e.onProviderClick;return l().createElement("li",{className:"asset-list-item","data-aid":"social_fb"},this.renderBadgeTitle({provider:K,titleMessageId:"FACEBOOK"}),l().createElement(xm,{selectedId:n,pages:r,selectedProvider:t,createProps:a,switchToFB:o.bind(this,K)}))}},{key:"render",value:function(){return l().createElement(l().Fragment,null,this.renderMobileControls(),l().createElement("ul",{className:"asset-list product-light-border"},this.renderFb()))}}]),a}(c.Component);Rm.propTypes={onProviderClick:d().func.isRequired,intl:d().object.isRequired,igPage:d().object,selectedProvider:d().string,selectedId:d().number,fbPages:d().object,createProps:d().func,trackEvent:d().func};const Um=Rm;function jm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jm=function(){return!!e})()}var Fm=function(e){b(o,e);var n,r,a=(n=o,r=jm(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),t=a.call(this,e),P()(y(t)),t}return v(o,[{key:"onPageClick",value:function(e){var t=e.pageId,n=e.after,r=this.props;(0,r.onFBPageClick)({accessToken:r.socialMedia[K].auth.accessToken,pageId:t,after:n})}},{key:"createProps",value:function(e){return{key:e.id,title:e.name,onClick:this.onPageClick.bind(this,{pageId:e.id})}}},{key:"render",value:function(){var e=this.props,n=e.intl,r=e.trackEvent,a=e.onProviderClick,o=e.breadcrumb,i=e.renderMode,s=e.socialMedia,c=s.selectedProvider,u=s[K],d=u.pages,p=u.selectedPageId,f=u.isLoading,m=u.auth.accessToken,h=s[z],g=h.name,v={id:h.listingId,name:g};return f?l().createElement(Pu,{intl:n}):c===z?l().createElement(l().Fragment,null,o,l().createElement("div",{className:"social-media"},l().createElement(_m,t({},e,{onPageClick:this.onPageClick})))):c===W?l().createElement(l().Fragment,null,o,l().createElement("div",{className:"social-media"},l().createElement(Om,e))):l().createElement(l().Fragment,null,o,l().createElement("div",{className:vs()("social-media",{"no-background":i===ic})},m&&l().createElement(Um,{onProviderClick:a,createProps:this.createProps,selectedId:p,fbPages:(0,T.values)(d),igPage:v,selectedProvider:c,intl:n,trackEvent:r}),l().createElement(gm,t({},e,{onPageClick:this.onPageClick}))))}}]),o}(c.Component);Fm.propTypes=Object.assign({socialMedia:d().object.isRequired,onFBPageClick:d().func.isRequired},de,pe,fe);const Gm=Fm,Vm=(0,f.connect)((function(e){return{config:Rc(e),socialMedia:ol(e),planFeatures:Mc(e)}}),(function(e){return{getSocialAccessToken:function(t){e(po(t))},onFBAlbumClick:function(t){e(Io(t))},onFBPageClick:function(t){e(Oo(t))},onProviderClick:function(t){e(go(t))},getGooglePhotosAlbums:function(t){return e(Ni(t))},getGooglePhotosMediaItems:function(t){return e(Ui(t))},populateGooglePhotosAlbumId:function(t){return e(Fi(t))},deleteGoogleTokens:function(t){return e(Ai(t))},setCurrentCollectionView:function(t){e(ci(t))}}}))(Gm);function Bm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bm=function(){return!!e})()}var Hm=hp(Ud),Km=function(e){b(o,e);var n,r,a=(n=o,r=Bm(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),t=a.call(this,e),P()(y(t)),t}return v(o,[{key:"componentDidMount",value:function(){var e=this.props.onTrackPerfLaunchEnd;this.hasNoImages()&&e&&e()}},{key:"hasNoImages",value:function(){var e=this.props.photoshoot;return!(e&&e.length>0)}},{key:"renderPhotoshootInfo",value:function(){return l().createElement("span",{className:"photoshoot-info"},Xs()?l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT_INFO_SHORT"}):l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT_INFO"})," ",l().createElement("a",{className:"primary",href:"https://media.mainstreethub.com/media/3c9588b7-f2a5-40b0-966f-f3864f15873a",target:"_blank",rel:"noreferrer"},l().createElement(p.FormattedMessage,{id:"HERES_HOW"})))}},{key:"renderImages",value:function(){var e=this.props,n=e.photoshoot,r=e.selectItem,a=e.insertItem,o=e.breadcrumb,i=(0,T.pick)(this.props,["collectionKey","trackEvent","thumbnailSize","minDimensions","preloadParams","intl","config","renderMode","pathToDataSource","selectionLimit","onTrackPerfLaunchEnd","onDownloadButtonClick","openOverCanvas","insertLabel"]),s=Xs();return l().createElement("div",null,o,l().createElement("div",{className:"image-selector-toolbar photoshoot-toolbar"},s&&this.renderPhotoshootInfo(),this.renderImageCount(n.length)),l().createElement(Hm,t({dataSource:n,onThumbnailClick:r,mediaType:De,onInsertButtonClick:a,className:"uploaded-list"},i)))}},{key:"renderNoImages",value:function(){return l().createElement("div",{className:zl("row no-images")},l().createElement("div",{className:"col-sx-12"},l().createElement("span",{className:"icon icon-img product"},l().createElement(Ji(),null)),l().createElement("h2",{className:"no-images-heading"},l().createElement(p.FormattedMessage,{id:"COMING_SOON"})),l().createElement("p",{className:"no-image-subtext"},l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT_NOT_READY"}))))}},{key:"renderImageCount",value:function(e){return e?l().createElement(Yl,{statusMessage:this.props.statusMessage,count:e,type:"found"}):null}},{key:"render",value:function(){var e=this.props,t=e.photoshoot,n=e.intl;return t?l().createElement("div",{className:"photoshoot"},this.hasNoImages()?this.renderNoImages():this.renderImages()):l().createElement(Pu,{intl:n})}}]),o}(c.Component);Km.propTypes=Object.assign({photoshoot:d().array,insertItem:d().function},de,pe,fe);const zm=Km,Wm=(0,f.connect)((function(e){var t=il(e),n=t.photoshoot;return{pathToDataSource:t.pathToDataSource,photoshoot:(0,T.get)(n,"images")}}))(zm);function qm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qm=function(){return!!e})()}var Ym=function(e){b(o,e);var n,r,a=(n=o,r=qm(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),t=a.call(this,e),P()(y(t)),t}return v(o,[{key:"imagify",value:function(e){return e.map((function(e){return{imageUrl:e.image,mediaType:e.mediaType,id:e.id,name:e.name,price:e.price,salePrice:e.salePrice,url:e.url}}))}},{key:"renderProductCount",value:function(){var e=this.props.totalCount;return e?l().createElement("div",{className:"image-selector-toolbar product-count"},l().createElement(Yl,{count:e,type:"found_products"})):null}},{key:"handleOnScrollEnd",value:function(){var e=this.props,t=e.hasNext,n=e.onFetchMoreProducts;t&&n()}},{key:"trackSort",value:function(e){this.props.trackEvent("IM_TRACK_PRODUCTS_SORT",s({},ou,e))}},{key:"render",value:function(){var e=this.props,n=e.totalCount,r=e.products,a=e.intl,o=e.onProductsSort,i=e.sortOrder,s=(0,T.pick)(this.props,["collectionKey","trackEvent","intl","config","pathToDataSource","selectionLimit","onTrackPerfLaunchEnd","insertLabel"]);return n?l().createElement(l().Fragment,null,l().createElement("div",{className:"product-toolbar"},this.renderProductCount(),l().createElement(ap,{intl:a,defaultSelected:0,onSort:o,sortOrder:i,trackEventCallback:this.trackSort})),l().createElement(Ud,t({dataSource:this.imagify(r),onScrollEnd:this.handleOnScrollEnd,mediaType:Fe},s))):l().createElement(Zd,{messageID:"NO_PRODUCTS_LABEL",isProduct:!0})}}]),o}(c.Component);Ym.propTypes=Object.assign({products:d().array,onFetchMoreProducts:d().func},de,pe,fe);const $m=Ym,Xm=(0,f.connect)((function(e){return Gc(e)}),(function(e){var t=kf([Dp],e);return{onFetchMoreProducts:function(){t.dispatchAction(xp)},onProductsSort:function(e){t.dispatchAction(Cp,{sortOrder:e})}}}))($m),Qm=C(75).A;var Zm=C(8031),Jm=C.n(Zm);function eh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eh=function(){return!!e})()}var th=function(e){b(a,e);var t,n,r=(t=a,n=eh(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;h(this,a),t=r.call(this,e),P()(y(t)),t.search=l().createRef();var n=t.props,o=n.searchDebounce,i=n.searchTrackingDebounce;return t.trackSearchText=(0,T.debounce)(t.trackSearchText.bind(y(t)),i),t.performSearch=(0,T.debounce)(t.performSearch.bind(y(t)),o),t.state={searchText:null},t}return v(a,[{key:"canSearch",value:function(e){var t=this.props.mediaTypes;return(void 0===t?[]:t).includes(e)}},{key:"searchStockImages",value:function(e){if(this.canSearch(De)){var t=this.props,n=t.onStockImagesSearch,r=t.onStockImagesSearchCallback,a=t.onStockImagesReset,o=t.stockImageSearchType;e?(null==r||r(o),n(e)):a()}}},{key:"searchStockVideos",value:function(e){if(this.canSearch(Me)){var t=this.props,n=t.onStockVideosSearch,r=t.onStockVideosReset;e?n(e):r()}}},{key:"searchUploadedAssets",value:function(e){(this.canSearch(De)||this.canSearch(Ne))&&this.props.onSearchImages({searchText:e}),this.canSearch(Me)&&this.props.enableVimeo&&this.props.onSearchUploadedVideos(e)}},{key:"searchProducts",value:function(e){this.canSearch(Fe)&&this.props.onProductSearch(e)}},{key:"performSearch",value:function(e,t){this.searchUploadedAssets(e),this.searchProducts(e),t!==ic&&(this.searchStockVideos(e),this.searchStockImages(e))}},{key:"trackSearchText",value:function(e,t){(0,this.props.trackEvent)("IM_TRACK_SEARCH",s({selectedCollection:e},iu,t))}},{key:"handleOnChangeSearchText",value:function(e){var t=this.props,n=t.renderMode,r=t.selectedCollection,a=t.clearAllSelection;this.trackSearchText(r,e),a(),this.performSearch(e,n)}},{key:"componentDidUpdate",value:function(e){var t,n,r=this.props.searchText;""!==e.searchText&&""===r&&(null==this||null===(t=this.search)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.clear)&&this.search.current.clear()}},{key:"handleClear",value:function(){var e,t;(null==this||null===(e=this.search)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.clear)&&this.search.current.clear(),this.handleOnChangeSearchText("")}},{key:"handleChange",value:function(e){var t=this;this.setState({searchText:e},(function(){t.handleOnChangeSearchText(e)}))}},{key:"render",value:function(){var e,t,n=this.props,r=n.intl,a=n.mediaTypes,o=n.canSearch,i=n.back,c=n.renderMode,u=a.includes(Fe),d=r.formatMessage({id:u?"PRODUCT_SEARCH_PLACEHOLDER":"SEARCH_BUTTON_TEXT"}),f=l().createElement("a",{className:"underline",onClick:i},l().createElement(p.FormattedMessage,{id:"BACK_TO_ALL_MEDIA"})),m=l().createElement(p.FormattedMessage,{id:"NO_SEARCH_TOOLTIP",values:{goBackLink:f}}),h=l().createElement(l().Fragment,null,l().createElement("span",{className:vs()({"icon-search":!uu(2300),"icon-search-ux2300":uu(2300)})},l().createElement(Jm(),{height:16,width:16})),l().createElement(Qm,{className:"image-search-input",value:this.state.searchText,onChange:this.handleChange,size:"small",placeholder:d,clearable:this.handleClear,ref:this.search,id:"im-search-input"}));return l().createElement("div",{className:vs()("image-fulltext-search-bar",(e={disabled:!o},s(e,"image-fulltext-search-bar-ux2300-".concat(c),uu(2300)&&(t=2400,!(t===lu()))),s(e,"image-fulltext-search-bar-ux2400-".concat(c),uu(2400)),e))},o?h:l().createElement(fs,{id:"hover-autohide-tooltip",message:m,openOnHover:!0,autoHideTimeout:3e3,text:h}))}}]),a}(c.Component);th.propTypes=Object.assign({onSearchImages:d().func,onStockImagesSearch:d().func,onStockVideosSearch:d().func,onStockImagesReset:d().func,onStockVideosReset:d().func,onSearchUploadedVideos:d().func,onProductSearch:d().func,searchText:d().string,pendingSearchText:d().string,searchDebounce:d().number,canSearch:d().bool,enableVimeo:d().bool,back:d().func,clearAllSelection:d().func,stockImageSearchType:d().string},pe),th.defaultProps={mediaTypes:[De],canSearch:!0};const nh=th,rh=(0,f.connect)((function(e){return{mediaTypes:Rc(e).mediaTypes}}),(function(e){return{onSearchImages:function(t){e(Wo(t))},onStockImagesSearch:function(t){kf([Lp],e).dispatchAction(Ap,t)},onStockImagesReset:function(){kf([Lp],e).dispatchAction(Cp)},onStockVideosSearch:function(t){e(Aa(t))},onStockVideosReset:function(){e(xa())},clearAllSelection:function(){e(Ao())},onSearchUploadedVideos:function(t){e(Fa({search:t}))},onProductSearch:function(t){kf([Dp],e).dispatchAction(Ap,t)}}}))(nh);var ah=C(5064),oh=C.n(ah);function ih(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ih=function(){return!!e})()}var sh=function(e){b(a,e);var t,n,r=(t=a,n=ih(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){return h(this,a),r.apply(this,arguments)}return v(a,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.toggle,r=e.intl,a=Xs(Ys)?"UPLOAD_TAKING_LONG_SUBTITLE_MOBILE":"UPLOAD_TAKING_LONG_SUBTITLE";return l().createElement("div",{className:vs()("notification-shelf-container",{"is-active":t})},l().createElement("div",{className:"notification-overlay"}),l().createElement("div",{className:"notification-shelf"},l().createElement("div",{className:"shelf-content product-background"},l().createElement("div",{className:"icon-container"},l().createElement("span",{className:"primary-background"},l().createElement(oh(),{fill:"#FFF",width:60,height:60}))),l().createElement("h4",null,l().createElement(p.FormattedMessage,{id:"UPLOAD_TAKING_LONG_TITLE"})),l().createElement("p",null,l().createElement(p.FormattedMessage,{id:a}))),l().createElement("div",{className:"bottom-bar"},l().createElement(ls(),{design:"primary",className:"btn btn-primary",onClick:n,text:r.formatMessage({id:"GOT_IT"})}))))}}]),a}(l().PureComponent);sh.propTypes={active:d().bool};const ch=sh;var lh=C(2573),uh=C.n(lh);function dh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dh=function(){return!!e})()}var ph=function(e){b(a,e);var t,n,r=(t=a,n=dh(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t.flyoutNode=l().createRef(),t}return v(a,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleClick)}},{key:"handleClick",value:function(e){var t=this.props.onClose,n=this.flyoutNode;(void 0===n?{}:n).current.contains(e.target)||t()}},{key:"render",value:function(){var e=this.props,t=e.shouldBeVisible,n=e.intl,r=e.onClose;return l().createElement("div",{ref:this.flyoutNode,className:vs()("flyout-container modal-flyout",{visible:t})},l().createElement("div",{className:"flyout-inner"},l().createElement("div",{className:"flyout-img product-background"},l().createElement("img",{src:uh(),alt:n.formatMessage({id:"STUDIO_BG_REMOVAL_TOOLTIP_TITLE"})})),l().createElement("div",{className:"flyout-content"},l().createElement("div",{className:"close-btn black",onClick:r},l().createElement(N(),null)),l().createElement("span",{className:"new-badge"},l().createElement(p.FormattedMessage,{id:"NEW_BADGE"})),l().createElement("h4",null,l().createElement(p.FormattedMessage,{id:"STUDIO_BG_REMOVAL_TOOLTIP_TITLE"})),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:"STUDIO_BG_REMOVAL_TOOLTIP_SUBTITLE"})))))}}]),a}(c.Component);ph.propTypes={shouldBeVisible:d().bool,intl:d().object,onClose:d().func};const fh=ph;function mh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mh=function(){return!!e})()}var hh=function(e){b(a,e);var t,n,r=(t=a,n=mh(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t.onboardingFlyoutNode=l().createRef(),t}return v(a,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleClick)}},{key:"handleClick",value:function(e){var t=this.props.onClose,n=this.onboardingFlyoutNode;(void 0===n?{}:n).current.contains(e.target)||t()}},{key:"render",value:function(){var e=this.props,t=e.tooltipShouldBeVisible,n=e.onClose,r=e.renderUploader;return l().createElement("div",{"data-testid":"floating-upload",className:"floating-upload",ref:this.onboardingFlyoutNode},t&&l().createElement("div",{className:"upload-onboarding"},l().createElement("div",{className:"floating-pulses"},l().createElement("div",{className:"base"}),l().createElement("div",{className:"bottom"}),l().createElement("div",{className:"middle"}),l().createElement("div",{className:"top"})),l().createElement("div",{className:"onboarding-tooltip"},l().createElement("div",{className:"close-btn",onClick:n},l().createElement(N(),{height:16,width:16,fill:"#111"})),l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:"UPLOAD_TOOLTIP_TITLE"})),l().createElement("p",null,l().createElement(p.FormattedMessage,{id:"UPLOAD_TOOLTIP_SUBTITLE"})))),l().createElement(ls(),{text:l().createElement(l().Fragment,null,l().createElement(p.FormattedMessage,{id:"UPLOAD"}),r()),icon:l().createElement(qi(),{fill:"#FFFFFF",height:26,width:26}),design:"primary","data-click-eid":"upload_withimages_button_click",onClick:n}))}}]),a}(c.Component);hh.propTypes={tooltipShouldBeVisible:d().bool,onClose:d().func};const gh=hh;function vh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vh=function(){return!!e})()}var yh=Object.keys(ml).reduce((function(e,t){return e[t]=ml[t].toLowerCase(),e}),{}),Eh=yh.VIMEO_CONVERT,bh=yh.VIMEO_UPGRADE,_h=yh.VIMEO_EDIT,Oh=yh.VIMEO_CREATE,Ih=yh.VIMEO_CONVERT_CREATE,Sh=function(e){b(a,e);var t,n,r=(t=a,n=vh(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"receiveMessage",value:function(e){var t=this.props,n=t.trackEvent,r=t.config,a=(void 0===r?{}:r).socialMediaAuthCallbackUrl,o=new URL(a).origin,i=e.data;if(e.origin===o&&[Eh,bh,Oh,Ih,_h].includes(i)){(0,this.props.getUser)();var s=[Eh,bh,Oh,Ih].includes(i),c=i===_h;if(n("IM_TRACK_VIMEO_OFF_SITE_REDIRECT_COMPLETE",{eventType:i}),s&&(0,this.props.loadVideos)(),c){var l=this.props;(0,l.refreshEditedVideo)(l.vimeoUser.editVideoId)}}}},{key:"componentDidMount",value:function(){window.addEventListener("message",this.receiveMessage,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receiveMessage)}},{key:"render",value:function(){return null}}]),a}(c.Component);Sh.propTypes={getUser:d().func,loadVideos:d().func,vimeoUser:d().object,trackEvent:d().func};const wh=Sh,Th=(0,f.connect)((function(e){return{config:Rc(e),vimeoUser:Xc(e)}}),(function(e){return{getUser:function(){e(Ka())},refreshEditedVideo:function(t){t&&e(Ba(t))},loadVideos:function(){e(ja())},trackEvent:function(t,n){e(uo({eventName:t,data:n}))}}}))(wh);var kh,Ch=C(3361),Ah=C.n(Ch),xh=(s(kh={},_l,"VIMEO_CONNECT"),s(kh,Ol,"VIMEO_CONNECT"),s(kh,Il,"VIMEO_CONNECT_UPGRADE"),s(kh,Sl,"VIMEO_UPGRADE"),kh),Lh=function(e){return ys(Array(4)).map((function(t,n){return"".concat(e,"_FEATURES_").concat(n+1)}))};const Ph=function(e){var t=xh[e];return{header:"".concat(t,"_TITLE"),subtitle:"".concat(t,"_SUBHEADER"),cta:"".concat(t,"_CTA"),benefits:Lh(t),eid:"IM_TRACK_".concat(t,"_CTA_CLICK"),aid:"".concat(t,"_BTN")}};var Dh=C(4433),Mh=C.n(Dh),Nh=C(7751),Rh=C.n(Nh),Uh=C(9910),jh=C.n(Uh);function Fh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fh=function(){return!!e})()}var Gh=function(e){b(a,e);var t,n,r=(t=a,n=Fh(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),(t=r.call(this,e)).state={modalImpressionFired:!1},P()(y(t)),t}return v(a,[{key:"handleCtaButtonClick",value:function(e){var t=this.props,n=t.trackEvent,r=t.redirectToVimeoUpgrade,a=t.redirectToVimeoConnectCreate,o=t.redirectToVimeoConnect,i=t.videoId,s=t.onClose;n(Ph(e).eid),e===_l?o(i,e):e===Ol?a():r(),s()}},{key:"handleLearnMoreButtonClick",value:function(){var e=this.props.vimeoHelpLink;e&&window.open(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.trackEvent,a=t.videoId,o=t.modalType,i=t.intl,s=this.state.modalImpressionFired;if(o===wl)return this.setState({modalImpressionFired:!1}),null;s||(r("IM_TRACK_VIMEO_UPLOAD_LIMIT_MODAL_IMPRESSION",a?{modalType:"connect and edit"}:{modalType:o}),this.setState({modalImpressionFired:!0}));var c=o===Sl,u=c?"primary-pastel-background":"primary-dark-background",d=Ph(o),f=l().createElement(ps,null,l().createElement(ls(),{"data-aid":d.aid,onClick:function(){return e.handleCtaButtonClick(o)},design:"primary",text:i.formatMessage({id:d.cta}),as:"external"}),l().createElement(ls(),{design:"link","data-aid":"vimeo_learn_more_button",onClick:function(){return e.handleLearnMoreButtonClick()},text:i.formatMessage({id:"LEARN_MORE"})}));return l().createElement(l().Fragment,null,l().createElement("div",{className:"vimeo-overlay"}),l().createElement(Ah(),{className:vs()("vimeo-connect-modal",{dark:!c}),closeButton:!0,disableAutoClose:!0,onClose:n,footer:f,open:!0,"data-aid":"vimeo-connect-modal",id:"im-vimeo-connect-modal"},(o===_l||o===Ol)&&l().createElement("div",{className:"free-banner"},l().createElement(p.FormattedMessage,{id:"FREE"})),l().createElement("div",{className:vs()("vimeo-header",u)},l().createElement("div",{className:"header-content"},l().createElement("img",{className:"logo-lockup",src:jh(),height:30,alt:"Vimeo + GoDaddy"}),l().createElement("h1",null,l().createElement(p.FormattedMessage,{id:d.header})),l().createElement("p",null,l().createElement(p.FormattedMessage,{id:d.subtitle}))),l().createElement("div",{className:"vimeo-hero"},l().createElement("img",{src:c?Rh():Mh(),alt:"Vimeo features"}))),l().createElement("div",{className:"vimeo-benefits"},d.benefits.map((function(e,t){return l().createElement("p",{key:t,className:"gray"},l().createElement(Ms(),{height:16,width:16})," ",l().createElement(p.FormattedMessage,{id:e}))})))))}}]),a}(c.PureComponent);Gh.propTypes={modalType:d().oneOf([_l,Ol,Il,Sl,wl]),onClose:d().func,redirectToVimeoConnect:d().func,redirectToVimeoConnectCreate:d().func,redirectToVimeoUpgrade:d().func,vimeoHelpLink:d().string};const Vh=Gh,Bh=(0,f.connect)((function(e){return{modalType:Fc(e).vimeoModalType,videoId:Fc(e).editVideoId,vimeoHelpLink:Rc(e).vimeoHelpLink}}),(function(e,t){var n=bl(e,t);return{onClose:function(){e(qa())},redirectToVimeoConnect:function(e){n.openConvertLink(e)},redirectToVimeoConnectCreate:function(){n.openConvertCreateLink()},redirectToVimeoUpgrade:function(){n.openUpgradeLink()}}}))(Vh);var Hh=C(8692),Kh=C.n(Hh);function zh(e){var t=e.intl,n=e.handleOnReconnect,r=a((0,c.useState)(!1),2),o=r[0],i=r[1],s=Xs(),u=l().createElement("p",{className:"gray",style:{margin:0,fontSize:"0.95rem"}},t.formatMessage({id:"VIMEO_RECONNECT_SUBTITLE"})),d=(0,c.useCallback)((function(){i(!0),n()}),[n]);return l().createElement("div",{className:"no-results-v2 vimeo-reconnect bg-white"},l().createElement("div",{className:"content-area item-content"},l().createElement("div",{className:"cta-icon"},l().createElement(Kh(),null)),l().createElement("div",{className:"item-content"},l().createElement("div",{className:"inner-text"},l().createElement("h6",{className:"content-header"}," ",t.formatMessage({id:"VIMEO_RECONNECT_TITLE"})," "),!s&&u))),l().createElement("div",{className:"no-results-cta item-content"},l().createElement(ls(),{className:"btn-img-action",design:"primary",size:"small",text:t.formatMessage({id:"RECONNECT"}),as:"external",onClick:d,disabled:o})))}zh.propTypes={handleOnReconnect:d().func},zh.defaultProps={renderUploader:function(){},getUploadCopy:function(){},onAddDescription:function(){}};const Wh=zh,qh=(0,f.connect)((function(e){return{venture:pl(e)}}),(function(e,t){return{openVimeoCreateLink:function(){bl(e,t).openCreateLink()}}}))((function(e){var t=e.sourceType,n=e.openVimeoCreateLink,r=e.isVimeoLoading,a=e.isLinkWrapper,o=e.intl,i=e.venture,s="im-vimeo-create-button",c=i&&i.ventureId&&i.businessName,u=n;if(a)return l().createElement("div",{id:s+"-mobile",className:"create-link",onClick:function(){return u()}});var d=t===$&&r||t===G&&!c;return l().createElement(ls(),{id:s,className:"btn",design:"primary",size:"small",disabled:d,text:o.formatMessage({id:"CREATE"}),as:"external",onClick:function(){u()}})}));var Yh=C(9973),$h=C.n(Yh),Xh=C(3745),Qh=C.n(Xh),Zh=C(15),Jh=C.n(Zh),eg=C(2378),tg=C.n(eg),ng=C(4678),rg=C.n(ng);const ag=function(e){var t,n=e.sourceType,r=e.renderUploadButton,a=e.isVimeoLoading,o=e.expandCtaArea,i=e.intl,u=e.openOverCanvas,d=e.trackEvent,f=e.enableImageCreate,m=e.enableStudioLogoCreate,h=e.enableLogoCreate,g=e.enableMobileLogoCreateCta,v=e.canCreateLogo,y=e.openLogoGenerationAssistant,E=e.openImageGenerationAssistant,b=e.isAiro,_=e.showUpload,O=void 0===_||_;(0,c.useEffect)((function(){n===G&&d("IM_TRACK_LOGO_MODAL_CTA_DISPLAY")}),[n]);var I=Xs($s),S=function(){return l().createElement(ls(),{className:"btn create-open-logo-assistant",design:"primary",text:i.formatMessage({id:"CREATE"}),onClick:function(){d("IM_TRACK_LOGO_ASSISTANT_CREATE_CLICK"),null==y||y()}})},w=(n===$&&!I||n===Y&&!I&&E||n===B&&!I||n===G&&!I&&h||n===G&&I&&h&&g||n===V&&!I&&h||n===V&&I&&h&&g||n===Z)&&v,T=o&&!I,k=(s(t={},$,{createTitle:"CREATE_ON_VIMEO",createSubtitle:"CREATE_SUBTITLE",uploadTitle:"UPLOAD_VIDEO_TITLE",uploadSubtitle:"UPLOAD_VIDEO_SUBTITLE",createImg:$h(),uploadImg:Qh()}),s(t,G,{createTitle:g?"CREATE_A_LOGO":b?"CREATE_AIRO_LOGO":"CREATE_LOGO",createSubtitle:g?"DOWNLOAD_STUDIO":b?"CREATE_AIRO_LOGO_SUBTITLE":"CREATE_LOGO_SUBTITLE",uploadTitle:b?"UPLOAD_AIRO_LOGO":"UPLOAD_LOGO_TITLE",uploadSubtitle:g?"BROWSE_DEVICE":b?"UPLOAD_AIRO_LOGO_SUBTITLE":"UPLOAD_LOGO_SUBTITLE",createImg:Jh(),uploadImg:tg()}),s(t,Y,{createTitle:"CREATE_GENERATED_IMAGES",createSubtitle:"CREATE_GENERATED_IMAGES_SUBTITLE",uploadTitle:"UPLOAD_LOGO_TITLE",uploadSubtitle:"UPLOAD_LOGO_SUBTITLE",createImg:rg(),uploadImg:null}),s(t,Z,{createTitle:"CREATE_IMAGE",createSubtitle:"CREATE_IMAGE_SUBTITLE",uploadTitle:"UPLOAD_IMAGE_TITLE",uploadSubtitle:"UPLOAD_IMAGE_SUBTITLE",createImg:null,uploadImg:null}),s(t,B,{createTitle:"CREATE_GENERATED_IMAGE",createSubtitle:"CREATE_GENERATED_IMAGE_SUBTITLE",uploadTitle:"UPLOAD_IMAGE_TITLE",uploadSubtitle:"UPLOAD_IMAGE_SUBTITLE",createImg:null,uploadImg:null}),t);return l().createElement("div",{className:vs()("add-to-library-section",{"is-small":I,"is-empty-collection":T,"is-mobile-create":g})},w&&l().createElement("div",{className:"modal-create"},I&&l().createElement("div",{className:"window-icon"},l().createElement(gc(),null)),l().createElement("div",{className:"inner-content"},!T&&l().createElement("div",{className:"cta-icon"},l().createElement(ds(),null)),l().createElement("div",{className:"inner-text"},l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:k[n].createTitle})),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:k[n].createSubtitle})))),function(e){switch(e){case Z:case G:if((m||f)&&!b)return t=function(){!g&&u({},n),d(n===G?"IM_TRACK_LOGO_CREATE_CLICK":"IM_TRACK_STUDIO_CREATE_CTA_CLICK")},I?l().createElement("div",{className:"create-link",onClick:function(){t(),window.location.href="https://studio.click.godaddy.com/FVXM/1yuro348"}}):l().createElement(ls(),{className:"btn",design:"primary",text:i.formatMessage({id:"CREATE"}),onClick:t});if(b)return S();break;case V:return S();case B:case Y:return l().createElement(ls(),{className:"btn create-open-image-assistant",design:"primary",text:i.formatMessage({id:"CREATE"}),onClick:function(){d("IM_TRACK_IMAGE_ASSISTANT_CREATE_CLICK"),null==E||E()}})}var t;return l().createElement(qh,{sourceType:n,isVimeoLoading:a,isLinkWrapper:I,intl:i})}(n),T&&l().createElement("img",{src:k[n].createImg,alt:i.formatMessage({id:k[n].createTitle})})),O&&l().createElement("div",{className:"upload-area"},l().createElement("div",{className:"inner-content"},!T&&l().createElement("div",{className:"cta-icon"},l().createElement(qi(),null)),l().createElement("div",{className:"inner-text"},l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:k[n].uploadTitle})),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:k[n].uploadSubtitle})))),I&&!w&&l().createElement(bs(),null),r(I,"UPLOAD"),T&&l().createElement("img",{src:k[n].uploadImg,alt:i.formatMessage({id:k[n].uploadTitle})})))},og=C(5020).A;var ig=C(3317),sg=C.n(ig),cg="file";function lg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const ug=(0,f.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lg(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},cl(e))}))((function(e){var t,n,r,o,i=e.activeSelection,s=e.uploadProgress,u=e.isMobile,d=e.stagingCount,f=e.filename,m=e.imageUploadSuccess,h=e.videoUploadSuccess,g=e.recentlyStagedImagesCount,v=e.recentlyStagedVideosCount,y=e.mediaTypes,E=e.trackEvent,b=e.withFloatingUpload,_=e.placement,O=e.selectedCollection,I=a((0,c.useState)(!1),2),S=I[0],w=I[1],T=a((0,c.useState)(!1),2),k=T[0],C=T[1],A=d>0,x=v>0&&g>0,L=0===v&&g>0,P=v>0&&0===g,D=null==y?void 0:y.some((function(e){return Be.includes(e)}));L?(t=D?"uploading_files":"uploading_images",n=D?cg:De,r=g,o=m):P?(t="uploading_videos",n=Me,r=v,o=h):(t="uploading_files",n=cg,r=g+v,o=x?h&&m:L?m:P&&h);var M=A&&s>=0||S&&!k,R=l().createElement("div",{className:"upload-progress-bar"},l().createElement(og,{size:"xsmall",value:s}));(0,c.useEffect)((function(){var e;return o||(w(!1),C(!1)),S||!o||k||(w(!0),E("LOGO"===_||O===Se?"IM_TRACK_LOGO_UPLOAD_COMPLETE":"IM_UPLOAD_COMPLETE",{"total files uploaded":r}),e=setTimeout((function(){C(!0)}),5e3)),function(){k&&clearTimeout(e)}}));var U=l().createElement(l().Fragment,null,A&&l().createElement("div",{className:"progress-content"},l().createElement("p",{className:"progress-subtitle"},l().createElement(Yl,{count:d,type:t,excludeClasses:!0})),l().createElement("div",{className:"filename-container"},l().createElement("h5",{className:"progress-filename"},f),d>1&&l().createElement("p",null,l().createElement(p.FormattedMessage,{id:"UPLOADING_MORE",values:{count:d-1}})))),R),j=l().createElement("div",{className:"success-confirmation"},l().createElement("div",{className:"close-btn",onClick:function(){return C(!0)}},l().createElement(N(),{fill:"#fff"})),l().createElement("div",{className:"ok-container"},l().createElement(sg(),null)),l().createElement("h5",null,l().createElement(Yl,{count:r,type:"uploaded_"+n,excludeClasses:!0})));return u?l().createElement("div",{className:vs()("mobile-progress-popup",{"is-uploading":M,"is-active":i,"with-floating-upload":b})},l().createElement("div",{className:"progress-container"},S?j:U)):l().createElement("div",{className:vs()("progress-popup",{"is-uploading":M,"is-active":i})},S?j:U)}));const dg=function(e){var t=e.config,n=void 0===t?{}:t,r=e.onClose,o=e.onDelete,i=e.itemsToDelete,s=e.intl,c="DELETE_FILE",u=n.isWebsitelessContainer,d=i.length,p=s.formatPlural(d);Kt(i)?c="DELETE_VIDEO":Ht(i)&&(c="DELETE");var f=["".concat(c,"_WEBSITELESS_CONFIRMATION_SOFT"),"".concat(c,"_MANY_WEBSITELESS_CONFIRMATION_SOFT")],m=a(u?f:function(e,t){var n,r;return Kt(t)?(n="DELETE_VIDEO_CONFIRMATION_HARD",r="DELETE_VIDEO_MANY_CONFIRMATION_HARD"):function(e){if(!Array.isArray(e))return!1;var t=e.reduce((function(e,t){return e.add(t.mediaType),e}),new Set);return t.size>1&&t.has(Me)}(t)?r="DELETE_ANY_CONFIRMATION_HARD":(n="".concat(e,"_CONFIRMATION_SOFT"),r="".concat(e,"_MANY_CONFIRMATION_SOFT")),[n,r]}(c,i),2),h=m[0],g=m[1],v=s.formatMessage({id:"".concat(c,"_").concat(p.toUpperCase())},{count:d}),y=l().createElement(ps,null,l().createElement(ls(),{design:"critical",onClick:function(){o(),r()},"data-aid":"delete_confirmation_button",text:s.formatMessage({id:"DELETE"})}),l().createElement(ls(),{design:"secondary",onClick:r,text:s.formatMessage({id:"CANCEL"})})),E=l().createElement("a",{className:"create-page-link",href:"https://www.godaddy.com/help/what-happens-when-i-delete-media-from-my-media-library-42064",target:"_blank",rel:"noreferrer",style:{textDecoration:"underline",color:"#09757A"}},s.formatMessage({id:"LEARN_MORE_LINK"})),b=s.formatMessage({id:d>1?g:h},{LEARN_MORE_LINK:E},{newline:"\n"});return l().createElement(Ah(),{className:"image-delete-confirmation-modal",title:v,closeButton:!1,disableAutoClose:!0,onClose:r,footer:y,"data-aid":"image-delete-confirmation-modal",id:"im-delete-confirmation-modal"},l().createElement("p",{className:"text-default"},b))};var pg,fg=tn()(["NOT_STARTED","STARTED","SUCCESS","FAIL"]),mg=tn()(["IMAGE_UPLOAD","IMAGES_LOAD","VIDEOS_LOAD","VIDEOS_LOAD_MORE","VIDEOS_LOAD_STATS","VIDEO_REFRESH","VIDEO_UPDATE_PRIVACY","VIDEO_DELETE","VIDEOS_LOAD_USER","VIDEOS_REMOVE_USER_CONNECTION","VIDEOS_CONVERT_USER","VIDEOS_CREATE_UPLOAD","VIDEOS_PUSH_UPLOAD","IMAGES_DELETE","IMAGES_UPDATE","STOCK_IMAGES_LOAD","STOCK_IMAGES_SEARCH","STOCK_IMAGES_NEXTPAGE","STOCK_IMAGES_FETCH_GETTY_URLS","STOCK_VIDEOS_LOAD","STOCK_VIDEOS_SEARCH","WEBSITES_LOAD","VENTURES_LOAD","V7_WEBSITES_LOAD","VENTURE_IMAGES_LOAD","GC_SITE_IMAGES_LOAD","V7_SITE_IMAGES_LOAD","SITE_IMAGES_COPY","SSO_SOCIAL_ACCESS_TOKEN_GET","SSO_SOCIAL_PAGE_ACCESS_TOKEN_GET","SSO_SOCIAL_AUTH_URL_GET","FB_PAGES_LOAD","FB_ALBUMS_LOAD","FB_PHOTOS_LOAD","FB_ACCESS_TOKEN_VALIDATE","FB_VIDEOS_UPLOAD_INIT","FB_VIDEOS_UPLOAD_CHUNK","FB_VIDEOS_UPLOAD_COMPLETE","FB_VIDEOS_UPLOAD_EXTERNAL","PLAN_FEATURES_GET","SHARED_WIDGETS_FEATURES_GET","HEADER_WIDGET_UPDATE","IG_AUTHORIZED_CHECK","IG_CONNECTED_CHECK","IG_POSTS_LOAD","IG_LISTING_LOAD","EXPERIMENTS_LOAD","PRODUCTS_LOAD","VIMEO_GET_LINK","VENTURE_LOAD","USER_GET","VENTURE_LOGO_UPDATE","GOOGLE_PHOTOS_AUTHORIZATION_URL_GET","GOOGLE_TOKENS_GET","GOOGLE_SCOPES_GET","GOOGLE_PHOTOS_ALBUMS_GET","GOOGLE_PHOTOS_MEDIA_ITEMS_GET","GOOGLE_TOKENS_DELETE"]),hg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).currentCreateCount;return e-(void 0===t?0:t)};function gg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.files,n=void 0===t?[]:t,r=e.vimeoUser,a=void 0===r?{}:r,o=e.totalVideosInAccount,i=a.convertedOn,s=a.periodicFree,c=a.lifetimeFree,l=n.reduce((function(e,t){return e+t.size}),0),u=!!s&&s-l<=0||!!c&&c-l<=0,d=hg(o,a);if(!i){if(u)return Il;if(d>=3||d+n.length>3)return _l}return i&&u?Sl:wl}var vg=(s(pg={},He,"ImageManager_sawVideoFlyout"),s(pg,Ke,"ImageManager_sawOverFlyout"),s(pg,ze,"ImageManager_sawVimeoCreateFlyout"),s(pg,We,"ImageManager_sawStudioBgRemovalFlyout"),s(pg,qe,"ImageManager_sawFloatingUploadFlyout"),pg);function yg(e){try{return localStorage.getItem(vg[e])||!1}catch(e){return!0}}function Eg(e){try{localStorage.setItem(vg[e],!0)}catch(e){}}function bg(e){var t=e.embedded,n=e.hasUploaded,r=e.mediaTypes,a=e.renderUploader,o=e.getUploadCopy,i=e.onAddDescription,s=Xs(),c=function(e){var t=1===r.length?r[0].toUpperCase():"FILE",n=e.replace("{mediaType}",t).replace("{deviceType}",s?"_MOBILE":"");return l().createElement(p.FormattedMessage,{id:n})},u=n&&r.includes(De)&&s,d=[l().createElement("h6",{className:"content-header"}," ",c("EMPTY_SEARCH_NO_UPLOADED_{mediaType}_FOUND")),l().createElement("p",{className:"gray",style:{margin:0,fontSize:"0.95rem"}},c(u?"EMPTY_SEARCH_UPDATE_UPLOADS_INFO":"EMPTY_SEARCH_NO_{mediaType}_UPLOADS{deviceType}"))],f=u?function(){return l().createElement("div",{className:"no-results-cta add-description"},l().createElement("label",{"data-aid":"add_description_button",className:"btn btn-round bd-primary text-primary-o",onClick:i},l().createElement(p.FormattedMessage,{id:"ADD_DESCRIPTION"})))}:function(){return s?null:l().createElement("div",{className:"no-results-cta"},l().createElement("label",{className:"btn btn-img-action btn-sm btn-primary btn-primary-dark"},l().createElement("span",null,a()),l().createElement(qi(),{"data-click-eid":"upload_withimages_button_click",height:18,width:18}),l().createElement(p.FormattedMessage,{id:o()})))};return l().createElement("div",{className:vs()("no-results-v2 bg-white",{"product-background":t})},l().createElement("div",{className:"no-results-content"},d),f())}bg.propTypes={hasUploaded:d().bool,mediaTypes:d().arrayOf(d().oneOf(Ve)),renderUploader:d().func,getUploadCopy:d().func,onAddDescription:d().func,embedded:d().bool},bg.defaultProps={renderUploader:function(){},getUploadCopy:function(){},onAddDescription:function(){}};const _g=bg;function Og(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Og=function(){return!!e})()}var Ig=function(e){b(a,e);var t,n,r=(t=a,n=Og(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t.ref=l().createRef(),t}return v(a,[{key:"getContainerDom",value:function(){return this.ref.current}},{key:"attachObserver",value:function(){var e=this.props,t=e.scrollObserver,n=e.observeTargetData,r=e.onObserved;if(t){r&&(this.onObservedHandler=n?r.bind(null,n):r);var a=this.getContainerDom();a&&this.onObservedHandler&&(a.addEventListener("observe",this.onObservedHandler),t.observe(a))}}},{key:"componentDidMount",value:function(){this.attachObserver()}},{key:"componentDidUpdate",value:function(e){e.scrollObserver!==this.props.scrollObserver&&this.attachObserver()}},{key:"componentWillUnmount",value:function(){var e=this.getContainerDom();this.onObservedHandler&&e.removeEventListener("observe",this.onObservedHandler)}},{key:"render",value:function(){var e=this.props.children;return l().createElement("div",{ref:this.ref},e?l().Children.toArray(e):null)}}]),a}(c.Component);Ig.propTypes={scrollObserver:d().object,observeTargetData:d().any,onObserved:d().func};const Sg=Ig;var wg=C(801),Tg=C.n(wg),kg=C(8598),Cg=C.n(kg),Ag=C(8707),xg=C.n(Ag);const Lg=function(e){var t=e.trackEvent,n=e.intl;return(0,c.useEffect)((function(){t("IM_TRACK_PHOTOSHOOT_SERVICE_MODAL_VIEW")}),[t]),l().createElement(l().Fragment,null,l().createElement("div",{className:"collection-container"},l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT"})),l().createElement("div",{className:"photoshoot-service"},l().createElement("div",{className:"image-layout"},l().createElement("div",{className:"image-layout-1"},l().createElement("img",{src:Tg(),className:"image-1",alt:""})),l().createElement("div",{className:"image-layout-2"},l().createElement("img",{src:Cg(),className:"image-2",alt:""})),l().createElement("div",{className:"image-layout-3"},l().createElement("img",{src:xg(),className:"image-3",alt:""}))),l().createElement("div",{className:"text-layout"},l().createElement("span",{className:"headline"},l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT_SERVICE_TITLE"})),l().createElement("span",{className:"description"},l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT_SERVICE_DESCRIPTION_2"})),l().createElement(ls(),{"data-aid":"btn_learn_more_photoshoot_service",design:"primary",className:"btn-learn-more btn btn-primary",onClick:function(){t("IM_TRACK_PHOTOSHOOT_SERVICE_MODAL_CLICK"),window.open("https://photonetwork.godaddy.com/photo-services/","_blank")},text:n.formatMessage({id:"LEARN_MORE"})})))))};function Pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dg=function(){return!!e})()}var Mg=hp(Ud),Ng="BROWSE_BY_MEDIATYPE",Rg=[xe,ge,_e,Ae],Ug=fg.SUCCESS,jg=fg.FAIL,Fg=function(e){b(o,e);var n,r,a=(n=o,r=Dg(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),s(y(t=a.call(this,e)),"handleTooltipOpen",(function(){t.setState({showTooltip:!0}),t.tooltipTimeout=setTimeout((function(){t.handleTooltipClose()}),3e3)})),s(y(t),"handleTooltipClose",(function(){t.setState({showTooltip:!1}),t.tooltipTimeout&&(clearTimeout(t.tooltipTimeout),t.tooltipTimeout=null)})),t.state={initialImagesLoaded:!1,blurOpacity:1,itemsToDelete:null,editTooltipDismissed:!1,uploadOnboardingDismissed:!1,showTooltip:!1},t.anchorRef=l().createRef(),t.tooltipTimeout=null,P()(y(t)),t.othersitesCollectionsContainerRef=l().createRef(),t.observer=null,t.socialObserver=null,t}return v(o,[{key:"setupObserver",value:function(){return new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&e.target.dispatchEvent(new Event("observe"))}))}),{root:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,rootMargin:"0px",threshold:.1})}},{key:"setupOthersitesObserver",value:function(){var e=this.othersitesCollectionsContainerRef.current;this.observer=this.setupObserver(e)}},{key:"setupSocialObserver",value:function(){this.socialObserver=this.setupObserver()}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setupSocialObserver(),e.setupOthersitesObserver()}),0);var t=this.props,n=t.showGeneratedImages,r=t.showGeneratedLogos;n&&this.trackEvent("IM_TRACK_GENERATED_IMAGES_GALLERY_VIEW"),r&&this.trackEvent("IM_TRACK_GENERATED_LOGOS_GALLERY_VIEW")}},{key:"downloadImage",value:function(e){var t=this.props,n=t.onDownloadImage,r=t.selectedItems,a=e||r,o=Array.isArray(a)?a:[a];if(Xs()){var i=o[0].url;window.open(i,"_blank")}else n(o);this.trackEvent("IM_TRACK_DOWNLOAD_BUTTON_CLICK",s({},"number of downloaded images",o.length))}},{key:"atMaxSelected",value:function(){var e=this.props,t=e.selectionLimit,n=e.selectedItems;return t>1&&n.length>=t}},{key:"trackEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.trackEvent,a=n.selectedCollection;t.selectedCollection=a,r(e,t)}},{key:"selectCollection",value:function(e){var t=this.props,n=t.switchSocialCollection,r=t.onClearSelection,a=t.setCurrentView,o=document.querySelector("div.image-modal div.modal.fade.show");this.trackEvent("IM_TRACK_".concat(e.toUpperCase(),"_COLLECTION_CLICK")),e===K||e===z||e===W?(n(e),a(Ie)):a(e),o&&(o.scrollTop=0),r()}},{key:"selectMySites",value:function(e){e.type!==be?(this.props.loadSite({containerId:e.id,type:e.type}),this.selectCollection(Oe)):this.selectCollection(be)}},{key:"enableProgressPopup",value:function(){return(0,T.get)(this.props,"config.featureFlags.enableNewProgressPopup",!1)}},{key:"shouldRenderVideoCollection",value:function(){return this.props.mediaTypes.includes(Me)}},{key:"enableVimeoDelete",value:function(){return(0,T.get)(this.props,"config.featureFlags.enableVimeoDelete",!1)}},{key:"renderBreadcrumb",value:function(){if(1===this.getActiveCollections().length)return null;var e=this.props,t=e.searchText,n=e.selectedCollection,r=n===Oe||n===Ie;return l().createElement(Vf,{searchText:t,back:this.selectCollection.bind(this,ge),hasMargin:r})}},{key:"renderUploadedImagesContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,n=this.props,r=n.enableDelete,a=n.autoSelectAfterUpload,o=n.selectionLimit,i=n.uploadedOrder,s=n.onFivToggle,c=n.onMetadataUpdate,u=n.insertFullViewItem,d=n.selectItem,p=n.mediaTypes,f=n.renderMode,m=n.rejectFiles,h=n.selectedCollection,g=n.shouldShowUploadedMetadata,v=n.appName,y=n.enableInlineUpload,E=n.enableVPInlineUpload,b=f===sc&&[ve,Le,ke,xe].includes(h)&&!Xs($s);return l().createElement(Sp,t({insertItem:u,selectItem:d,deleteItem:this.deleteItem,enableDelete:r,autoSelectAfterUpload:a,selectionLimit:o,uploadedOrder:i,onDownloadButtonClick:this.downloadImage,renderDownloadButton:this.renderDownloadButton,onFivToggle:s,back:this.selectCollection.bind(this,ge),sourceType:e,title:h,isVentureHomeLogo:v===ee&&h===Se,breadcrumb:this.renderBreadcrumb(),onMetadataUpdate:c,renderGalleryZeroState:this.renderGalleryZeroState,renderCtaArea:this.renderCtaArea,supportsDropZone:b,thumbnailSettings:p.includes(Me)&&gp(this.props),enableProgressPopup:this.enableProgressPopup(),rejectFiles:m,renderUploader:this.renderUploader,uploadCtaId:this.getUploadCopy(),renderNoResults:this.renderNoResults,shouldShowMetadata:g,enableInlineUpload:y&&(f===sc||E),enableFloatingUpload:this.shouldRenderFloatingUpload(),selectedCollection:h},this.collectionPassThruProps()))}},{key:"renderSocialMediaContent",value:function(){return l().createElement(Vm,t({insertImages:this.props.insertImagesFromOtherSource,breadcrumb:this.renderBreadcrumb()},this.collectionPassThruProps()))}},{key:"renderOtherSitesContent",value:function(){return l().createElement(Xf,t({insertImages:this.props.insertImagesFromOtherSource,renderDownloadButton:this.renderDownloadButton,breadcrumb:this.renderBreadcrumb()},this.collectionPassThruProps()))}},{key:"renderPhotoshootContent",value:function(){var e=this.props,n=e.config,r=e.insertFullViewItem;return l().createElement(Wm,t({config:n,insertItem:r,renderDownloadButton:this.renderDownloadButton,onDownloadButtonClick:this.downloadImage,breadcrumb:this.renderBreadcrumb()},this.collectionPassThruProps()))}},{key:"renderProductsContent",value:function(){var e=this.props.config;return l().createElement(Xm,t({config:e},this.collectionPassThruProps()))}},{key:"renderStockMediaContent",value:function(){var e=this.props,n=e.businessCategoryDisplayName,r=e.config,a=r.mediaTypes,o=r.showStockVideos,i=e.stockTotalCount,s=e.insertFullViewItem;return l().createElement(jf,t({showStockVideos:o,insertItem:s,defaultSearchKeyword:n,mediaTypes:a,breadcrumb:this.renderBreadcrumb(),stockTotalCount:i},this.collectionPassThruProps()))}},{key:"postLog",value:function(e){var t=e.level,n=e.message,r=e.meta,a=e.error;Vd({level:t,message:n,meta:r,error:a,props:this.props})}},{key:"collectionPassThruProps",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pg(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({collectionKey:this.props.selectedCollection,trackEvent:this.trackEvent,postLog:this.postLog},(0,T.pick)(this.props,["thumbnailSize","intl","minDimensions","preloadParams","selectionLimit","onCoverImageUpdate","onTrackPerfLaunchEnd","renderMode","inWebsiteContext","config","searchText","mediaTypes","selectedMediaType","openOverCanvas","insertLabel","traceAuditEventStart","traceAuditEventEnd","appName"]))}},{key:"renderDownloadButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=this.props,r=n.config.download,a=(r=void 0===r?{}:r).limit,o=void 0===a?10:a,i=n.selectedItems,s=n.intl,c=0===i.length||i.length>o||Xs()&&i.length>1;return"icon"===t?l().createElement("div",{className:vs()("download-btn primary-pastel",{disabled:c}),onClick:function(){0!==i.length&&e.downloadImage(i)},"data-click-eid":"download_images_mobile_button_click","data-aid":"download_images_mobile_button"},l().createElement($i(),{height:26,width:26})):l().createElement(ls(),{design:t,disabled:c,className:"primary-pastel",onClick:function(){0!==i.length&&e.downloadImage(i)},"data-click-eid":"download_images_button_click","data-aid":"download_images_button",icon:l().createElement($i(),{height:16,width:16}),text:s.formatMessage({id:"DOWNLOAD"})})}},{key:"handleScroll",value:function(e){var t=e.target.scrollWidth-e.target.scrollLeft===e.target.clientWidth?0:1;this.setState({blurOpacity:t})}},{key:"renderCollectionSubtitle",value:function(e,t,n,r,a){var o=t===K?"found_pages":"found",i=l().createElement(Yl,{count:e,type:o});if(!n){var s=t===W?"CONNECT_GOOGLE_PHOTOS":"CONNECT_FB";i=l().createElement("span",{className:"primary",onClick:a||this.selectCollection.bind(this,t)},"+ ",l().createElement(p.FormattedMessage,{id:s}))}return l().createElement("p",{className:vs()("collection-subtitle loading-subtitle",{"animated-subtitle":!1===r})},!r&&i)}},{key:"renderOtherSitesCollections",value:function(){var e=this,t=this.props,n=t.otherSites,r=n.viewableWebsites,a=n.websitesLoaded,o=n.currentMaxWebsiteViewableIndex,i=t.intl,s=t.loadSite,c=t.loadViewableSitesNextPage,u=t.onLoadVentureImages,d=t.renderMode,f=!1,m=a?l().createElement("div",{ref:this.othersitesCollectionsContainerRef,className:"collection-list thumbnail-list scrollable","data-aid":"other-sites-collection"},r.map((function(t,n){return t.imagesLoaded&&(0,T.isEmpty)(t.images)||(f=!0),t.imagesLoaded&&(0,T.isEmpty)(t.images)?null:l().createElement("span",{key:n,className:"image-collection"},l().createElement(Sg,{scrollObserver:e.observer,observeTargetData:{containerId:t.id,type:t.type,index:n},onObserved:function(e){var t=e.containerId,n=e.type,r=e.index;s({containerId:t,type:n}),r===o&&c()}},l().createElement(Jf,{postLog:e.postLog,gallery:t.images,isLoading:!t.imagesLoaded,onImagesLoaded:t.type===U?u:void 0,onCollectionClick:e.selectMySites.bind(e,t),renderMode:d})),l().createElement("p",{className:"collection-title black"},t.domainName||t.name||i.formatMessage({id:"MY_BUSINESS"})),l().createElement("p",{className:"collection-subtitle loading-subtitle animated-subtitle"},t.imagesLoaded?l().createElement(Yl,{typeSuffix:Ht(t.images)?"":$l,count:t.images&&t.images.filter((function(e){return!e.hasRenderError})).length,type:"found"}):l().createElement(p.FormattedMessage,{id:"LOADING"})))}))):l().createElement(Pu,{intl:i});return!f&&a&&u(),!f&&a?null:l().createElement("div",{className:"collection-container"},l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"MEDIA_FROM_OTHER_SITES"})),m)}},{key:"galleryOverlay",value:function(e){return l().createElement("div",{className:"view-all-overlay",onClick:e},l().createElement("p",null,Xs(Ys)?l().createElement(p.FormattedMessage,{id:"VIEW_ALL"}):l().createElement(p.FormattedMessage,{id:"VIEW_MORE"}),l().createElement(Hi(),{height:22,width:22})))}},{key:"renderPSBadge",value:function(){var e=this.props.photoshoot;return 0===e.length?l().createElement("span",{className:"new-badge"},l().createElement(p.FormattedMessage,{id:"NEW"})):l().createElement("span",{className:"gallery-count"},l().createElement(Yl,{count:e.length,type:"found",excludeClasses:!0}))}},{key:"deleteItem",value:function(e){this.setState({itemsToDelete:[e]})}},{key:"clearSearch",value:function(){var e=this.props,t=e.onStockVideosReset,n=e.onStockImagesReset;(0,e.onClearSearch)(),n(),t()}},{key:"openFivWithInfoPane",value:function(e){var t=this.props,n=t.onFivToggle,r=t.trackEvent;e.stopPropagation(),n(0,!0),r("IM_TRACK_FULL_VIEW_OPEN",s({},"opened from search results",!0)),this.clearSearch()}},{key:"renderNoResults",value:function(){var e=this.props,t=e.hasUploaded,n=e.renderMode,r=e.mediaTypes;return l().createElement(_g,{hasUploaded:t,embedded:n===ic,mediaTypes:r,renderUploader:this.renderUploader,getUploadCopy:this.getUploadCopy,onAddDescription:this.openFivWithInfoPane})}},{key:"renderUploader",value:function(){var e=this.props,t=e.isUploadingVideos,n=e.mediaTypes,r=e.placement;return t||function(e){var t=e.vimeoUser,n=e.totalVideosInAccount,r=e.mediaTypes,a=hg(n,t);return gp(e)&&zt(r,Me)&&a>=3&&t&&!t.convertedOn}(this.props)?null:l().createElement(Gd,{id:"im-upload-button",onUpload:this.onUploadClick,mediaTypes:n,onAddCtaButtonClick:zd(this.props),allowMultiple:"LOGO"!==r})}},{key:"getUploadCopy",value:function(){var e=this.props.mediaTypes;return zt(e,Me)?"UPLOAD":zt(e,De)?"ADD_IMAGES_CTA":"ADD_FILES_CTA"}},{key:"renderUploadPulse",value:function(){var e=this.props,t=e.flyoutIsOpen,n=e.renderMode;if(!yg($)&&t&&n===ic)return l().createElement("div",{className:"highlight-wrapper"},l().createElement("div",{className:"highlight-beacon"}),l().createElement("div",{className:"highlight-beacon"}))}},{key:"renderGalleryZeroState",value:function(){var e=this.props,t=e.mediaTypes,n=e.enableReducedUploadArea,r=e.renderMode,a=n&&r===sc,o=os(),i="DRAG_AND_DROP_FILES_FULL";return zt(t,Me)?(i="DRAG_AND_DROP_VIDEO",o=rs()):zt(t,De)&&(i="DRAG_AND_DROP_IMAGES_FULL",o=Qi()),l().createElement("div",{className:vs()("collection-gallery-zero-state primary-border",{"with-upload-experiment-A":a})},a?l().createElement(l().Fragment,null,l().createElement("div",{className:"icon-container"},l().createElement(qi(),{height:32,width:32})),l().createElement("div",null,l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:"DRAG_AND_DROP_ANYWHERE"})),l().createElement("p",null,l().createElement(p.FormattedMessage,{id:"CLICK_TO_BROWSE_DEVICE"}))),this.renderUploadButton(!0)):l().createElement(l().Fragment,null,l().createElement("span",{className:"icon-lg"},l().createElement(o,{height:50,width:50})),l().createElement("p",{className:"black"},l().createElement(p.FormattedMessage,{id:i})),l().createElement("p",{className:"or-subtext"},"—  ",l().createElement(p.FormattedMessage,{id:"OR"}),"   —"),this.renderUploadButton()))}},{key:"renderGeneratedImagesGallery",value:function(){var e=this,n=this.props,r=n.openImageGenerationAssistant,a=n.previewGeneratedImages,o=void 0===a?[]:a,i=n.generatedImages,s=void 0===i?[]:i,c=n.enableDelete,u=1;Xs(Ys)?u=3:Xs($s)&&(u=2);var d=this.galleryOverlay(this.selectMostRecentFromGallery.bind(this,ye),s,s.length),f=(0,T.pick)(this.props,["trackEvent","thumbnailSize","minDimensions","preloadParams","intl","config","renderMode","selectionLimit","onTrackPerfLaunchEnd","onDownloadButtonClick","onCoverImageUpdate","onMetadataUpdate","inWebsiteContext","openOverCanvas","traceAuditEventStart","traceAuditEventEnd"]);return l().createElement("div",{className:"uploaded-gallery generated-images-gallery"},l().createElement("div",{className:"header-start"},l().createElement("h5",{className:"header-with-progress-bar"},l().createElement(p.FormattedMessage,{id:"GENERATED_IMAGES"}))),l().createElement(Ud,t({dataSource:o,dataSourceFullLength:s.length,enableInlineUpload:r,onUploadButtonClick:function(){null==r||r(),e.trackEvent("IM_TRACK_GENERATED_IMAGES_GALLERY_CLICK")}.bind(this),renderUploader:function(){return l().createElement("div",null)},loadingNext:!1,uploadCtaId:"GENERATE_IMAGE",galleryOverlay:d,numRows:u,uploadIcon:l().createElement(ds(),{fill:"currentColor"}),shouldShowMetadata:!0,onDownloadButtonClick:this.downloadImage,onDeleteButtonClick:c&&this.deleteItem,loadEmpty:!0},f)))}},{key:"renderGeneratedLogosGallery",value:function(){var e=this,n=this.props,r=n.openLogoGenerationAssistant,a=n.previewLogoImages,o=void 0===a?[]:a,i=n.logoImages,s=void 0===i?[]:i,c=n.enableDelete,u=1;Xs(Ys)?u=3:Xs($s)&&(u=2);var d=this.galleryOverlay(this.selectMostRecentFromGallery.bind(this,Se),s,s.length),f=(0,T.pick)(this.props,["trackEvent","thumbnailSize","minDimensions","preloadParams","intl","config","renderMode","selectionLimit","onTrackPerfLaunchEnd","onDownloadButtonClick","onCoverImageUpdate","onMetadataUpdate","inWebsiteContext","openOverCanvas","traceAuditEventStart","traceAuditEventEnd"]);return l().createElement("div",{className:"uploaded-gallery logos-gallery"},l().createElement("div",{className:"header-start"},l().createElement("h5",{className:"header-with-progress-bar"},l().createElement(p.FormattedMessage,{id:"LOGO_UPLOADS"}))),l().createElement(Ud,t({dataSource:o,dataSourceFullLength:s.length,enableInlineUpload:r,onUploadButtonClick:function(){null==r||r(),e.trackEvent("IM_TRACK_LOGOS_GALLERY_CLICK")}.bind(this),renderUploader:function(){return l().createElement("div",null)},loadingNext:!1,uploadCtaId:"LOGO_UPLOADS",galleryOverlay:d,numRows:u,uploadIcon:l().createElement(ds(),{fill:"currentColor"}),shouldShowMetadata:!0,onDownloadButtonClick:this.downloadImage,onDeleteButtonClick:c&&this.deleteItem,loadEmpty:!0},f)))}},{key:"renderUploadedImagesGallery",value:function(){var e=this.props,t=e.previewUploadedImages,n=e.mixedAssetData,r=void 0===n?{}:n,a=e.uploadedImages,o=e.uploadedVideos,i=e.totalVideosInAccount,s=e.enableDelete,c=e.shouldShowUploadedMetadata,u=e.searchText,d=e.selectedMediaType,f=e.mediaTypes,m=e.renderMode,h=e.config.vimeoHelpLink,g=null,v=null,y=null,E=Xs($s)?2:1;if(Xs(Ys)&&(E=3),zt(f,Me)){if(!o)return;y=["videos","uploadedVideos"],g=o,v=i}else Wt(f)?(g=r.uploadedAssets,v=r.uploadedAssetsTotal):(g=t,v=a.length,y=["images","uploaded"]);return g&&g.length?l().createElement("div",{className:"uploaded-gallery"},l().createElement("h5",{className:"header-with-progress-bar"},zt(f,Me)?l().createElement("div",{className:"powered-by-vimeo"},l().createElement(p.FormattedMessage,{id:"MY_VIDEOS"}),l().createElement("span",{"data-testid":"vimeo-help-link",onClick:function(){return window.open(h)}},l().createElement("p",null,l().createElement(p.FormattedMessage,{id:"POWERED_BY"}),l().createElement("img",{src:C(4975),alt:"vimeo logo"})))):l().createElement(p.FormattedMessage,{id:m===ic?"MY_UPLOADS":"RECENTLY_ADDED"})),this.renderCollectionGallery({dataSource:g,dataSourceFullLength:v,pathToDataSource:y,className:"uploaded-list",collectionType:ve,isLoadingNext:!1,selectable:!0,shouldShowMetadata:c,onDownloadButtonClick:this.downloadImage,onDeleteButtonClick:s&&this.deleteItem,numRows:E,shouldTrackPerf:d===De})):u?this.renderNoResults():null}},{key:"renderPhotoshootGallery",value:function(){var e=this.props,t=e.photoshoot,n=e.photoshootIndex,r=e.intl,a=e.searchText,o=e.renderMode,i=["otherSites","websites",n,"images"];return t?0===t.length&&a?null:l().createElement("div",null,l().createElement("div",{className:"collection-heading"},l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT"})),this.renderPSBadge()),0===t.length?l().createElement("div",{className:vs()("photoshoot-not-ready product-midrange-border",{"product-background":o===ic})},l().createElement(p.FormattedMessage,{id:"PHOTOSHOOT_NOT_READY"})):this.renderCollectionGallery({dataSource:t,pathToDataSource:i,className:"uploaded-list",collectionType:be,isLoadingNext:!1,selectable:!1,onDownloadButtonClick:this.downloadImage,numRows:Xs($s)?2:1})):l().createElement(Pu,{intl:r})}},{key:"renderStockGallery",value:function(){var e=this.props,t=e.stockImages,n=e.stockVideos,r=e.selectedMediaType,a=e.isLoadingNextStock,o=e.renderMode,i=e.mediaTypes,s=e.hasUploaded,c=e.placement,u=e.config.stockImageSearchType,d=r===Me?n:t,f=r===Me?["videos","stockVideos"]:["images","stock"];return 0===(null==d?void 0:d.length)&&o===sc&&"LOGO"!==c?l().createElement(Zd,{messageID:"NO_STOCK_MEDIA_LABEL"}):d&&0!==d.length&&o===sc&&"LOGO"!==c?l().createElement("div",null,l().createElement("h5",{className:"stock-media-header"},zt(i,Me)?l().createElement(p.FormattedMessage,{id:"STOCK_VIDEOS"}):u===oe?l().createElement(Nf,null):l().createElement(p.FormattedMessage,{id:"STOCK_MEDIA"})),this.renderCollectionGallery({dataSource:d,pathToDataSource:f,className:"stock-images-list",collectionType:_e,isLoadingNext:a,selectable:!0,numRows:Xs($s)?2:1,shouldTrackPerf:!s&&r===De})):void 0}},{key:"selectMostRecentFromGallery",value:function(e){e===ve&&this.trackEvent("IM_TRACK_VIEW_MOST_RECENT_GALLERY_CLICK"),this.selectCollection(e)}},{key:"renderCollectionGallery",value:function(e){var n,r=e.dataSource,a=e.dataSourceFullLength,o=e.pathToDataSource,i=e.className,s=e.collectionType,c=e.isLoadingNext,u=e.selectable,d=e.shouldShowMetadata,p=e.onDownloadButtonClick,f=e.onDeleteButtonClick,m=e.numRows,h=e.shouldTrackPerf,g=void 0!==h&&h,v=this.props,y=v.enableDelete,E=v.mediaTypes,b=v.selectItem,_=v.stockTotalCount,O=v.insertFullViewItem,I=v.selectedMediaType,S=v.insertLabel,w=v.enableInlineUpload,k=v.enableVPInlineUpload,C=v.renderMode,A=v.ctaSourceType,x=v.showGeneratedImages,L=v.showGeneratedLogos,P=s===_e?_:null,D=this.galleryOverlay(this.selectMostRecentFromGallery.bind(this,s),r,a,P),M=(0,T.pick)(this.props,["trackEvent","thumbnailSize","minDimensions","preloadParams","intl","config","renderMode","selectionLimit","onTrackPerfLaunchEnd","onDownloadButtonClick","onCoverImageUpdate","onMetadataUpdate","inWebsiteContext","openOverCanvas","traceAuditEventStart","traceAuditEventEnd"]);if(this.getActiveCollections().includes(s)){var N=r;C!==sc&&(N=N.filter((function(e){return!(x&&Lc(e).includes(Y)||L&&Lc(e).includes(V))})));var R={collectionKey:s,dataSourceFullLength:a,dataSource:N,onInsertButtonClick:O,mediaType:I,sourceType:null===(n=r[0])||void 0===n?void 0:n.sourceType,className:i,galleryOverlay:D,enableDelete:y,pathToDataSource:o,shouldShowMetadata:d,onDownloadButtonClick:p,onDeleteButtonClick:f,numRows:m,postLog:this.postLog,shouldTrackPerf:g,uploadCtaId:this.getUploadCopy(),insertLabel:S,thumbnailSettings:s===ve&&E.includes(Me)&&gp(this.props)};return u?l().createElement(Ud,t({isLoadingNext:c,onScrollEnd:null,enableInlineUpload:w&&s===ve&&(C===sc||k)&&!A,renderUploader:this.renderUploader},M,R)):l().createElement(Mg,t({},R,{onThumbnailClick:b},M))}}},{key:"renderCollectionThumbnail",value:function(e){var t=e.dataSource,n=e.dataAid,r=e.type,a=e.totalCount,o=this.props,i=o.searchText,s=o.renderMode,c=[s===ic?Le:ve,xe,Te,Se,ke,Ce,Pe,be];if(!(!t||0===t.length&&-1===c.indexOf(r)||0===t.length&&i)&&this.getActiveCollections().includes(r)){var u;switch(r){case xe:u=rs();break;case ke:u=os();break;default:u=Qi()}var d=r===xe?Xl:"";return r!==ke&&Ht(t)||(d="_FILE"),l().createElement("span",{className:"image-collection",key:n,"data-aid":n},l().createElement(Jf,{postLog:this.postLog,renderMode:s,gallery:t.slice(0,4),onCollectionClick:this.selectCollection.bind(this,r),EmptyStateIcon:u}),l().createElement("p",{className:"collection-title black"},l().createElement(p.FormattedMessage,{id:r})),l().createElement("p",{className:"collection-subtitle"},l().createElement(Yl,{typeSuffix:d,count:a,type:"found"})))}}},{key:"renderVimeoModalWhenNeeded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props,n=t.vimeoUser,r=t.totalVideosInAccount,a=t.mediaTypes;if(!n||!zt(a,Me)||!gp(this.props))return!1;var o=gg({files:e,vimeoUser:n,totalVideosInAccount:r});return o!==wl&&(this.props.showVimeoModal({modalType:o}),!0)}},{key:"onModalFileDrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.renderVimeoModalWhenNeeded(e)||(Wd(this.props,e,t),this.clearSearch())}},{key:"renderCollectionContainer",value:function(e){var t=this,n=this.props,r=n.uploadedImages,a=n.searchText,o=n.totalVideosInAccount,i=n.documents,s=n.collectionPreviewVideos,c=n.renderMode,u=n.olsImages,d=n.logoImages,f=n.headerImages,m=n.overImages,h=n.photoshootImages,g=n.wscAssets,v=n.uploadedVideos,y=void 0===v?[]:v,E=e===Ng,b=E?[r.length,y.length,i.length]:[u.length,d.length,f.length,m.length,h.length,g.length],_=c===ic?Le:ve;if(!(E&&a||!E)||0!==b.reduce((function(e,t){return e+t}))){var O=E?[{dataSource:r,dataAid:"upload-collection",type:_,totalCount:r.length},{shouldHide:!this.shouldRenderVideoCollection(),dataSource:s,dataAid:"videos-collection",type:xe,totalCount:o},{dataSource:i,dataAid:"documents-collection",type:ke,totalCount:i.length}]:[{shouldHide:0===u.length,dataSource:u,dataAid:"ols-collection",type:Ee,totalCount:u.length},{shouldHide:0===d.length,dataSource:d,dataAid:"logo-collection",type:Se,totalCount:d.length},{shouldHide:0===g.length,dataSource:g,dataAid:"wsc-collection",type:Pe,totalCount:g.length},{shouldHide:0===f.length,dataSource:f,dataAid:"cover-collection",type:Te,totalCount:f.length},{shouldHide:0===m.length,dataSource:m,type:Ce,dataAid:"over-collection",totalCount:m.length},{shouldHide:0===h.length,dataSource:h,type:be,dataAid:"photoshoot-collection",totalCount:h.length}];return l().createElement("div",{className:"collection-container"},l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:e})),l().createElement("div",{className:"collection-list thumbnail-list scrollable"},O.map((function(e){var n=e.shouldHide,r=ft(e,["shouldHide"]);return n?null:t.renderCollectionThumbnail(r)})),l().createElement("div",null)))}}},{key:"renderUploadButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.props.isUploadingVideos,a=n||this.getUploadCopy();return t?l().createElement("div",{onClick:function(){e.renderVimeoModalWhenNeeded(),e.dismissFlyoutIfVisible()},className:"upload-wrapper","data-click-eid":"upload_withimages_button_click","data-testid":"upload_withimages_button_click"},this.renderUploader()):l().createElement(ls(),{onClick:function(){e.renderVimeoModalWhenNeeded(),e.dismissFlyoutIfVisible()},className:"btn btn-img-action btn-sm btn-primary btn-primary-dark",disabled:r,"data-click-eid":"upload_withimages_button_click","data-testid":"upload_withimages_button_click"},this.renderUploadPulse(),l().createElement("span",null,l().createElement(p.FormattedMessage,{id:a})),this.renderUploader())}},{key:"renderCtaArea",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,r=n.isVimeoLoading,a=n.intl,o=n.openOverCanvas,i=n.trackEvent,s=n.enableStudioLogoCreate,c=n.enableImageCreate,u=n.enableLogoCreate,d=n.enableMobileLogoCreateCta,p=n.canCreateLogo,f=n.enableOverGenerateLogo,m=n.placement,h=n.enableRedirectToLogoAssistant,g=n.openLogoGenerationAssistant,v=n.openImageGenerationAssistant,y=n.isAiro,E=n.showUpload;return l().createElement(ag,{sourceType:e,renderUploadButton:this.renderUploadButton,isVimeoLoading:r,intl:a,expandCtaArea:t,openOverCanvas:o,trackEvent:i,enableStudioLogoCreate:s,enableImageCreate:c,enableLogoCreate:u,enableMobileLogoCreateCta:d,canCreateLogo:p,enableOverGenerateLogo:f,placement:m,openLogoGenerationAssistant:g,openImageGenerationAssistant:v,showUpload:E,isAiro:y||g&&h&&"LOGO"===m})}},{key:"renderGooglePhotosCollection",value:function(){var e,t=this.props,n=t.socialMedia[W],r=n.auth,a=r.tokens,o=r.authUrl,i=r.scopes,s=r.revoked,c=n.mediaItems.pages,u=t.renderMode,d=t.getGoogleTokens,f=t.getGoogleScopes,m=t.getGPAuthorizationUrl,h=t.getGooglePhotosMediaItems,g=c[0],v=g.photos,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.gallery,r=e.isLoading,a=e.onCollectionClick;return l().createElement(l().Fragment,null,l().createElement(Jf,{url:t||"",gallery:n||[],zeroState:Sm[W],isLoading:null==r||r,renderMode:u,onCollectionClick:a||function(){}}),l().createElement("p",{className:"collection-title black"},l().createElement(p.FormattedMessage,{id:"GOOGLE_PHOTOS"})))};return g.fetched?l().createElement(l().Fragment,null,y({url:null===(e=v[0])||void 0===e?void 0:e.galleryUniqueUrl,gallery:v,isLoading:!1,onCollectionClick:this.selectCollection.bind(this,W)})):i.photosLibrary.read&&!s?(h({fill:0}),y()):o.url?l().createElement(l().Fragment,null,y({onCollectionClick:function(){window.location.href=o.url},isLoading:!1}),this.renderCollectionSubtitle(0,W,!1,!1,(function(){window.location.href=o.url}))):a.fetched?!i.fetched&&a.tokenId?(f(),y()):o.fetched?null:(m(),y()):(d(),y())}},{key:"renderCollections",value:function(){var e=this,t=this.props,n=t.appName,r=t.renderMode,a=t.searchText,o=t.mediaTypes,i=t.config,s=void 0===i?{}:i,c=t.otherSites,u=c.hasOthersites,d=c.hasPhotoshoot,f=t.socialMedia,m=(f=void 0===f?{}:f)[K],h=(m=void 0===m?{}:m).pages,g=void 0===h?[]:h,v=m.coverPhotos,y=void 0===v?[]:v,E=m.isLoading,b=m.auth,_=(b=void 0===b?{}:b).accessToken,O=f[z],I=(O=void 0===O?{}:O).posts,S=void 0===I?[]:I,w=O.isLoading,T=O.connected,k=O.authorized,C=t.selectedMediaType,A=t.isUploadingVideos,L=t.rejectFiles,P=t.inWebsiteContext,D=t.isVimeoLoading,M=t.intl,N=t.ctaSourceType,R=t.isLoadingUploadedImages,U=t.onObserveVentureCollectionArea,j=t.enableInlineUpload,F=t.enableVPInlineUpload,G=t.hasUploaded,V=t.photoshootImages,B=t.trackEvent,H=t.enablePhotoshootServiceModal,W=t.enableGooglePhotosCollection,q=t.showUpload,Y=void 0===q||q,$=t.showCollections,X=void 0===$||$,Q=t.showGeneratedImages,Z=void 0!==Q&&Q,J=t.showGeneratedLogos,ee=void 0!==J&&J,ne=M.locale,re=void 0===ne?"en-US":ne,ae=_&&_.length>0,oe=T&&k,ie=this.getActiveCollections(),se=s.showStockVideos,ce=s.accountId,le=s.stockImageSearchType,ue=gp(this.props)||!se,de=Xs($s),pe=gp(this.props)&&de&&C===Me,fe=zt(o,Me),me=Y&&!a&&ue&&(!de||!!N)&&(!j&&!this.shouldRenderFloatingUpload()||N||j&&!G||r===ic&&!F),he=n===te&&P&&ce&&W;return fe&&D||!fe&&R?l().createElement("div",{className:"spinner-container"},l().createElement(x(),{size:"lg"})):l().createElement("div",{"data-testid":"dropzone-with-images",disabled:A},l().createElement(dp,{disabled:A,className:vs()("dropzone-with-images",{"full-scroll":r===ic}),onDrop:this.onModalFileDrop,mediaTypes:o,enableVimeo:gp(this.props),selectedMediaType:C,rejectFiles:L},me&&l().createElement("div",{className:"upload-area-container"},l().createElement("h5",{className:"header-with-progress-bar"},l().createElement(p.FormattedMessage,{id:"ADD_TO_LIBRARY"})),N?this.renderCtaArea(N):this.renderGalleryZeroState()),d&&this.renderPhotoshootGallery(),pe&&l().createElement(Ru,{intl:M}),this.renderUploadedImagesGallery(),this.renderStockGallery(),ee&&this.renderGeneratedLogosGallery(),Z&&this.renderGeneratedImagesGallery(),X&&!fe&&l().createElement("div",{className:"collections-flex-wrapper"},Wt(o)&&this.renderCollectionContainer(Ng),this.renderCollectionContainer("BROWSE_BY_USAGE"),!a&&ie.includes(Ie)&&l().createElement("div",{className:"collection-container"},l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"SOCIAL_MEDIA"})),l().createElement("div",{className:"collection-list thumbnail-list scrollable"},l().createElement("span",{className:"image-collection","data-aid":"facebook-collection"},l().createElement(Sg,{scrollObserver:this.socialObserver,onObserved:function(){var t=e.props,n=t.socialMedia[K].auth.accessTokenInitFetched,r=t.config.featureFlags.enableAutoSocialAuth;!n&&r&&e.props.getSocialAccessToken(K)}},l().createElement(Jf,{url:y.length>0?y[0].imageUrl:"",gallery:y,zeroState:Sm[K],isLoading:E,renderMode:r,onCollectionClick:this.selectCollection.bind(this,K),stockImageSearchType:le})),l().createElement("p",{className:"collection-title black"},l().createElement(p.FormattedMessage,{id:"FACEBOOK"})),this.renderCollectionSubtitle(Object.keys(g).length,K,ae,E)),P&&ce&&l().createElement("span",{className:"image-collection","data-aid":"instagram-collection"},l().createElement(Jf,{url:S.length>0?S[0].imageUrl:"",gallery:S.slice(0,4),zeroState:Sm[z],isLoading:w,renderMode:r,onCollectionClick:this.selectCollection.bind(this,z)}),l().createElement("p",{className:"collection-title black"},l().createElement(p.FormattedMessage,{id:"INSTAGRAM"})),this.renderCollectionSubtitle(S.length,z,oe,w)),he&&l().createElement("span",{className:"image-collection","data-aid":"google-photos-collection"},this.renderGooglePhotosCollection()))),!a&&l().createElement(Sg,{scrollObserver:this.observer,onObserved:function(){U()}}),ie.includes(Oe)&&u&&!a&&this.renderOtherSitesCollections(),H&&"en-US"===re&&!a&&0===V.length&&l().createElement(Lg,{trackEvent:B,intl:M}))))}},{key:"getActiveCollections",value:function(){return this.props.activeCollections}},{key:"renderDeleteConfirmation",value:function(){var e=this,t=this.state.itemsToDelete,n=this.props,r=n.enableDelete,a=n.onFilesDelete,o=n.intl,i=n.config;return r&&t&&t.length>0?l().createElement(dg,{config:i,itemsToDelete:t,onClose:function(){return e.setState({itemsToDelete:null})},onDelete:function(){return a(t)},intl:o}):null}},{key:"renderCollectionsView",value:function(){var e,t=this,n=this.props,r=n.vimeoUser,a=void 0===r?{}:r,o=n.selectedCollection,i=n.mediaTypes,c=n.handleVimeoReconnect,u=n.renderMode,d=n.trackEvent,p=n.intl,f=n.appName,m=[];i.includes(De)&&m.push(R),i.includes(Me)&&m.push($);var h=(s(e={},ve,(function(){return t.renderUploadedImagesContent(m)})),s(e,Le,(function(){return t.renderUploadedImagesContent(B)})),s(e,Ee,(function(){return t.renderUploadedImagesContent(F)})),s(e,Se,(function(){return t.renderUploadedImagesContent(G)})),s(e,Pe,(function(){return t.renderUploadedImagesContent(J)})),s(e,Te,(function(){return t.renderUploadedImagesContent(H)})),s(e,ke,(function(){return t.renderUploadedImagesContent(Q)})),s(e,Ce,(function(){return t.renderUploadedImagesContent(Z)})),s(e,xe,(function(){return t.renderUploadedImagesContent($)})),s(e,be,(function(){return t.renderUploadedImagesContent(q)})),s(e,ye,(function(){return t.renderUploadedImagesContent(Y)})),s(e,Ie,this.renderSocialMediaContent),s(e,Oe,this.renderOtherSitesContent),s(e,_e,this.renderStockMediaContent),s(e,Ae,this.renderProductsContent),e);return l().createElement("div",{className:vs()("image-selector ia-collections",{standalone:u===ic,"with-create-cta":o===Se&&f===ee})},a.reconnectRequired&&l().createElement(Wh,{intl:p,handleOnReconnect:c}),o===ge?this.renderCollections():h[o](),this.renderDeleteConfirmation(),i.includes(Me)&&l().createElement(l().Fragment,null,l().createElement(Th,null),l().createElement(Bh,{trackEvent:d,intl:p})))}},{key:"onUploadClick",value:function(e){if(!this.renderVimeoModalWhenNeeded(e)){var t=this.props,n=t.selectedCollection,r=t.renderMode,a=t.appName,o=n===ke&&r===sc,i=n===Se&&a===ee,s=n===Se||n===xe;Kd(this.props,e),n===ve||n===ge||o||i||s||this.selectCollection(ge),this.clearSearch()}}},{key:"renderHeader",value:function(){var e=this,t=this.props,n=t.modalTitle,r=t.trackEvent,a=t.intl,o=t.searchText,i=t.config,s=void 0===i?{}:i,c=t.renderMode,u=t.selectedCollection,d=t.ctaSourceType,f=t.appName,m=t.mediaTypes,h=t.onStockImagesSearchCallback,g=t.showSearch,v=c===sc,y=s.searchDebounce,E=s.searchTrackingDebounce,b=s.stockImageSearchType,_=Xs($s),O=u===Ae,I=os();zt(m,Fe)&&O?I=ts():zt(m,Me)?I=rs():zt(m,De)&&(I=Ji());var S=s.featureFlags,w=-1!==((void 0===S?{}:S).disableFulltextSearch?Rg:[].concat(Rg,[ve,Le,Ee,Se,Te,Pe,be])).indexOf(u),T=!g||(u===ke||f===ee&&u===Se)&&c===sc,k=!!d||this.shouldRenderFloatingUpload();return l().createElement("div",{className:"modal-header custom-header"},v&&l().createElement("div",{className:"header-title"},l().createElement(I,null),l().createElement("h4",{className:"modal-title"},n)),l().createElement("span",{className:vs()("header-actions",{"full-width":!v})},!T&&l().createElement("span",{className:vs()("search-actions",{"product-search":O,"no-margin":k})},l().createElement(rh,{onStockImagesSearchCallback:h,searchText:o,renderMode:c,trackEvent:r,intl:a,searchDebounce:y,searchTrackingDebounce:E,canSearch:w,selectedCollection:u,back:this.selectCollection.bind(this,ge),enableVimeo:gp(this.props),stockImageSearchType:b})),_&&!O&&!k&&l().createElement("label",{className:"btn-img-action btn-sm btn-primary btn-primary-dark",onClick:function(){e.renderVimeoModalWhenNeeded(),e.dismissFlyoutIfVisible()}},this.renderUploadPulse(),l().createElement("div",{className:"uploader-overlay primary-dark-background"}),this.renderUploader(),l().createElement("span",null,l().createElement(qi(),{"data-click-eid":"upload_withimages_button_click",height:18,width:18}),l().createElement(p.FormattedMessage,{id:this.getUploadCopy()})))))}},{key:"renderAlertBanner",value:function(){var e,t=this.props,n=t.socialMedia[W].auth.disconnectStatus,r=t.dismissGooglePhotosDisconnectAlert,a=(s(e={},Ug,{title:l().createElement(p.FormattedMessage,{id:"DISCONNECT_GOOGLE_PHOTOS_SUCCESS"}),emphasis:"success"}),s(e,jg,{title:l().createElement(p.FormattedMessage,{id:"DISCONNECT_GOOGLE_PHOTOS_ERROR"}),emphasis:"critical"}),e);return n?(setTimeout(r,2e3),l().createElement("div",{className:"social-media-alert-banner",style:{margin:"20px 60px"}},l().createElement(hs(),{title:a[n].title,id:"google-photos-disconnect-message",emphasis:a[n].emphasis}))):null}},{key:"selectionCanDelete",value:function(){var e=this.props,t=e.enableDelete,n=e.selectedDeleteDisabled;return!(e.selectedMediaType===Me&&!this.enableVimeoDelete())&&t&&!n}},{key:"selectionCanDownload",value:function(){return!this.props.selectedDownloadDisabled}},{key:"onDelete",value:function(){var e,t=this.props,n=t.selectedItems,r=t.selectedMediaType;if(0!==n.length){var a=n.filter((function(e){return e.basePath===F}));this.setState({itemsToDelete:n});var o=(s(e={},au,n.length),s(e,"OLS",a.length>0),e);o["selected media type"]=r,this.trackEvent("IM_TRACK_DELETE_BUTTON_CLICK",o)}}},{key:"shouldRenderEditButton",value:function(){var e=this.props,t=e.enableEditWithOver,n=e.mediaTypes,r=e.selectedCollection,a=e.socialMedia.selectedProvider,o=r===Ie&&a===W;return t&&zt(n,De)&&!o}},{key:"renderCancelButton",value:function(e){var t=this.props,n=t.onClearSelection,r=t.intl;return l().createElement(ls(),{"data-click-eid":"image_modal_cancel_selection_click","data-aid":"cancel_selection",design:e,className:vs()("btn-secondary-pastel",{"with-edit":this.shouldRenderEditButton()}),onClick:n,text:r.formatMessage({id:"CANCEL"})})}},{key:"shouldRenderEditTooltip",value:function(){var e=this.props,t=e.selectedItems,n=e.enableStudioBgRemovalTooltip,r=t&&t.length>0,a=this.state.editTooltipDismissed;return r&&n&&!yg(We)&&!a&&this.shouldRenderEditButton()&&!Xs()}},{key:"dismissFlyoutIfVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;if(e===We&&this.shouldRenderEditTooltip())return this.setState({editTooltipDismissed:!0}),void Eg(We);if(e===qe&&this.shouldRenderFloatingUpload())return this.setState({uploadOnboardingDismissed:!0}),void Eg(qe);var t=this.props,n=t.triggerFlyout;t.flyoutIsOpen&&(n(!1),Eg(e))}},{key:"renderEditButton",value:function(){var e=this.props,t=e.openOverCanvas,n=e.selectedItems,r=e.trackEvent,a=e.intl,o=e.enableStudioBgRemovalTooltip,i=e.config,s=(i=void 0===i?{}:i).stockImageSearchType,c=l().createElement(Pl,{stockImageSearchType:s,editItem:n[0],trackEvent:r,openOverCanvas:t,selectionCount:n.length,isFullCta:!0});return o&&!yg(We)?(this.shouldRenderEditTooltip()&&r("IM_TRACK_BG_PROMO_DISPLAY"),l().createElement("div",{className:"footer-edit-cta"},c,l().createElement(fh,{shouldBeVisible:this.shouldRenderEditTooltip(),intl:a,onClose:this.dismissFlyoutIfVisible.bind(null,We)}))):c}},{key:"renderDeleteButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.selectionCanDelete()?e?l().createElement("div",{onClick:this.onDelete,"data-click-eid":"delete_image_mobile_button_click","data-aid":"delete_image_mobile_button",className:"delete-btn primary-pastel"},l().createElement(zi(),{height:26,width:26})):l().createElement(ls(),{design:"inline",onClick:this.onDelete,"data-click-eid":"delete_image_button_click","data-aid":"delete_image_button",className:"delete-btn primary-pastel",icon:l().createElement(zi(),{height:16,width:16}),text:this.props.intl.formatMessage({id:"DELETE"})}):null}},{key:"componentWillUnmount",value:function(){this.tooltipTimeout&&clearTimeout(this.tooltipTimeout)}},{key:"renderInsertButton",value:function(){var e=this,t=this.props,n=t.insertLabel,r=t.onInsertButtonClick,a=t.intl,o=t.selectedItems,i=t.selectedCollection,s=t.onItemsSelectedCallback,c=this.shouldDisable(),u=o&&o.length>0,d=l().createElement(ls(),{id:"im-insert-button","data-click-eid":"image_modal_insert_click",disabled:!!c,"data-aid":"insert_images","data-testid":c?"insert_images_disabled":"insert_images",className:vs()("btn btn-primary",{"disabled toggle-overlay":!!c,"btn-primary-pastel":u}),onClick:c?null:function(){r({selectedCollection:i})},text:a.formatMessage({id:n}),ref:this.anchorRef}),p=l().createElement(fs,{anchorRef:this.anchorRef,id:"button-hint","data-testid":"insert-tooltip",className:Xs()?"mobile-insert-tooltip":"desktop-insert-tooltip"},l().createElement("div",null," ",a.formatMessage({id:"".concat(c)})," "));return c?l().createElement("div",{ref:this.anchorRef,className:vs()("ux-btn-set-item",{"mobile-btn-set-item":Xs()}),"data-testid":"insert-tooltip-div",onMouseEnter:function(){e.handleTooltipOpen()},onMouseLeave:function(){e.handleTooltipClose()}},d,this.state.showTooltip&&c&&p):s?d:null}},{key:"shouldDisable",value:function(){var e=this.props,t=e.selectedItems,n=e.selectedMediaType,r=e.mediaTypes,a=e.selectionLimit;return 0===t.length?1===a?"CHOOSE_JUST_ONE_".concat(n):"CHOOSE_IMAGE":a>0&&t.length>a?"".concat(n,"_SELECTION_LIMIT_EXCEEDED"):t.some((function(e){return e.sourceType===$&&e.status!==js}))?"VIDEO_NOT_READY":!!t.some((function(e){return!r.includes(e.mediaType)}))&&" "}},{key:"renderUploadProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.mediaTypes,r=t.trackEvent,a=t.selectedItems,o=t.placement,i=t.selectedCollection;return l().createElement(ug,{activeSelection:a&&a.length>0,mediaTypes:n,trackEvent:r,isMobile:e,placement:o,selectedCollection:i})}},{key:"shouldRenderFloatingUpload",value:function(){var e=this.props,t=e.enableFloatingUpload,n=e.ctaSourceType,r=e.renderMode,a=e.selectedCollection;return!n&&t&&r===sc&&a!==Ae}},{key:"renderFooter",value:function(){var e,t=this.props,n=t.selectedItems,r=t.selectedMediaType,a=t.minDimensions,o=t.intl,i=t.renderMode,c=t.selectedCollection,u=t.enableStudioBgRemovalTooltip,d=t.showSlowUploadNotification,p=t.closeUploadNotification,f=this.state.uploadOnboardingDismissed,m=i===sc,h=c===Ae,g=(s(e={},Ne,"selected_file"),s(e,Me,"selected_videos"),s(e,Fe,"selected_products"),e)[r],v=l().createElement(Yl,{count:n.length,type:g||"selected",typeSuffix:g||Ht(n)?"":$l,excludeClasses:!0}),y=(Zl(a,o)||{}).content,E=n&&n.length>0,b=!1;if(!this.shouldDisable()&&1===n.length){var _=a||{},O=_.width,I=_.height,S=n[0].dimensions||n[0].localDimensions;S&&(b=(O&&S.width<O||I&&S.height<I)&&!this.shouldRenderFloatingUpload())}b&&this.trackEvent("IM_TRACK_WARNING_DISPLAYED_SMALL_IMAGE");var w=b&&l().createElement("div",{className:"custom-growl"},l().createElement("p",null,l().createElement(ss(),{height:22,width:22,fill:"yellow"}),y));return Xs(Ys)?l().createElement(l().Fragment,null,m&&this.renderUploadProgress(!0),l().createElement("div",{className:vs()("custom-modal-footer-mobile",{"is-active":E,dark:!m})},w,l().createElement("div",{className:"footer-controls primary-dark-background"},l().createElement("div",{className:"footer-selection"},l().createElement("p",{className:"primary-pastel"},v),this.renderCancelButton("inline")),l().createElement("div",{className:"mobile-footer-btn-set"},l().createElement("div",{className:"secondary-btns"},this.selectionCanDownload()&&this.renderDownloadButton("icon"),this.renderDeleteButton(!0))),m&&l().createElement("div",{className:"floating-insert"},this.shouldRenderEditButton()&&E&&this.renderEditButton()," "," ",this.renderInsertButton())),this.shouldRenderFloatingUpload()&&l().createElement(gh,{tooltipShouldBeVisible:!f&&!yg(qe),renderUploader:this.renderUploader,onClose:this.dismissFlyoutIfVisible.bind(null,qe)}))):l().createElement("div",{className:vs()("custom-modal-footer",{"is-active":E,"has-edit-tooltip":u})},w,m&&this.renderUploadProgress(),l().createElement("div",{className:"footer-controls primary-dark-background"},l().createElement("div",{className:"footer-selection"},l().createElement("p",{className:"primary-pastel"},v),!h&&l().createElement("div",{className:"dynamic-actions"},(this.selectionCanDownload()||this.selectionCanDelete())&&l().createElement("span",{className:vs()("divider",{"primary-pastel-border":E,"product-light-border":!E})}),this.renderDeleteButton(),this.selectionCanDownload()&&this.renderDownloadButton("inline"))),l().createElement(ps,null,this.renderCancelButton(),this.shouldRenderEditButton()&&this.renderEditButton(),m&&this.renderInsertButton())),this.shouldRenderFloatingUpload()&&l().createElement(gh,{tooltipShouldBeVisible:!f&&!yg(qe),renderUploader:this.renderUploader,onClose:this.dismissFlyoutIfVisible.bind(null,qe)}),m&&l().createElement(ch,{active:d,toggle:p,intl:o}))}},{key:"render",value:function(){var e=this.props,t=e.renderMode,n=e.enableStudioBgRemovalTooltip,r=e.enableGooglePhotosCollection,a=t===sc;return l().createElement(l().Fragment,null,this.renderHeader(),r&&this.renderAlertBanner(),this.renderCollectionsView(),this.renderFooter(),n&&l().createElement("div",{className:vs()("flyout-overlay tooltip-overlay",{visible:this.shouldRenderEditTooltip()})}),!a&&this.renderUploadProgress(Xs(Ys)))}}]),o}(c.Component);Fg.propTypes=Object.assign({autoSelectAfterUpload:d().bool,uploadedImages:d().array,logoImages:d().array,photoshootImages:d().array,wscAssets:d().array,olsImages:d().array,documents:d().array,uploadedOrder:d().oneOf([Ye,$e]),enableDelete:d().bool,onImagesSelect:d().func,onImagesUpload:d().func,onCancel:d().func,insertFullViewItem:d().func,preloadParams:d().string,businessCategoryDisplayName:d().string,selectionLimit:d().number,intl:d().object.isRequired,addSources:d().array,minDimensions:d().object,trackEvent:d().func.isRequired,onCoverImageUpdate:d().func.isRequired,onFivToggle:d().func,otherSites:d().object,onOtherSourceImagesInsert:d().func,insertImagesFromOtherSource:d().func,selectedMediaType:d().oneOf(Ve),onInitialUploadedImagesLoaded:d().func,mediaTypes:d().arrayOf(d().oneOf(Ve)),inWebsiteContext:d().bool,shouldShowUploadedMetadata:d().bool,showVimeoModal:d().func,overImages:d().array,selectedCollection:d().string,activeCollections:d().arrayOf(d().string),setCurrentView:d().func,canCreateLogo:d().bool,loadEmpty:d().bool,showCollections:d().bool,showGeneratedLogos:d().bool,showGeneratedImages:d().bool,isAiro:d().bool},de,fe),Fg.defaultProps={showSearch:!0,uploadedImages:[],logoImages:[],photoshootImages:[],headerImages:[],documents:[],olsImages:[],wscAssets:[],selectionLimit:-1,thumbnailSize:{width:140,height:105},renderMode:sc,addSources:[],selectedItems:[],selectedMediaType:De,socialMedia:{},overImages:[],activeCollections:[],selectedCollection:ge,setCurrentView:function(){},loadEmpty:!1,showCollections:!0,showGeneratedLogos:!1,showGeneratedImages:!1,isAiro:!1};const Gg=Fg;function Vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vg(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Hg=(0,f.connect)((function(e,t){return Bg(Bg({},Jt(e)),{},{showGeneratedImages:t.showGeneratedImages||Ad(e),showGeneratedLogos:t.showGeneratedLogos||Cd(e)})}),(function(e){return{setCurrentView:function(t){e(ci(t))},dismissGooglePhotosDisconnectAlert:function(){e(Di())}}}))(Gg);var Kg=C(6366),zg=C.n(Kg);const Wg=(0,f.connect)((function(e){return{flyoutIsOpen:Vc(e).flyoutIsOpen}}),(function(e){return{triggerFlyout:function(t){e(pi(t))}}}))((function(e){var t,n=e.flyoutIsOpen,r=e.triggerFlyout,o=e.renderMode,i=e.flyoutId,u=e.intl,d=a((0,c.useState)(!1),2),f=d[0],m=d[1],h=a((0,c.useState)(!1),2),g=h[0],v=h[1];if(i){var y=function(){if(!f){var e=o===sc||!!(t=document.querySelector(".upload-image-input"))&&t.getBoundingClientRect().y<document.documentElement.clientHeight/(Xs($s)?1:1.5);m(e),r(e)}var t},E=(0,c.useRef)((0,T.throttle)(y,100));(0,c.useEffect)((function(){if(!f&&!g&&!n&&(y(),o===ic))return window.addEventListener("scroll",E.current,{passive:!0}),function(){return window.removeEventListener("scroll",E.current)}}),[f]);var b=f&&!g&&n,_=Xs($s),O=(s(t={},He,{title:"VIDEO_ONBOARDING_TITLE",subtitle:_?"VIDEO_ONBOARDING_FEATURE_DESCRIPTION_MOBILE":"VIDEO_ONBOARDING_FEATURE_DESCRIPTION",img:Qh()}),s(t,ze,{title:"VIMEO_CREATE_ONBOARDING_TITLE",subtitle:"VIMEO_CREATE_ONBOARDING_FEATURE_DESCRIPTION",img:$h()}),s(t,Ke,{title:"OVER_ONBOARDING_TITLE",subtitle:"OVER_ONBOARDING_FEATURE_DESCRIPTION",img:zg()}),t);return l().createElement(l().Fragment,null,l().createElement("div",{className:vs()("flyout-overlay",{visible:b,"modal-flyout-overlay":o===sc})}),l().createElement("div",{className:vs()("flyout-container",{visible:b,"modal-flyout":o===sc})},l().createElement("div",{className:"flyout-inner"},l().createElement("div",{className:"flyout-img product-background"},!_&&l().createElement("div",{className:vs()("img-container",{"over-container":i===Ke})},l().createElement("img",{src:O[i].img,alt:u.formatMessage({id:O[i].title})}))),l().createElement("div",{className:"flyout-content"},l().createElement("h2",null,l().createElement(p.FormattedMessage,{id:O[i].title})),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:O[i].subtitle})),l().createElement(ls(),{"data-aid":"video_onboarding_acknowledge",design:"primary",className:"pull-right btn btn-primary",onClick:function(){Eg(i),m(!1),r(!1),v(!0)},text:u.formatMessage({id:"VIDEO_ONBOARDING_ACKNOWLEDGE"})})))))}}));var qg=C(1915),Yg=C.n(qg);function $g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.getElementById(e);return n||((n=document.createElement("iframe")).id=e,n.width="0",n.height="0",n.style.display="none",t&&document.body.appendChild(n)),n}function Xg(e){var t=e.replace("disposition=0","disposition=1");if(t===e){var n=a(t.split("?"),2),r=n[0];t=n[1]?"".concat(t,"&disposition=1"):"".concat(r,"?disposition=1")}return t}function Qg(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.sourceType,a=n.dataUrl,o=n.imageUrl,i=n.filename,s=r===j?Xg(o):"".concat(a,"?download=true");$g("IM_DOWNLOAD_".concat(i),!0).src=s}}var Zg=C(123),Jg=C.n(Zg),ev=C(2863),tv=C.n(ev),nv=C(4399),rv=C.n(nv);const av=function(e){var t,n=e.recentUploadedImages,r=e.onModalHide,o=e.rootDomain,i=e.venturePrimaryDomain,s=e.onAutoSetLogo,u=e.trackEvent,d=e.ventureId,f=e.websiteId,m=e.suppressWAMRecommendation;if(0===n.length||(null===(t=n[0].sources)||void 0===t?void 0:t.over)&&!1===n[0].isCreatedLogo)return null;var h,g=a((0,c.useState)(!1),2),v=g[0],y=g[1],E=n[0],b=E.imageUrl,_=E.dimensions,O=void 0===_?{}:_,I=O.width,S=O.height,w=500/S*I,T=w*(S/I),k="https://onboarding.".concat(o,"/launch?domainName=").concat(i)+"&targetVentureId=".concat(d,"&itc=mya_vh_buildwebsite_with_logo"),C=(0,c.useRef)(null),A={origin:{y:.6},zIndex:9999,scalar:.9};return(0,c.useEffect)((function(){u("IM_TRACK_POST_LOGO_FIV_DISPLAY")}),[]),(0,c.useEffect)((function(){var e=Yg().create(C.current,{resize:!0,useWorker:!0}),t=function(t,n){e(Object.assign({},A,n,{particleCount:Math.floor(200*t)}))};v&&(s({fromPostLogo:!0}),setTimeout((function(){t(.5,{spread:110,startVelocity:55}),t(.4,{spread:120}),t(.7,{spread:160,decay:.91,scalar:.8}),t(.2,{spread:190,startVelocity:25,decay:.92,scalar:1.2}),t(.2,{spread:190,startVelocity:45})}),750));var n=new Image;n.onload=function(){setTimeout((function(){y(!0)}),100)},n.src=b}),[v]),h=void 0!==m?m:!!f,l().createElement("div",{className:vs()("post-logo-fiv",{"is-loaded":v})},l().createElement("div",{className:"spinner-container"},l().createElement(x(),{inline:!0,size:"lg",label:"Finishing up..."})),l().createElement("div",{className:vs()("fiv-logo-container",{"suppress-wam-rec":h})},l().createElement("div",{className:"post-logo-background",style:{backgroundImage:"url(".concat(b,")"),filter:"brightness(20%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),l().createElement("canvas",{id:"logo-confetti-canvas",ref:C}),l().createElement("div",{className:"logo-img-container"},l().createElement("div",{className:"post-logo-confirmation"},l().createElement("span",{className:"checkmark-container primary-background"},l().createElement(Ms(),{height:14,width:14,fill:"#FFF"}))," ",l().createElement(p.FormattedMessage,{id:"LOGO_IS_READY"})),l().createElement("img",{src:zs({url:b,width:w,height:T}),alt:l().createElement(p.FormattedMessage,{id:"LOGO_ALT"})}),!h&&l().createElement(ls(),{design:"secondary",onClick:function(){u("IM_TRACK_POST_LOGO_FIV_DOWNLOAD_CLICK"),Qg(n)},"data-click-eid":"post_logo_download_cta_click","data-aid":"post_logo_download_cta",icon:l().createElement($i(),null),text:l().createElement(p.FormattedMessage,{id:"DOWNLOAD"})}),h&&l().createElement(ls(),{onClick:function(){u("IM_TRACK_POST_LOGO_FIV_DASHBOARD_CLICK"),r({continueToDashboardClicked:!0})},design:"secondary","data-click-eid":"post_logo_dashboard_cta_click","data-aid":"post_logo_dashboard_cta"},l().createElement(p.FormattedMessage,{id:"CONTINUE_TO_DASHBOARD"})))),!h&&l().createElement("div",{className:"rec-container"},l().createElement("p",null,l().createElement(p.FormattedMessage,{id:"WAM_UPSELL_SUBTITLE"})),l().createElement("h1",null,l().createElement(p.FormattedMessage,{id:"WAM_UPSELL_TITLE"})),l().createElement("div",{className:"wam-logo-container"},l().createElement("img",{className:"logo-container",src:b,alt:l().createElement(p.FormattedMessage,{id:"LOGO_ALT"})}),l().createElement("div",{className:"desktop-container"},l().createElement("img",{className:"desktop-background",src:Jg(),alt:l().createElement(p.FormattedMessage,{id:"WAM_UPSELL_TITLE"})}),l().createElement("img",{className:"personal-logo-desktop",src:b,alt:l().createElement(p.FormattedMessage,{id:"LOGO_ALT"})}),l().createElement("img",{className:"rain-texture",src:rv(),alt:""}),l().createElement("div",{className:"mobile-container"},l().createElement("img",{className:"mobile-background",src:tv(),alt:l().createElement(p.FormattedMessage,{id:"WAM_UPSELL_TITLE"})}),l().createElement("img",{className:"personal-logo-mobile",src:b,alt:l().createElement(p.FormattedMessage,{id:"LOGO_ALT"})})))),l().createElement(ls(),{href:k,onClick:function(){return u("IM_TRACK_POST_LOGO_WAM_CLICK")},design:"primary","data-click-eid":"post_logo_wam_cta_click","data-aid":"post_logo_wam_cta",text:l().createElement(p.FormattedMessage,{id:"START_CREATING"})}),l().createElement(ls(),{onClick:function(){u("IM_TRACK_POST_LOGO_FIV_DASHBOARD_CLICK"),r({continueToDashboardClicked:!0})},"data-click-eid":"post_logo_dashboard_cta_click","data-aid":"post_logo_dashboard_cta",as:"cta",text:l().createElement(p.FormattedMessage,{id:"OR_CONTINUE_TO_DASHBOARD"})})))},ov=function(e){var t=e.gettyImageSpinnerType;return t?l().createElement("div",{className:"getty-image-spinner-container"},l().createElement("div",{className:"getty-image-spinner-overlay"}),l().createElement(x(),{inline:!0,size:"lg"}),l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:"GETTY_SPINNER_".concat(t)}))):null};function iv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iv=function(){return!!e})()}var sv=function(e){b(o,e);var n,r,a=(n=o,r=iv(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t;return h(this,o),t=a.call(this,e),P()(y(t)),t}return v(o,[{key:"insertFullViewItem",value:function(e,t){var n=this.props,r=n.onInsertItems,a=n.onFivToggle,o=n.appName;a(-1),r({selectedItems:[e]}),Wf({items:[e],collectionKey:t,trackEvent:this.trackEvent,fullView:!0,recentUploadedImages:this.props.recentUploadedImages,appName:o})}},{key:"insertImagesFromOtherSource",value:function(e){var t=this.props,n=t.onOtherSourceImagesInsert,r=t.selectedItems,a=function(e){return(0,T.pick)(e,["url","eTag","filename","sourceType","size","originalFilename","dimensions"])},o=e?[a(e)]:r.map(a);n({type:o[0].sourceType,images:o})}},{key:"insertProducts",value:function(){var e=this.props;(0,e.onProductsInsert)(e.selectedItems)}},{key:"onInsertButtonClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectedCollection,n=e.fromPostLogo,r=void 0!==n&&n,a=this.props,o=a.selectedItems,i=a.recentUploadedImages,s=void 0===i?[]:i,c=a.appName;if(o.length>0){if(Wf({items:o,collectionKey:t,trackEvent:this.trackEvent,recentUploadedImages:s,fullView:!1,appName:c}),t===Oe||t===Ie)return void this.insertImagesFromOtherSource();if(t===Ae)return void this.insertProducts();this.props.onInsertItems({selectedItems:o,fromPostLogo:r})}}},{key:"onCancelButtonClick",value:function(){this.props.onCancel(),this.trackEvent("IM_TRACK_CANCEL_BUTTON_CLICK")}},{key:"trackEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,this.props.trackEvent)(e,t)}},{key:"render",value:function(){var e,n=this,r=this.props,a=r.onCancel,o=r.renderMode,i=r.mediaTypes,s=r.intl,c=r.insertLabel,u=r.enableOverFlyout,d=r.enableVimeoCreateFlyout,p=r.enableVimeoStandaloneFlyout,f=r.enableStudioBgRemovalTooltip,m=r.enableFloatingUpload,h=r.placement,g=r.recentUploadedImages,v=void 0===g?[]:g,y=r.enablePostLogoFlow,E=r.onModalHide,b=r.rootDomain,_=r.venturePrimaryDomain,O=r.ventureId,I=r.websiteId,S=r.suppressWAMRecommendation,w=r.gettyImageSpinnerType,T=u&&!f&&!m&&zt(i,De)&&!yg(Ke)&&!Xs()&&h!==Ke,k=d&&zt(i,Me)&&!yg(ze)&&!Xs(),C=p&&!yg(He)&&!Xs(),A=c||s.formatMessage({id:"INSERT"}),x=y&&!Xs()&&v.length>0;return o===ic?l().createElement(l().Fragment,null,l().createElement(Hg,t({className:"collection-view-manager"},r,{key:r.mediaTypes,insertLabel:A})),C&&l().createElement(Wg,{renderMode:o,flyoutId:He,intl:s})):(T?e=l().createElement(Wg,{renderMode:o,flyoutId:Ke,intl:s}):k&&(e=l().createElement(Wg,{renderMode:o,flyoutId:ze,intl:s})),l().createElement("div",{id:"im-modal",className:"modal fade"},l().createElement("div",{className:"image-selector-modal modal-dialog"},l().createElement("div",{className:"modal-content"},x&&l().createElement(av,{recentUploadedImages:v,onModalHide:E,rootDomain:b,venturePrimaryDomain:_,onAutoSetLogo:this.onInsertButtonClick,trackEvent:this.trackEvent,ventureId:O,websiteId:I,suppressWAMRecommendation:S}),l().createElement(ls(),{"data-click-eid":"image_modal_close_click","aria-label":"Close modal",className:"modal-close",type:"button","data-action":"close","data-dismiss":"modal",icon:l().createElement(N(),{fill:x?"#fff":"#111"}),onClick:function(e){!function(e,t,n){e&&t&&!e._calledComponentWillUnmount&&(n("IM_TRACK_CLOSE_MODAL"),t())}(e,a,n.trackEvent)}}),l().createElement("div",{className:"modal-body"},l().createElement(Hg,t({},r,{onInsertButtonClick:this.onInsertButtonClick,insertFullViewItem:this.insertFullViewItem,insertImagesFromOtherSource:this.insertImagesFromOtherSource,key:r.mediaTypes,insertLabel:A})),e),l().createElement(ov,{gettyImageSpinnerType:w})))))}}]),o}(c.Component);sv.propTypes=Object.assign({autoSelectAfterUpload:d().bool,uploadedImages:d().array,uploadedVideos:d().array,uploadedOrder:d().oneOf([Ye,$e]),enableDelete:d().bool,onImagesSelect:d().func,onImagesUpload:d().func,onCancel:d().func,onInsertItems:d().func,preloadParams:d().string,businessCategoryDisplayName:d().string,modalTitle:d().oneOfType([d().string,d().object]),selectionLimit:d().number,intl:d().object.isRequired,addSources:d().array,removeSources:d().array,minDimensions:d().object,trackEvent:d().func.isRequired,otherSites:d().object,onOtherSourceImagesInsert:d().func,insertLabel:d().oneOfType([d().string,d().object]),selectedMediaType:d().oneOf([De,Me]),onInitialUploadedImagesLoaded:d().func,renderMode:d().oneOf([sc,ic]),inWebsiteContext:d().bool,enabledCollections:d().array,suppressWAMRecommendation:d().bool},de,fe),sv.defaultProps={uploadedImages:[],uploadedVideos:[],selectionLimit:-1,thumbnailSize:{width:140,height:105},addSources:[],removeSources:[],selectedItems:[],selectedMediaType:De,renderMode:sc,enabledCollections:[]};const cv=(0,p.injectIntl)(sv);var lv="ls_initialized",uv="ls_not_initialized",dv="ls_not_initialized_not_backfilled",pv="ls_not_initialized_sync_failed";function fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fv(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hv={NAVIGATION_START:"navigationStart",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED:"domContentLoaded",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"},gv=[hv.NAVIGATION_START,hv.FETCH_START,hv.DOMAIN_LOOKUP_START,hv.DOMAIN_LOOKUP_END,hv.CONNECT_START,hv.CONNECT_END,hv.REQUEST_START,hv.RESPONSE_START,hv.RESPONSE_END,hv.DOM_LOADING],vv=[hv.DOM_INTERACTIVE,hv.DOM_CONTENT_LOADED,hv.DOM_COMPLETE,hv.LOAD_EVENT_START,hv.LOAD_EVENT_END],yv="bb-image-manager",Ev="media_library_";function bv(e){if("undefined"!=typeof window&&window.performance&&window.performance[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=window.performance)[e].apply(t,r)}}function _v(e,t){return t?"".concat(e,"##").concat(t,"##"):e}function Ov(e,t){var n=e;if("end"!==t&&e.includes(Uu)){var r=e.split("-"),a=r[0]===Gu?1:0,o=r[r.length-1],i=[lv,uv,dv,pv].includes(o)?-1:0;n=r.slice(a,r.length+i).join("-")}return"".concat(yv,"-").concat(n,"-").concat(t)}function Iv(e){var t=bv("getEntriesByName",e);if(t&&!(t.length<1))return t[0]}function Sv(e,t){var n=Ov(e,t);Iv(n)||bv("mark",n)}const wv={beginEvent:function(e,t){Sv(e=_v(e,t&&t.beaconId),"start")},endEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.feature,r=t.meta;if(e){var a=Iv(Ov(e=_v(e,r&&r.beaconId),"start"));if(a){var o=Ov(e,"end");bv("mark",o);var i,c=bv("getEntriesByName",o)[0];i=function(e){var t=e.eventName,n=e.start,r=e.end,a=e.feature,o=e.meta,i=void 0===o?{}:o,c=function(e){var t={};return(0,T.values)(hv).map((function(n){t[n]=Iv(Ov(e,n))})),t}(t),l=a?s({},"".concat(Ev,"ff_enabled"),a):{},u=function(e,t){return t?e.replace("##".concat(t,"##"),""):e}(t,i&&i.beaconId),d=function(e,t,n){var r;switch(e){case ju:return s(r={},"".concat(Ev,"upload_fileCount"),t.fileCount),s(r,"".concat(Ev,"upload_totalSize"),t.totalSize),s(r,"".concat(Ev,"upload_timePerFile"),t.fileCount&&Math.round(n/t.fileCount)),s(r,"".concat(Ev,"upload_timePerMB"),t.totalSize&&Math.round(n/t.totalSize*1024*1024)),r;case Fu:return s({},"".concat(Ev,"load_ventures"),n);default:return{}}}(u,i,r-n),p={},f=function(e,t){p[t]=Math.round(c[t]&&c[t].startTime||e)};return gv.forEach(f.bind(null,n)),vv.forEach(f.bind(null,r)),{virtual_path:"/beacon/bb-image-manager/".concat(u),timing_metrics:p,custom_properties:mv(mv({},l),d)}}({eventName:e,start:a.startTime,end:c.startTime,feature:n,meta:r}),window._expDataLayer&&window._expDataLayer.push({schema:"add_virtual_page_perf",version:"v1",data:i}),function(e){e&&((0,T.values)(hv).map((function(t){return bv("clearMarks",Ov(e,t))})),bv("clearMarks",Ov(e,"start")),bv("clearMarks",Ov(e,"end")))}(e)}}},createMark:Sv,clearAllMarks:function(){for(var e=(bv("getEntriesByType","mark")||[]).filter((function(e){return e.name.substring(0,16)===yv})),t=0;t<e.length;t++)bv("clearMarks",e[t].name)},metrics:hv};var Tv=C(8324),kv=null,Cv=!0;function Av(e){return function(t){return kv&&Cv?kv.promise.then((function(n){return n[e](t)})).catch((function(){return Cv=!1,Tv[e](t)})):Tv[e](t)}}var xv=Av("getAssets"),Lv=Av("setAssets"),Pv=Av("addAssets"),Dv=Av("removeAssets"),Mv=Av("getManifest"),Nv=Av("setManifest"),Rv=Av("setAsset"),Uv=Av("getAsset"),jv=(Av("getSearchIndex"),Av("setSearchIndex"),C(6371)),Fv=C.n(jv),Gv=C(2717),Vv=C.n(Gv);function Bv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bv=function(){return!!e})()}var Hv=function(e){b(a,e);var t,n,r=(t=a,n=Bv(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),(t=r.call(this,e)).imageUploaderRef=l().createRef(),t.state={openedFileDialog:!1,clickedUpload:!1},P()(y(t)),t}return v(a,[{key:"componentDidMount",value:function(){var e,t;this.props.trackEvent("IM_TRACK_LOGO_MODAL_CTA_DISPLAY"),this.props.enableDirectUpload&&(window.addEventListener("focus",this.closeModal),!this.state.openedFileDialog&&(null===(e=this.imageUploaderRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.clickUpload)&&(this.imageUploaderRef.current.clickUpload(),this.setState({openedFileDialog:!0})))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("focus",this.closeModal)}},{key:"closeModal",value:function(){var e=this;setTimeout((function(){e.state.openedFileDialog&&!e.state.clickedUpload&&e.props.onModalHide()}),500)}},{key:"renderStudioCreateButton",value:function(){var e=this.props,t=e.openOverCanvas,n=e.trackEvent;return l().createElement(ls(),{className:"btn create-button",size:"large",design:"primary",onClick:function(){t({},G),n("IM_TRACK_LOGO_CREATE_CLICK")},"border-radius":"6px","data-testid":"create-button"},l().createElement(p.FormattedMessage,{id:"BROWSE_TEMPLATES"}))}},{key:"onUploadClick",value:function(e){this.setState({clickedUpload:!0},Kd(this.props,e))}},{key:"renderUploader",value:function(){var e=this.props.mediaTypes;return l().createElement(Gd,{ref:this.imageUploaderRef,id:"im-upload-button",onUpload:this.onUploadClick,mediaTypes:e,onAddCtaButtonClick:zd(this.props),allowMultiple:!1})}},{key:"renderUploadButton",value:function(){return l().createElement(ls(),{onClick:function(){},design:"secondary",icon:l().createElement(qi(),null),className:"btn btn-img-action btn-sm","data-click-eid":"upload_withimages_button_click","data-testid":"upload-button"},l().createElement(p.FormattedMessage,{id:"UPLOAD"}),this.renderUploader())}},{key:"renderUploadProgress",value:function(){var e=this.props,t=e.mediaTypes,n=e.trackEvent,r=e.selectedItems,a=e.placement,o=e.selectedCollection;return l().createElement(l().Fragment,null,l().createElement("div",{className:"icon-container"},l().createElement(qi(),{height:100,width:100})),l().createElement(ug,{activeSelection:r&&r.length>0,mediaTypes:t,trackEvent:n,placement:a,selectedCollection:o}))}},{key:"renderNoAssetDropZone",value:function(){var e=this.props,t=e.mediaTypes,n=e.selectedMediaType,r=e.rejectFiles;return l().createElement(dp,{className:"direct-upload-dropzone",onDrop:this.onModalFileDrop,mediaTypes:t,enableVimeo:!1,selectedMediaType:n,rejectFiles:r,disableHover:!0,enableClick:!0},l().createElement("div",{className:"logo-zero-state-card cta-card upload-card"},l().createElement("div",{className:"img-container"},l().createElement(Ji(),{className:"img-icon",height:60,width:60}),l().createElement("div",{className:"cloud-container"},l().createElement(qi(),{height:30,width:30}))),l().createElement("h6",null,l().createElement(p.FormattedMessage,{id:"DRAG_AND_DROP_IMAGES_FULL"})),l().createElement("div",null,l().createElement("span",{className:"inline-text"},l().createElement(p.FormattedMessage,{id:"OR_CLICK_TO",className:"inline-text"})," "),l().createElement("span",{className:"upload-link inline-text"},l().createElement(p.FormattedMessage,{id:"DRAG_AND_DROP_IMAGES_2"})))))}},{key:"onModalFileDrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Wd(this.props,e,t)}},{key:"renderCreateCard",value:function(e){return l().createElement("div",{className:"logo-zero-state-card create-logo-card cta-card"},l().createElement("div",{className:"card-content"},l().createElement("h2",null,l().createElement(p.FormattedMessage,{id:e.createTitle})),l().createElement("p",null,l().createElement(p.FormattedMessage,{id:e.createSubtitle})),this.renderStudioCreateButton()),l().createElement("img",{src:e.createImg,className:"cta-image",alt:l().createElement(p.FormattedMessage,{id:e.createTitle})}))}},{key:"renderUploadCard",value:function(e){return l().createElement("div",{className:"logo-zero-state-card cta-card upload-card"},l().createElement("div",{className:"card-content"},l().createElement("h3",null,l().createElement(p.FormattedMessage,{id:e.uploadTitle})),l().createElement("p",null,l().createElement(p.FormattedMessage,{id:e.uploadSubtitle}))),l().createElement("div",null,this.renderUploadButton()))}},{key:"renderCreateAndUpload",value:function(e){return[this.renderCreateCard(e),this.renderUploadCard(e)]}},{key:"render",value:function(){var e=this.props,t=e.onModalCloseCallback,n=e.uploadProgress,r=e.modalTitle,a=e.onModalHide,o=e.recentUploadedImages,i=e.deletedAllUploaded,s=e.enableDirectUpload,c={createTitle:"CREATE_CUSTOM_LOGO",createSubtitle:"CREATE_CUSTOM_LOGO_SUBTITLE",uploadTitle:"ALREADY_HAVE_LOGO",uploadSubtitle:"ALREADY_HAVE_LOGO_SUBTITLE",createImg:Vv()},u=n>=0,d=s?a:t,p=s&&!u&&!i&&0===o.length;return l().createElement(Ah(),{className:vs()("logo-zero-state-modal",{"direct-uploader":s,"logo-zero-state-modal-hidden":p}),onClose:d,id:"im-logo-zero-state-modal",title:l().createElement(l().Fragment,null,l().createElement(Fv(),null),r),closeButton:!0,focusLock:!1},u?l().createElement("div",{className:"upload-progress product-faint-background"},this.renderUploadProgress()):l().createElement(l().Fragment,null,s&&i?this.renderNoAssetDropZone():s?this.renderUploader():this.renderCreateAndUpload(c)))}}]),a}(c.Component);const Kv=Hv;var zv=C(5674),Wv=C.n(zv),qv=C(1203),Yv=C.n(qv),$v=C(1645),Xv=C.n($v),Qv=C(7507),Zv=C.n(Qv),Jv=C(6744),ey=C.n(Jv);function ty(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ty=function(){return!!e})()}var ny=function(e){b(a,e);var t,n,r=(t=a,n=ty(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),(t=r.call(this,e)).imageUploaderRef=l().createRef(),t.state={selectedLogo:null,optionsIndex:0},P()(y(t)),t}return v(a,[{key:"componentDidMount",value:function(){(0,this.props.trackEvent)("IM_TRACK_LOGO_LAUNCH_PAD_MODAL_CTA_DISPLAY")}},{key:"isPremiumLogo",value:function(){return this.props.enableLogoGenerationAssistant}},{key:"isPremiumInDesktop",value:function(){return!Qs()&&this.isPremiumLogo()}},{key:"renderUploadProgress",value:function(){var e=this.props,t=e.mediaTypes,n=e.trackEvent,r=e.selectedItems,a=e.placement,o=e.selectedCollection;return l().createElement(l().Fragment,null,l().createElement("div",{className:"icon-container"},l().createElement(qi(),{height:100,width:100})),l().createElement(ug,{activeSelection:r&&r.length>0,mediaTypes:t,trackEvent:n,placement:a,selectedCollection:o}))}},{key:"renderUploader",value:function(){var e=this,t=this.props.mediaTypes;return l().createElement(Gd,{ref:this.imageUploaderRef,id:"im-upload-button",onUpload:function(t){return Kd(e.props,t)},mediaTypes:t,onAddCtaButtonClick:zd(this.props),allowMultiple:!1})}},{key:"renderUseLogoButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"large",t=this.props,n=t.onVentureLogosInsert,r=t.trackEvent,a=this.state.selectedLogo;return l().createElement(ls(),{className:"btn use-logo-button",size:e,design:"primary",onClick:function(){r("IM_TRACK_LOGO_USE_CLICK"),n({type:"venture",images:[{url:a.rectangularUrl}],projectSpecUri:a.rectangularProjectSpecUri,silentInsert:!0}),n({type:"venture",images:[{url:a.url}],projectSpecUri:a.projectSpecUri,silentInsert:!1})},"border-radius":"6px",disabled:!a},l().createElement(p.FormattedMessage,{id:"USE_THIS_LOGO"}))}},{key:"renderCustomizeButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"large",t=this.props,n=t.openOverCanvas,r=t.trackEvent,a=t.intl,o=t.studioUnsupportedLanguages,i=void 0===o?[]:o,s=a.locale,c=this.state.selectedLogo;return Qs()?null:l().createElement(ls(),{className:"btn customize-button",size:e,design:"secondary",onClick:function(){var e=c.id,t=c.dimensions,a=c.url,o=c.projectSpecUri;r("IM_TRACK_LOGO_CUSTOMIZE_CLICK"),n(null,G,{id:e,dimensions:t,url:a,projectSpecUri:o})},"border-radius":"6px",disabled:!c,icon:!this.isPremiumInDesktop()&&l().createElement(Yv(),null)},l().createElement(p.FormattedMessage,{id:this.isPremiumInDesktop()?"FREE_LOGO_MODAL_CUSTOMIZE_BUTTON":"CUSTOMIZE"}),i.includes(s)&&"*")}},{key:"renderFreeLogoDescription",value:function(){return l().createElement("div",{className:"choose-description"},l().createElement(p.FormattedMessage,{id:"LAUNCH_PAD_DESCRIPTION"})," ",l().createElement("span",{className:"upload-here"},l().createElement(p.FormattedMessage,{id:"UPLOAD_IT_HERE"}),this.renderUploader()),".")}},{key:"renderHeading",value:function(){return l().createElement("div",{className:"heading"},this.isPremiumLogo()&&Qs()&&l().createElement("div",{className:"centered"},l().createElement("img",{className:"gd-logo-premium__mobile",src:Zv(),alt:""})),!this.isPremiumLogo()&&l().createElement("div",{className:"header"},l().createElement("img",{className:"gd-logo",src:Zv(),alt:""})),l().createElement(Xv().div,{as:"title",size:Qs()?1:2,className:vs()(this.isPremiumLogo()?"choose-title-premium".concat(Qs()?"__mobile":""):"choose-title")},l().createElement(p.FormattedMessage,{id:this.isPremiumLogo()?"GENERATE_PREMIUM_LOGO_TITLE".concat(Qs()?"_MOBILE":""):"LAUNCH_PAD_TITLE"})),!this.isPremiumLogo()&&this.renderFreeLogoDescription())}},{key:"renderMobileFooter",value:function(){var e=this.state.selectedLogo;return l().createElement("div",{className:vs()("mobile-action-footer",{"is-active":!!e})},l().createElement(ps,{className:"action-buttons",gap:"sm"},this.renderUseLogoButton(),this.renderCustomizeButton()))}},{key:"renderGenerateLogosSection",value:function(){var e=this,t=this.props,n=t.ventureId,r=t.trackEvent,a=t.openOverCanvas,o=t.inferredBusinessInfo,i="/venture/airo-logo-assistant?ventureId=".concat(n,"&state=open&source=logo-modal");return l().createElement(l().Fragment,null,!this.isPremiumLogo()&&l().createElement("div",{className:"generate-title"},l().createElement(p.FormattedMessage,{id:"GENERATE_NEW_LOGOS_TITLE"})),l().createElement("div",{className:vs()(this.isPremiumLogo()?"premium-description".concat(Qs()?"__mobile":""):"generate-description")},l().createElement(p.FormattedMessage,{id:this.isPremiumLogo()?"GENERATE_PREMIUM_LOGO_DESCRIPTION".concat(Qs()?"_MOBILE":""):"GENERATE_NEW_LOGOS_DESCRIPTION"})),Qs()&&(this.isPremiumLogo()?l().createElement("div",{className:"centered"},l().createElement("div",{className:vs()("premium-logos-buttons",{"premium-logos-buttons__mobile":Qs()})},l().createElement(ls(),{design:"primary",size:"small",icon:l().createElement(ds(),null),onClick:function(){r("IM_TRACK_GENERATE_PREMIUM_LOGOS_CLICK"),e.props.history.push(i)}},l().createElement(p.FormattedMessage,{id:"GENERATE_PREMIUM_LOGO_CTA"})))):l().createElement("div",{className:"generate-logos",onClick:function(){r("IM_TRACK_GENERATE_NEW_LOGOS_CLICK"),a({},G,null,o)}},l().createElement(ds(),{height:18}),l().createElement(p.FormattedMessage,{id:"GENERATE_NEW_LOGOS"}))),this.isPremiumLogo()&&l().createElement("div",{className:"centered"},l().createElement("img",{className:"premium-logo",src:ey(),alt:""})),!Qs()&&(this.isPremiumLogo()?l().createElement("div",{className:"centered"},l().createElement("div",{className:vs()("premium-logos-buttons")},l().createElement(ls(),{design:"primary",size:"small",icon:l().createElement(ds(),null),onClick:function(){r("IM_TRACK_GENERATE_PREMIUM_LOGOS_CLICK"),e.props.history.push(i)}},l().createElement(p.FormattedMessage,{id:"GENERATE_PREMIUM_LOGO_CTA"})))):l().createElement("div",{className:"generate-logos",onClick:function(){r("IM_TRACK_GENERATE_NEW_LOGOS_CLICK"),a({},G,null,o)}},l().createElement(ds(),{height:18}),l().createElement(p.FormattedMessage,{id:"GENERATE_NEW_LOGOS"}))))}},{key:"renderTos",value:function(){var e=l().createElement("a",{className:"create-page-link",href:"https://www.godaddy.com/legal/agreements/ai-terms-of-use",target:"_blank",rel:"noreferrer"},l().createElement(p.FormattedMessage,{id:"LOGO_MODAL_AI_TOS"})),t=l().createElement("a",{className:"create-page-link",href:"https://www.godaddy.com/legal/agreements/universal-terms-of-service-agreement",target:"_blank",rel:"noreferrer"},l().createElement(p.FormattedMessage,{id:"LOGO_MODAL_UNIVERSAL_TOS"})),n=l().createElement("a",{className:"create-page-link",href:"https://www.godaddy.com/legal/agreements/website-services-agreement",target:"_blank",rel:"noreferrer"},l().createElement(p.FormattedMessage,{id:"LOGO_MODAL_WEBSITE_SERVICES_TOS"}));return l().createElement("div",{className:vs()("tos",{"tos-premium":this.isPremiumLogo()})},l().createElement(p.FormattedMessage,{id:this.isPremiumLogo()?"LOGO_MODAL_TOS_PREMIUM".concat(Qs()?"__MOBILE":""):"LOGO_MODAL_TOS",values:{LOGO_MODAL_AI_TOS:e,LOGO_MODAL_UNIVERSAL_TOS:t,LOGO_MODAL_WEBSITE_SERVICES_TOS:n}}))}},{key:"renderFreeLogoButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"large",t=this.props,n=t.intl,r=t.studioUnsupportedLanguages,a=void 0===r?[]:r,o=n.locale;return l().createElement(l().Fragment,null,l().createElement(ps,{className:"action-buttons",gap:"sm"},this.renderUseLogoButton(e),this.renderCustomizeButton(e)),l().createElement("div",{className:"customize-disclaimer"},a.includes(o)&&"*".concat(n.formatMessage({id:"CUSTOMIZE_ENGLISH_ONLY"}))))}},{key:"renderLogosSection",value:function(){var e=this,t=this.props,n=t.inferredLogos,r=t.trackEvent;return l().createElement("div",{className:"logos"},this.isPremiumLogo()&&l().createElement("div",{className:"heading"},l().createElement(Xv().div,{as:"title",size:Qs()?1:2,className:"choose-title-premium"},l().createElement(p.FormattedMessage,{id:"FREE_LOGO_MODAL_TITLE".concat(Qs()?"_MOBILE":"")})),l().createElement("div",{className:"choose-description premium-free-description"},l().createElement(p.FormattedMessage,{id:"FREE_LOGO_MODAL_DESCRIPTION".concat(Qs()?"_MOBILE":"")}),l().createElement(l().Fragment,null," ",l().createElement("span",{className:"upload-here"},l().createElement(p.FormattedMessage,{id:"UPLOAD_IT_HERE"}),this.renderUploader()),"."))),l().createElement("div",{className:"logo-grid"},n.slice(4*this.state.optionsIndex,4*this.state.optionsIndex+4).map((function(t){var n,r=t.url,a=r===(null===(n=e.state.selectedLogo)||void 0===n?void 0:n.url);return l().createElement("div",{className:"logo-container"},l().createElement("img",{className:vs()("generated-logo",{selected:a}),src:r,alt:"generated-logo",onClick:function(){e.setState({selectedLogo:a?null:t})}}),l().createElement(Ms(),{height:20,width:20,className:vs()({selected:a})}))}))),l().createElement("div",{className:"see-more-options",onClick:function(){r("IM_TRACK_SEE_MORE_OPTIONS_CLICK"),e.setState({optionsIndex:(e.state.optionsIndex+1)%3})}},l().createElement(Wv(),{height:18}),l().createElement(p.FormattedMessage,{id:"SEE_MORE_OPTIONS"})),this.isPremiumInDesktop()&&this.renderFreeLogoButtons("small"))}},{key:"renderFreeLogos",value:function(){return l().createElement("div",{className:vs()("content",{content__mobile:Qs()},{premium:this.isPremiumInDesktop()},{premium__border:this.isPremiumInDesktop()})},this.renderHeading(),!this.isPremiumLogo()&&this.renderFreeLogoButtons(),this.renderGenerateLogosSection())}},{key:"render",value:function(){var e=this.props,t=e.onModalCloseCallback,n=e.uploadProgress,r=e.onModalHide,a=e.enableDirectUpload?r:t,o=n>=0,i=l().createElement(l().Fragment,null,this.isPremiumInDesktop()&&l().createElement("div",{className:"heading"},l().createElement("div",{className:"centered"},l().createElement("img",{className:"gd-logo-premium",src:Zv(),alt:""}))),o?l().createElement("div",{className:"upload-progress product-faint-background"},this.renderUploadProgress()):l().createElement("div",{className:vs()("wrapper",{"premium-wrapper":this.isPremiumInDesktop()})},Qs()&&!this.isPremiumLogo()&&l().createElement("div",{className:"mobile-heading"},this.renderHeading()),Qs()&&this.isPremiumLogo()&&this.renderFreeLogos(),Qs()&&this.isPremiumLogo()&&l().createElement("div",{className:"mobile__seperator"}),this.renderLogosSection(),!Qs()&&this.renderFreeLogos(),this.renderTos()),this.renderMobileFooter());return Qs()?l().createElement("div",{className:"logo-launch-pad-modal logo-launch-pad-modal__mobile",id:"im-logo-launch-pad-modal"},l().createElement("div",{className:"logo-launch-pad-modal__mobile-content"},l().createElement("div",{className:"close-button"},l().createElement(ls(),{design:"stateless",icon:l().createElement(N(),null),onClick:a})),i)):l().createElement(Ah(),{className:"logo-launch-pad-modal",onClose:a,id:"im-logo-launch-pad-modal",focusLock:!1},i)}}]),a}(c.Component);const ry=(0,p.injectIntl)(ny);var ay="create";function oy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oy(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sy=function(){return!!e})()}var cy=function(e){b(o,e);var n,r,a=(n=o,r=sy(),function(){var e,t=O(n);if(r){var a=O(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return _(this,e)});function o(e){var t,n;return h(this,o),t=a.call(this,e),wv.createMark("launch","fetchStart"),n=e.bbConfig.imLiveBuildVersion,It=n,t.state={overCanvasIsOpen:!1,editItem:null,sourceType:null,logoCreateFlow:!1,inferredBrandLogo:null,actionInputs:null},P()(y(t)),t}return v(o,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.appName,r=t.trackEvent,a=t.ventureId;this.props.selectedCollection&&this.props.selectedCollection!==e.selectedCollection&&this.props.setCollection(this.props.selectedCollection),this.props.studioItemCreated&&!e.studioItemCreated&&this.props.loadImages(),this.props.isGooglePhotosExperiment!==e.isGooglePhotosExperiment&&this.props.isGooglePhotosExperiment&&n===te&&r("IM_TRACK_GOOGLE_PHOTOS_EXPERIMENT");var o=e.externallyUploadedFiles,i=void 0===o?[]:o;this.uploadFilesManually(i),a!==e.ventureId&&this.initialise(!0)}},{key:"uploadFilesManually",value:function(e){var t=this.props.externallyUploadedFiles,n=void 0===t?[]:t;if(n.length>0||e.length>0){var r=e.map((function(e){return e.id}));(n||[]).every((function(e){var t=e.id;return r.includes(t)}))||this.props.onFilesManuallyUploaded(n)}}},{key:"initialise",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.traceAuditEventStart({name:Vu});var t=this.props,n=t.websiteId,r=t.websiteType,a=t.accountId,o=t.businessCategory,i=t.businessCategoryDisplayName,s=t.rootDomain,c=t.market,l=t.addSources,u=t.tracker,d=t.appName,p=t.bbConfig,f=t.enableTagBuilder,m=t.onItemsSelectedCallback,h=t.onModalCloseCallback,g=t.onApiAuthErrorCallback,v=t.onCollectionViewChangeCallback,y=t.placement,E=t.featureFlags,b=t.insertLabel,_=t.onStockImagesSearchCallback,O=t.onImagesUploadCallback,I=t.onFilesDeletedCallback,S=t.onMountCallback,w=t.renderMode,k=t.removeSources,C=t.iframeConnection,A=t.photoshootId,x=t.ventureId,L=t.ventureProfileAnchor,P=t.onModalOpen,D=t.onBackToTopButtonClick,M=t.venturePrimaryDomain,N=t.launchPath,R=t.appMetadata,U=t.useGettyImages,j=t.disabledFileExtensions,F=t.skipLoadVenture,V=t.skipLoadImages,B=t.skipLoadVideos,H=t.skipLoadOtherMedia,K=t.showGeneratedLogos,z=t.showGeneratedImages,W=t.selectedCollection;W&&this.props.setCollection(W);var q=(0,T.get)(p,"featureFlags.useStockImageVectorSearchApi",!1),Y=(0,T.get)(p,"featureFlags.enableGettyImages",!1),$=ae;U&&Y?$=oe:q&&($=ie);var X=!x&&(0,T.get)(p,"featureFlags.enableLocalStorage",!1)&&!!window.indexedDB;X&&(kv=C);var Q=(0,T.isEmpty)(this.props.mediaTypes)?[De]:this.props.mediaTypes,Z=Q.length>1&&Q.includes(De)?De:Q[0],J=!!(l&&l.includes("STOCK_VIDEO")&&Q.includes(Me)),ee=(0,T.merge)({},p,{ventureId:x,websiteId:n,websiteType:r,accountId:a,businessCategory:o,businessCategoryDisplayName:i,rootDomain:s,market:c,tracker:u,appName:d,enableTagBuilder:f,placement:y,photoshootId:A,modalTitle:this.getModalTitle(),showStockVideos:J,selectedMediaType:Z,removeSources:k,renderMode:w,callbacks:{onItemsSelected:m||null,onModalClose:h||null,onStockImagesSearch:_||null,onImagesUpload:O||null,onApiAuthError:g||function(){},onCollectionViewChange:v||null,onBackToTopButtonClick:D,onFilesDelete:I||null},featureFlags:iy(iy({},E),{},{enableLocalStorage:X}),insertLabel:b,mediaTypes:Q,ventureProfileAnchor:L,venturePrimaryDomain:M,appMetadata:R,disabledFileExtensions:j,stockImageSearchType:$,skipLoadVenture:F,skipLoadImages:V,skipLoadVideos:B,skipLoadOtherMedia:H,showGeneratedImages:z,showGeneratedLogos:K,forceReloadApiClient:e});null==S||S((0,T.pick)(ee,["stockImageSearchType"])),P(ee),N===ay&&this.openOverCanvas({},G),"socialComposerUpload"===y?this.props.setCollection(ve):"socialComposerStock"===y&&this.props.setCollection(_e)}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyboardPress,!0),this.initialise()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyboardPress,!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!function(e,t){var n=t.autoSelectAfterUpload,r=t.recentUploadedImages,a=t.selectItem,o=t.selectionLimit,i=t.stagingCount,s=t.hasExistingSelection,c=t.disabledFileExtensions;if(n&&e!==r){if(s||o>0&&i>o)return;Array.isArray(e)&&e.forEach((function(e){(null==c?void 0:c.includes(e.fileExtension))||a(e,{autoselect:!0})}))}}(e.recentUploadedImages,this.props)}},{key:"onKeyboardPress",value:function(e){var t=this.props,n=t.onModalHide,r=t.onFivToggle,a=t.fivIndex,o=t.trackEvent;"Escape"===e.key&&(-1===a?n():(o("IM_TRACK_FULL_VIEW_CLOSE"),r(-1)))}},{key:"closeOverCanvas",value:function(e){var t=this.props,n=t.trackEvent,r=t.appName,a=t.placement,o=t.launchPath,i=t.onModalHide,s=r===ee&&"LOGO"===a;this.setState({overCanvasIsOpen:!1,editItem:null,sourceType:null}),e?(n("IM_TRACK_OVER_CANVAS_COMPLETE"),e[0].isCreatedLogo=this.state.logoCreateFlow,this.state.logoCreateFlow&&n("IM_TRACK_STUDIO_LOGO_CREATE_COMPLETE"),this.props.onReceiveImageFromOver(e,!s&&r!==ne)):(n("IM_TRACK_OVER_CANVAS_CLOSE"),o===ay&&i())}},{key:"openOverCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.setState({overCanvasIsOpen:!0,editItem:e,sourceType:t,logoCreateFlow:(0,T.isEmpty)(e)&&t===G,inferredBrandLogo:n,actionInputs:r})}},{key:"shouldShowLogoZeroState",value:function(){var e=this.props,t=e.placement,n=e.renderMode,r=e.appName,a=e.logoImages;return!("LOGO"!==t||r!==ee&&"productivity-panel"!==r||n===ic||Xs()||a&&0!==a.length)}},{key:"shouldShowLogoLaunchPad",value:function(){var e=this.props,t=e.launchPath,n=e.placement,r=e.renderMode,a=e.appName,o=e.logoImages,i=e.inferredData,s=e.recentUploadedImages,c=(i||{}).inferredLogos;return"LOGO"===n&&(a===ee||"gd-payments"===a)&&c&&r!==ic&&("ai_logo"===t&&0===s.length||!o||0===o.length)}},{key:"getModalTitle",value:function(){var e=this.props.modalTitle,t=(0,T.isEmpty)(this.props.mediaTypes)?[De]:this.props.mediaTypes;if(e)return e;var n="MODAL_TITLE";return zt(t,De)?n=this.shouldShowLogoZeroState()?"ADD_LOGO":"MODAL_TITLE_IMAGE":zt(t,Me)&&(n="MODAL_TITLE_VIDEO"),l().createElement(p.FormattedMessage,{id:n})}},{key:"render",value:function(){var e,n,r,a,o,i,s,c,u=this.props,d=u.onModalHide,f=u.otherSites,m=(f=void 0===f?{}:f).isCopyingImages,h=u.uploadedAssetsFetched,g=u.customLoader,v=u.enableStudioLogoCreate,y=u.enableEditWithOver,E=u.enableStudioResize,b=u.enableOverGenerateLogo,_=u.websiteId,O=u.tracker,I=u.ventureId,k=u.placement,C=u.mediaTypes,A=u.trackEvent,L=u.onModalCloseCallback,P=u.bbConfig,M=u.launchPath,N=u.inferredData,R=u.appMetadata,U=u.suppressWAMRecommendation,j=N||{},F=j.inferredLogos,V=j.inferredBusinessInfo,B=this.state,H=B.overCanvasIsOpen,K=B.editItem,z=B.sourceType,W=B.inferredBrandLogo,q=B.actionInputs,Y=y||v&&k!==Z,$=!(0,T.isEmpty)(K)&&M!==ay||!b||W?void 0:"generatelogo";v&&K&&(K.id=null!==(e=K.id)&&void 0!==e?e:(0,w.v4)(),K.dimensions=null!==(n=K.dimensions)&&void 0!==n?n:{width:2048,height:2048},z===G&&(K.references=[G]),K.mlMetadata={altText:null!==(r=null!==(a=K.altText)&&void 0!==a?a:null==R?void 0:R.altText)&&void 0!==r?r:"",dify:null!==(o=null!==(i=K.dify)&&void 0!==i?i:null==R?void 0:R.dify)&&void 0!==o?o:{},references:null!==(s=null!==(c=K.references)&&void 0!==c?c:null==R?void 0:R.references)&&void 0!==s?s:[]});var X,Q={canvasResize:E},J=m&&l().createElement("div",{className:"image-manager-overlay"},l().createElement("div",{className:"image-manager-overlay-message"},l().createElement(x(),{inline:!0,size:"lg",label:l().createElement(p.FormattedMessage,{id:"COPYING_IMAGES_TO_YOUR_SITE"},(function(e){return l().createElement("label",null,e)}))}))),ee=this.shouldShowLogoZeroState(),te=this.shouldShowLogoLaunchPad(),ne=this.getModalTitle(),re=(0,T.get)(P,"canCreateLogo",!1);return X=te?l().createElement(ry,t({mediaTypes:C,trackEvent:A,openOverCanvas:this.openOverCanvas,onClose:L,enableDirectUpload:!re,onModalHide:d,inferredLogos:F,inferredBusinessInfo:V},this.props)):ee?l().createElement(Kv,t({mediaTypes:C,trackEvent:A,openOverCanvas:this.openOverCanvas,onClose:L,modalTitle:ne,enableDirectUpload:!re,onModalHide:d},this.props)):l().createElement(cv,t({onCancel:d},this.props,{openOverCanvas:this.openOverCanvas,modalTitle:ne,canCreateLogo:re,suppressWAMRecommendation:U})),l().createElement(l().Fragment,null,h||!g?l().createElement("div",{className:vs()({"image-modal":!te&&!ee,"logo-zero-state-modal":!te&&ee})},l().createElement(S(),null),X,J):g,Y&&H&&(I&&!_?l().createElement(D.c,{appName:"imageManager",ventureId:I,onCancel:this.closeOverCanvas,brandbookItem:K,inferredBrandLogo:W,tracker:O,onProjectSynced:this.closeOverCanvas,featureOverrides:Q,action:$,actionInputs:q}):l().createElement(D.c,{appName:"imageManager",websiteId:_,onCancel:this.closeOverCanvas,brandbookItem:K,inferredBrandLogo:W,tracker:O,onProjectSynced:this.closeOverCanvas,featureOverrides:Q,action:$,actionInputs:q})))}}]),o}(l().Component);cy.defaultProps={autoSelectAfterUpload:!0,websiteType:"internal",enableDelete:!0,enableTagBuilder:!1,featureFlags:{},mediaTypes:[De],market:"en-US",ventureProfileAnchor:"my-photo",renderMode:sc,suppressWAMRecommendation:!1,enableRedirectToLogoAssistant:!1,skipLoadVenture:!1,skipLoadOtherMedia:!1,skipLoadImages:!1,skipLoadVideos:!1,showUpload:!0,showSearch:!0},cy.propTypes={market:d().string.isRequired,otherSites:d().object,addSources:d().array,removeSources:d().array,onModalHide:d().func,uploadedAssetsFetched:d().bool,customLoader:d().element,renderMode:d().oneOf([sc,ic]),onFivToggle:d().func,fivIndex:d().number,trackEvent:d().func,inWebsiteContext:d().bool,enableEditWithOver:d().bool,store:d().object,websiteId:d().string,websiteType:d().string,accountId:d().string,bbConfig:d().object.isRequired,businessCategory:d().string,rootDomain:d().string.isRequired,i18nContent:d().object,autoSelectAfterUpload:d().bool,enableDelete:d().bool,enableTagBuilder:d().bool,selectionLimit:d().number,tracker:d().object,appName:d().string,modalTitle:d().string,placement:d().string,minDimensions:d().object,onItemsSelectedCallback:d().func,onModalCloseCallback:d().func,onStockImagesSearchCallback:d().func,onImagesUploadCallback:d().func,onFilesDeletedCallback:d().func,onApiAuthErrorCallback:d().func,onCollectionViewChangeCallback:d().func,featureFlags:d().object,insertLabel:d().string,preloadParams:d().string,mediaTypes:d().arrayOf(d().oneOf([Ue,De,Me,Ne,Re,Ge])),iframeConnection:d().object,photoshootId:d().string,ventureId:d().string,selectedCollection:d().string,ventureProfileAnchor:d().string,studioItemCreated:d().bool,enableStudioResize:d().bool,enableLogoZeroState:d().bool,launchPath:d().string,inferredData:d().object,enableLogoGenerationAssistant:d().bool,assetMetadata:d().object,disabledFileExtensions:d().arrayOf(d().string),externallyUploadedFiles:d().arrayOf(d().object),suppressWAMRecommendation:d().bool,studioUnsupportedLanguages:d().arrayOf(d().string),enableRedirectToLogoAssistant:d().bool,openLogoGenerationAssistant:d().func,openImageGenerationAssistant:d().func,skipLoadVenture:d().bool,skipLoadImages:d().bool,skipLoadVideos:d().bool,skipLoadOtherMedia:d().bool,showUpload:d().bool,showSearch:d().bool};const ly=cy;var uy=function(e){var t=Rc(e),n=t.placement,r=t.mediaTypes;return"LOGO"===n&&dd(e)?G:zt(r,Me)?$:zt(r,De)&&"LOGO"!==n&&gd(e)?Z:void 0};const dy=(0,f.connect)((function(e,t){return Object.assign({enableOverFlyout:pd(e),enableOverGenerateLogo:fd(e),enableVimeoCreateFlyout:md(e),enableVimeoStandaloneFlyout:hd(e),enableEditWithOver:ud(e),enableLogoCreate:dd(e),ctaSourceType:uy(e),enableStudioBgRemovalTooltip:yd(e),enableImageCreate:gd(e),enableStudioLogoCreate:Ed(e),enableRemoveInsertBar:vd(e),enableFloatingUpload:Sd(e),enablePostLogoFlow:_d(e),enableReducedUploadArea:Od(e),enableInlineUpload:Id(e),enableVPInlineUpload:wd(e),enableStudioResize:Td(e),enableLogoZeroState:kd(e),enableMobileLogoCreateCta:bd(e),enablePhotoshootServiceModal:xd(e),enableGooglePhotosCollection:Ld(e),isGooglePhotosExperiment:Pd(e),enableLogoGenerationAssistant:Cd(e),enableImageGenerationAssistant:Ad(e),studioUnsupportedLanguages:Dd(e)},ll(e),cl(e),t)}),(function(e,t){var n,r,a,o=function(e,t){var n=[],r=t.mediaTypes;return t.renderMode===ic||zt(r,Me)||zt(r,Fe)||n.push(Lp),zt(r,Fe)&&n.push(Dp),kf(n,e)}(e,t),i=!!(null===(n=t.bbConfig)||void 0===n||null===(r=n.spaq)||void 0===r||null===(a=r.client)||void 0===a?void 0:a.enabled);return{onModalOpen:function(t){e(Oa(t)),o.dispatchAction(Cp),e(Oi())},onModalHide:function(t){e(ro(t))},switchSocialCollection:function(t){e(go(t))},loadSite:function(t){var n=t.containerId,r=t.type;e(so({containerId:n,type:r}))},loadViewableSitesNextPage:function(){e(ni())},onInsertItems:function(t){var n=t.selectedItems,r=t.fromPostLogo;e(io({selectedItems:n,fromPostLogo:void 0!==r&&r}))},onOtherSourceImagesInsert:function(t){var n=t.type,r=t.images;e(co({type:n,images:r}))},onVentureLogosInsert:function(t){var n=t.type,r=t.images,a=t.projectSpecUri,o=t.silentInsert;e(co({type:n,images:r,projectSpecUri:a,silentInsert:void 0!==o&&o}))},onProductsInsert:function(t){e(li(t))},onDownloadImage:function(e){Qg(e)},trackEvent:function(t,n){e(uo({eventName:t,data:n}))},onTrackPerfLaunchEnd:function(){e(Mo(Uu)),i&&(e(_i({name:Vu})),e(yi()))},onLoadMoreImages:function(t){e(Ho(t))},onLoadMoreVideos:function(){e(ui())},onCoverImageUpdate:function(t){e(Xo({image:t}))},onFivToggle:function(t){e(Qo({index:t}))},onModalImagesUpload:function(t){t&&t.length&&e(Pa(t))},onFilesDelete:function(t){e(Ya(t))},onClearSelection:function(){e(Ao())},onSearchImages:function(t){e(Wo(t))},onClearSearch:function(){e($o())},onMetadataUpdate:function(t,n){e(Go({image:t,metadata:n}))},onStockImagesSearch:function(e){o.dispatchAction(Ap,e)},onStockImagesReset:function(){o.dispatchAction(Cp)},onStockVideosReset:function(){e(xa())},selectItem:function(n,r){e(Co(wc(n,t,r)))},showVimeoModal:function(t){e(Wa(t))},rejectFiles:function(t){e(ri(t))},closeUploadNotification:function(){e(oi())},onReceiveImageFromOver:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e($o()),n&&e(ci(ge)),e(jo({newImages:Xp(t)}))},onFilesUpload:function(t){var n=t.images,r=t.videos;e(Na({images:n,videos:r}))},onFilesManuallyUploaded:function(t){e(Ra(t))},triggerFlyout:function(t){e(pi(t))},getSocialAccessToken:function(t){e(po(t))},getGPAuthorizationUrl:function(){return e(Li())},getGoogleTokens:function(){return e(Ci())},deleteGoogleTokens:function(){return e(Ai())},getGoogleScopes:function(){return e(xi())},getGooglePhotosMediaItems:function(t){return e(Ui(t))},handleVimeoReconnect:function(){e(hi())},setCollection:function(t){e(ci(t))},onObserveVentureCollectionArea:function(){e(Do(Fu))},onLoadVentureImages:function(){e(Mo(Fu))},loadImages:function(){e(Da())},traceAuditEventStart:function(t){i&&e(bi(t))},traceAuditEventEnd:function(t){i&&e(_i(t))},getVentureInferredData:function(t){e(Si(t))}}}))(ly);var py="video_selector_cta";function fy(e){var t=e.handleOpenMediaManager,n=e.onUpload,r=e.trackEvent,a=e.placement,o=e.selectedCollection,i=e.searchText,s=(0,p.useIntl)(),c=a===m,u=[Me],d=l().createElement(ls(),{className:"btn",design:"primary",size:"large","data-aid":py,onClick:function(){}},l().createElement(p.FormattedMessage,{id:"UPLOAD"}),l().createElement(Gd,{id:"im-upload-button",onUpload:n,mediaTypes:u,onAddCtaButtonClick:zd({trackEvent:r,searchText:i,selectedCollection:o,mediaTypes:u})}));return l().createElement("div",{className:"video-cta-card cta-card row"},l().createElement("div",{className:"row"},l().createElement("div",{className:"col-md-8"},l().createElement("h4",null,l().createElement(p.FormattedMessage,{id:c?"UPLOAD_VIDEO_TITLE":"VIDEO_CTA_MODAL_TITLE"})),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:c?"UPLOAD_VIDEO_SUBTITLE_2":"VIDEO_CTA_MODAL_SUBTITLE"})),c?d:l().createElement(ls(),{className:"btn",design:"primary",size:"large","data-aid":py,text:s.formatMessage({id:"CREATE_OR_UPLOAD"}),onClick:function(){t(),r("IM_TRACK_VIDEO_SELECTOR_OPEN_MEDIA_LIBRARY")}})),l().createElement("div",{className:"col-md-4 image-container"},l().createElement("img",{className:"cta-image",src:$h(),width:300,alt:"video-upload-new-feature"}))))}const my=C(4653).A;function hy(e){var t,n=e.onSave,r=e.trackEvent,o=e.placement,i=e.rootDomain,s=a((0,c.useState)(""),2),u=s[0],d=s[1],f=a((0,c.useState)(!1),2),h=f[0],g=f[1],v=(t=u).match(/youtube|youtu.be/i)||t.match(/vimeo/i),y=o===m,E=(0,T.debounce)((function(e){(function(e,t){return kt({method:"GET",url:"".concat(xt(e),"v1/video/").concat(encodeURIComponent(t))}).then((function(e){return e.data.isVideo})).catch((function(){return!1}))})(i,e).then((function(e){g(e)}))}),500),b=(0,c.useCallback)((function(e){d(e),y&&(g(!1),E(e))}),[d,g]),_=(0,c.useCallback)((function(){y&&h?n(u):!y&&v&&(n(u),r("IM_TRACK_VIDEO_SELECTOR_SAVE_URL"))}),[u,v,h]);return l().createElement("div",{className:"embed-video-input-container bg-faint cta-card row"},l().createElement("div",{className:"embed-header"},l().createElement("h5",null,l().createElement(p.FormattedMessage,{id:"EMBED_TITLE"})),l().createElement("p",{className:"gray"},l().createElement(p.FormattedMessage,{id:y?"EMBED_DESCRIPTION_2":"EMBED_DESCRIPTION"}))),l().createElement("div",{className:"embed-input"},l().createElement(my,{value:u,onChange:b}),l().createElement(ls(),{className:"btn",design:"primary",size:"large","data-aid":"video_selector_save_url",text:l().createElement(p.FormattedMessage,{id:"SAVE"}),disabled:y?!h:!v,onClick:_})))}function gy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gy=function(){return!!e})()}var vy=function(e){b(a,e);var t,n,r=(t=a,n=gy(),function(){var e,r=O(t);if(n){var a=O(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(e){var t;return h(this,a),t=r.call(this,e),P()(y(t)),t}return v(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.trackEvent,n=e.onModalOpen,r=e.bbConfig,a=e.ventureId,o=e.websiteId,i=e.websiteType,s=e.accountId,c=e.rootDomain,l=e.market,u=e.tracker,d=e.appName,p=e.assetContainerId,f=e.getSocialAccessToken,m=e.getUser;n((0,T.merge)({},r,{ventureId:a,websiteId:o,websiteType:i,accountId:s,rootDomain:c,market:l,tracker:u,appName:d,assetContainerId:p})),t("IM_TRACK_VIDEO_SELECTOR_OPEN"),f(K),m()}},{key:"renderUploadProgress",value:function(){var e=this.props.trackEvent;return l().createElement(ug,{activeSelection:!0,trackEvent:e})}},{key:"handleOnEmbedLinkSaved",value:function(e){(0,this.props.onItemsSelectedCallback)([{videoUrl:e}])}},{key:"handleSocialVideoAdFile",value:function(e){(0,this.props.uploadFBVideo)({videoFile:e[0]})}},{key:"handleSocialVideoAdLink",value:function(e){(0,this.props.uploadFBVideo)({videoUrl:e})}},{key:"render",value:function(){var e=this.props,t=e.bbConfig,n=e.onModalCloseCallback,r=e.onOpenMediaManager,a=e.trackEvent,o=e.vimeoUser,i=e.placement,s=e.rootDomain,c=e.uploadProgress,u=e.socialMedia.facebook,d=e.selectedCollection,f=e.searchText,h=!o.accountType,g=!!c&&c.stagingCount>0,v=(0,T.get)(t,"featureFlags.enableVideoSelectorModalUploads",!1)&&o.convertedOn,y=i===m,E=v||y?"VIDEO_CTA_MODAL_HEADER":"VIDEO_CTA_MODAL_HEADER_LINK_ONLY";return h||y&&u.isLoading?l().createElement(Ah(),{onClose:n,id:"im-video-cta-selector-modal-loader"},l().createElement("div",{className:"spinner-container"},l().createElement(x(),{size:"lg"}))):l().createElement(Ah(),{className:"video-cta-modal",onClose:n,id:"im-video-cta-selector-modal",title:l().createElement(p.FormattedMessage,{id:E})},g&&this.renderUploadProgress(),(v||y)&&!g&&l().createElement(fy,{onUpload:this.handleSocialVideoAdFile,handleOpenMediaManager:r,trackEvent:a,placement:i,selectedCollection:d,searchText:f}),!g&&l().createElement(hy,{onSave:y?this.handleSocialVideoAdLink:this.handleOnEmbedLinkSaved,trackEvent:a,placement:i,rootDomain:s}))}}]),a}(c.Component);const yy=vy,Ey=(0,f.connect)((function(e){return{vimeoUser:Xc(e),uploadProgress:cl(e),socialMedia:ol(e)}}),(function(e){return{trackEvent:function(t,n){e(uo({eventName:t,data:n}))},onModalOpen:function(t){e(Ia(t))},getSocialAccessToken:function(t){e(po(t))},getUser:function(){e(Ka())},uploadFBVideo:function(t){e(So(t))}}}))(yy);var by=C(3628),_y=C(6345),Oy=C.n(_y),Iy=C(8421),Sy=C.n(Iy);function wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wy(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ky={async:!0,cache:!0,encode:"icase",tokenize:"full",doc:{id:"id",field:["originalFilename","altText","flattenedReferences"]},depth:3,worker:!1},Cy=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).searchApi,n=void 0===t?new(Sy())(ky):t;h(this,e),this._localSearchIndex=n}var t,n;return v(e,[{key:"indexResource",value:(n=Up(Np().mark((function e(t){var n,r,a,o,i;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.resource,r=t.resourceName,a=t.resourceIndexFields,o=Array.isArray(n)?n:Object.values(n),i=o.map((function(e){return Ty(Ty({},(0,T.pick)(e,a)),{},{resourceName:r})})),e.prev=3,e.next=6,this._localSearchIndex.add(i);case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),this._localSearchIndex=new(Sy())(ky),e.next=13,this._localSearchIndex.add(i);case 13:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e){return n.apply(this,arguments)})},{key:"search",value:function(){var e=Up(Np().mark((function e(t){var n,r;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.next=3,this._localSearchIndex.search(n);case 3:return r=e.sent,e.abrupt("return",r.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resourceName,r=t.id;return r?(Object.prototype.hasOwnProperty.call(e,n)?e[n].add(r):e[n]=new Set([r]),e):e}),{}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:(t=Up(Np().mark((function e(t){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._localSearchIndex.remove(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();const Ay=Cy;function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ly(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xy(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Py=function(e){var t=e.rootDomain,n=e.assetByContainerVersion,r=e.containerId,a=e.queryParams,o=void 0===a?{}:a;return xt(t)+"".concat(n,"/asset/").concat(r)+((0,T.isEmpty)(o)?"":"?"+(0,T.map)(o,(function(e,t){return"".concat(t,"=").concat(e)})).join("&"))};const Dy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.assetByContainerVersion,n=void 0===t?"v1":t,r=e.assetContainerId;return{load:{key:mg.IMAGES_LOAD,makeRequest:function(e){var t=e.rootDomain,a=e.containerId,o=e.folders,i=void 0===o?"/":o,s=e.includeDeleted,c=void 0!==s&&s,l=e.lastSyncedAt,u=Ly({folders:i,includeDeleted:c},r?{assetContainerId:r}:{});return isNaN(l)?u.includeDeleted=!1:u.lastSyncedAt=l,kt({url:Py({rootDomain:t,containerId:a,assetByContainerVersion:n}),params:u,timeout:5e3,retry:2})}},upload:{key:mg.IMAGE_UPLOAD,makeRequest:function(e){var t=e.rootDomain,a=e.containerId,o=e.data,i=e.numberOfImages,s=e.totalFileSize,c=e.appName,l=e.basePath,u=e.width,d=e.height,p=e.opts,f=void 0===p?{}:p,m=e.experiments,h=void 0===m?{}:m,g=e.contentType,v=e.mediaType,y=h.enableOnDemandMalwareScanning,E=Ly(Ly({numberOfImages:i,totalFileSize:s,basePath:l,width:u,height:d},r?{assetContainerId:r}:{}),{},{malwareScan:y,contentType:g,mediaType:v});return"ols"===c&&(E.source=c),kt(Ly(Ly({},f),{},{method:"POST",url:Py({rootDomain:t,containerId:a,assetByContainerVersion:n}),data:o,params:E}))}},delete:{key:mg.IMAGES_DELETE,makeRequest:function(e){var t=e.rootDomain,r=e.containerId,a=e.extractedAssetContainerId,o=e.images,i=e.appName,s=e.opts;return kt(Ly(Ly({},void 0===s?{}:s),{},{method:"DELETE",url:Py({rootDomain:t,containerId:r,assetByContainerVersion:n}),data:o,params:{appName:i,fileCount:o.length,assetContainerId:a}}))}},update:{key:mg.IMAGES_UPDATE,makeRequest:function(e){var t=e.rootDomain,r=e.assetId,a=e.containerId,o=e.update,i=e.extractedAssetContainerId,s="v1"===n?"".concat(xt(t),"v1/websites/").concat(a,"/assets/").concat(r):"".concat(xt(t),"v2/venture/").concat(a,"/asset/").concat(r);return kt(Ly({method:"PATCH",url:s,data:o},i?{params:{assetContainerId:i}}:{}))}},copy:{key:mg.SITE_IMAGES_COPY,makeRequest:function(e){var t=e.rootDomain,a=e.containerId,o=e.images,i=e.type,s=o.map((function(e){var t=e.url,n=e.eTag,r=e.originalFilename;return{url:t,eTag:n,filename:e.filename,size:e.size,width:e.width,height:e.height,originalFilename:r||""}})),c="".concat(xt(t)).concat(n,"/asset/").concat(a,"/import");return kt({url:c,method:"POST",params:Ly({basePath:"/",type:i},r?{assetContainerId:r}:{}),data:s})}},copyToStudio:{key:mg.SITE_IMAGES_COPY,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,a=e.images,o=e.type,i=e.projectSpecUri,s=a.map((function(e){var t=e.url,n=e.eTag,r=e.originalFilename;return{url:t,eTag:n,filename:e.filename,size:e.size,width:e.width,height:e.height,originalFilename:r||"",projectSpecUri:i}}));return kt({method:"POST",url:"".concat(xt(t),"v1/asset/").concat(n,"/studio"),params:Ly({basePath:"/",type:o},r?{assetContainerId:r}:{}),data:s})}}}};var My=function(e,t){return{keywords:e,limit:t}};function Ny(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ry(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ny(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ny(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uy(e,t){switch(t){case oe:return"https://getty-images-proxy.api.".concat(e,"/v1/search");case ie:return"https://photo-search.mvci.api.".concat(e,"/api/search");default:return"https://categories.api.".concat(Ft(e),"/v4/photos/combinedsearch")}}function jy(e){var t=e.stockImageSearchType,n=e.market,r=e.query,a=e.category,o=e.categoryDisplayName,i=e.pageSize;switch(t){case oe:return{phrase:r||o||a,pageSize:i,market:n};case ie:return Ry(Ry({},function(e,t){return{keywords:e,limit:t,k:500}}(r||a,i)),{},{market:n});default:return a?{category:a,limit:i,market:n}:Ry(Ry({},My(r,i)),{},{market:n})}}const Fy={load:{key:mg.STOCK_IMAGES_LOAD,makeRequest:function(e){var t=e.market,n=e.businessCategory,r=e.businessCategoryDisplayName,a=e.rootDomain,o=e.pageSize,i=e.stockImageSearchType,s=Uy(a,i),c=jy({stockImageSearchType:i,market:t,category:n,categoryDisplayName:r,pageSize:o});return Ot({url:s,params:c})}},search:{key:mg.STOCK_IMAGES_SEARCH,makeRequest:function(e){var t=e.market,n=e.rootDomain,r=e.query,a=e.pageSize,o=e.stockImageSearchType,i=Uy(n,o),s=jy({stockImageSearchType:o,market:t,query:r,pageSize:a});return Ot({url:i,params:s})}},nextPage:{key:mg.STOCK_IMAGES_NEXTPAGE,makeRequest:function(e){return Ot({url:e})}},fetchGettyImageUrls:{key:mg.STOCK_IMAGES_FETCH_GETTY_URLS,makeRequest:function(e){var t=e.rootDomain,n=e.images;return Ot({url:"https://getty-images-proxy.api.".concat(t,"/v1/upload?reportUsage=true"),method:"POST",data:{ids:n.filter((function(e){return e.id&&e.sourceType===re})).map((function(e){return e.id}))}})}}};function Gy(e){return e=Ft(e),"https://categories.api.".concat(e,"/v4")}function Vy(e){return"".concat(Gy(e),"/videos/collections/widgets_stock_videos")}function By(e,t,n){return"".concat(Gy(n),"/categories/").concat(e,"/latest/").concat(t,"/videos")}function Hy(e){return"".concat(Gy(e),"/videos/elasticsearch")}const Ky={load:{key:mg.STOCK_VIDEOS_LOAD,makeRequest:function(e){var t=e.market,n=e.businessCategory,r=e.rootDomain,a=e.fixedResults;return Ot({url:void 0!==a&&a?Vy(r):By(t,n,r)})}},search:{key:mg.STOCK_VIDEOS_SEARCH,makeRequest:function(e){var t=e.market,n=e.rootDomain,r=e.query,a=e.pageSize,o=My(r,a);return o.language=t&&t.split("-")[0]||"en",Ot({url:Hy(n),params:o})}}};function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Wy=mg.WEBSITES_LOAD,qy=mg.VENTURES_LOAD,Yy=mg.VENTURE_IMAGES_LOAD,$y=mg.GC_SITE_IMAGES_LOAD,Xy=mg.V7_SITE_IMAGES_LOAD,Qy=mg.V7_WEBSITES_LOAD,Zy=function(e){var t=e.rootDomain,n=e.route;return xt(t)+n};const Jy={loadSites:{key:Wy,makeRequest:function(e){var t=e.rootDomain;return kt({url:Zy({rootDomain:t,route:"v1/website"})})}},loadVentures:{key:qy,makeRequest:function(e){var t=e.rootDomain,n=e.customerId;return kt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zy(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({url:Zy({rootDomain:t,route:"v2/ventures"})},n?{params:{customerId:n}}:{}))}},loadV7Sites:{key:Qy,makeRequest:function(e){var t=e.rootDomain;return kt({url:Zy({rootDomain:t,route:"v1/website"}),params:{type:j}})}},loadVentureImages:{key:Yy,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return kt({url:Zy({rootDomain:t,route:"v2/asset/".concat(n)}),params:{folders:[st,ct,lt].join("|")}})}},loadGCSiteImages:{key:$y,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return kt({url:Zy({rootDomain:t,route:"v1/asset/".concat(n)}),params:{folders:[st,ct,lt].join("|")}})}},loadV7SiteImages:{key:Xy,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return kt({url:Zy({rootDomain:t,route:"v2/sources/v7/".concat(n,"/assets")})})}}};function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const nE=function(e){var t=e.params,n=void 0===t?{}:t,r=ft(e,["params"]);return Us()&&(n.timestamp=(new Date).getTime()),Ot(tE(tE({},r),{},{params:n}))};var rE=mg.SSO_SOCIAL_ACCESS_TOKEN_GET,aE=mg.SSO_SOCIAL_AUTH_URL_GET,oE=mg.SSO_SOCIAL_PAGE_ACCESS_TOKEN_GET,iE=JSON.stringify(["manage_pages","publish_pages","public_profile","read_insights","pages_read_engagement"]);const sE={getSocialAccessToken:{key:rE,makeRequest:function(e){var t=e.rootDomain,n=e.socialProvider;return nE({url:"".concat(Lt(t),"/api/idp/my/social_connections/").concat(n,"/access_token")})}},getSocialPageAccessToken:{key:oE,makeRequest:function(e){var t=e.rootDomain,n=e.socialProvider,r=e.pageId;return nE({url:"".concat(Lt(t),"/api/idp/my/social_connections/").concat(n,"/long_token/").concat(r)})}},getSocialAuthUrl:{key:aE,makeRequest:function(e){var t=e.rootDomain,n=e.socialProvider,r={app:e.app,path:e.appSocialMediaAuthPath,scope:iE},a=(0,T.get)(window,"location.href","").match(/:(\d+)/),o=a&&a[1];return o&&(r.port=o),nE({url:"".concat(Lt(t),"/api/idp/my/social_connections/").concat(n,"/authorization_url"),params:r})}}};var cE="https://graph-video.facebook.com",lE="v17.0",uE=mg.FB_PAGES_LOAD,dE=mg.FB_ALBUMS_LOAD,pE=mg.FB_PHOTOS_LOAD,fE=mg.FB_ACCESS_TOKEN_VALIDATE,mE=mg.FB_VIDEOS_UPLOAD_INIT,hE=mg.FB_VIDEOS_UPLOAD_CHUNK,gE=mg.FB_VIDEOS_UPLOAD_COMPLETE,vE=mg.FB_VIDEOS_UPLOAD_EXTERNAL,yE=mg.IG_AUTHORIZED_CHECK,EE=mg.IG_CONNECTED_CHECK,bE=mg.IG_POSTS_LOAD,_E=mg.IG_LISTING_LOAD,OE=mg.GOOGLE_PHOTOS_AUTHORIZATION_URL_GET,IE=mg.GOOGLE_TOKENS_GET,SE=mg.GOOGLE_SCOPES_GET,wE=mg.GOOGLE_PHOTOS_ALBUMS_GET,TE=mg.GOOGLE_PHOTOS_MEDIA_ITEMS_GET;const kE={validateFBAccessToken:{key:fE,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken;return nE({url:"".concat(Dt(t),"/v1/fb/validate_token"),params:{access_token:n}})}},loadFBPages:{key:uE,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken;return Ot({url:"".concat(Dt(t),"/v2/fb/pages"),params:{access_token:n}})}},loadFBAlbums:{key:dE,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken,r=e.pageId,a=e.pageSize,o=e.after;return Ot({url:"".concat(Dt(t),"/v2/fb/pages/").concat(r,"/albums"),params:{access_token:n,fields:"id,name,picture,count",limit:a,after:o}})}},loadFBPhotos:{key:pE,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken,r=e.albumId,a=e.pageSize,o=e.after;return Ot({url:"".concat(Dt(t),"/v2/fb/albums/").concat(r,"/photos"),params:{access_token:n,limit:a,after:o}})}},checkIGConnected:{key:EE,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Ot({url:"".concat(Mt(t),"/v1/provider/instagram/method/canGetConnection"),data:{accountId:n},method:"POST"})}},checkIGAuthorized:{key:yE,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Ot({url:"".concat(Mt(t),"/v1/provider/instagram/method/isAuthorized"),data:{accountId:n,payload:{methods:["connect","getPosts"]}},method:"POST"})}},loadIGPosts:{key:bE,makeRequest:function(e){var t=e.rootDomain,n=e.accountId,r=e.nextPostsPageUrl,a={accountId:n,payload:{}};return r&&(a.payload.next=r),Ot({url:"".concat(Mt(t),"/v1/provider/instagram/method/getPosts"),data:a,method:"POST"})}},loadIGListing:{key:_E,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Ot({url:"".concat(Mt(t),"/v1/provider/instagram/method/getListing"),data:{accountId:n},method:"POST"})}},initFBVideoUpload:{key:mE,makeRequest:function(e){var t=e.pageId,n=e.pageAccessToken,r=e.videoSize;return Ot({url:"".concat(cE,"/").concat(lE,"/").concat(t,"/videos"),withCredentials:!1,headers:{"Content-Type":"multipart/form-data"},params:{access_token:n,upload_phase:"start",file_size:r},method:"POST"})}},completeFBVideoUpload:{key:gE,makeRequest:function(e){var t=e.pageId,n=e.pageAccessToken,r=e.uploadSessionId,a=e.fileName;return Ot({url:"".concat(cE,"/").concat(lE,"/").concat(t,"/videos"),withCredentials:!1,headers:{"Content-Type":"multipart/form-data"},params:{access_token:n,upload_phase:"finish",upload_session_id:r,title:a},method:"POST"})}},chunkFBVideoUpload:{key:hE,makeRequest:function(e){var t=e.pageId,n=e.pageAccessToken,r=e.uploadSessionId,a=e.startOffset,o=e.formData;return Ot({url:"".concat(cE,"/").concat(lE,"/").concat(t,"/videos"),data:o,withCredentials:!1,headers:{"Content-Type":"multipart/form-data"},params:{access_token:n,upload_phase:"transfer",start_offset:a,upload_session_id:r},method:"POST"})}},externalFBVideoUpload:{key:vE,makeRequest:function(e){var t=e.pageId,n=e.pageAccessToken,r=e.videoUrl;return Ot({url:"".concat(cE,"/").concat(lE,"/").concat(t,"/videos"),withCredentials:!1,headers:{"Content-Type":"multipart/form-data"},params:{access_token:n,file_url:r},method:"POST"})}},getGPAuthorizationUrl:{key:OE,makeRequest:function(e){return Ot({url:(t=e,n=t.rootDomain,r=t.app,a=t.accountId,o=encodeURIComponent("https://www.googleapis.com/auth/photoslibrary.readonly,openid"),i="account_uid=".concat(a,"&path=headerimage"),s=window.location.href.match(/:(\d+)/),s&&s[1]&&(i+="&imageManagerVersion=local"),i=encodeURIComponent(i),"https://social-auth.api.".concat(Ct(n),"/platforms/google/authorization_url?scopes=").concat(o,"&app=").concat(r,"&prompt=consent&path=").concat(i)),method:"GET"});var t,n,r,a,o,i,s}},getGoogleTokens:{key:IE,makeRequest:function(e){var t=e.rootDomain;return Ot({url:Nt({rootDomain:t}),method:"GET"})}},getGoogleScopes:{key:SE,makeRequest:function(e){return Ot({url:(t=e,n=t.rootDomain,r=t.tokenId,a=encodeURIComponent(r),"https://social-auth.api.".concat(Ct(n),"/platforms/google/tokens/").concat(a)),method:"GET"});var t,n,r,a}},deleteGoogleTokens:{key:mg.GOOGLE_TOKENS_DELETE,makeRequest:function(e){return Ot({url:(t=e,n=t.rootDomain,r=t.tokenId,a=encodeURIComponent(r),"https://social-auth.api.".concat(Ct(n),"/platforms/google/tokens/").concat(a)),method:"DELETE"});var t,n,r,a}},getGooglePhotosAlbums:{key:wE,makeRequest:function(e){var t=e.rootDomain,n=e.tokenId,r=e.params;return Ot({url:Ut({rootDomain:t,params:r}),headers:{"x-token-id":n,"x-app-name":"websites"}})}},getGooglePhotosMediaItems:{key:TE,makeRequest:function(e){var t=e.rootDomain,n=e.tokenId,r=e.data;return Ot({url:jt({rootDomain:t}),headers:{"x-token-id":n,"x-app-name":"websites"},method:"POST",data:r})}}},CE="function"==typeof btoa,AE="function"==typeof Buffer,xE=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),LE=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),PE=((e=>{let t={};e.forEach(((e,n)=>t[e]=n))})(LE),String.fromCharCode.bind(String)),DE=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_"))),ME=CE?e=>btoa(e):AE?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,n,r,a,o="";const i=e.length%3;for(let i=0;i<e.length;){if((n=e.charCodeAt(i++))>255||(r=e.charCodeAt(i++))>255||(a=e.charCodeAt(i++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|a,o+=LE[t>>18&63]+LE[t>>12&63]+LE[t>>6&63]+LE[63&t]}return i?o.slice(0,i-3)+"===".substring(i):o},NE=AE?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,r=e.length;n<r;n+=4096)t.push(PE.apply(null,e.subarray(n,n+4096)));return ME(t.join(""))},RE=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?PE(192|t>>>6)+PE(128|63&t):PE(224|t>>>12&15)+PE(128|t>>>6&63)+PE(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return PE(240|t>>>18&7)+PE(128|t>>>12&63)+PE(128|t>>>6&63)+PE(128|63&t)},UE=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,jE=AE?e=>Buffer.from(e,"utf8").toString("base64"):xE?e=>NE(xE.encode(e)):e=>ME(e.replace(UE,RE)),FE=(e,t=!1)=>t?DE(jE(e)):jE(e);var GE=C(1160),VE=C.n(GE);function BE(e){return BE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BE(e)}function HE(e){var t="function"==typeof Map?new Map:void 0;return HE=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return KE(e,arguments,qE(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),WE(r,e)},HE(e)}function KE(e,t,n){return KE=zE()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&WE(a,n.prototype),a},KE.apply(null,arguments)}function zE(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function WE(e,t){return WE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},WE(e,t)}function qE(e){return qE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qE(e)}const YE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WE(e,t)}(o,e);var t,n,r,a=(n=o,r=zE(),function(){var e,t=qE(n);if(r){var a=qE(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===BE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).originalRequest=r,t.originalResponse=i,t.causingError=n,null!=n&&(e+=", caused by ".concat(n.toString())),null!=r){var s=r.getHeader("X-Request-ID")||"n/a",c=r.getMethod(),l=r.getURL(),u=i?i.getStatus():"n/a",d=i?i.getBody()||"":"n/a";e+=", originated from request (method: ".concat(c,", url: ").concat(l,", response code: ").concat(u,", response text: ").concat(d,", request id: ").concat(s,")")}return t.message=e,t}return t=o,Object.defineProperty(t,"prototype",{writable:!1}),t}(HE(Error));function $E(){$E=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),s=new w(a||[]);return r(i,"_invoke",{value:_(e,n,s)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function p(){}function f(){}function m(){}var h={};c(h,o,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var y=m.prototype=p.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function a(r,o,i,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==JE(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return a("throw",e,i,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=O(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=u(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=m,r(y,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),c(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(y),c(y,s,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function XE(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function QE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ZE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JE(e){return JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JE(e)}function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach((function(t){nb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nb(e,t,n){return(t=ab(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ab(r.key),r)}}function ab(e){var t=function(e){if("object"!==JE(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==JE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===JE(t)?t:String(t)}var ob=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,n,r;return t=e,n=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl||this.url){var n=this.options.retryDelays;if(null==n||"[object Array]"===Object.prototype.toString.call(n)){if(this.options.parallelUploads>1)for(var r=0,a=["uploadUrl","uploadSize","uploadLengthDeferred"];r<a.length;r++){var o=a[r];if(this.options[o])return void this._emitError(new Error("tus: cannot use the ".concat(o," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then((function(n){return null==n||"Calculated fingerprint: ".concat(n),e._fingerprint=n,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,n=this,r=this._size,a=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,i=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function(e,t){for(var n=Math.floor(e/t),r=[],a=0;a<t;a++)r.push({start:n*a,end:n*(a+1)});return r[t-1].end=e,r}(this._source.size,o);this._parallelUploadUrls&&i.forEach((function(e,t){e.uploadUrl=n._parallelUploadUrls[t]||null})),this._parallelUploadUrls=new Array(i.length);var s,c=i.map((function(t,o){var s=0;return n._source.slice(t.start,t.end).then((function(c){var l=c.value;return new Promise((function(c,u){var d=tb(tb({},n.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:tb(tb({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:c,onError:u,onProgress:function(e){a=a-s+e,s=e,n._emitProgress(a,r)},onUploadUrlAvailable:function(){n._parallelUploadUrls[o]=p.url,n._parallelUploadUrls.filter((function(e){return Boolean(e)})).length===i.length&&n._saveUploadInUrlStorage()}}),p=new e(l,d);p.start(),n._parallelUploads.push(p)}))}))}));Promise.all(c).then((function(){(s=n._openRequest("POST",n.options.endpoint)).setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var e=ib(n.options.metadata);return""!==e&&s.setHeader("Upload-Metadata",e),n._sendRequest(s,null)})).then((function(e){if(sb(e.getStatus(),200)){var t=e.getHeader("Location");null!=t?(n.url=pb(n.options.endpoint,t),"Created upload at ".concat(n.url),n._emitSuccess()):n._emitHttpError(s,e,"tus: invalid or missing Location header")}else n._emitHttpError(s,e,"tus: unexpected response while creating upload")})).catch((function(e){n._emitError(e)}))}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?("Resuming upload from previous URL: ".concat(this.url),void this._resumeUpload()):null!=this.options.uploadUrl?("Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,void this._resumeUpload()):void this._createUpload()}},{key:"abort",value:function(t){var n=this;return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return n._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,n,r){this._emitError(new YE(n,r,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),db(e,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),n))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var n,r=ib(this.options.metadata);""!==r&&t.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(t)):n=this._sendRequest(t,null),n.then((function(n){if(sb(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(e.url=pb(e.options.endpoint,r),"Created upload at ".concat(e.url),"function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage().then((function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(t,n):(e._offset=0,e._performUpload())}))}else e._emitHttpError(t,n,"tus: invalid or missing Location header")}else e._emitHttpError(t,n,"tus: unexpected response while creating upload")})).catch((function(n){e._emitHttpError(t,null,"tus: failed to create upload",n)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(n){var r=n.getStatus();if(!sb(r,200))return 423===r?void e._emitHttpError(t,n,"tus: upload is currently locked; retry later"):(sb(r,400)&&e._removeFromUrlStorage(),e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var a=parseInt(n.getHeader("Upload-Offset"),10);if(Number.isNaN(a))e._emitHttpError(t,n,"tus: invalid or missing offset value");else{var o=parseInt(n.getHeader("Upload-Length"),10);!Number.isNaN(o)||e.options.uploadLengthDeferred?("function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),e._saveUploadInUrlStorage().then((function(){if(a===o)return e._emitProgress(o,o),void e._emitSuccess();e._offset=a,e._performUpload()}))):e._emitHttpError(t,n,"tus: invalid or missing length value")}})).catch((function(n){e._emitHttpError(t,null,"tus: failed to resume upload",n)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(n){sb(n.getStatus(),200)?t._handleUploadResponse(e,n):t._emitHttpError(e,n,"tus: unexpected response while uploading chunk")})).catch((function(n){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),n)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,n=this._offset,r=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(n+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then((function(n){var r=n.value,a=n.done,o=r&&r.size?r.size:0;t.options.uploadLengthDeferred&&a&&(t._size=t._offset+o,e.setHeader("Upload-Length",t._size));var i=t._offset+o;return!t.options.uploadLengthDeferred&&a&&i!==t._size?Promise.reject(new Error("upload was configured with a size of ".concat(t._size," bytes, but the source is done after ").concat(i," bytes"))):null===r?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,r))}))}},{key:"_handleUploadResponse",value:function(e,t){var n=parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(n))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var n=cb(e,t,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){e._urlStorageKey=t}))}},{key:"_sendRequest",value:function(e){return lb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],r=[{key:"terminate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=cb("DELETE",t,n);return lb(r,null,n).then((function(e){if(204!==e.getStatus())throw new YE("tus: unexpected response while terminating upload",null,r,e)})).catch((function(a){if(a instanceof YE||(a=new YE("tus: failed to terminate upload",a,r,null)),!db(a,0,n))throw a;var o=n.retryDelays[0],i=n.retryDelays.slice(1),s=tb(tb({},n),{},{retryDelays:i});return new Promise((function(e){return setTimeout(e,o)})).then((function(){return e.terminate(t,s)}))}))}}],n&&rb(t.prototype,n),r&&rb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ib(e){return Object.entries(e).map((function(e){var t=QE(e,2),n=t[0],r=t[1];return"".concat(n," ").concat(FE(String(r)))})).join(",")}function sb(e,t){return e>=t&&e<t+100}function cb(e,t,n){var r=n.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var a=n.headers||{};if(Object.entries(a).forEach((function(e){var t=QE(e,2),n=t[0],a=t[1];r.setHeader(n,a)})),n.addRequestId){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));r.setHeader("X-Request-ID",o)}return r}function lb(e,t,n){return ub.apply(this,arguments)}function ub(){var e;return e=$E().mark((function e(t,n,r){var a;return $E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof r.onBeforeRequest){e.next=3;break}return e.next=3,r.onBeforeRequest(t);case 3:return e.next=5,t.send(n);case 5:if(a=e.sent,"function"!=typeof r.onAfterResponse){e.next=9;break}return e.next=9,r.onAfterResponse(t,a);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})),ub=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){XE(o,r,a,i,s,"next",e)}function s(e){XE(o,r,a,i,s,"throw",e)}i(void 0)}))},ub.apply(this,arguments)}function db(e,t,n){if(null==n.retryDelays||t>=n.retryDelays.length||null==e.originalRequest)return!1;if(n&&"function"==typeof n.onShouldRetry)return n.onShouldRetry(e,t,n);var r,a=e.originalResponse?e.originalResponse.getStatus():0;return(!sb(a,400)||409===a||423===a)&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function pb(e,t){return new(VE())(t,e).toString()}ob.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};const fb=ob;function mb(e){return mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(e)}function hb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gb(r.key),r)}}function gb(e){var t=function(e){if("object"!==mb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==mb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===mb(t)?t:String(t)}var vb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&hb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yb(e){return yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yb(e)}function Eb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bb(r.key),r)}}function bb(e){var t=function(e){if("object"!==yb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==yb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===yb(t)?t:String(t)}var _b=!1;try{_b="localStorage"in window;var Ob="tusSupport",Ib=localStorage.getItem(Ob);localStorage.setItem(Ob,Ib),null===Ib&&localStorage.removeItem(Ob)}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;_b=!1}var Sb=_b,wb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var n=Math.round(1e12*Math.random()),r="tus::".concat(e,"::").concat(n);return localStorage.setItem(r,JSON.stringify(t)),Promise.resolve(r)}},{key:"_findEntries",value:function(e){for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(e))try{var a=JSON.parse(localStorage.getItem(r));a.urlStorageKey=r,t.push(a)}catch(e){}}return t}}],n&&Eb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tb(e){return Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(e)}function kb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xb(r.key),r)}}function Ab(e,t,n){return t&&Cb(e.prototype,t),n&&Cb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xb(e){var t=function(e){if("object"!==Tb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==Tb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Tb(t)?t:String(t)}var Lb=function(){function e(){kb(this,e)}return Ab(e,[{key:"createRequest",value:function(e,t){return new Pb(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Pb=function(){function e(t,n){kb(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}}return Ab(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){e._xhr.onload=function(){n(new Db(e._xhr))},e._xhr.onerror=function(e){r(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Db=function(){function e(t){kb(this,e),this._xhr=t}return Ab(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}();const Mb=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function Nb(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var e=r.response;t(e)},r.onerror=function(e){n(e)},r.open("GET",e),r.send()}))}function Rb(e){return Rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rb(e)}function Ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jb(r.key),r)}}function jb(e){var t=function(e){if("object"!==Rb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==Rb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Rb(t)?t:String(t)}var Fb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}var t,n;return t=e,(n=[{key:"slice",value:function(e,t){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova))return n=this._file.slice(e,t),new Promise((function(e,t){var r=new FileReader;r.onload=function(){var t=new Uint8Array(r.result);e({value:t})},r.onerror=function(e){t(e)},r.readAsArrayBuffer(n)}));var n,r=this._file.slice(e,t),a=t>=this.size;return Promise.resolve({value:r,done:a})}},{key:"close",value:function(){}}])&&Ub(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Gb(e){return Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(e)}function Vb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bb(r.key),r)}}function Bb(e){var t=function(e){if("object"!==Gb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==Gb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Gb(t)?t:String(t)}function Hb(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var Kb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}var t,n;return t=e,(n=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var n=this,r=t<=this._bufferOffset+Hb(this._buffer);if(this._done||r){var a=this._getDataFromBuffer(e,t),o=null==a&&this._done;return Promise.resolve({value:a,done:o})}return this._reader.read().then((function(r){var a=r.value;return r.done?n._done=!0:void 0===n._buffer?n._buffer=a:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(n._buffer,a),n._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===Hb(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&Vb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zb(e){return zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(e)}function Wb(){Wb=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),s=new w(a||[]);return r(i,"_invoke",{value:_(e,n,s)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function p(){}function f(){}function m(){}var h={};c(h,o,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==t&&n.call(v,o)&&(h=v);var y=m.prototype=p.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function a(r,o,i,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==zb(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return a("throw",e,i,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=O(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=u(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=m,r(y,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(b.prototype),c(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new b(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(y),c(y,s,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function qb(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$b(r.key),r)}}function $b(e){var t=function(e){if("object"!==zb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==zb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===zb(t)?t:String(t)}var Xb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,a;return t=e,n=[{key:"openFile",value:(r=Wb().mark((function e(t,n){var r;return Wb().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Mb()||!t||void 0===t.uri){e.next=11;break}return e.prev=1,e.next=4,Nb(t.uri);case 4:return r=e.sent,e.abrupt("return",new Fb(r));case 8:throw e.prev=8,e.t0=e.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e.t0));case 11:if("function"!=typeof t.slice||void 0===t.size){e.next=13;break}return e.abrupt("return",Promise.resolve(new Fb(t)));case 13:if("function"!=typeof t.read){e.next=18;break}if(n=Number(n),Number.isFinite(n)){e.next=17;break}return e.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return e.abrupt("return",Promise.resolve(new Kb(t,n)));case 18:return e.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return e.stop()}}),e,null,[[1,8]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function i(e){qb(o,n,a,i,s,"next",e)}function s(e){qb(o,n,a,i,s,"throw",e)}i(void 0)}))},function(e,t){return a.apply(this,arguments)})}],n&&Yb(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qb(e){return Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(e)}function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a_(r.key),r)}}function Jb(e,t){return Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jb(e,t)}function e_(e){return e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e_(e)}function t_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t_(Object(n),!0).forEach((function(t){r_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r_(e,t,n){return(t=a_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a_(e){var t=function(e){if("object"!==Qb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==Qb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Qb(t)?t:String(t)}var o_=n_(n_({},fb.defaultOptions),{},{httpStack:new Lb,fileReader:new Xb,urlStorage:Sb?new wb:new vb,fingerprint:function(e,t){return Mb()?Promise.resolve(function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),i_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jb(e,t)}(i,e);var t,n,r,a,o=(r=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=e_(r);if(a){var n=e_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Qb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=n_(n_({},o_),t),o.call(this,e,t)}return t=i,n=[{key:"terminate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=n_(n_({},o_),t),fb.terminate(e,t)}}],null&&Zb(t.prototype,null),n&&Zb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(fb),s_=window,c_=s_.XMLHttpRequest,l_=s_.Blob;function u_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u_(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c_&&l_&&l_.prototype.slice;var p_=function(e){var t=e.rootDomain;return"".concat(xt(t),"v1/video")},f_=function(e){var t=e.rootDomain,n=e.websiteId,r=e.page,a=void 0===r?1:r,o=e.perPage,i=void 0===o?100:o,s=e.search,c={page:a,perPage:i};return s&&s.length>0&&(c.search=s),n&&(c.websiteId=n),kt({method:"GET",url:p_({rootDomain:t}),params:c})};const m_={load:{key:mg.VIDEOS_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.perPage,a=void 0===r?100:r,o=e.search;return f_({rootDomain:t,websiteId:n,perPage:a,search:o})}},loadMore:{key:mg.VIDEOS_LOAD_MORE,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.page,a=e.perPage,o=void 0===a?100:a,i=e.search;return f_({rootDomain:t,websiteId:n,page:r,perPage:o,search:i})}},loadStats:{key:mg.VIDEOS_LOAD_STATS,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.managedUserId;return kt({method:"GET",url:"".concat(p_({rootDomain:t}),"/stats"),params:d_({managedUserId:r},n?{websiteId:n}:{})})}},refresh:{key:mg.VIDEO_REFRESH,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoId;return kt({method:"GET",url:p_({rootDomain:t}),params:d_({videoId:r},n?{websiteId:n}:{})})}},updatePrivacy:{key:mg.VIDEO_UPDATE_PRIVACY,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoId;return kt(d_({method:"PATCH",url:"".concat(p_({rootDomain:t}),"/").concat(r)},n?{params:{websiteId:n}}:{}))}},delete:{key:mg.VIDEO_DELETE,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoId;return kt(d_({method:"DELETE",url:"".concat(p_({rootDomain:t}),"/").concat(r)},n?{params:{websiteId:n}}:{}))}},getUser:{key:mg.VIDEOS_LOAD_USER,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId;return kt(d_({method:"GET",url:p_({rootDomain:t})+"/user"},n?{params:{websiteId:n}}:{}))}},removeUserConnection:{key:mg.VIDEOS_REMOVE_USER_CONNECTION,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId;return kt(d_({method:"DELETE",url:p_({rootDomain:t})+"/user/accesstoken"},n?{params:{websiteId:n}}:{}))}},getLink:{key:mg.VIMEO_GET_LINK,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.redirectURI,a=e.state,o=e.linkType;return kt({method:"GET",url:"".concat(p_({rootDomain:t}),"/link/").concat(o),params:d_({redirectURI:r,state:a},n?{websiteId:n}:{})})}},create:{key:mg.VIDEOS_CREATE_UPLOAD,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoFile,a=e.videoDescription,o=void 0===a?null:a;return kt(d_({method:"POST",url:p_({rootDomain:t}),data:{videoName:r.name,videoSize:r.size,videoDescription:o}},n?{params:{websiteId:n}}:{}))}},push:{key:mg.VIDEOS_PUSH_UPLOAD,makeRequest:function(e){var t=e.uploadLink,n=e.videoFile,r=e.errorCallback,a=e.progressCallback,o=e.completeCallback;return new i_(n,{endpoint:"none",uploadUrl:t,uploadSize:n.size,retryDelays:[0,1e3,3e3,5e3],onError:r,onProgress:a,onSuccess:o,headers:{Accept:"application/vnd.vimeo.*+json;version=3.4"}}).start(),Promise.resolve({data:{}})}}},h_={getPlanFeatures:{key:mg.PLAN_FEATURES_GET,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Ot({url:"".concat(Pt(t),"/accounts/").concat(n,"/features")})}},getSharedWidgets:{key:mg.SHARED_WIDGETS_FEATURES_GET,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId;return Ot({url:"".concat(Pt(t),"/websites/").concat(n,"/sharedWidgets")})}},updateHeaderWidget:{key:mg.HEADER_WIDGET_UPDATE,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.data;return Ot({method:"PATCH",url:"".concat(Pt(t),"/websites/").concat(n),data:r})}}};function g_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g_(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const y_={load:{key:mg.EXPERIMENTS_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.placement;return kt({url:"".concat(xt(t),"v1/experiments"),params:v_({},n&&{placement:n})})}}},E_={load:{key:mg.PRODUCTS_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.keywords,a=void 0===r?"":r,o=e.market,i=void 0===o?"en":o,s=e.page,c=void 0===s?1:s,l=e.pageSize,u={websiteId:n,page:c,per_page:void 0===l?50:l,descend_by_created_at:e.sortOrder===Ye};return a&&Object.assign(u,{keywords:a,locale:i}),Ot({url:"".concat(xt(t),"v2/ols/products"),params:u})}},fetch:{key:mg.PRODUCTS_FETCH,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.id;return Ot({url:"".concat(xt(t),"v2/ols/products/").concat(r),params:{websiteId:n}})}}};var b_=mg.VENTURE_LOAD,__=mg.VENTURE_LOGO_UPDATE;function O_(e){var t=e.version;return{getVentureById:{key:b_,makeRequest:function(e){var n=e.rootDomain,r=e.id,a=e.includeInferred,o=void 0!==a&&a;return Ot({method:"GET",url:"".concat(xt(n)).concat(t,"/venture/").concat(r),params:{includeInferred:o}})}},updateVentureLogoUrl:{key:__,makeRequest:function(e){var t=e.rootDomain,n=e.id,r=e.overwrite,a=e.logoUrl;Ot({method:"PATCH",url:"".concat(xt(t),"v2/venture/").concat(n),params:{overwrite:r},data:{logoUrl:a}})}}}}const I_={get:{key:mg.USER_GET,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return kt({url:"".concat(xt(t),"v2/user/").concat(n,"/")})}}},S_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.assetByContainerVersion,n=e.assetContainerId;return{Keys:mg,Statuses:fg,images:Dy({assetByContainerVersion:t,assetContainerId:n}),stockImages:Fy,stockVideos:Ky,otherSites:Jy,sso:sE,social:kE,videos:m_,vnext:h_,experiments:y_,products:E_,venture:O_({version:t}),user:I_}};function w_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w_(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k_=function(){return{rootDomain:"",ventureId:"",websiteId:"",accountId:"",market:"",businessCategory:"",businessCategoryDisplayName:"",callbacks:{onItemsSelected:null,onModalClose:null,onBackToTopButtonClick:null},featureFlags:{},ffEnabledForPerf:"",showStockVideos:!1,uploads:{},goAppName:"",gdBranded:!0,addSources:[],removeSources:[],placement:"",pageSize:100,photoshootId:"",mediaTypes:[],selectedMediaType:De,urls:{},searchClient:null,searchDebounce:500,searchTrackingDebounce:3e3,renderMode:"",infopaneSettings:{},hivemind:{},timeToHideUploading:6e4,videoStatusRefreshRate:5e3,socialMediaAuthCallbackUrl:"",vimeoHelpLink:"https://godaddy.com",timeToStopRefreshingVideo:36e5,venturePrimaryDomain:"",appMetadata:{},stockImageSearchType:void 0,disabledFileExtensions:[],skipLoadVenture:!1,skipLoadImages:!1,skipLoadVideos:!1,skipLoadOtherMedia:!1,showGeneratedLogos:!1,showGeneratedImages:!1}};function C_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C_(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x_=mg.IMAGES_LOAD,L_=mg.IMAGES_DELETE,P_=mg.SITE_IMAGES_COPY,D_=mg.IMAGE_UPLOAD,M_=mg.IMAGES_UPDATE,N_=nn.IM_API_STATUS_CHANGE,R_=nn.IM_IMAGES_STAGE,U_=nn.IM_IMAGE_PROGRESS,j_=nn.IM_MODAL_HIDE,F_=nn.IM_SWITCH_TAB,G_=nn.IM_IMAGES_SORT,V_=nn.IM_IMAGES_UPLOADED,B_=nn.IM_IMAGES_DELETED,H_=nn.IM_IMAGE_METADATA_UPDATED,K_=nn.IM_IMAGE_SELECTED_METADATA_UPDATED,z_=nn.IM_OPEN_MODAL,W_=nn.IM_OPEN_UPLOAD_NOTIFICATION,q_=nn.IM_CLOSE_UPLOAD_NOTIFICATION,Y_=nn.IM_OPEN_GETTY_IMAGE_SPINNER,$_=nn.IM_CLOSE_GETTY_IMAGE_SPINNER,X_=nn.IM_IMAGES_RESET_RECENT,Q_=nn.IM_MONITOR_IMAGE_PROGRESS,Z_=function(e){var t=Object.keys(e),n=t.reduce((function(t,n){return t+e[n].uploadProgress||0}),0);return n/t.length},J_=function(e){var t=Object.keys(e);return t.length&&t.every((function(t){return e[t].uploadProgress>=100}))?{staged:{},uploadProgress:-1,showSlowUploadNotification:!1,gettyImageSpinnerType:null}:{staged:e,uploadProgress:Z_(e)}},eO=function(e){return e.updatedAt||e.lastModified},tO=function(e,t){var n=e.deletedDocumentNames,r=(0,T.filter)(t.uploaded,(function(e){return!(0,T.includes)(n,e.filename)})),a=(0,T.filter)(t.olsImages,(function(e){return!(0,T.includes)(n,e.filename)})),o=0===r.length;return A_(A_({},t),{},{uploaded:r,olsImages:a,deletedAllUploaded:o})},nO=function(e,t,n){var r,o=e.image,i=e.metadata,c=t.olsImages,l=t.uploaded,u=a("ols"===o.basePath?[c,"olsImages"]:[l,"uploaded"],2),d=u[0],p=u[1],f=d.findIndex((function(e){return e.imageUrl===o.imageUrl}));return d[f]=(0,T.merge)(d[f],i),A_(A_({},t),{},(s(r={},p,ys(d)),s(r,"isSavingMetadata",n),r))};function rO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rO(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oO="click",iO="impression",sO={IM_TRACK_OPEN_MODAL:{traffic2:["modal_open",iO]},IM_TRACK_VIDEO_SELECTOR_OPEN:{traffic2:["video_selector_modal_open",iO]},IM_TRACK_CLOSE_MODAL:{traffic2:["modal_close",iO]},IM_TRACK_THUMBNAIL_CLICK:{traffic2:["thumbnail",oO]},IM_TRACK_INSERT_BUTTON_CLICK:{traffic2:["insert_button",oO]},IM_TRACK_DELETE_BUTTON_CLICK:{traffic2:["delete_button",oO]},IM_TRACK_UPLOAD_BUTTON_CLICK:{traffic2:["upload_button",oO]},IM_TRACK_ADD_CTA_BUTTON_CLICK:{traffic2:["add_cta_button",oO]},IM_TRACK_DRAG_AND_DROP:{traffic2:["drag_and_drop_area",iO]},IM_TRACK_BROWSE_STOCK_BUTTON_CLICK:{traffic2:["browse_stock_media_button",oO]},IM_TRACK_CANCEL_BUTTON_CLICK:{traffic2:["cancel_button",oO]},IM_TRACK_STOCK_IMAGE_SEARCH_BUTTON_CLICK:{traffic2:["stock_image_search_button",oO]},IM_TRACK_STOCK_VIDEO_SEARCH_BUTTON_CLICK:{traffic2:["stock_video_search_button",oO]},IM_TRACK_INDEX_COLLECTION_CLICK:{traffic2:["back_to_all_media_breadcrumb",oO]},IM_TRACK_MY_UPLOADS_COLLECTION_CLICK:{traffic2:["most_recent_collection",oO]},IM_TRACK_STOCK_MEDIA_COLLECTION_CLICK:{traffic2:["stock_media_collection",oO]},IM_TRACK_MY_SITES_COLLECTION_CLICK:{traffic2:["my_sites_collection",oO]},IM_TRACK_FACEBOOK_COLLECTION_CLICK:{traffic2:["facebook_collection",oO]},IM_TRACK_INSTAGRAM_COLLECTION_CLICK:{traffic2:["instagram_collection",oO]},IM_TRACK_OLS_UPLOADS_COLLECTION_CLICK:{traffic2:["ols_collection",oO]},IM_TRACK_LOGO_UPLOADS_COLLECTION_CLICK:{traffic2:["logo_collection",oO]},IM_TRACK_WSC_UPLOADS_COLLECTION_CLICK:{traffic2:["wsc_collection",oO]},IM_TRACK_COVER_UPLOADS_COLLECTION_CLICK:{traffic2:["cover_uploads_collection",oO]},IM_TRACK_PHOTOSHOOT_COLLECTION_CLICK:{traffic2:["photoshoot_collection",oO]},IM_TRACK_VIEW_MOST_RECENT_GALLERY_CLICK:{traffic2:["most_recent_gallery_drilldown",oO]},IM_TRACK_FULL_VIEW_OPEN:{traffic2:["full_view_open",iO]},IM_TRACK_FULL_VIEW_CLOSE:{traffic2:["full_view_close",iO]},IM_TRACK_FULL_VIEW_INSERT_BUTTON_CLICK:{traffic2:["full_view_insert_button",oO]},IM_TRACK_FULL_VIEW_DELETE_BUTTON_CLICK:{traffic2:["full_view_delete_button",oO]},IM_TRACK_WARNING_DISPLAYED_SMALL_IMAGE:{traffic2:["warning_displayed_small_image",iO]},IM_TRACK_FACEBOOK_CONNECT_CLICK:{traffic2:["facebook_connect_button",oO]},IM_TRACK_FACEBOOK_AUTH_COMPLETE:{traffic2:["facebook_auth_complete",iO]},IM_TRACK_FACEBOOK_HELP_BUBBLE_CLICK:{traffic2:["facebook_help_bubble",oO]},IM_TRACK_INSTAGRAM_CONNECT_CLICK:{traffic2:["instagram_connect_button",oO]},IM_TRACK_INSTAGRAM_DASHBOARD_LINK_CLICK:{traffic2:["instagram_dashboard_connect_link",oO]},IM_TRACK_INSTAGRAM_PAGE_CLICK:{traffic2:["instagram_page",iO]},IM_TRACK_UPLOADED_SORT:{traffic2:["by_date_uploaded_sort",oO]},IM_TRACK_DOWNLOAD_BUTTON_CLICK:{traffic2:["download_button",oO]},IM_TRACK_PHOTO_DETAILS_OPEN:{traffic2:["photo_details_open",iO]},IM_TRACK_UPLOADED_IMAGES_SEARCH:{traffic2:["my_uploads_search",oO]},IM_TRACK_SEARCH:{traffic2:["search",oO]},IM_TRACK_FULL_IMAGE_VIEW_UPDATE_HEADER:{traffic2:["fiv_update_header_button",oO]},IM_TRACK_FULL_IMAGE_VIEW_EDIT_CLICK:{traffic2:["fiv_edit_website_cta",oO]},IM_TRACK_FULL_IMAGE_VIEW_ALT_TEXT_CHANGE:{traffic2:["fiv_alt_text_change",iO]},IM_TRACK_VIMEO_UPLOAD_LIMIT_MODAL_IMPRESSION:{traffic2:["vimeo_upload_limit_exceeded_modal",iO]},IM_TRACK_VIMEO_UPGRADE_CTA_CLICK:{traffic2:["vimeo_upgrade_cta",oO]},IM_TRACK_VIMEO_CONNECT_UPGRADE_CTA_CLICK:{traffic2:["vimeo_connect_and_upgrade_cta",oO]},IM_TRACK_VIMEO_CONNECT_CTA_CLICK:{traffic2:["vimeo_connect_cta",oO]},IM_TRACK_VIMEO_BANNER_CLICK:{traffic2:["vimeo_banner",oO]},IM_TRACK_VIMEO_EDIT_CTA_LINK_CLICK:{traffic2:["vimeo_edit_cta",oO]},IM_TRACK_VIMEO_EDIT_CTA_ICON_CLICK:{traffic2:["vimeo_edit_cta_from_thumbnail",oO]},IM_TRACK_VIMEO_SHADOW_FIRST_UPLOAD:{traffic2:["shadow_first_upload",iO]},IM_TRACK_OVER_EDIT_CTA_CLICK:{traffic2:["over_edit_cta",oO]},IM_TRACK_OVER_THUMBNAIL_EDIT_CTA_CLICK:{traffic2:["over_edit_thumbnail_cta",oO]},IM_TRACK_STUDIO_CREATE_CTA_CLICK:{traffic2:["studio_create_cta",oO]},IM_TRACK_SEARCH_NO_RESULTS:{traffic2:["no_search_results_found",iO]},IM_TRACK_SEARCH_RESULTS_FOUND:{traffic2:["search_results_found",iO]},IM_TRACK_SLOW_UPLOAD_NOTIFICATION_OPEN:{traffic2:["slow_upload_notification",iO]},IM_TRACK_MISSING_VIDEO_THUMBNAIL:{traffic2:["transcoded_video_missing_thumbnail",iO]},IM_TRACK_VIMEO_CREATE_CTA_CLICK:{traffic2:["video_create",oO]},IM_TRACK_VIMEO_OFF_SITE_REDIRECT:{traffic2:["vimeo_offsite_redirect",iO]},IM_TRACK_VIMEO_OFF_SITE_REDIRECT_COMPLETE:{traffic2:["vimeo_offsite_redirect_complete",iO]},IM_TRACK_OVER_CANVAS_CLOSE:{traffic2:["studio_canvas_close",iO]},IM_TRACK_OVER_CANVAS_COMPLETE:{traffic2:["studio_canvas_complete",iO]},IM_TRACK_STUDIO_LOGO_CREATE_COMPLETE:{traffic2:["studio_logo_create_complete",iO]},IM_UPLOAD_COMPLETE:{traffic2:["upload_complete",iO]},IM_TRACK_LOGO_UPLOAD_COMPLETE:{traffic2:["logo_upload_complete",iO]},IM_TRACK_VIDEO_START:{traffic2:["video_context_start",iO]},IM_TRACK_LOGO_CREATE_CLICK:{traffic2:["logo_create",oO]},IM_TRACK_VIDEO_SELECTOR_SAVE_URL:{traffic2:["video_selector_save_url",oO]},IM_TRACK_VIDEO_SELECTOR_OPEN_MEDIA_LIBRARY:{traffic2:["video_selector_cta",oO]},IM_TRACK_BG_PROMO_DISPLAY:{traffic2:["bg_removal_promo_display",iO]},IM_TRACK_INCORRECT_FILE_UPLOADED:{traffic2:["incorrect_file_uploaded",iO]},IM_TRACK_POST_LOGO_WAM_CLICK:{traffic2:["post_logo_wam_cta",oO]},IM_TRACK_POST_LOGO_FIV_DISPLAY:{traffic2:["post_logo_fiv_display",iO]},IM_TRACK_POST_LOGO_FIV_DOWNLOAD_CLICK:{traffic2:["post_logo_download_cta",oO]},IM_TRACK_POST_LOGO_FIV_DASHBOARD_CLICK:{traffic2:["post_logo_dashboard_cta",oO]},IM_TRACK_LOGO_MODAL_CTA_DISPLAY:{traffic2:["logo_modal_cta_display",iO]},IM_TRACK_LOGO_LAUNCH_PAD_MODAL_CTA_DISPLAY:{traffic2:["logo_launch_pad_modal_cta_display",iO]},IM_TRACK_LOGO_USE_CLICK:{traffic2:["logo_launch_pad_modal_use_this_logo",oO]},IM_TRACK_LOGO_CUSTOMIZE_CLICK:{traffic2:["logo_launch_pad_modal_customize",oO]},IM_TRACK_GENERATE_NEW_LOGOS_CLICK:{traffic2:["logo_launch_pad_modal_generate_new_logos",oO]},IM_TRACK_GENERATE_PREMIUM_LOGOS_CLICK:{traffic2:["logo_launch_pad_modal_generate_premium_logos",oO]},IM_TRACK_GENERATE_PREMIUM_LOGOS_LEARN_MORE_CLICK:{traffic2:["logo_launch_pad_modal_learn_more_premium_logos",oO]},IM_TRACK_SEE_MORE_OPTIONS_CLICK:{traffic2:["logo_launch_pad_modal_see_more_options",oO]},IM_TRACK_PHOTOSHOOT_SERVICE_MODAL_VIEW:{traffic2:["photoshoot_service_modal_view",iO]},IM_TRACK_PHOTOSHOOT_SERVICE_MODAL_CLICK:{traffic2:["photoshoot_service_modal",oO]},IM_TRACK_GENERATED_IMAGES_GALLERY_VIEW:{traffic2:["generate_image_button.impression"]},IM_TRACK_GENERATED_IMAGES_GALLERY_CLICK:{traffic2:["generate_image_button.click"]},IM_TRACK_GOOGLE_PHOTOS_EXPERIMENT:{traffic2:["google_photos_experiment",iO]},IM_TRACK_NON_STOCK_IMAGE_INSERT_CLICK:{traffic2:["add_non_stock_image_from_device",oO]}},cO=Object.keys(sO).reduce((function(e,t){var n=sO[t];if(n.traffic2){var r=n.traffic2[1];n.traffic2=["".concat("pandc.brandbook.media_library",".").concat(n.traffic2.join(".")),r]}return Object.assign(e,s({},t,n))}),{});const lO=cO;var uO=mg.SHARED_WIDGETS_FEATURES_GET,dO=fg.SUCCESS,pO=nn.IM_API_STATUS_CHANGE,fO=nn.IM_OPEN_MODAL,mO=nn.IM_OPEN_VIDEO_SELECTOR_MODAL,hO=Xs()?"mobile":"desktop",gO=function(){return{tracker:null,appName:"",appSocialMediaAuthPath:"/socialMediaAuth",placement:"",appNameSubdomainMappings:{website:"websites",blog:"blogging",dashboard:"dashboard",ola:"ola",ols:"onlinestore"},headerWidget:{},device:hO}};function vO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vO(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bO(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function bO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _O=mg.VENTURE_LOAD,OO=mg.GC_SITE_IMAGES_LOAD,IO=mg.WEBSITES_LOAD,SO=mg.VENTURES_LOAD,wO=mg.V7_WEBSITES_LOAD,TO=mg.VENTURE_IMAGES_LOAD,kO=mg.V7_SITE_IMAGES_LOAD,CO=mg.SITE_IMAGES_COPY,AO=nn.IM_API_STATUS_CHANGE,xO=nn.IM_SITE_IMAGES_LOAD,LO=nn.IM_IMAGES_COPY,PO=nn.IM_INSERT_ITEMS,DO=nn.IM_CONTAINER_MANIFEST_POPULATE,MO=nn.IM_VIEWABLE_SITES_NEXTPAGE,NO=nn.IM_OPEN_MODAL,RO=nn.IM_ON_IMG_RENDER_ERROR,UO=fg.SUCCESS,jO=fg.FAIL,FO=fg.STARTED;function GO(e,t){var n=e.domainName&&e.domainName.toUpperCase(),r=t.domainName&&t.domainName.toUpperCase();return n<r?-1:n>r?1:0}var VO=["name"];function BO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BO(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KO=mg.FB_PAGES_LOAD,zO=mg.FB_ALBUMS_LOAD,WO=mg.FB_PHOTOS_LOAD,qO=mg.IG_POSTS_LOAD,YO=mg.IG_AUTHORIZED_CHECK,$O=mg.IG_CONNECTED_CHECK,XO=mg.IG_LISTING_LOAD,QO=mg.SSO_SOCIAL_ACCESS_TOKEN_GET,ZO=fg.SUCCESS,JO=fg.STARTED,eI=fg.FAIL,tI=nn.IM_SOCIAL_AUTH_URL_POPULATE,nI=nn.IM_SOCIAL_ACCESS_TOKEN_POPULATE,rI=nn.IM_SOCIAL_PAGE_ACCESS_TOKEN_POPULATE,aI=nn.IM_API_STATUS_CHANGE,oI=nn.IM_SOCIAL_FB_PAGE_SWITCH,iI=nn.IM_SOCIAL_FB_ALBUM_SWITCH,sI=nn.IM_SOCIAL_FB_LOAD_START,cI=nn.IM_SOCIAL_FB_LOAD_END,lI=nn.IM_SOCIAL_SWITCH_PROVIDER,uI=nn.IM_SOCIAL_IG_LOAD_START,dI=nn.IM_SOCIAL_IG_LOAD_END,pI=nn.IM_SOCIAL_GOOGLE_PHOTOS_LOAD_START,fI=nn.IM_SOCIAL_GOOGLE_PHOTOS_LOAD_END,mI=nn.IM_SOCIAL_GOOGLE_PHOTOS_AUTH_POPULATE,hI=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUMS_POPULATE,gI=nn.IM_SOCIAL_GOOGLE_PHOTOS_MEDIA_ITEMS_POPULATE,vI=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUM_ID_POPULATE,yI=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUM_MEDIA_ITEMS_POPULATE,EI=nn.IM_SOCIAL_GOOGLE_PHOTOS_FLATTEN_MEDIA_ITEMS_POPULATE,bI=nn.IM_SOCIAL_GOOGLE_PHOTOS_RESET,_I=nn.IM_SOCIAL_GOOGLE_PHOTOS_DISMISS_DISCONNECT_ALERT,OI={auth:{tokens:{fetched:!1,tokenId:"",userId:""},authUrl:{fetched:!1,url:""},scopes:{fetched:!1,deletable:!1,photosLibrary:{read:!1}},revoked:!1,disconnectStatus:null},albums:{pages:[{fetched:!1,albums:[],pageToken:"",minAlbumsPerPage:20}]},mediaItems:{pages:[{fetched:!1,photos:[],pageToken:"",minPhotosPerPage:20}]},albumMediaItems:{ID:{pages:[{fetched:!1,photos:[],pageToken:"",minPhotosPerPage:20}]}},allMediaItems:[],selectedAlbumId:null,isLoading:!1},II=mg.PLAN_FEATURES_GET,SI=fg.SUCCESS,wI=nn.IM_API_STATUS_CHANGE;function TI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TI(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CI=function(){return{selectedItemsById:new Map,fivIndex:-1,anchor:null}};function AI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AI(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var LI="unlisted",PI="anybody";const DI=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(e)||!e.length)return null;var r=e.sort((function(e,t){return e.height-t.height}));if(n){var a=r.find((function(e){return e.height>=t&&e.width>=n}));if(a)return a}return r.find((function(e){return e.height>=t}))||r[r.length-1]};function MI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MI(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var RI=mg.VIDEOS_LOAD,UI=mg.VIDEOS_LOAD_MORE,jI=mg.VIDEOS_LOAD_STATS,FI=mg.VIDEOS_LOAD_USER,GI=mg.VIDEOS_CREATE_UPLOAD,VI=mg.STOCK_VIDEOS_LOAD,BI=mg.STOCK_VIDEOS_SEARCH,HI=mg.VIDEO_REFRESH,KI=mg.VIDEO_UPDATE_PRIVACY,zI=mg.VIDEO_DELETE,WI=nn.IM_API_STATUS_CHANGE,qI=nn.IM_STOCK_VIDEOS_POPULATE,YI=nn.IM_VIDEO_PROGRESS,$I=nn.IM_VIDEO_UPLOAD_COMPLETE,XI=nn.IM_VIDEOS_SEARCH,QI=nn.IM_VIDEOS_EDIT,ZI=nn.IM_STOCK_VIDEOS_RESET,JI=nn.IM_VIDEOS_REFRESH_START,eS=nn.IM_VIDEOS_REFRESH_END,tS=nn.IM_OPEN_MODAL,nS=nn.IM_VIMEO_SHOW_MODAL,rS=nn.IM_VIMEO_HIDE_MODAL,aS=nn.IM_IMAGES_SORT,oS=nn.IM_VIDEO_STAGE,iS=nn.IM_VIDEOS_RESET_RECENT,sS=function(e){var t=null,n=Xs()?160:Bs,r=e.download?e.download.filter((function(e){return"source"===e.type}))[0]:null;r&&(t=n*(r.width/r.height),e.width=r.width,e.height=r.height);var a=DI(e.thumbnails,n,t),o=(0,T.get)(e,"privacy.view"),i=(0,T.get)(e,"privacy.embed"),s=o===LI,c=e.link&&e.link.split("/"),l=null;return c&&s&&(l=c.pop()),NI(NI({},e),{},{id:c&&c.slice(-1)[0],imageUrl:a.link,url:a.link,urlHash:l,mediaType:Me,sourceType:$,dimensions:{width:a.width,height:a.height},privacy:{embed:i,view:o}})},cS=function(e,t){return e.filter((function(e){var n=new Date-new Date((0,T.get)(e,"created_time"));return"public"===(0,T.get)(e,"privacy.embed")&&("uploading"!==(0,T.get)(e,"status")||n<t)&&!(0,T.isEmpty)(e.thumbnails)&&Array.isArray(e.thumbnails)})).map(sS)};function lS(e,t){return e.sort((function(e,n){var r=new Date(e.modified_time),a=new Date(n.modified_time);return t===Ye?a-r:r-a}))}var uS=function(e){return null==e};function dS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fS=nn.IM_ASSET_SEARCH,mS=nn.IM_ASSET_SEARCH_DONE,hS=nn.IM_ASSET_SEARCH_CLEAR,gS=nn.IM_MODAL_HIDE,vS=nn.IM_VIDEOS_SEARCH;function yS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ES(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bS=C(3624),_S=C.n(bS);const OS=function(e,t){var n=new RegExp("".concat(t,"/(").concat("[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}",")/")),r=e.match(n);return r&&r[1]};var IS=["id","containerKey","filename","createdAt","updatedAt","lastModified","dimensions","eTag","originalFilename","size","altText","references","contentType","sources","dify","metadata"];const SS=function(e){var t=e.data,n=e.containerKey,r=e.assetBaseDataUrl;if(n)t.containerKey=n;else{var a=OS(t.dataUrl,r);t.containerKey=_S()(a)}return(0,T.pick)(t,IS)},wS=function e(t){if("object"!==o(t)||null===t)return t;if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r]));return n}var a,i={};if(t instanceof Error)return{message:(a=t).message,stack:a.stack,status:a.status};for(var s=Object.keys(t),c=0;c<s.length;c++)i[s[c]]=e(t[s[c]]);return i};var TS=function(e){return $t(e).debug},kS=function(e){var t=$t(e),n=t.config,r=n.ventureId,a=n.websiteId,o=n.accountId,i=n.market,s=n.businessCategory,c=n.mediaTypes,l=n.featureFlags,u=n.hivemind,d=n.renderMode,p=t.appOptions,f=p.appName,m=p.device,h=p.placement,g=t.images,v=g.fromLocalStorage,y=g.uploadedImagesFetched,E=t.products.productsFetched,b=t.videos.uploadedVideosFetched,_=t.debug,O=t.api;return{ventureId:r,websiteId:a,accountId:o,market:i,businessCategory:s,mediaTypes:c,featureFlags:l,hivemind:u,renderMode:d,appName:f,device:m,placement:h,fromLocalStorage:v,uploadedImagesFetched:y,uploadedVideosFetched:b,productsFetched:E,debugMeta:wS(_),api:O}};function CS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xS(e){return{error:e}}function LS(e,t,n){return(0,e.makeRequest)(t).then(n).catch(xS)}var PS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shouldWriteToLocalStorage,r=t.api,a=t.assetContainerId;h(this,e),this.shouldWriteToLocalStorage=Boolean(n),this.api=r,this._assetContainerId=a,P()(this)}var t,n,r,a,o,i,s,c;return v(e,[{key:"getContainerKey",value:function(e){return _S()(this._assetContainerId||e)}},{key:"getUploadedImageThruApi",value:function(e){var t=e.rootDomain,n=e.containerId,r=e.folders,a=Date.now();return LS(this.api.images.load,{rootDomain:t,containerId:n,folders:r},(function(e){var t=e.data;return{data:{lastSyncedAt:a,images:Xp(t),upsertList:t,deleteList:[]}}}))}},{key:"_getDiff",value:(c=Up(Np().mark((function e(t){var n,r,a,o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootDomain,r=t.containerId,a=t.folders,o=t.lastSyncedAt,i=t.originalData,e.prev=1,s=Date.now(),c=[],l=[],e.next=7,LS(this.api.images.load,{rootDomain:n,containerId:r,folders:a,includeDeleted:!0,lastSyncedAt:o});case 7:if(u=e.sent,d=u.data,!(p=u.error)){e.next=12;break}return e.abrupt("return",xS(p));case 12:for(f=(0,T.keyBy)(i,(function(e){return e.id})),m=0;m<d.length;m++)(h=d[m]).isDeleted?h.isDeleted&&Object.prototype.hasOwnProperty.call(f,h.id)&&l.push(h.id):c.push(h);return e.abrupt("return",{data:{lastSyncedAt:s,upsertList:c,deleteList:l}});case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",xS(e.t0));case 20:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e){return c.apply(this,arguments)})},{key:"getUploadedImagesFromLS",value:(s=Up(Np().mark((function e(t){var n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.containerId,r=t.assetBaseUrl,a=t.assetBaseDataUrl,e.prev=1,e.next=4,this.getAssetContainerIds(n);case 4:return o=e.sent,i=o.assetContainerIds,s=o.containerIdLoopkup,e.next=9,Promise.all(i.map((function(e){return xv(_S()(e))})));case 9:return c=e.sent,l=c.reduce((function(e,t){var n=t.images,r=t.lastSyncedAt;return r&&(e.lastSyncedAt=r),n&&n.length&&(e.images=[].concat(ys(e.images||[]),ys(n))),e}),{}),u=l.images,d=void 0===u?[]:u,p=l.lastSyncedAt,e.abrupt("return",{data:{lastSyncedAt:p,images:Zp(d,{containerId:this._assetContainerId||n,assetBaseUrl:r,assetBaseDataUrl:a,containerIdLoopkup:s}),fromLocalStorage:!0,firstLaunchBeaconSuffix:p?lv:uv}});case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",xS(e.t0));case 17:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return s.apply(this,arguments)})},{key:"getAssetContainerIds",value:(i=Up(Np().mark((function e(t){var n,r,a,o;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getContainerManifest(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return n=e.t0,r=n.assetContainerIds,a=ys(new Set([].concat(ys(void 0===r?[]:r),[t]))),o=a.reduce((function(e,t){return e[_S()(t)]=t,e}),{}),e.abrupt("return",{assetContainerIds:a,containerIdLoopkup:o});case 14:return e.prev=14,e.t1=e.catch(0),e.abrupt("return",xS(e.t1));case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return i.apply(this,arguments)})},{key:"getUploadedImagesDiffAndSyncLS",value:(o=Up(Np().mark((function e(t,n){var r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O,I,S,w;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.assetBaseDataUrl,a=t.rootDomain,o=t.containerId,i=t.folders,s=t.images,c=t.lastSyncedAt,l=t.skipLoadImages,u=n.getState,(d=n.dispatch)(ti("in getUploadedImagesDiffAndSyncLS call")),e.prev=3,f=this.getContainerKey(o),!c){e.next=13;break}return this.shouldWriteToLocalStorage=!0,e.next=9,this._getDiff({rootDomain:a,containerId:o,folders:i,lastSyncedAt:c,originalData:s});case 9:p=e.sent,d(ti("got diff with lastSyncedAt ".concat(c))),e.next=25;break;case 13:if(l){e.next=24;break}return e.next=16,this.getUploadedImageThruApi({rootDomain:a,containerId:o,folders:i});case 16:p=e.sent,m=p.data,h=(m=void 0===m?{}:m).images,g=void 0===h?[]:h,d(ti("got diff without lastSyncedAt")),this.shouldWriteToLocalStorage||(this.shouldWriteToLocalStorage=Cc(g)),e.next=25;break;case 24:p={data:{upsertList:[],deleteList:[],lastSyncedAt:c},error:null};case 25:return y=(v=p).data,E=(y=void 0===y?{}:y).upsertList,b=void 0===E?[]:E,_=y.deleteList,O=void 0===_?[]:_,I=y.lastSyncedAt,S=v.error,w=c?lv:this.shouldWriteToLocalStorage?uv:dv,!S&&this.shouldWriteToLocalStorage&&this._syncLs({containerId:o,containerKey:f,lastSyncedAt:I,upsertList:b.map((function(e){return SS({data:e,assetBaseDataUrl:r})})),assetContainerIds:ys(new Set(b.reduce((function(e,t){var n=t.dataUrl,a=OS(n,r);return a&&e.push(a),e}),[]))),deleteList:O,getState:u,dispatch:d}),e.abrupt("return",{data:{upsertList:b,deleteList:O,fromLocalStorage:!1,firstLaunchBeaconSuffix:w},error:S});case 33:return e.prev=33,e.t0=e.catch(3),d(ti({message:"failed to call getUploadedImagesDiffAndSyncLS",error:e.t0})),e.abrupt("return",xS(e.t0));case 37:case"end":return e.stop()}}),e,this,[[3,33]])}))),function(e,t){return o.apply(this,arguments)})},{key:"_syncLs",value:(a=Up(Np().mark((function e(t){var n,r,a,o,i,s,c,l,u,d;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.containerKey,r=t.containerId,a=t.lastSyncedAt,o=t.upsertList,i=t.assetContainerIds,s=t.deleteList,c=t.getState,l=t.dispatch,u=o.length,d=s.length,!i||!i.length){e.next=12;break}return e.prev=4,e.next=7,this.setContainerManifest(r,{assetContainerIds:i});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),l(Jo({error:e.t0,message:"failed to sync asset container ids in container manifest",meta:AS(AS({},kS(c())),{},{assetContainerIds:i})}));case 12:return e.abrupt("return",Lv({containerKey:n,lastSyncedAt:a,upsertList:o,deleteList:s}).then((function(){var e=c(),t=TS(e),n=t.timeout,r=t.startedAt,a=Date.now()-r;a>n&&l(Jo({message:"sync ls successfully by using ".concat(a," ms"),meta:AS(AS({},kS(e)),{},{timeElapsed:a,upsertListLength:u,deleteListLength:d})}))})).catch((function(e){l(Jo({error:e,message:"failed to sync assets data in local storage",meta:AS(AS({},kS(c())),{},{upsertListLength:u,deleteListLength:d})}))})));case 13:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return a.apply(this,arguments)})},{key:"addUploadedImages",value:function(e){var t=this,n=e.containerId,r=e.originalFilename;return LS(this.api.images.upload,e,(function(e){var a=Xp(e.data,r);if(!t.shouldWriteToLocalStorage)return Promise.resolve({data:a});var o=t.getContainerKey(n),i=e.data.map((function(e){return AS(AS({},SS({data:e,containerKey:o})),{},{originalFilename:r})}));return Pv(i).then((function(){return{data:a}})).catch((function(){return{data:a}}))}))}},{key:"addImportedImages",value:function(e){var t=e.containerId,n=e.assets;if(!this.shouldWriteToLocalStorage||!Array.isArray(n))return Promise.resolve();var r=this.getContainerKey(t),a=n.map((function(e){return SS({data:e,containerKey:r})}));return Pv(a)}},{key:"updateUploadedImage",value:function(e){var t=this,n=e.containerId,r=e.assetId,a=e.update,o=void 0===a?{}:a;return LS(this.api.images.update,e,(function(){if(!t.shouldWriteToLocalStorage)return Promise.resolve({data:null});var e=t.getContainerKey(n);return Uv(r).then(function(){var t=Up(Np().mark((function t(n){var r;return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return r=(0,T.merge)(n,o.metadata),t.next=4,Rv(SS({data:r,containerKey:e}));case 4:return t.abrupt("return",{data:r});case 5:return t.abrupt("return",{data:null});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return{data:null}}))}))}},{key:"deleteUploadedImages",value:function(e){var t=this,n=e.rootDomain,r=e.extractedAssetContainerId,a=e.containerId,o=e.images,i=e.docs,s=e.appName;return LS(this.api.images.delete,{rootDomain:n,extractedAssetContainerId:r,containerId:a,images:o,appName:s},(function(e){var n={data:AS(AS({},e.data),{},{docs:i})};return t.shouldWriteToLocalStorage?Dv(i.map((function(e){return e.id}))).then((function(){return n})).catch((function(){return n})):Promise.resolve(n)})).catch((function(){return{data:{deletedDocumentNames:o,updatedWidgets:[],docs:i}}}))}},{key:"getContainerManifest",value:function(e){var t=this.getContainerKey(e);return Mv(t)}},{key:"setContainerManifest",value:(r=Up(Np().mark((function e(t,n){var r,a,o,i,s,c,l;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getContainerKey(t),e.next=3,this.getContainerManifest(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return a=e.t0,o=n.assetContainerIds,i=ft(n,["assetContainerIds"]),s=a.assetContainerIds,c=ft(a,["assetContainerIds"]),l=(0,T.merge)(c,i),(o||s)&&(l.assetContainerIds=ys(new Set([].concat(ys(s||[]),ys(o||[]))))),e.abrupt("return",Nv(AS(AS({},l),{},{containerKey:r})));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getVenturesFromLS",value:(n=Up(Np().mark((function e(t){var n,r;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.containerId,e.prev=1,e.next=4,this.getContainerManifest(n);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return r=e.t0,e.abrupt("return",{data:{ventures:r.ventures?r.ventures:[]}});case 11:return e.prev=11,e.t1=e.catch(1),e.abrupt("return",xS(e.t1));case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e){return n.apply(this,arguments)})},{key:"getVenturesFromApiAndSyncLS",value:(t=Up(Np().mark((function e(t){var n,r,a,o,i,s;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.containerId,r=t.rootDomain,a=t.assetContainerId,e.prev=1,e.next=4,LS(this.api.otherSites.loadVentures,{rootDomain:r,assetContainerId:a},(function(e){return{data:{ventures:e.data.ventures}}}));case 4:return o=e.sent,i=o.data.ventures,s=void 0===i?[]:i,this.setContainerManifest(n,{ventures:s}),e.abrupt("return",{data:{ventures:s}});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",xS(e.t0));case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return t.apply(this,arguments)})}]),e}();const DS=PS;function MS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function US(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BS=nn.IM_SET_VIDEO_FLYOUT;function HS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zS=mg.VENTURE_LOAD,WS=fg.SUCCESS,qS=nn.IM_API_STATUS_CHANGE,YS=mg.USER_GET,$S=fg.SUCCESS,XS=nn.IM_API_STATUS_CHANGE,QS=C(7322),ZS=Np().mark(rw);function JS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JS(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=n.type,a=n.payload,o=(a=void 0===a?{}:a).sourceType,i=a.action,s=a.notifyResult;if(r!==Pp||o!==e)return t;var c=s.changeState,l=s.inProgress,u=c?c(t):t;switch(i){case Ap:return ew(ew({},u),{},{isSearching:l});case xp:return ew(ew({},u),{},{isLoadingNext:l,isLoadingNextStock:l});default:return ew(ew({},u),{},{isSearching:!1,isLoadingNext:!1,isLoadingNextStock:!1,isLoadingStock:l})}}function nw(e,t){var n=e.getState,r=e.dispatch,a=t.payload,o=a.sourceKey,i=a.action,s=a.payload,c=Sf(o);switch(i){case Cp:c.get(s,{getState:n,dispatch:r});break;case Ap:c.search(s,{getState:n,dispatch:r});break;case xp:c.nextPage(s,{getState:n,dispatch:r})}}function rw(e){var t,n;return Np().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.getState,n=e.dispatch,r.next=3,(0,QS.takeLatest)("SOURCE_INVOKE",nw,{getState:t,dispatch:n});case 3:case"end":return r.stop()}}),ZS)}var aw=function(e){return tw.bind(null,e)};function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ow(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sw=nn.IM_TRACE_AUDIT_EVENT_START,cw=nn.IM_TRACE_AUDIT_EVENT_END,lw=nn.IM_SPAQ_INIT,uw=nn.IM_SPAQ_LOG_DONE,dw=aw(Lp),pw=aw(Dp);const fw=s({},Yt,(0,by.combineReducers)({api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(mg).reduce((function(e,t){return e[t]={status:fg.NOT_STARTED,error:{}},e}),{}),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===nn.IM_API_STATUS_CHANGE?function(e,t){var n=t.key,r=t.status,a=t.payload,o=void 0===a?{}:a;return e[n]={status:r,error:r===fg.FAIL?o:{}},e}(e,r):e},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k_(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case nn.IM_OPEN_VIDEO_SELECTOR_MODAL:case nn.IM_OPEN_MODAL:case nn.IM_STOCK_IMAGES_RESET:case nn.IM_STOCK_IMAGES_SEARCH:var a=(0,T.pick)(r,Object.keys(k_()));if(e.searchClient||(a.searchClient=new Ay),!e.api){var o=r.ventureId?"v2":"v1";a.api=S_(o)}var i=(0,T.merge)({},e,a);return(0,T.isEmpty)(a.mediaTypes)||(i.mediaTypes=a.mediaTypes),i;case nn.IM_API_STATUS_CHANGE:var s=r.status,c=r.key,l=r.payload;return c===mg.EXPERIMENTS_LOAD&&s===fg.SUCCESS?T_(T_({},e),{},{hivemind:l}):c===mg.VIDEOS_LOAD_USER?T_(T_({},e),{},{featureFlags:T_(T_({},e.featureFlags),{},{enableVimeo:s!==fg.FAIL})}):e;default:return e}},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"images",uploadProgress:-1,staged:{},uploaded:[],olsImages:[],isSearching:!1,uploadedImagesFetched:!1,isLoadingUploadedImages:!1,recentUploadedImages:[],uploadedOrder:Ye,fromLocalStorage:!1,fivSource:null,firstLaunchBeaconSuffix:"",isSavingMetadata:!1,mediaTypes:[De],showSlowUploadNotification:!1,gettyImageSpinnerType:null,deletedAllUploaded:!1,monitorImageProgress:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case N_:return function(e,t){var n=e.key,r=e.status,a=e.payload;if(r===fg.SUCCESS)switch(n){case x_:return function(e,t){var n=Array.isArray(t)?t:t.images,r=e.mediaTypes;(0,T.isEmpty)(n)||(n=(0,T.filter)(n,(function(e){return r.includes(e.mediaType)})));var a=t.deleteList,o=t.upsertList,i=t.fromLocalStorage,s=t.firstLaunchBeaconSuffix;if(i&&n&&(0,T.isEmpty)(n))return e;if(a&&o){if(!(0,T.isEmpty)(e.uploaded)&&(0,T.isEmpty)(a)&&(0,T.isEmpty)(o))return A_(A_({},e),{},{isLoadingUploadedImages:!1});var c=(0,T.keyBy)([].concat(ys(e.uploaded),ys(e.olsImages)),(function(e){return e.id}));a.forEach((function(e){Object.prototype.hasOwnProperty.call(c,e)&&delete c[e]})),o.forEach((function(e){var t=$p(e);r.includes(t.mediaType)&&(c[e.id]=t)})),n=(0,T.values)(c)}var l=kc(xc(n,e.uploadedOrder,eO));return A_(A_({},e),{},{uploaded:l.gcImages,uploadedImagesFetched:!0,isLoadingUploadedImages:!1,olsImages:l.olsImages,fromLocalStorage:i,firstLaunchBeaconSuffix:s})}(t,a);case L_:return tO(a,t);case M_:return A_(A_({},t),{},{isSavingMetadata:!1});case P_:return A_(A_({},t),{},{uploaded:(0,T.toArray)(a).concat(t.uploaded)})}if(r===fg.STARTED&&n===x_)return A_(A_({},t),{},{isLoadingUploadedImages:!0});if(r===fg.FAIL&&n===D_){var o=t.staged,i=J_(o);return A_(A_({},t),i)}return t}(r,e);case R_:return function(e,t){var n=Object.keys(e).length,r=t.stagingCount>0?t.hasExistingSelection:t.uploaded.some((function(e){return e.isSelected}));return A_(A_({},t),{},{staged:A_(A_({},t.staged),e),stagingCount:Object.keys(t.staged).length+n,uploadProgress:1,recentlyStagedCount:n,hasExistingSelection:r})}(r,e);case U_:return function(e,t){var n=e.requestId,r=e.uploadProgress;return t.staged[n]=A_(A_({},t.staged[n]),{},{uploadProgress:r}),A_(A_({},t),{},{uploadProgress:Z_(t.staged)})}(r,e);case j_:return A_(A_({},e),{},{selectedTabIndex:0,deletedAllUploaded:!1});case F_:return A_(A_({},e),{},{selectedTabIndex:r.tabIndex});case G_:return r&&r!==e.uploadedOrder?A_(A_({},e),{},{uploaded:xc(e.uploaded,r,eO),uploadedOrder:r,olsImages:xc(e.olsImages,r,eO)}):e;case V_:var a=r.newImages,o=r.requestId;return function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).requestId,a=t.uploadedOrder,o=(0,T.toArray)(e),i=a===Ye?o.concat(t.uploaded):t.uploaded.concat(o);n=Tc(o[0])?a===Ye?o.concat(t.olsImages):t.olsImages.concat(o):t.olsImages;var c=t.stagingCount-1,l=r?A_(A_({},t.staged),{},s({},r,A_(A_({},t.staged[r]),{},{uploadProgress:100}))):t.staged,u=J_(l);return A_(A_(A_({},t),u),{},{uploaded:i,olsImages:n,stagingCount:c,recentUploadedImages:e})}(a,e,{requestId:o});case B_:return tO(r,e);case H_:return nO(r,e,!0);case K_:return nO(r,e,!1);case W_:return A_(A_({},e),{},{showSlowUploadNotification:!0});case q_:return A_(A_({},e),{},{showSlowUploadNotification:!1});case Y_:return A_(A_({},e),{},{gettyImageSpinnerType:r});case $_:return A_(A_({},e),{},{gettyImageSpinnerType:null});case z_:var i=r.mediaTypes;return(0,T.isEmpty)(i)||i.length===e.mediaTypes.length&&i.every((function(t){return e.mediaTypes.includes(t)}))&&e.mediaTypes.every((function(e){return i.includes(e)}))?A_(A_({},e),{},{recentUploadedImages:[],recentlyStagedCount:0}):A_(A_({},e),{},{uploaded:[],mediaTypes:i,recentUploadedImages:[],recentlyStagedCount:0});case X_:return A_(A_({},e),{},{recentUploadedImages:[],recentlyStagedCount:0});case Q_:return A_(A_({},e),{},{monitorImageProgress:r});default:return e}},cache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categoryStockImages:{},categoryStockVideos:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===nn.IM_API_STATUS_CHANGE?function(e,t){var n=e.key,r=e.status,a=e.payload,o=e.requestArgs;if(r===fg.SUCCESS)switch(n){case mg.STOCK_IMAGES_LOAD:var i=jp({market:o[0].market,businessCategory:o[0].businessCategory}),c=(0,T.toArray)(a.result);return aO(aO({},t),{},{categoryStockImages:aO(aO({},t.categoryStockImages),{},s({},i,c))});case mg.STOCK_VIDEOS_LOAD:var l=Fp({market:o[0].market,businessCategory:o[0].businessCategory}),u=(0,T.toArray)(a.result);return aO(aO({},t),{},{categoryStockVideos:aO(aO({},t.categoryStockVideos),{},s({},l,u))})}return t}(r,e):e},appOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gO(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case mO:case fO:!function(e,t){t.tracker&&!e.tracker&&(t.tracker.updateEventMap(lO),t.tracker.trackEvent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=(0,T.merge)({appName:t.appName,Application:t.appName,placement:t.placement,selectedMediaType:t.selectedMediaType,device:hO},n);t.tracker.track(e,r)}})}(e,r);var a=(0,T.pick)(r,Object.keys(gO()));return(0,T.merge)({},e,a);case pO:return function(e,t){var n=e.key,r=e.status,a=e.payload;if(r!==dO)return t;if(n===uO){var o=a.find((function(e){return"HEADER"===e.type}));return(0,T.merge)({},t,{headerWidget:o})}return t}(r,e);default:return e}},otherSites:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"otherSites",websites:[],websitesLoaded:!1,selectedWebsiteId:null,isLoadingImages:!1,isCopyingImages:!1,hasPhotoshoot:!1,hasOthersites:!1,currentMaxWebsiteViewableIndex:99,mediaTypes:[De],currentVentureId:null},n=arguments.length>1?arguments[1]:void 0,r=n.type,o=n.payload;switch(r){case AO:return function(e,t){var n=e.key,r=e.status,o=e.payload,i=e.requestArgs;if(r===jO)return function(e,t){var n=e.requestArgs;switch(e.key){case CO:return yO(yO({},t),{},{isCopyingImages:!1});case OO:case TO:var r=n[0].containerId,a=t.websites.map((function(e){return e.id!==r?e:yO(yO({},e),{},{imagesLoaded:!0,images:[]})}));return yO(yO({},t),{},{websites:a,isLoadingImages:!1});default:return t}}({key:n,requestArgs:i},t);if(n===TO||n===OO||n===kO)return function(e,t){var n=e.status,r=e.payload,a=e.requestArgs;if(n===FO)return yO(yO({},t),{},{isLoadingImages:!0});if(n===UO){var o=t.selectedWebsiteId,i=a[0].containerId,s=t.mediaTypes,c=t.websites.map((function(e){if(e.id!==i)return e;se.includes(e.type)&&(o=e.id);var t=(0,T.isEmpty)(s)?r:r.filter((function(e){return s.includes(e.mediaType)}));return yO(yO({},e),{},{imagesLoaded:!0,images:t})}));return yO(yO({},t),{},{websites:c,selectedWebsiteId:o,isLoadingImages:!1})}return yO(yO({},t),{},{isLoadingImages:!1})}({status:r,payload:o,requestArgs:i},t);if(r!==UO)return t;switch(n){case _O:return yO(yO({},t),{},{currentVentureId:o.id});case IO:var c=o.filter((function(e){return e.id!==i[0].containerId})).sort(GO),l=-1!==c.findIndex((function(e){return se.includes(e.type)})),u=-1!==c.findIndex((function(e){return e.type===q}));return yO(yO({},t),{},{websites:c,websitesLoaded:!0,hasPhotoshoot:u,hasOthersites:l});case SO:var d=o.ventures&&o.ventures.filter((function(e){return e.id!==t.currentVentureId})).map((function(e){return yO(yO({},e),{},{type:U})}));if(d){var p=function(e,t){var n,r=new Map(e.map((function(e){return[e.id,e]}))),o=new Map(t.map((function(e){return[e.id,e]}))),i=[],c=new Map,l=e.filter((function(e){return!o.has(e.id)})).map((function(e){return e.id})),u=EO(o);try{var d=function(){var e=a(n.value,2),t=e[0],o=e[1];r.has(t)?VO.forEach((function(e){o[e]!==r.get(t)[e]&&c.set(t,yO(s({},e,o[e]),c.get(t)))})):i.push(o)};for(u.s();!(n=u.n()).done;)d()}catch(e){u.e(e)}finally{u.f()}return{venturesToAdd:i,venturesToUpdate:c,ventureIdsToRemove:l}}(t.websites.filter((function(e){return e.type===U})),d),f=p.venturesToAdd,m=p.venturesToUpdate,h=p.ventureIdsToRemove;if((0,T.isEmpty)(f)&&(0,T.isEmpty)(m)&&(0,T.isEmpty)(h))return yO(yO({},t),{},{websitesLoaded:!0,hasOthersites:!(0,T.isEmpty)(t.websites)});var g,v=t.websites.filter((function(e){return!h.includes(e.id)})),y=EO(m);try{var E=function(){for(var e=a(g.value,2),t=e[0],n=e[1],r=v.find((function(e){return e.id===t})),o=0,i=Object.entries(n);o<i.length;o++){var s=a(i[o],2),c=s[0],l=s[1];r[c]=l}};for(y.s();!(g=y.n()).done;)E()}catch(e){y.e(e)}finally{y.f()}return v=[].concat(ys(v),ys(f)),yO(yO({},t),{},{websites:v,websitesLoaded:!0,hasOthersites:!(0,T.isEmpty)(v)})}return yO(yO({},t),{},{websitesLoaded:!0,hasOthersites:!(0,T.isEmpty)(t.websites)});case wO:return(0,T.isEmpty)(o)?yO(yO({},t),{},{websitesLoaded:!0,hasOthersites:!(0,T.isEmpty)(t.websites)}):yO(yO({},t),{},{websites:[].concat(ys(t.websites),ys(o.sort(GO))),websitesLoaded:!0,hasOthersites:!0});default:return t}}(o,t);case xO:return yO(yO({},t),{},{selectedWebsiteId:o.containerId});case LO:return yO(yO({},t),{},{isCopyingImages:!0});case PO:return yO(yO({},t),{},{isCopyingImages:!1});case DO:return yO(yO({},t),{},{hasOthersites:o.hasOthersites,hasPhotoshoot:o.hasPhotoshoot});case MO:if(t.currentMaxWebsiteViewableIndex===t.websites.length-1)return t;var i=Math.min(t.websites.length-1,t.currentMaxWebsiteViewableIndex+100);return yO(yO({},t),{},{currentMaxWebsiteViewableIndex:i});case NO:var c=o.mediaTypes;return yO(yO({},t),{},{mediaTypes:(0,T.isEmpty)(c)?t.mediaTypes:c});case RO:return(null===(e=t.websites.find((function(e){var n=e.id;return t.selectedWebsiteId===n})))||void 0===e?void 0:e.isLoadingImages)?t:yO(yO({},t),{},{websites:t.websites.map((function(e){return yO(yO({},e),{},{images:e.id===t.selectedWebsiteId?e.images.map((function(e){return yO(yO({},e),{},{hasRenderError:e.id===o.id||e.hasRenderError})})):e.images})}))});default:return t}},socialMedia:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(s(e={key:"socialMedia"},K,{auth:{accessToken:"",pageAccessToken:"",authUrl:"",accessTokenInitFetched:!1},selectedPageId:null,selectedAlbumId:null,pages:{},coverPhotos:[],isLoading:!1,isLoadingNextPhotos:!1,isLoadingAlbum:!1}),s(e,z,{connected:null,authorized:null,posts:[],nextPostsPageUrl:"",name:"",listingId:"",isLoading:!1,hasPostsFetched:!1}),s(e,W,OI),s(e,"selectedProvider",K),e),n=arguments.length>1?arguments[1]:void 0,r=n.type,a=n.payload;switch(r){case nI:var o=a.socialProvider,i=a.accessToken;return(0,T.merge)({},t,s({},o,{auth:{accessToken:i}}));case rI:var c=a.socialProvider,l=a.pageAccessToken;return(0,T.merge)({},t,s({},c,{auth:{pageAccessToken:l}}));case tI:var u=a.socialProvider,d=a.authUrl;return(0,T.merge)({},t,s({},u,{auth:{authUrl:d}}));case oI:var p=a.pageId;return(0,T.merge)({},t,s({},K,{selectedPageId:p,selectedAlbumId:null}));case iI:var f=a.albumId;return(0,T.merge)({},t,s({},K,{selectedAlbumId:f}));case aI:return function(e,t){var n=e.key,r=e.status,a=e.payload,o=e.requestArgs;if(r===JO)switch(n){case WO:return t[K].selectedAlbumId?(0,T.merge)({},t,s({},K,{isLoadingNextPhotos:!0})):(0,T.merge)({},t,s({},K,{isLoadingAlbum:!0}));case QO:var i=o[0].socialProvider;return t[i].auth.accessTokenInitFetched?t:(0,T.merge)({},t,s({},i,{auth:{accessTokenInitFetched:!0}}));default:return t}if(r!==ZO)return t;switch(n){case KO:var c=a.data,l=void 0===c?[]:c;return(0,T.merge)({},t,s({},K,{pagesLoaded:!0,pages:(0,T.keyBy)(l,(function(e){return e.id}))}));case zO:var u=o[0].pageId,d=t[K],p=d.pages,f=d.coverPhotos,m=a.data,h=void 0===m?[]:m,g=a.paging,v=(g=void 0===g?{}:g).next,y=g.cursors,E=(y=void 0===y?{}:y).after,b=Object.assign(p[u],{albumsLoaded:!0,albumsAllLoaded:!v,albums:(0,T.reduce)(h,(function(e,t){return e[t.id]={id:t.id,name:t.name,count:t.count,coverPhoto:t.picture.data&&t.picture.data.url,photos:[]},t.picture.data&&f.push({imageUrl:t.picture.data.url}),e}),{})});E&&(b.after=E);var _=HO(HO({},p),{},s({},u,b));return(0,T.merge)({},t,s({},K,{pages:_,selectedPageId:u,selectedAlbumId:null,coverPhotos:f}));case WO:var O=o[0].albumId,I=t[K],S=I.selectedPageId,w=I.pages;if(!S)return t;var k=a.data,C=void 0===k?{}:k,A=a.paging,x=(A=void 0===A?{}:A).next,L=A.cursors,P=(L=void 0===L?{}:L).after,D=P?HO(HO({},w[S].albums[O].photos),C):C,M=Object.keys(D).map((function(e){return D[e]})),N=HO(HO({},w[S].albums[O]),{},{photosLoaded:!0,photosAllLoaded:!x,photos:M});P&&(N.after=P);var R=(0,T.merge)({},w,s({},S,{albums:s({},O,N)}));return(0,T.merge)({},t,s({},K,{pages:R,selectedAlbumId:O,isLoadingNextPhotos:!1,isLoadingAlbum:!1}));case qO:var U=a.posts,j=a.next;return(0,T.merge)({},t,s({},z,{posts:t[z].posts.concat(U),hasPostsFetched:!0,nextPostsPageUrl:j||""}));case YO:var F=(0,T.get)(a,"payload.ok",null);return(0,T.merge)({},t,s({},z,{authorized:F}));case $O:var G=(0,T.get)(a,"payload.ok",null);return(0,T.merge)({},t,s({},z,{connected:G}));case XO:var V=a.payload,B=V.additionalData.username,H=V.listingId;return(0,T.merge)({},t,s({},z,{name:B,listingId:H}));default:return t}}(a,t);case sI:return(0,T.merge)({},t,s({},K,{isLoading:!0}));case cI:return(0,T.merge)({},t,s({},K,{isLoading:!1}));case lI:return HO(HO({},t),{},{selectedProvider:a.socialProvider});case uI:return(0,T.merge)({},t,s({},z,{isLoading:!0}));case dI:return(0,T.merge)({},t,s({},z,{isLoading:!1}));case pI:return(0,T.merge)({},t,s({},W,{isLoading:!0}));case fI:return(0,T.merge)({},t,s({},W,{isLoading:!1}));case mI:return(0,T.merge)({},t,s({},W,{auth:a}));case hI:return(0,T.merge)({},t,s({},W,{albums:a}));case gI:return(0,T.merge)({},t,s({},W,{mediaItems:a}));case vI:var m=a.selectedAlbumId,h=(0,T.get)(t,[W,"albumMediaItems",m]);return(0,T.merge)({},t,s({},W,{selectedAlbumId:m,albumMediaItems:HO({},!h&&m?s({},m,OI.albumMediaItems.ID):{})}));case yI:var g=(0,T.get)(t,[W,"selectedAlbumId"]);return g?(0,T.merge)({},t,s({},W,{albumMediaItems:s({},g,a)})):t;case EI:var v=(0,T.get)(t,[W,"allMediaItems"]),y=a.newMediaItems,E=v.concat(y).reduce((function(e,t){return e.some((function(e){return e.id===t.id}))||e.push(t),e}),[]);return(0,T.merge)({},t,s({},W,{allMediaItems:E}));case bI:return a.status===eI?(0,T.merge)({},t,s({},W,{auth:HO(HO({},t[W].auth),{},{disconnectStatus:eI})})):(0,T.merge)({},t,s({},W,HO(HO({},OI),{},{auth:HO(HO({},OI.auth),{},{disconnectStatus:ZO})})));case _I:return(0,T.merge)({},t,s({},W,{auth:HO(HO({},t[W].auth),{},{disconnectStatus:null})}));default:return t}},planFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{planFeatures:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===wI?function(e,t){var n=e.key,r=e.status,a=e.payload;return r!==SI?t:n===II?(0,T.merge)({},t,{planFeatures:a}):t}(r,e):e},selection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CI(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case nn.IM_SELECTION_CLEAR_ALL:case nn.IM_MODAL_HIDE:return CI();case nn.IM_API_STATUS_CHANGE:var a=r.key,o=r.status;return a===mg.IMAGES_DELETE&&o===fg.SUCCESS?CI():e;case nn.IM_TOGGLE_FIV:var i=r.index;return kI(kI({},e),{},{fivIndex:i});case nn.IM_SELECTION_MULTI_SELECT:var s=new Map(e.selectedItemsById),c=r;c.forEach((function(e){s.delete(e.id)||s.set(e.id,e)}));var l=c[c.length-1],u=s.has(l.id)?l:null;return kI(kI({},e),{},{selectedItemsById:s,anchor:u});case nn.IM_SELECTION_RANGE_SELECT:var d=r.items,p=r.selectionLimit,f=r.allowUnlimitedSelect,m=e.selectedItemsById;if(!f&&p>=0&&m.size===p)return e;for(var h=d[d.length-1],g=!m.has(h.id),v=new Map(m),y=null,E=0;E<d.length&&(f||-1===p||v.size<p);E++)g?(v.set(d[E].id,d[E]),y=d[E]):v.delete(d[E].id);return kI(kI({},e),{},{selectedItemsById:v,anchor:g?y:null});default:return e}},perfBeacon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFirstBeacon:!0,isPerfEndTracked:!1,isLoadingVenture:null};switch((arguments.length>1?arguments[1]:void 0).type){case nn.IM_PERF_TRACK_END_DONE:return xI(xI({},e),{},{isPerfEndTracked:!0,isFirstBeacon:!1});case nn.IM_OPEN_MODAL:return xI(xI({},e),{},{isPerfEndTracked:!1});case nn.IM_PERF_LOAD_VENTURE:return xI(xI({},e),{},{isLoadingVenture:!0});case nn.IM_PERF_LOAD_VENTURE_END:return xI(xI({},e),{},{isLoadingVenture:!1});default:return e}},videos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"videos",uploadedVideos:[],uploadedVideosFetched:!1,uploadLink:null,currentVideoFileUpload:null,vimeoDraftCount:null,vimeoCreateCount:null,isSearching:!1,isLoadingMoreVideos:!1,isRefreshingVideos:!1,stockVideos:[],videoUploadProgress:0,totalVideosLoaded:0,totalVideosInAccount:0,vimeoUser:{},uploadedVideosSearchQuery:"",timeToHideUploading:6e4,vimeoModalType:wl,editVideoId:null,isVimeoLoading:!0,recentlyUploadedVideos:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case WI:return function(e,t){var n=e.key,r=e.status,a=e.payload,o=e.requestArgs,i=void 0===o?[]:o;if(r===fg.SUCCESS)switch(n){case RI:case UI:return function(e,t,n){if(!e)return NI({},n);var r=e.videos;r&&Array.isArray(r)||(r=[]);var a=cS(r,n.timeToHideUploading),o=NI(NI({},n),{},{uploadedVideos:lS(t===RI?a:n.uploadedVideos.concat(a),Ye),uploadedVideosFetched:!0,isLoadingMoreVideos:!1,isVimeoLoading:!1}),i=r.length-a.length;return o.totalVideosLoaded+=a.length,t===RI&&(o.totalVideosInAccount=e.paging.total),o.totalVideosInAccount-=i,o}(a,n,t);case FI:return NI(NI({},t),{},{vimeoUser:{accountType:a.account,createdTime:a.created_time,managedUserId:a.managedUserId,link:a.link,uploadQuota:a.upload_quota,convertedOn:a.converted_on},reconnectRequired:!1});case jI:return NI(NI({},t),{},{vimeoCreateCount:a.createdVideos,vimeoDraftCount:a.drafts});case GI:var s=a.upload_link;return NI(NI({},t),{},{uploadLink:s});case VI:case BI:var c=(0,T.toArray)(a.result);return NI(NI({},t),{},{stockVideos:c,stockVideosQuery:i[0]&&i[0].query||"",uploadedVideosFetched:!0,isSearching:!1});case HI:return function(e,t){if(!e||!e.videos||!Array.isArray(e.videos)||(0,T.isEmpty)(e.videos))return NI({},t);var n=e.videos,r=cS(n,t.timeToHideUploading);if((0,T.isEmpty)(r))return NI({},t);var a=r[0],o=t.uploadedVideos.findIndex((function(e){return e.id===a.id})),i=t.uploadedVideos.slice();return i[o]=a,NI(NI({},t),{},{uploadedVideos:i})}(a,t);case KI:var l=t.uploadedVideos.findIndex((function(e){return e.id===a.videoId})),u=ys(t.uploadedVideos);return u[l].privacy.view=a.privacy.view,NI(NI({},t),{},{uploadedVideos:u});case zI:var d=t.uploadedVideos.filter((function(e){return e.id!==a.videoId}));return NI(NI({},t),{},{uploadedVideos:d,totalVideosLoaded:t.totalVideosLoaded-1,totalVideosInAccount:t.totalVideosInAccount-1});default:return t}if(r===fg.STARTED)switch(n){case RI:return NI(NI({},t),{},{isVimeoLoading:!0});case UI:return NI(NI({},t),{},{isLoadingMoreVideos:!0});case BI:return NI(NI({},t),{},{isSearching:!0});default:return t}if(r===fg.FAIL){var p={uploadedVideosFetched:!0,isLoadingMoreVideos:!1,isVimeoLoading:!1};switch(n){case VI:return NI(NI({},t),{},{stockVideos:[],stockVideosQuery:i[0]&&i[0].query||"",uploadedVideosFetched:!0,isSearching:!1});case RI:case UI:return NI(NI({},t),p);case FI:var f=a&&403===a.status;return NI(NI(NI({},t),p),{},{reconnectRequired:f});case HI:return function(e,t){var n=e.uploadedVideos.findIndex((function(e){var n;return e.id===(t[0]&&(null===(n=t[0])||void 0===n?void 0:n.videoId)||"")}));if(-1===n)return e;var r=ys(e.uploadedVideos);return r[n].status=Gs,NI(NI({},e),{},{uploadedVideos:r})}(t,i);default:return t}}return t}(r,e);case ZI:return NI(NI({},e),{},{stockVideosQuery:""});case qI:return NI(NI({},e),{},{stockVideos:r,stockVideoNextPageUrl:""});case YI:return NI(NI({},e),{},{videoUploadProgress:r});case $I:var a=NI(NI({},e),{},{videoUploadProgress:0,currentVideoFileUpload:null,uploadLink:null,recentlyUploadedVideos:[].concat(ys(e.recentlyUploadedVideos),[r])});if(!r)return a;var o=r.videoSize,i=function(e,t){var n=sS(t);return e.uploadedVideos.find((function(e){return e.id===n.id}))?{}:{uploadedVideos:[n].concat(e.uploadedVideos),totalVideosInAccount:e.totalVideosInAccount+1,totalVideosLoaded:e.totalVideosLoaded+1}}(e,r.stagingVideo),s=function(e,t){var n=e.vimeoUser.uploadQuota;return t&&n?(0,T.merge)({},n,{lifetime:{free:uS(n.lifetime.free)?null:n.lifetime.free-t,used:uS(n.lifetime.used)?null:n.lifetime.used+t},periodic:{free:uS(n.periodic.free)?null:n.periodic.free-t,used:uS(n.periodic.used)?null:n.periodic.used+t},space:{free:uS(n.space.free)?null:n.space.free-t,used:uS(n.space.used)?null:n.space.used+t}}):n}(e,o);return NI(NI(NI({},a),i),{},{vimeoUser:NI(NI({},e.vimeoUser),{},{uploadQuota:s})});case XI:return NI(NI({},e),{},{uploadedVideosSearchQuery:r.search,stockVideosQuery:r.search});case oS:return NI(NI({},e),{},{currentVideoFileUpload:r});case QI:return NI(NI({},e),{},{editVideoId:r});case JI:return NI(NI({},e),{},{isRefreshingVideos:!0});case eS:return NI(NI({},e),{},{isRefreshingVideos:!1});case tS:return NI(NI({},e),{},{timeToHideUploading:r.timeToHideUploading,recentlyUploadedVideos:[]});case nS:return NI(NI({},e),{},{vimeoModalType:r.modalType,editVideoId:r.videoId});case rS:return NI(NI({},e),{},{vimeoModalType:wl});case aS:return NI(NI({},e),{},{uploadedVideos:lS(e.uploadedVideos,r)});case iS:return NI(NI({},e),{},{recentlyUploadedVideos:[]});default:return e}},products:pw,search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case fS:var a=r.searchText;return pS(pS({},e),{},{pendingSearchText:a});case mS:var o=r.searchResults;return pS(pS({},e),{},{searchResults:o,searchText:e.pendingSearchText,pendingSearchText:null});case vS:return pS(pS({},e),{},{searchText:r.search});case hS:case gS:return{};default:return e}},collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedCollection:ge},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;return n===nn.IM_COLLECTION_VIEW_SET_CURRENT?ES(ES({},e),{},{selectedCollection:r}):e},appContext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{api:null,localDataStore:null,assetContainerId:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case nn.IM_OPEN_VIDEO_SELECTOR_MODAL:case nn.IM_OPEN_MODAL:if(e.api&&!r.forceReloadApiClient)return e;var a=r.ventureId,o=r.websiteId,i=r.accountId,s=r.urls.assetBaseUrl,c=a||o||i,l=S_({assetByContainerVersion:a?"v2":"v1",assetContainerId:c});return{api:l,localDataStore:new DS({api:l,assetBaseUrl:s,assetContainerId:c}),assetContainerId:c};case nn.IM_ASSET_CONTAINER_ID_SET:return r.assetContainerId===e.assetContainerId?e:NS(NS({},e),{},{assetContainerId:r.assetContainerId});default:return e}},assetDimensions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;return n===nn.IM_DIMENSIONS_BATCH_RETRIEVED?r.reduce((function(e,t){var n=t.id,r=t.localDimensions;return US(US({},e),{},s({},n,r))}),e):e},debug:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startedAt:0,timeout:0,stack:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case nn.IM_OPEN_MODAL:return FS(FS({},e),{},{timeout:(0,T.get)(r,"debug.timeoutBeforeLog",2e4),startedAt:Date.now()});case nn.IM_DEBUG:var a=Date.now()-e.startedAt;return"string"==typeof r?FS(FS({},e),{},{stack:e.stack.concat({timeElapsed:a,message:r})}):"object"===o(r)?FS(FS({},e),{},{stack:e.stack.concat(FS({timeElapsed:a},r))}):e;default:return e}},onboarding:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flyoutIsOpen:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===BS?VS(VS({},e),{},{flyoutIsOpen:r}):e},venture:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ventureId:null,businessName:null,inferredLogos:null,inferredBusinessInfo:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=(r=void 0===r?{}:r).key,o=r.status,i=r.payload;return n===qS&&a===zS&&o===WS?KS(KS({},e),{},{ventureId:i.id||e.ventureId,businessName:i.name||e.businessName,inferredLogos:i.inferredLogos||e.inferredLogos,inferredBusinessInfo:i.inferredBusinessInfo||e.inferredBusinessInfo}):e},stockImages:dw,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=(r=void 0===r?{}:r).key,o=r.status,i=r.payload;return n===XS&&a===YS&&o===$S?i:e},spaq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{server:{},client:{enabled:!1,timeout:1e4,traces:{}},logged:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case lw:return iw(iw({},e),{},{server:iw({},r.server),client:iw(iw({},e.client),r.client)});case sw:var a,o=r.name,i=ft(r,["name"]);return o?((null===(a=e.client.traces)||void 0===a?void 0:a[o])||(e.client.traces[o]=iw(iw({},i),{},{start:Date.now()})),e):e;case cw:var s,c,l=r.name,u=ft(r,["name"]);if(!l)return e;if(!(null===(s=e.client.traces)||void 0===s||null===(c=s[l])||void 0===c?void 0:c.end)){var d=Date.now();e.client.traces[l]=iw(iw(iw({},e.client.traces[l]),u),{},{end:d,timeConsumed:d-e.client.traces[l].start})}return e;case uw:return iw(iw({},e),{},{logged:!0});default:return e}}}));var mw,hw=C(8183),gw=C.n(hw),vw=Np().mark(Sw),yw=mg.VIDEOS_LOAD_USER,Ew=mg.VIDEOS_LOAD,bw=mg.VIDEOS_LOAD_MORE,_w=mg.VIDEOS_CONVERT_USER,Ow=mg.VIDEOS_CREATE_UPLOAD,Iw=mg.GC_SITE_IMAGES_LOAD;function Sw(e,t,n){var r,a,o,i,s;return Np().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r=e.key,a=e.makeRequest,c.prev=1,c.next=4,(0,QS.put)(Sa(r,fg.STARTED,{},[t]));case 4:return c.next=6,(0,QS.call)(a,t||null);case 6:return o=c.sent,i=o.data,"function"==typeof n&&(i=n(i)),c.next=11,(0,QS.put)(Sa(r,fg.SUCCESS,i,[t]));case 11:return c.abrupt("return",{data:i});case 14:if(c.prev=14,c.t0=c.catch(1),s=r.split("_")[0],!(401===c.t0.status&&[yw,Ew,bw,_w,Ow,Iw].includes(r)||["SSO","FB","GOOGLE"].includes(s))){c.next=21;break}return c.next=21,(0,QS.put)(Jo({error:c.t0,message:"Received ".concat(c.t0.status||"unknown"," status from failed request of key ").concat(r)}));case 21:return c.next=23,(0,QS.put)(Sa(r,fg.FAIL,c.t0,[t]));case 23:return c.abrupt("return",{data:{},error:c.t0});case 24:case"end":return c.stop()}}),vw,null,[[1,14]])}var ww=(s(mw={},De,"imageCount"),s(mw,Ne,"pdfCount"),s(mw,Me,"videoCount"),s(mw,Re,"documentCount"),s(mw,Fe,"productCount"),s(mw,"OTHER","unCategorized"),mw);const Tw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sc;return function(n){if(t!==sc)return function(e){var t;if(!Array.isArray(e))return{emptyState:!0,totalCount:0};for(var n=0,r=0,a=0,o=0,i=0,c=e.length,l=0;l<c;l++)switch(e[l].mediaType){case De:n++;break;case Me:a++;break;case Ne:r++;break;case Re:o++;break;default:i++}return s(t={emptyState:0===e.length,totalCount:c},ww.IMAGE,n),s(t,ww.VIDEO,a),s(t,ww.PDF,r),s(t,ww.WORD,o),s(t,ww.OTHER,i),t}(n);switch(e){case Me:return function(e){var t,n;if(!e)return s(n={emptyState:!0},ww.VIDEO,0),s(n,"totalCount",0),n;var r=e.totalVideosInAccount,a=e.hasUploaded,o=e.vimeoUser,i=void 0===o?{}:o,c=e.vimeoCreateCount,l=e.vimeoDraftCount;return s(t={emptyState:!a},ww.VIDEO,r),s(t,"totalCount",r),s(t,"vimeoUserConverted",Boolean(i.convertedOn)),s(t,"vimeoCreateCount",c),s(t,"vimeoDraftCount",l),s(t,"vimeoUploadCount",(r||0)-(c||0)),t}(n);case Fe:return s(r={emptyState:0===(a=n.totalCount)},ww[Fe],a),s(r,"totalCount",a),r;default:return function(e,t){var n,r=Array.isArray(e)?e.length:0;return s(n={emptyState:0===r},ww[t],r),s(n,"totalCount",r),n}(n,e)}var r,a}};var kw=Np().mark(Mw),Cw=Np().mark(Nw),Aw=Np().mark(Rw),xw=Np().mark(Uw),Lw=Np().mark(jw);function Pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pw(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mw(e){var t,n,r,a,o,i,c,l,u,d,p,f,m,h,g,v,y,E,b,_;return Np().wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return n=e.payload,r=n.eventName,a=n.data,o=void 0===a?{}:a,i=n.perfStart,c=void 0!==i&&i,l=n.perfEnd,u=void 0!==l&&l,O.next=3,(0,QS.select)(Uc);case 3:if(d=O.sent,(p=d.tracker)&&p.trackEvent){O.next=7;break}return O.abrupt("return");case 7:return O.next=9,(0,QS.select)(Rc);case 9:return f=O.sent,m=f.featureFlags,h=void 0===m?{}:m,g=f.placement,O.next=15,(0,QS.select)(Kc);case 15:return v=O.sent,y=v.uploadedImages,E=v.hasUploaded,O.next=20,(0,QS.select)(od);case 20:b=O.sent,_=Object.keys(b).reduce((function(e,t){return Dw(Dw({},e),{},s({},t,b[t].cohortId))}),{}),p.trackEvent(r,Dw(Dw((t={"Enabled BB Feature Flags":Object.keys(h).filter((function(e){return h[e]}))},s(t,"total file count",(0,T.get)(y,"length","N/A")),s(t,"has uploaded",Boolean(E)),s(t,"placement",g),t),_),o),c,u);case 23:case"end":return O.stop()}}),kw)}function Nw(){var e,t,n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,QS.select)(Rc);case 2:if(e=f.sent,t=e.mediaTypes,n=e.selectedMediaType,r=e.renderMode,a=e.isWebsitelessContainer,!zt(t,Me)){f.next=13;break}return f.next=10,(0,QS.select)(Jc);case 10:o=f.sent,f.next=30;break;case 13:if(!zt(t,Fe)){f.next=19;break}return f.next=16,(0,QS.select)(Gc);case 16:o=f.sent,f.next=30;break;case 19:return f.next=21,(0,QS.select)(Kc);case 21:if(i=f.sent,s=i.uploadedImages,o=s,!Wt(t)){f.next=30;break}return f.next=27,(0,QS.select)(Jc);case 27:c=f.sent,l=c.uploadedVideos,o=o.concat(l);case 30:if(u=Tw(n,r)(o),d=Dw({"total uploads":u.totalCount,indexedDBSupported:!!window.indexedDB,selectedMediaType:t.length>1?t:n,isWebsitelessContainer:a},u),!zt(t,De)){f.next=40;break}return f.next=35,(0,QS.select)(el);case 35:return p=f.sent,d["over images count"]=p.length,f.next=39,(0,QS.select)(al);case 39:d.hasPhotoshoot=f.sent.hasPhotoshoot;case 40:return d.mediaContext=r===ic?"mixed":d.selectedMediaType,f.next=43,(0,QS.call)(Mw,{payload:{eventName:"IM_TRACK_OPEN_MODAL",data:d}});case 43:case"end":return f.stop()}}),Cw)}function Rw(){var e,t,n;return Np().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,QS.select)(Kc);case 2:return e=r.sent,t=e.uploadedImages,n=t.length>0?"IM_TRACK_SEARCH_RESULTS_FOUND":"IM_TRACK_SEARCH_NO_RESULTS",r.next=7,(0,QS.call)(Mw,{payload:{eventName:n}});case 7:case"end":return r.stop()}}),Aw)}function Uw(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.delay)(e);case 2:return t.next=4,(0,QS.call)(Nw);case 4:case"end":return t.stop()}}),xw)}function jw(e){var t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,QS.takeEvery)(nn.IM_TRACK,Mw);case 2:return a.next=4,(0,QS.takeLatest)(nn.IM_ASSET_SEARCH_DONE,Rw);case 4:if(t=e.bbConfig,n=(t=void 0===t?{}:t).usageTrackingDelay,r=void 0===n?5e3:n,!zt(e.mediaTypes,Fe)){a.next=10;break}return a.next=10,(0,QS.takeLatest)(nn.IM_TRACK_USAGE,Uw,r);case 10:case"end":return a.stop()}}),Lw)}var Fw=Np().mark(Bw);function Gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gw(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bw(e,t){var n,r,a,o,i,s,c,l=arguments;return Np().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:for(n=l.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=l[a];return u.next=3,(0,QS.put)(Sa(e,fg.STARTED,{},r));case 3:return u.next=5,(0,QS.put)(ti("call ".concat(e," from local storage started")));case 5:return u.next=7,QS.call.apply(void 0,[t].concat(r));case 7:if(o=u.sent,i=o.error,s=o.data,!i){u.next=30;break}return c="call ".concat(e," api from local storage failed"),u.next=13,(0,QS.put)(Sa(e,fg.FAIL,i,r));case 13:return u.next=15,(0,QS.put)(ti({message:c,error:i}));case 15:return u.t0=QS.put,u.t1=Jo,u.t2=i,u.t3=c,u.t4=Vw,u.t5={},u.next=23,(0,QS.select)(kS);case 23:return u.t6=u.sent,u.t7=(0,u.t4)(u.t5,u.t6),u.t8={error:u.t2,message:u.t3,meta:u.t7},u.t9=(0,u.t1)(u.t8),u.next=29,(0,u.t0)(u.t9);case 29:case 34:return u.abrupt("return",o);case 30:return u.next=32,(0,QS.put)(Sa(e,fg.SUCCESS,s,r));case 32:return u.next=34,(0,QS.put)(ti("call ".concat(e," from local storage successfully")));case 35:case"end":return u.stop()}}),Fw)}var Hw,Kw=Np().mark(zw);function zw(e,t,n){var r,a=arguments;return Np().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=a.length>3&&void 0!==a[3]?a[3]:2e3,o.next=3,setTimeout((function(){S().addGrowlMessage({title:l().createElement(p.IntlProvider,e,t),children:l().createElement(p.IntlProvider,e,n),emphasis:"warning",lifetime:r,id:"Media library growl"})}),10);case 3:case"end":return o.stop()}}),Kw)}function Ww(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function qw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Yw=Np().mark(RT),$w=Np().mark(UT),Xw=Np().mark(jT),Qw=Np().mark(FT),Zw=Np().mark(GT),Jw=Np().mark(VT),eT=Np().mark(BT),tT=Np().mark(HT),nT=Np().mark(KT),rT=Np().mark(zT),aT=Np().mark(WT),oT=Np().mark(qT),iT=Np().mark(YT),sT=Np().mark($T),cT=Np().mark(XT),lT=Np().mark(ek),uT=Np().mark(tk),dT=Np().mark(nk),pT=Np().mark(rk),fT=Np().mark(ak),mT=Np().mark(ok),hT=nn.IM_API_STATUS_CHANGE,gT=nn.IM_VIDEOS_UPLOAD,vT=nn.IM_VIDEOS_DELETE,yT=nn.IM_VIDEOS_LOAD,ET=nn.IM_VIDEOS_LOAD_MORE,bT=nn.IM_VIDEOS_GET_USER,_T=nn.IM_VIDEOS_SEARCH,OT=nn.IM_VIMEO_GET_LINK,IT=nn.IM_VIDEO_REFRESH,ST=nn.IM_VIDEOS_TRIGGER_LOAD_MORE,wT=nn.IM_VIDEOS_USER_RECONNECT,TT=nn.IM_INSERT_ITEMS,kT=mg.VIDEO_DELETE,CT=mg.VIDEO_REFRESH,AT=mg.VIDEO_UPDATE_PRIVACY,xT=ml.VIMEO_CONVERT,LT=ml.VIMEO_CONVERT_CREATE,PT=ml.VIMEO_CREATE,DT=ml.VIMEO_EDIT,MT=ml.VIMEO_UPGRADE,NT=(s(Hw={},xT,"convert"),s(Hw,LT,"convertcreate"),s(Hw,DT,"edit"),s(Hw,MT,"upgrade"),s(Hw,PT,"create"),Hw);function RT(){var e,t,n,r,a;return Np().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,QS.select)(Rc);case 2:return e=o.sent,t=e.rootDomain,n=e.websiteId,o.next=7,(0,QS.select)(Nc);case 7:return r=o.sent,a=r.api,o.next=11,(0,QS.call)(Sw,a.videos.getUser,{rootDomain:t,websiteId:n});case 11:return o.abrupt("return",o.sent);case 12:case"end":return o.stop()}}),Yw)}function UT(e){var t,n,r,a,o,i;return Np().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.next=3,(0,QS.select)(Rc);case 3:return n=s.sent,r=n.rootDomain,a=n.websiteId,s.next=8,(0,QS.select)(Nc);case 8:return o=s.sent,i=o.api,s.next=12,(0,QS.call)(Sw,i.videos.delete,{rootDomain:r,websiteId:a,videoId:t});case 12:case"end":return s.stop()}}),$w)}function jT(){var e,t,n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,QS.select)(Rc);case 2:return e=i.sent,t=e.rootDomain,n=e.websiteId,r=e.pageSize,i.next=8,(0,QS.select)(Nc);case 8:return a=i.sent,o=a.api,i.next=12,(0,QS.call)(Sw,o.videos.load,{rootDomain:t,websiteId:n,perPage:r},Qp);case 12:return i.next=14,(0,QS.spawn)(HT);case 14:case"end":return i.stop()}}),Xw)}function FT(e){var t,n,r,a,o,i,s,c,l,u,d;return Np().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,n=t.page,r=t.pageSize,p.next=3,(0,QS.select)(Rc);case 3:return a=p.sent,o=a.rootDomain,i=a.websiteId,p.next=8,(0,QS.select)(Jc);case 8:if(s=p.sent,c=s.isLoadingMoreVideos,l=s.uploadedVideosSearchQuery,!c){p.next=13;break}return p.abrupt("return");case 13:return p.next=15,(0,QS.select)(Nc);case 15:return u=p.sent,d=u.api,p.next=19,(0,QS.call)(Sw,d.videos.loadMore,{rootDomain:o,websiteId:i,page:n,perPage:r,search:l},Qp);case 19:case"end":return p.stop()}}),Qw)}function GT(e){var t,n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,QS.select)(Rc);case 2:return t=i.sent,n=t.rootDomain,r=t.websiteId,i.next=7,(0,QS.select)(Nc);case 7:return a=i.sent,o=a.api,i.next=11,(0,QS.call)(Sw,o.videos.loadStats,{rootDomain:n,websiteId:r,managedUserId:e});case 11:case"end":return i.stop()}}),Zw)}function VT(e){var t,n,r,a,o,i;return Np().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.next=3,(0,QS.select)(Rc);case 3:return n=s.sent,r=n.rootDomain,a=n.websiteId,s.next=8,(0,QS.select)(Nc);case 8:return o=s.sent,i=o.api,s.next=12,(0,QS.call)(Sw,i.videos.refresh,{rootDomain:r,websiteId:a,videoId:t},Qp);case 12:case"end":return s.stop()}}),Jw)}function BT(e){var t;return Np().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.videoId,n.next=3,(0,QS.select)(Uc);case 3:n.sent.tracker.trackEvent("IM_TRACK_MISSING_VIDEO_THUMBNAIL",{videoId:t});case 6:case"end":return n.stop()}}),eT)}function HT(){var e,t,n,r,a,o,i,s,c,l;return Np().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,QS.select)(Rc);case 2:return e=u.sent,t=e.videoStatusRefreshRate,u.next=6,(0,QS.select)(Jc);case 6:if(!u.sent.isRefreshingVideos){u.next=10;break}return u.abrupt("return");case 10:return u.next=12,(0,QS.put)(eo());case 12:return u.next=14,(0,QS.select)(Qc);case 14:n=u.sent,r=new Set;case 16:if((0,T.isEmpty)(n)){u.next=47;break}a=Ww(n),u.prev=18,a.s();case 20:if((o=a.n()).done){u.next=30;break}if(i=o.value,r.has(i.id)){u.next=28;break}if(s=i.status,c=i.imageUrl,l=void 0===c?"":c,s!==js||!qs(l)){u.next=28;break}return r.add(i.id),u.next=28,(0,QS.spawn)(BT,{videoId:i.id});case 28:u.next=20;break;case 30:u.next=35;break;case 32:u.prev=32,u.t0=u.catch(18),a.e(u.t0);case 35:return u.prev=35,a.f(),u.finish(35);case 38:return u.next=40,(0,QS.all)(n.map((function(e){return(0,QS.call)(VT,{payload:e.id})})));case 40:return u.next=42,(0,QS.delay)(t);case 42:return u.next=44,(0,QS.select)(Qc);case 44:n=u.sent,u.next=16;break;case 47:return u.next=49,(0,QS.put)(to());case 49:case"end":return u.stop()}}),tT,null,[[18,32,35,38]])}function KT(){var e,t,n,r,a,o,i;return Np().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,QS.select)(Uc);case 2:return e=s.sent,t=e.tracker,s.next=6,(0,QS.select)(Xc);case 6:return n=s.sent,r=n.managedUserId,s.next=10,(0,QS.call)(GT,r);case 10:return s.next=12,(0,QS.select)(Xc);case 12:a=s.sent,o=a.vimeoDraftCount,i=a.vimeoCreateCount,t.trackEvent("IM_TRACK_VIMEO_CREATE_CTA_CLICK",{vimeoDraftCount:o,vimeoCreateCount:i});case 16:case"end":return s.stop()}}),nT)}function zT(){var e;return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.call)(RT);case 2:if((e=t.sent).error){t.next=8;break}return t.next=6,(0,QS.call)(jT);case 6:return t.next=8,(0,QS.call)(GT,(0,T.get)(e,["data","managedUserId"]));case 8:return t.next=10,(0,QS.call)(Nw);case 10:case"end":return t.stop()}}),rT)}function WT(e){var t,n,r,a,o,i,s;return Np().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,(0,QS.select)(Rc);case 3:return n=c.sent,r=n.pageSize,a=n.rootDomain,o=n.websiteId,c.next=9,(0,QS.select)(Nc);case 9:return i=c.sent,s=i.api,c.next=13,(0,QS.call)(Sw,s.videos.load,{rootDomain:a,websiteId:o,perPage:r,search:t.search},Qp);case 13:case"end":return c.stop()}}),aT)}function qT(t,n){var r,a,o,i,s,c,u,d,f,m,h,g,v,y,E,b,_,O,I,S;return Np().wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return r=n.payload,a=r.redirectAction,o=r.videoId,w.next=3,(0,QS.select)(Uc);case 3:if(s=w.sent,c=s.tracker,i=a===xT&&o?NT[DT]:NT[a],a!==PT){w.next=18;break}return w.next=9,(0,QS.spawn)(KT);case 9:return w.next=11,(0,QS.select)(Xc);case 11:if(u=w.sent,d=u.convertedOn,f=u.currentCreateCount,d||!(f>0)){w.next=18;break}return w.next=17,(0,QS.put)(Wa({modalType:Ol}));case 17:return w.abrupt("return");case 18:return m=window.open("","_blank"),w.next=21,(0,QS.select)(Rc);case 21:return h=w.sent,g=h.rootDomain,v=h.websiteId,y=h.socialMediaAuthCallbackUrl,w.next=27,(0,QS.select)(Nc);case 27:return E=w.sent,b=E.api,w.next=31,(0,QS.call)(Sw,b.videos.getLink,{rootDomain:g,websiteId:v,redirectURI:y+"/"+a.toLowerCase(),state:window.location.origin,linkType:i});case 31:if(_=w.sent,O=_.data,!(I=_.error)){w.next=49;break}return m.close(),w.next=38,(0,QS.call)(zw,t,l().createElement(p.FormattedMessage,{id:"VIMEO_CANNOT_CONNECT_MESSAGE"}));case 38:return w.t0=QS.put,w.t1=e,w.t2=I,w.next=43,(0,QS.select)(kS);case 43:return w.t3=w.sent,w.t4={message:"Failed to get vimeo link",error:w.t2,meta:w.t3},w.t5=w.t1.logError.call(w.t1,w.t4),w.next=48,(0,w.t0)(w.t5);case 48:return w.abrupt("return");case 49:if(c.trackEvent("IM_TRACK_VIMEO_OFF_SITE_REDIRECT",{eventType:a}),S=new URL(O),a!==MT){w.next=55;break}S.searchParams.append("link","upgrade"),w.next=59;break;case 55:if(!o){w.next=59;break}return w.next=58,(0,QS.put)(Va(o));case 58:S.searchParams.append("link","videos/".concat(o));case 59:m.location.href=S.href;case 60:case"end":return w.stop()}}),oT)}function YT(e,t){var n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.payload,i.next=3,(0,QS.put)(Ha());case 3:r=Ww(n),i.prev=4,r.s();case 6:if((a=r.n()).done){i.next=15;break}return o=a.value,i.next=10,(0,QS.call)($T,e,{payload:o});case 10:if(!i.sent){i.next=13;break}return i.abrupt("break",15);case 13:i.next=6;break;case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(4),r.e(i.t0);case 20:return i.prev=20,r.f(),i.finish(20);case 23:case"end":return i.stop()}}),iT,null,[[4,17,20,23]])}function $T(e,t){var n,r,a,o,i,s,c,u,d,f,m,h,g;return Np().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return n=t.payload,v.next=3,(0,QS.put)(mi(n));case 3:return v.next=5,(0,QS.select)(Rc);case 5:return r=v.sent,a=r.rootDomain,o=r.websiteId,v.next=10,(0,QS.select)(Nc);case 10:return i=v.sent,s=i.api,v.next=14,(0,QS.call)(Sw,s.videos.create,{rootDomain:a,websiteId:o,videoFile:n});case 14:if(c=v.sent,u=c.error,d=c.data,!u){v.next=26;break}return v.next=20,(0,QS.call)(zw,e,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_UPLOAD_FAILED",values:{filename:n.name}}));case 20:return v.next=22,(0,QS.put)(Za());case 22:return f=n.mediaType,m=n.type,h=n.name,g=n.size,v.next=25,(0,QS.put)(Jo({message:"Fail to get vimeo upload link",error:u,meta:{mediaType:f,type:m,name:h,size:g}}));case 25:case 35:return v.abrupt("return",!1);case 26:if(!d.maxUploadsReached){v.next=33;break}return v.next=30,(0,QS.put)(Wa({modalType:Sl}));case 30:return v.next=32,(0,QS.put)(Za());case 32:return v.abrupt("return",!0);case 33:return v.next=35,(0,QS.call)(ek,{i18nContent:e,videoFile:n,stagingVideo:d});case 36:case"end":return v.stop()}}),sT)}function XT(e){var t,n,r,a,o,i,s,c;return Np().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.payload,!e.closeChannel){u.next=20;break}if(n=t.uploadChannel,r=t.videoSize,a=t.stagingVideo,o=t.errorInfo,n.close(),!o){u.next=12;break}return i=o.i18nContent,s=o.videoName,u.next=8,(0,QS.put)(Za());case 8:return u.next=10,(0,QS.call)(zw,i,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_UPLOAD_FAILED",values:{filename:s}}));case 10:u.next=18;break;case 12:return u.next=14,(0,QS.call)(nk);case 14:return u.next=16,(0,QS.put)(Za({videoSize:r,stagingVideo:a}));case 16:return u.next=18,(0,QS.spawn)(HT);case 18:u.next=23;break;case 20:return c=t.percentage,u.next=23,(0,QS.put)(Qa(c));case 23:case"end":return u.stop()}}),cT)}function QT(e,t,n){e.put({payload:{uploadChannel:e,errorInfo:{i18nContent:t,videoName:n}},closeChannel:!0})}function ZT(e,t,n){var r=(t/n*100).toFixed(2);e.put({payload:{percentage:r}})}function JT(e,t,n){var r=t.size;e.put({payload:{uploadChannel:e,videoSize:r,stagingVideo:n},closeChannel:!0})}function ek(e){var t,n,r,a,o,i,s;return Np().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.i18nContent,n=e.videoFile,r=e.stagingVideo,c.next=3,(0,QS.call)(_y.channel);case 3:return a=c.sent,o=r.upload_link,c.next=7,(0,QS.takeEvery)(a,XT);case 7:return c.next=9,(0,QS.select)(Nc);case 9:return i=c.sent,s=i.api,c.next=13,(0,QS.call)(Sw,s.videos.push,{uploadLink:o,videoFile:n,errorCallback:QT.bind(null,a,t,n.name),progressCallback:ZT.bind(null,a),completeCallback:JT.bind(null,a,n,r)});case 13:case"end":return c.stop()}}),lT)}function tk(e,t){var n,r,a,o,i,s;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,r=n.key,a=n.status,o=n.payload,a!==fg.SUCCESS){e.next=24;break}e.t0=r,e.next=e.t0===kT?5:e.t0===CT?10:e.t0===AT?16:23;break;case 5:return e.next=7,(0,QS.put)(Ao());case 7:return e.next=9,(0,QS.call)(RT);case 9:case 15:case 22:return e.abrupt("break",24);case 10:if(!o||!o.videoDeleted){e.next=15;break}return e.next=13,(0,QS.put)(to());case 13:return e.next=15,(0,QS.call)(jT);case 16:return e.next=18,(0,QS.select)(sl);case 18:return i=e.sent,s=i.selectedItems,e.next=22,(0,QS.put)({type:TT,payload:{selectedItems:s}});case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),uT)}function nk(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.select)(Jc);case 2:if(0!==e.sent.totalVideosInAccount){e.next=12;break}return e.next=7,(0,QS.select)(Xc);case 7:if(e.sent.convertedOn){e.next=12;break}return e.next=12,(0,QS.call)(Mw,{payload:{eventName:"IM_TRACK_VIMEO_SHADOW_FIRST_UPLOAD"}});case 12:case"end":return e.stop()}}),dT)}function rk(){var e,t,n,r,a,o,i;return Np().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,QS.select)(Rc);case 2:return e=s.sent,s.next=5,(0,QS.select)(Jc);case 5:if(t=s.sent,n=t.totalVideosLoaded,r=t.totalVideosInAccount,a=t.uploadedVideosSearchQuery,n!==r){s.next=11;break}return s.abrupt("return");case 11:return o=Math.min(e.pageSize,100),i=Math.round(n/o)+1,s.next=15,(0,QS.put)(Ga({page:i,pageSize:o,search:a}));case 15:case"end":return s.stop()}}),pT)}function ak(){var e,t,n,r,a;return Np().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,QS.select)(Rc);case 2:return e=o.sent,t=e.rootDomain,n=e.websiteId,o.next=7,(0,QS.select)(Nc);case 7:return r=o.sent,a=r.api,o.next=11,(0,QS.call)(Sw,a.videos.removeUserConnection,{rootDomain:t,websiteId:n});case 11:return o.next=13,(0,QS.call)(zT);case 13:return o.next=15,(0,QS.put)(za({redirectAction:xT}));case 15:case"end":return o.stop()}}),fT)}function ok(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.takeEvery)(hT,tk,e);case 2:return t.next=4,(0,QS.takeEvery)(gT,YT,e);case 4:return t.next=6,(0,QS.takeEvery)(vT,UT);case 6:return t.next=8,(0,QS.takeEvery)(ET,FT);case 8:return t.next=10,(0,QS.takeEvery)(bT,RT);case 10:return t.next=12,(0,QS.takeEvery)(yT,jT);case 12:return t.next=14,(0,QS.takeEvery)(_T,WT);case 14:return t.next=16,(0,QS.takeEvery)(OT,qT,e);case 16:return t.next=18,(0,QS.takeEvery)(IT,VT);case 18:return t.next=20,(0,QS.takeLatest)(wT,ak);case 20:return t.next=22,(0,QS.takeEvery)(ST,rk);case 22:case"end":return t.stop()}}),mT)}const ik=function(e){var t=e.imageUrl,n=e.id;return new Promise((function(e){var r=new Image;r.onload=function(){e({localDimensions:{width:r.width,height:r.height},id:n})},r.onerror=function(){e({localDimensions:{width:Vs,height:Bs},id:n})},r.src=Ws(t)}))};function sk(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ck(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ck(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ck(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lk=Np().mark(mk),uk=Np().mark(hk),dk=Np().mark(gk),pk=Np().mark(vk),fk=10;function mk(e){var t;return Np().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,QS.all)(e);case 2:return t=n.sent,n.next=5,(0,QS.put)(Ko(t));case 5:case"end":return n.stop()}}),lk)}function hk(e){var t,n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=void 0===t?[]:t,r=[],f.next=4,(0,QS.select)(ul);case 4:a=f.sent,o=sk(n),f.prev=6,o.s();case 8:if((i=o.n()).done){f.next=21;break}if(s=i.value,c=s.id,l=s.imageUrl,u=s.dimensions,d=s.mediaType,p=a[c],![De,Me].includes(d)){f.next=19;break}if(u||p){f.next=19;break}if(r.push((0,QS.call)(ik,{imageUrl:l,id:c})),r.length!==fk){f.next=19;break}return f.next=18,(0,QS.call)(mk,r);case 18:r=[];case 19:f.next=8;break;case 21:f.next=26;break;case 23:f.prev=23,f.t0=f.catch(6),o.e(f.t0);case 26:return f.prev=26,o.f(),f.finish(26);case 29:if(!(r.length>0)){f.next=32;break}return f.next=32,(0,QS.call)(mk,r);case 32:return f.next=34,(0,QS.put)(zo());case 34:case"end":return f.stop()}}),uk,null,[[6,23,26,29]])}function gk(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.call)(hk,{payload:e});case 2:case"end":return t.stop()}}),dk)}function vk(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.takeEvery)(nn.IM_PAGE_DIMENSIONS_GET,hk);case 2:case"end":return e.stop()}}),pk)}var yk=Np().mark(Pk),Ek=Np().mark(Dk),bk=Np().mark(Mk),_k=Np().mark(Nk),Ok=Np().mark(Uk),Ik=Np().mark(jk);function Sk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sk(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tk=nn.IM_API_STATUS_CHANGE,kk=nn.IM_SITE_IMAGES_LOAD,Ck=nn.IM_IMAGES_COPY_INSERT,Ak=nn.IM_LOAD_OTHER_MEDIA,xk=mg.SITE_IMAGES_COPY,Lk=fg.FAIL;function Pk(){var e,t,n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,QS.select)(Rc);case 2:return e=f.sent,t=e.rootDomain,n=e.containerId,r=e.featureFlags,a=(r=void 0===r?{}:r).enableLocalStorage,f.next=10,(0,QS.select)(al);case 10:if(!f.sent.websitesLoaded){f.next=14;break}return f.abrupt("return");case 14:return f.next=16,(0,QS.select)(Nc);case 16:return o=f.sent,i=o.api,s=o.localDataStore,c=o.assetContainerId,f.next=22,(0,QS.select)(rd);case 22:if(l=f.sent,u=l.difyCustomerId,!a||u){f.next=40;break}return f.next=27,(0,QS.call)(Bw,i.otherSites.loadVentures.key,s.getVenturesFromLS,{containerId:n,assetContainerId:c});case 27:if(f.sent.error){f.next=35;break}return f.next=32,(0,QS.call)(Bw,i.otherSites.loadVentures.key,s.getVenturesFromApiAndSyncLS,{containerId:n,rootDomain:t,assetContainerId:c});case 32:d=f.sent,f.next=38;break;case 35:return f.next=37,(0,QS.call)(Sw,i.otherSites.loadVentures,{rootDomain:t});case 37:d=f.sent;case 38:f.next=43;break;case 40:return f.next=42,(0,QS.call)(Sw,i.otherSites.loadVentures,wk({rootDomain:t},u?{customerId:u}:{}));case 42:d=f.sent;case 43:if(!((p=d.data.ventures)&&p.length<=1)){f.next=47;break}return f.next=47,(0,QS.put)(Mo(Fu));case 47:return f.next=49,(0,QS.call)(Sw,i.otherSites.loadV7Sites,{rootDomain:t});case 49:case"end":return f.stop()}}),yk)}function Dk(e){var t,n,r,a,o,i,c,l,u,d,p,f,m,h;return Np().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.containerId,r=t.type,g.next=3,(0,QS.select)(Rc);case 3:return a=g.sent,o=a.rootDomain,g.next=7,(0,QS.select)(al);case 7:if(i=g.sent,c=i.websites,!(l=c.find((function(e){return e.id===n})))||l.imagesLoaded){g.next=24;break}return g.next=13,(0,QS.select)(Nc);case 13:return d=g.sent,p=d.api,s(u={},R,"loadGCSiteImages"),s(u,U,"loadVentureImages"),s(u,X,"loadGCSiteImages"),s(u,j,"loadV7SiteImages"),f=u,g.next=18,(0,QS.call)(Sw,p.otherSites[f[r]]||p.otherSites.loadGCSiteImages,{rootDomain:o,containerId:n},tf.bind(null,r));case 18:if(m=g.sent,h=m.data,m.error){g.next=24;break}return g.next=24,(0,QS.call)(gk,h);case 24:case"end":return g.stop()}}),Ek)}function Mk(e,t){var n,r,a,o,i,s,c,u,d,f,m,h,g,v,y,E,b,_,O,I,S,w;return Np().wrap((function(T){for(;;)switch(T.prev=T.next){case 0:if(n=t.payload,r=n.images,a=n.type,o=n.projectSpecUri,ce.includes(a)){T.next=3;break}return T.abrupt("return");case 3:return T.next=5,(0,QS.select)(Rc);case 5:return i=T.sent,s=i.containerId,c=i.rootDomain,u=i.featureFlags,d=(u=void 0===u?{}:u).enableLocalStorage,f=i.websiteId,T.next=13,(0,QS.select)(jc);case 13:if(m=T.sent,h=m.uploaded,g=Rk(r,h),v=g.nonExistingImages,y=g.selectedImages,0!==v.length){T.next=20;break}return T.next=19,y;case 19:return T.abrupt("return",T.sent);case 20:return T.next=22,(0,QS.all)(v.map((function(e){return e.dimensions?null:(0,QS.call)(Ql,{imageUrl:e.url})})));case 22:return E=T.sent,b=v.map((function(e,t){return wk(wk({},e),e.dimensions||E[t].dimensions||{})})),T.next=26,(0,QS.select)(Nc);case 26:if(_=T.sent,O=_.api,I=_.localDataStore,T.prev=29,!f||!o){T.next=36;break}return T.next=33,(0,QS.call)(Sw,O.images.copyToStudio,{rootDomain:c,websiteId:f,images:b,type:a,projectSpecUri:o},Xp);case 33:T.t0=T.sent,T.next=39;break;case 36:return T.next=38,(0,QS.call)(Sw,O.images.copy,{containerId:s,rootDomain:c,images:b,type:a},Xp);case 38:T.t0=T.sent;case 39:if(S=T.t0,w=S.data,!d){T.next=44;break}return T.next=44,(0,QS.spawn)(I.addImportedImages,{containerId:s,assets:w});case 44:return T.next=46,[].concat(ys(y),ys(w));case 46:return T.abrupt("return",T.sent);case 49:return T.prev=49,T.t1=T.catch(29),T.next=53,(0,QS.call)(zw,e,l().createElement(p.FormattedMessage,{id:"INSERT_FAILED"}),l().createElement(p.FormattedMessage,{id:"INSERT_ERROR_MESSAGE"}));case 53:case"end":return T.stop()}}),bk,null,[[29,49]])}function Nk(e,t){var n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,QS.call)(Mk,e,t);case 2:return n=a.sent,r=t.payload.silentInsert,a.next=6,(0,QS.put)(io({selectedItems:n,silentInsert:r}));case 6:case"end":return a.stop()}}),_k)}function Rk(e,t){var n=[],r=[];return e.forEach((function(e){if(e.filename){var a=t.find((function(t){return e.eTag?e.eTag===t.eTag:e.filename===t.filename}));a?r.push(a):n.push(e)}else n.push(e)})),{nonExistingImages:n,selectedImages:r}}function Uk(e){var t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.key,n=e.status,r=e.payload,t!==xk||n!==Lk){a.next=4;break}return a.next=4,(0,QS.put)(Jo({message:"Received ".concat(r.status||"unknown"," status from failed request to ").concat(t),error:r}));case 4:case"end":return a.stop()}}),Ok)}function jk(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.takeEvery)(Ak,Pk);case 2:return t.next=4,(0,QS.takeEvery)(Tk,Uk);case 4:return t.next=6,(0,QS.takeEvery)(kk,Dk);case 6:return t.next=8,(0,QS.takeEvery)(Ck,Nk,e);case 8:case"end":return t.stop()}}),Ik)}const Fk=function(e,t){var n=t[e],r=new RegExp("([a-zA-Z0-9]+.)".concat(n)),a=(0,T.get)(window,"location.href","").match(r);return a&&a.length&&a[0]||n};function Gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gk(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bk=Np().mark(bC),Hk=Np().mark(_C),Kk=Np().mark(OC),zk=Np().mark(IC),Wk=Np().mark(SC),qk=Np().mark(wC),Yk=Np().mark(TC),$k=Np().mark(kC),Xk=Np().mark(CC),Qk=Np().mark(AC),Zk=Np().mark(xC),Jk=Np().mark(LC),eC=Np().mark(PC),tC=Np().mark(DC),nC=Np().mark(MC),rC=Np().mark(NC),aC=Np().mark(RC),oC=fg.SUCCESS,iC=fg.FAIL,sC=nn.IM_SOCIAL_ACCESS_TOKEN_GET,cC=nn.IM_SOCIAL_FB_ALBUMS_LOAD,lC=nn.IM_SOCIAL_FB_PHOTOS_LOAD,uC=nn.IM_SOCIAL_FB_VIDEO_UPLOAD,dC=nn.IM_SOCIAL_IG_POST_LOAD,pC=nn.IM_SOCIAL_SWITCH_PROVIDER,fC=nn.IM_SOCIAL_GOOGLE_PHOTOS_AUTH_URL_GET,mC=nn.IM_SOCIAL_GOOGLE_TOKENS_GET,hC=nn.IM_SOCIAL_GOOGLE_TOKENS_DELETE,gC=nn.IM_SOCIAL_GOOGLE_SCOPES_GET,vC=nn.IM_SOCIAL_GOOGLE_PHOTOS_ALBUMS_GET,yC=nn.IM_SOCIAL_GOOGLE_PHOTOS_MEDIA_ITEMS_GET,EC=function(e){return e.includes("manage_pages")||e.includes("pages_read_engagement")};function bC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O;return Np().wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return t=e.socialProvider,I.next=3,(0,QS.select)(ol);case 3:if(n=I.sent,r=n.selectedProvider,a=n[K],o=a.auth.accessToken,i=a.selectedPageId,s=o,r===K){I.next=11;break}return I.abrupt("return");case 11:if(!s||!i){I.next=13;break}return I.abrupt("return");case 13:return I.next=15,(0,QS.put)(wo());case 15:return I.next=17,(0,QS.select)(Rc);case 17:return c=I.sent,l=c.rootDomain,I.next=21,(0,QS.select)(Nc);case 21:if(u=I.sent,d=u.api,s){I.next=29;break}return I.next=26,(0,QS.call)(Sw,d.sso.getSocialAccessToken,{rootDomain:l,socialProvider:t});case 26:p=I.sent,f=p.data,s=(0,T.get)(f,"data.access_token",null);case 29:if(s){I.next=35;break}return I.next=32,(0,QS.call)(_C,{rootDomain:l,socialProvider:t});case 32:return I.next=34,(0,QS.put)(To());case 34:return I.abrupt("return");case 35:return I.next=37,(0,QS.call)(Sw,d.social.validateFBAccessToken,{rootDomain:l,accessToken:s});case 37:if(m=I.sent,h=m.data.data,g=(h=void 0===h?{}:h).isValid,v=h.scopes,y=void 0===v?[]:v,g&&EC(y)){I.next=47;break}return I.next=44,(0,QS.call)(_C,{rootDomain:l,socialProvider:t});case 44:return I.next=46,(0,QS.put)(To());case 46:return I.abrupt("return");case 47:return I.next=49,(0,QS.put)(fo({accessToken:s,socialProvider:t}));case 49:return I.next=51,(0,QS.call)(OC,{payload:{accessToken:s}});case 51:if(!((E=I.sent).length>0)){I.next=62;break}return b=E[0].id,I.next=56,(0,QS.call)(IC,{payload:{accessToken:s,pageId:b}});case 56:return I.next=58,(0,QS.call)(Sw,d.sso.getSocialPageAccessToken,{rootDomain:l,socialProvider:t,pageId:b});case 58:return _=I.sent,O=_.data,I.next=62,(0,QS.put)(mo({socialProvider:t,pageAccessToken:O.data[b]}));case 62:return I.next=64,(0,QS.put)(To());case 64:return I.next=66,(0,QS.call)(wC);case 66:case"end":return I.stop()}}),Bk)}function _C(e){var t,n,r,a,o,i,s,c,l,u,d;return Np().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.rootDomain,n=e.socialProvider,p.next=3,(0,QS.select)(Uc);case 3:return r=p.sent,a=r.appName,o=r.appSocialMediaAuthPath,i=r.appNameSubdomainMappings,s={socialProvider:n,rootDomain:t,app:Fk(a,i),appSocialMediaAuthPath:o},p.next=10,(0,QS.select)(Nc);case 10:return c=p.sent,l=c.api,p.next=14,(0,QS.call)(Sw,l.sso.getSocialAuthUrl,s);case 14:return u=p.sent,d=u.data.data,p.next=18,(0,QS.put)(ho({socialProvider:n,authUrl:d}));case 18:case"end":return p.stop()}}),Hk)}function OC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b;return Np().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.accessToken,_.next=3,(0,QS.select)(Rc);case 3:return n=_.sent,r=n.rootDomain,a=n.accountId,o=n.inWebsiteContext,_.next=9,(0,QS.select)(ol);case 9:if(i=_.sent,s=i[z],c=s.connected,l=s.authorized,u=i[K],d=u.pagesLoaded,p=u.pages,!d){_.next=18;break}return _.abrupt("return",p);case 18:return _.next=20,(0,QS.select)(Nc);case 20:if(f=_.sent,m=f.api,!o||!a){_.next=45;break}if(_.prev=23,null!==(h=c)){_.next=30;break}return _.next=28,(0,QS.call)(Sw,m.social.checkIGConnected,{rootDomain:r,accountId:a});case 28:g=_.sent,h=g.data.payload.ok;case 30:if(null!==(v=l)){_.next=36;break}return _.next=34,(0,QS.call)(Sw,m.social.checkIGAuthorized,{rootDomain:r,accountId:a});case 34:y=_.sent,v=y.data.payload.ok;case 36:if(!h||!v){_.next=39;break}return _.next=39,(0,QS.call)(Sw,m.social.loadIGListing,{rootDomain:r,accountId:a});case 39:_.next=45;break;case 41:return _.prev=41,_.t0=_.catch(23),_.next=45,(0,QS.put)(Jo({message:"Fail to connect IG with social-sdk api",error:_.t0}));case 45:return _.next=47,(0,QS.call)(Sw,m.social.loadFBPages,{rootDomain:r,accessToken:t});case 47:return E=_.sent,b=E.data,_.abrupt("return",(0,T.get)(b,"data",[]));case 50:case"end":return _.stop()}}),Kk,null,[[23,41]])}function IC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return Np().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.accessToken,r=t.pageId,a=t.after,h.next=3,(0,QS.select)(Rc);case 3:return o=h.sent,i=o.rootDomain,s=o.pageSize,h.next=8,(0,QS.select)(ol);case 8:if(c=h.sent,l=c[K].pages,u=c.selectedProvider,d=l[r]||{},p=d.albumsLoaded,!(d.albumsAllLoaded||p&&!a)){h.next=20;break}return h.next=16,(0,QS.put)(bo({pageId:r}));case 16:if(u===K){h.next=19;break}return h.next=19,(0,QS.put)(go(K));case 19:return h.abrupt("return");case 20:return h.next=22,(0,QS.select)(Nc);case 22:return f=h.sent,m=f.api,h.next=26,(0,QS.call)(Sw,m.social.loadFBAlbums,{rootDomain:i,accessToken:n,pageId:r,pageSize:s,after:a});case 26:if(u===K){h.next=29;break}return h.next=29,(0,QS.put)(go(K));case 29:case"end":return h.stop()}}),zk)}function SC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.accessToken,r=t.albumId,a=t.after,g.next=3,(0,QS.select)(Rc);case 3:return o=g.sent,i=o.rootDomain,s=o.pageSize,g.next=8,(0,QS.select)(ol);case 8:if(c=g.sent,l=c[K],u=l.pages,d=l.selectedPageId,p=u[d].albums[r],f=p.photosLoaded,!(p.photosAllLoaded||f&&!a)){g.next=17;break}return g.next=16,(0,QS.put)(_o({albumId:r}));case 16:return g.abrupt("return");case 17:return g.next=19,(0,QS.select)(Nc);case 19:return m=g.sent,h=m.api,g.next=23,(0,QS.call)(Sw,h.social.loadFBPhotos,{rootDomain:i,accessToken:n,albumId:r,pageSize:s,after:a},Jp);case 23:case"end":return g.stop()}}),Wk)}function wC(){var e,t,n,r,a,o,i,s,c,l,u,d,p,f;return Np().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,QS.select)(ol);case 2:return e=m.sent,t=e[z],n=t.hasPostsFetched,r=t.connected,a=t.authorized,o=t.nextPostsPageUrl,i=e[K].auth.accessToken,m.next=11,(0,QS.select)(Rc);case 11:if(s=m.sent,c=s.rootDomain,l=s.accountId,s.inWebsiteContext&&l&&r&&a&&i){m.next=17;break}return m.abrupt("return");case 17:if(n&&!o){m.next=32;break}return m.next=20,(0,QS.put)(yo());case 20:return m.next=22,(0,QS.select)(Nc);case 22:return u=m.sent,d=u.api,m.next=26,(0,QS.call)(Sw,d.social.loadIGPosts,{rootDomain:c,accountId:l,nextPostsPageUrl:o},ef);case 26:return p=m.sent,f=p.data.posts,m.next=30,(0,QS.call)(gk,f);case 30:return m.next=32,(0,QS.put)(Eo());case 32:case"end":return m.stop()}}),qk)}function TC(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payload.socialProvider!==z){t.next=4;break}return t.next=4,(0,QS.call)(wC);case 4:case"end":return t.stop()}}),Yk)}function kC(e){var t,n,r,a,o,i,s,c,l,u;return Np().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.api,n=e.pageId,r=e.pageAccessToken,a=e.uploadSessionId,o=e.startOffset,i=e.endOffset,s=e.videoFile,o!==i){d.next=3;break}return d.abrupt("return",null);case 3:return c=new Blob([s],{type:s.type}),l=c.slice(o,i,s.type),(u=new FormData).append("video_file_chunk",l,"chunk"),d.next=9,(0,QS.call)(Sw,t.social.chunkFBVideoUpload,{pageId:n,pageAccessToken:r,uploadSessionId:a,startOffset:o,formData:u});case 9:return d.abrupt("return",d.sent);case 10:case"end":return d.stop()}}),$k)}function CC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return Np().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:t=e.api,n=e.pageId,r=e.pageAccessToken,a=e.uploadSessionId,o=e.startOffset,i=e.endOffset,s=e.videoFile,c=3,l=o,u=i,d=0;case 5:if(l===u){h.next=26;break}return h.next=8,(0,QS.call)(kC,{api:t,pageId:n,pageAccessToken:r,uploadSessionId:a,startOffset:l,endOffset:u,videoFile:s});case 8:if(p=h.sent,f=p.data,!(m=p.error)){h.next=19;break}if(d===c){h.next=16;break}d++,h.next=17;break;case 16:return h.abrupt("return",m);case 17:h.next=24;break;case 19:return d=0,l=f.start_offset,u=f.end_offset,h.next=24,(0,QS.put)(Qa(Math.round(l/s.size*100)));case 24:h.next=5;break;case 26:return h.abrupt("return",null);case 27:case"end":return h.stop()}}),Xk)}function AC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.videoFile,r=t.videoUrl,g.next=3,(0,QS.select)(Nc);case 3:return a=g.sent,o=a.api,g.next=7,(0,QS.select)(ol);case 7:if(i=g.sent,s=i[K],c=s.pages,l=s.auth.pageAccessToken,u=Object.values(c)[0].id,!n){g.next=31;break}return g.next=15,(0,QS.put)(mi(n));case 15:return g.next=17,(0,QS.call)(Sw,o.social.initFBVideoUpload,{pageId:u,pageAccessToken:l,videoSize:n.size});case 17:if(d=g.sent,p=d.data,d.error){g.next=31;break}return g.next=23,(0,QS.call)(CC,{api:o,pageId:u,pageAccessToken:l,uploadSessionId:p.upload_session_id,startOffset:p.start_offset,endOffset:p.end_offset,videoFile:n});case 23:if(g.sent){g.next=31;break}return g.next=27,(0,QS.call)(Sw,o.social.completeFBVideoUpload,{pageId:u,pageAccessToken:l,uploadSessionId:p.upload_session_id,fileName:n.name});case 27:return g.next=29,(0,QS.put)(Za());case 29:return g.next=31,(0,QS.put)(io({selectedItems:[{videoId:p.video_id,videoUrl:"https://www.facebook.com/".concat(u,"/videos/").concat(p.video_id)}]}));case 31:if(!r){g.next=44;break}return g.next=34,(0,QS.put)(mi(r));case 34:return g.next=36,(0,QS.call)(Sw,o.social.externalFBVideoUpload,{pageId:u,pageAccessToken:l,videoUrl:r});case 36:if(f=g.sent,!(m=f.data)){g.next=44;break}return h=m.id,g.next=42,(0,QS.put)(Za());case 42:return g.next=44,(0,QS.put)(io({selectedItems:[{videoId:h,videoUrl:"https://www.facebook.com/".concat(u,"/videos/").concat(h)}]}));case 44:case"end":return g.stop()}}),Qk)}function xC(){var e,t,n,r,a,o,i,s,c,l,u,d,p,f;return Np().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,QS.select)(ol);case 2:if(t=m.sent,n=t[W],r=n.isLoading,a=n.auth,!r){m.next=8;break}return m.abrupt("return");case 8:return m.next=10,(0,QS.put)(Ti());case 10:return m.next=12,(0,QS.select)(Nc);case 12:return o=m.sent,i=o.api,m.next=16,(0,QS.select)(Rc);case 16:return s=m.sent,c=s.rootDomain,l=s.accountId,m.next=21,(0,QS.select)(Uc);case 21:return u=m.sent,d=u.appName,m.next=25,(0,QS.call)(Sw,i.social.getGPAuthorizationUrl,{rootDomain:c,app:"website"===d?"launch":d,accountId:l});case 25:if(p=m.sent,!(f=null==p||null===(e=p.data)||void 0===e?void 0:e.url)){m.next=32;break}return m.next=30,(0,QS.put)(Mi(Vk(Vk({},a),{},{authUrl:{url:f,fetched:!0}})));case 30:m.next=34;break;case 32:return m.next=34,(0,QS.put)(Mi(Vk(Vk({},a),{},{authUrl:{url:"",fetched:!0}})));case 34:return m.next=36,(0,QS.put)(ki());case 36:case"end":return m.stop()}}),Zk)}function LC(){var e,t,n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,QS.select)(ol);case 2:if(t=f.sent,n=t[W],r=n.isLoading,a=n.auth,!r){f.next=8;break}return f.abrupt("return");case 8:return f.next=10,(0,QS.put)(Ti());case 10:return f.next=12,(0,QS.select)(Nc);case 12:return o=f.sent,i=o.api,f.next=16,(0,QS.select)(Rc);case 16:return s=f.sent,c=s.rootDomain,f.next=20,(0,QS.call)(Sw,i.social.getGoogleTokens,{rootDomain:c});case 20:if(l=f.sent,u=null==l||null===(e=l.data)||void 0===e?void 0:e.users,!(d=Object.keys(u||{})[0])){f.next=30;break}if(!(p=u[d].tokenId)){f.next=28;break}return f.next=28,(0,QS.put)(Mi(Vk(Vk({},a),{},{tokens:{tokenId:p,userId:d,fetched:!0}})));case 28:f.next=32;break;case 30:return f.next=32,(0,QS.put)(Mi(Vk(Vk({},a),{},{tokens:{tokenId:"",userId:"",fetched:!0}})));case 32:return f.next=34,(0,QS.put)(ki());case 34:case"end":return f.stop()}}),Jk)}function PC(){var e,t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,QS.select)(ol);case 2:if(n=g.sent,r=n[W],a=r.auth,o=r.isLoading,i=a.tokens,s=a.scopes.photosLibrary.read,!o&&i.fetched&&i.userId&&i.tokenId&&!s){g.next=9;break}return g.abrupt("return");case 9:return g.next=11,(0,QS.put)(Ti());case 11:return g.next=13,(0,QS.select)(Nc);case 13:return c=g.sent,l=c.api,g.next=17,(0,QS.select)(Rc);case 17:return u=g.sent,d=u.rootDomain,g.next=21,(0,QS.call)(Sw,l.social.getGoogleScopes,{tokenId:i.tokenId,rootDomain:d});case 21:return p=g.sent,f=null==p||null===(e=p.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.scopes,m=!1,h=!1,f&&Array.isArray(f)&&f.includes("https://www.googleapis.com/auth/photoslibrary.readonly")&&(m=!0,2===f.length&&f.includes("openid")&&(h=!0)),g.next=28,(0,QS.put)(Mi(Vk(Vk({},a),{},{scopes:{photosLibrary:{read:m},deletable:h,fetched:!0}})));case 28:return g.next=30,(0,QS.put)(ki());case 30:case"end":return g.stop()}}),eC)}function DC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b;return Np().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.fill,_.next=3,(0,QS.select)(ol);case 3:if(n=_.sent,r=n[W],a=r.auth,o=a.scopes.photosLibrary.read,i=a.tokens.tokenId,s=r.albums.pages,c=r.isLoading,(l=s[t])&&!c&&o&&i){_.next=13;break}return _.abrupt("return");case 13:if(u=l.albums,d=l.minAlbumsPerPage,p=l.pageToken,!l.fetched){_.next=16;break}return _.abrupt("return");case 16:if(!c&&o&&i){_.next=18;break}return _.abrupt("return");case 18:return _.next=20,(0,QS.put)(Ti());case 20:return _.next=22,(0,QS.select)(Nc);case 22:return f=_.sent,m=f.api,_.next=26,(0,QS.select)(Rc);case 26:return h=_.sent,g=h.rootDomain,_.next=30,(0,QS.call)(Sw,m.social.getGooglePhotosAlbums,{tokenId:i,rootDomain:g,params:{pageSize:d,pageToken:p}});case 30:return v=_.sent,y=v.data,E=(y.albums||[]).map((function(e){return Vk(Vk({},e),{},{galleryUniqueUrl:"".concat(e.coverPhotoBaseUrl,"=w").concat(310,"-h").concat(220),mediaItemsCount:parseInt(e.mediaItemsCount,10)})})),u.push.apply(u,ys(E)),l.albums.concat(E),b=s.slice(0,-1).concat(l),l.albums.length>=d?(l.fetched=!0,y.nextPageToken&&b.push({fetched:!1,albums:[],pageToken:y.nextPageToken,minAlbumsPerPage:d})):(l.pageToken=y.nextPageToken||"",l.fetched=!y.nextPageToken),_.next=39,(0,QS.put)(Ri({pages:b}));case 39:return _.next=41,(0,QS.put)(ki());case 41:case"end":return _.stop()}}),tC)}function MC(){var e,t,n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,QS.select)(ol);case 2:if(e=f.sent,t=e[W].auth,(n=t.tokens).fetched&&n.userId&&n.tokenId){f.next=7;break}return f.abrupt("return");case 7:return r=0,a=3,o=!1,f.next=12,(0,QS.select)(Nc);case 12:return i=f.sent,s=i.api,f.next=16,(0,QS.select)(Rc);case 16:c=f.sent,l=c.rootDomain;case 18:if(o||!(r<a)){f.next=39;break}return f.next=21,(0,QS.call)(Sw,s.social.deleteGoogleTokens,{tokenId:n.tokenId,rootDomain:l});case 21:if(u=f.sent,d=u.data,!(p=u.error)){f.next=33;break}if(++r!==a){f.next=31;break}return f.next=29,(0,QS.put)(Jo({message:"Failed to delete Google tokens after 3 attempts",error:p}));case 29:return f.next=31,(0,QS.put)(Pi({status:iC}));case 31:f.next=37;break;case 33:if(!d){f.next=37;break}return o=!0,f.next=37,(0,QS.put)(Pi({status:oC}));case 37:f.next=18;break;case 39:return f.abrupt("return");case 40:case"end":return f.stop()}}),nC)}function NC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O,I,S,w,T,k,C;return Np().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.payload.fill,A.next=3,(0,QS.select)(ol);case 3:if(n=A.sent,r=n[W],a=r.auth,o=r.mediaItems.pages,i=r.albumMediaItems,s=r.selectedAlbumId,c=r.isLoading,l=a.scopes.photosLibrary.read,u=a.tokens.tokenId,d=s&&i[s].pages,p=null==d?void 0:d[t],(f=p||o[t])&&!c&&l&&u){A.next=16;break}return A.abrupt("return");case 16:if(m=f.photos,h=f.minPhotosPerPage,g=f.pageToken,!f.fetched){A.next=19;break}return A.abrupt("return");case 19:return A.next=21,(0,QS.put)(Ti());case 21:return A.next=23,(0,QS.select)(Nc);case 23:return v=A.sent,y=v.api,A.next=27,(0,QS.select)(Rc);case 27:return E=A.sent,b=E.rootDomain,_=s?{albumId:s}:{filters:{mediaTypeFilter:{mediaTypes:["PHOTO"]}}},A.next=32,(0,QS.call)(Sw,y.social.getGooglePhotosMediaItems,{tokenId:u,rootDomain:b,data:Vk({pageSize:h,pageToken:g},_)});case 32:if(O=A.sent,I=O.data,S=O.error,!("status"in(w=void 0===S?{}:S))||401!==w.status){A.next=42;break}return A.next=39,(0,QS.put)(Mi(Vk(Vk({},a),{},{revoked:!0})));case 39:return A.next=41,(0,QS.put)(ki());case 41:return A.abrupt("return");case 42:if(T=(I.mediaItems||[]).filter((function(e){var t;return null===(t=e.mimeType)||void 0===t?void 0:t.startsWith("image")})).map((function(e){return Vk(Vk({},e),{},{url:"".concat(e.baseUrl,"=w").concat(e.mediaMetadata.width,"-h").concat(e.mediaMetadata.height),imageUrl:"".concat(e.baseUrl,"=w").concat(e.mediaMetadata.width,"-h").concat(e.mediaMetadata.height),galleryUniqueUrl:"".concat(e.baseUrl,"=w").concat(310,"-h").concat(220),galleryMultipleUrl:"".concat(e.baseUrl,"=w").concat(150,"-h").concat(110),filename:e.filename,dimensions:{width:e.mediaMetadata.width,height:e.mediaMetadata.height},sourceType:W,mediaType:De})})),m.push.apply(m,ys(T)),f.photos=m,k=(d||o).slice(0,-1).concat(f),f.photos.length>=h?(f.fetched=!0,I.nextPageToken&&k.push({fetched:!1,photos:[],pageToken:I.nextPageToken,minPhotosPerPage:h})):(f.pageToken=I.nextPageToken||"",f.fetched=!I.nextPageToken),!s){A.next=52;break}return A.next=50,(0,QS.put)(Gi({pages:k}));case 50:A.next=54;break;case 52:return A.next=54,(0,QS.put)(ji({pages:k}));case 54:return C=k.flatMap((function(e){return e.photos})),A.next=57,(0,QS.put)(Vi({newMediaItems:C}));case 57:return A.next=59,(0,QS.put)(ki());case 59:case"end":return A.stop()}}),rC)}function RC(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.takeEvery)(sC,bC);case 2:return e.next=4,(0,QS.takeEvery)(cC,IC);case 4:return e.next=6,(0,QS.takeEvery)(lC,SC);case 6:return e.next=8,(0,QS.takeEvery)(uC,AC);case 8:return e.next=10,(0,QS.takeEvery)(dC,wC);case 10:return e.next=12,(0,QS.takeEvery)(pC,TC);case 12:return e.next=14,(0,QS.takeEvery)(fC,xC);case 14:return e.next=16,(0,QS.takeEvery)(mC,LC);case 16:return e.next=18,(0,QS.takeEvery)(gC,PC);case 18:return e.next=20,(0,QS.takeEvery)(vC,DC);case 20:return e.next=22,(0,QS.takeEvery)(yC,NC);case 22:return e.next=24,(0,QS.takeEvery)(hC,MC);case 24:case"end":return e.stop()}}),aC)}var UC=Np().mark(GC),jC=Np().mark(VC),FC=nn.IM_OPEN_MODAL;function GC(){var e,t,n,r,a;return Np().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,QS.select)(Rc);case 2:if(e=o.sent,t=e.rootDomain,n=e.accountId,e.isWebsitelessContainer||!n){o.next=13;break}return o.next=9,(0,QS.select)(Nc);case 9:return r=o.sent,a=r.api,o.next=13,(0,QS.call)(Sw,a.vnext.getPlanFeatures,{rootDomain:t,accountId:n});case 13:case"end":return o.stop()}}),UC)}function VC(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.takeEvery)(FC,GC);case 2:case"end":return e.stop()}}),jC)}var BC=Np().mark(WC),HC=Np().mark(qC),KC=Np().mark(YC);function zC(e,t){var n=e.permission,r=void 0===n?{}:n;return t&&r.delete||r.download}function WC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.item,r=t.autoselect,a=t.enableDelete,o=t.selectionLimit,i=t.preloadParams,g.next=3,(0,QS.select)(sl);case 3:if(s=g.sent,c=s.selectedItemsById,l=s.selectedItems,u=n.id,d=n.imageUrl,i&&((new Image).src="".concat(d).concat(i)),p=c.has(u),f=o>1&&l.length>=o,m=!r&&zC(n,a),h=[],1!==o||m||p){g.next=15;break}l.length&&h.push(l[0]),g.next=17;break;case 15:if(!f||p||m){g.next=17;break}return g.abrupt("return");case 17:return h.push(n),g.next=20,(0,QS.put)(Po(h));case 20:case"end":return g.stop()}}),BC)}function qC(e){var t,n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.item,r=t.dataSource,a=t.enableDelete,o=t.selectionLimit,f.next=4,(0,QS.select)(sl);case 4:if(i=f.sent,s=i.anchor){f.next=10;break}return f.next=9,(0,QS.put)(Co(t));case 9:case 14:return f.abrupt("return");case 10:if(-1!==(c=r.findIndex((function(e){return e.id===s.id})))){f.next=15;break}return f.next=14,(0,QS.put)(Co(t));case 15:return l=r.findIndex((function(e){return e.id===n.id})),u=Math.min(c,l),d=Math.max(c,l),p=r.slice(u,d+1),c===d&&p.reverse(),f.next=22,(0,QS.put)(Lo({items:p,selectionLimit:o,allowUnlimitedSelect:zC(n,a)}));case 22:case"end":return f.stop()}}),HC)}function YC(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.takeLatest)(nn.IM_SELECTION_ITEM_CLICKED,WC);case 2:return e.next=4,(0,QS.takeLatest)(nn.IM_SELECTION_ITEM_SHIFT_CLICKED,qC);case 4:case"end":return e.stop()}}),KC)}function $C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$C(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var QC=Np().mark(rA),ZC=Np().mark(aA),JC=Np().mark(oA),eA=Np().mark(iA),tA=Np().mark(sA),nA=Np().mark(cA);function rA(e){var t,n,r,a,o,i,s,c,l,u,d,p,f;return Np().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=e.isNewUpload,r=void 0!==n&&n,t=Array.isArray(t)?t:[t],m.next=4,(0,QS.select)(Rc);case 4:return a=m.sent,o=a.searchClient,m.next=8,(0,QS.select)(zc);case 8:if(i=m.sent,(0===(s=i.olsImages||[]).length||r)&&(s=kc(t).olsImages),c=new Set(s.map((function(e){return e.id}))),!((l=(0,T.filter)(t,(function(e){return c.has(e.id)}))).length>0)){m.next=16;break}return m.next=16,o.indexResource({resourceName:i.pathToDataSource.join("."),resource:l,resourceIndexFields:["id","altText","originalFilename"]});case 16:return m.next=18,(0,QS.select)(Kc);case 18:if(u=m.sent,(0===(d=u.uploadedImages?u.uploadedImages:[]).length||r)&&(d=kc(t).gcImages),p=new Set(d.map((function(e){return e.id}))),!((f=(0,T.filter)(t,(function(e){return p.has(e.id)})).map((function(e){return e.references&&(e.flattenedReferences=e.references.join()),e}))).length>0)){m.next=26;break}return m.next=26,o.indexResource({resourceName:u.pathToDataSource.join("."),resource:f,resourceIndexFields:["id","altText","originalFilename","flattenedReferences"]});case 26:case"end":return m.stop()}}),QC)}function aA(e){var t,n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.payload,r=n.text,a=n.searchResults,o=(0,T.get)(a,["images.uploaded","size"],0),i.next=4,(0,QS.call)(Mw,{payload:{eventName:"IM_TRACK_UPLOADED_IMAGES_SEARCH",data:(t={},s(t,iu,r),s(t,"search results count",o),t)}});case 4:case"end":return i.stop()}}),ZC)}function oA(e){var t,n,r,a;return Np().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.searchText,o.next=3,(0,QS.select)(Rc);case 3:return n=o.sent,r=n.searchClient,o.next=7,r.search({text:t});case 7:return a=o.sent,o.next=10,(0,QS.put)(qo({searchResults:a}));case 10:if(!t){o.next=13;break}return o.next=13,(0,QS.put)(Yo({text:t,searchResults:a}));case 13:case"end":return o.stop()}}),JC)}function iA(e){var t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.docs,a.next=3,(0,QS.select)(Rc);case 3:return n=a.sent,r=n.searchClient,a.next=7,r.remove(t);case 7:case"end":return a.stop()}}),eA)}function sA(e){var t,n,r,a,o,i,s,c,l,u,d,p,f;return Np().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.key,r=t.status,a=t.payload,o=t.requestArgs,m.next=3,(0,QS.select)(Rc);case 3:if(i=m.sent,!(void 0===(s=i.featureFlags)?{}:s).disableFulltextSearch){m.next=8;break}return m.abrupt("return");case 8:if(r===fg.SUCCESS){m.next=10;break}return m.abrupt("return");case 10:if(n!==mg.IMAGES_LOAD){m.next=23;break}if(!a.upsertList||!a.deleteList){m.next=18;break}return m.next=14,(0,QS.spawn)(rA,{payload:a.upsertList});case 14:return m.next=16,(0,QS.spawn)(iA,{payload:{docs:a.deleteList}});case 16:m.next=21;break;case 18:return c=Array.isArray(a)?a:a.images,m.next=21,(0,QS.spawn)(rA,{payload:c});case 21:case 26:case 31:m.next=40;break;case 23:if(n!==mg.IMAGE_UPLOAD&&n!==mg.SITE_IMAGES_COPY){m.next=28;break}return m.next=26,(0,QS.spawn)(rA,{payload:a,isNewUpload:!0});case 28:if(n!==mg.IMAGES_DELETE){m.next=33;break}return m.next=31,(0,QS.spawn)(iA,{payload:a});case 33:if(n!==mg.IMAGES_UPDATE){m.next=40;break}return l=o[0],u=l.assetId,d=l.update,p=(d=void 0===d?{}:d).metadata,f=XC({id:u},void 0===p?{}:p),m.next=40,(0,QS.spawn)(rA,{payload:f});case 40:case"end":return m.stop()}}),tA)}function cA(e){var t;return Np().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.bbConfig.searchTrackingDebounce,n.next=3,(0,QS.takeLatest)(nn.IM_ASSET_SEARCH,oA);case 3:return n.next=5,(0,QS.takeLatest)(nn.IM_API_STATUS_CHANGE,sA);case 5:return n.next=7,(0,QS.debounce)(t,nn.IM_TRACK_SEARCH_RESULTS,aA);case 7:case"end":return n.stop()}}),nA)}const lA=function(e,t,n){return e===ju||e===Fu?e:t?n?"".concat(e,"-").concat(n):e:"".concat(Gu,"-").concat(e)};var uA=Np().mark(hA),dA=Np().mark(gA),pA=Np().mark(vA),fA=Np().mark(yA),mA=Np().mark(EA);function hA(e){var t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.payload,n=t.eventName,r=t.meta,n!==Fu){a.next=10;break}return a.next=4,(0,QS.select)(dl);case 4:if(null===a.sent.isLoadingVenture){a.next=8;break}return a.abrupt("return");case 8:return a.next=10,(0,QS.put)(No());case 10:return a.next=12,(0,QS.call)(wv.beginEvent,lA(n,!0),r);case 12:case"end":return a.stop()}}),uA)}function gA(e){var t,n,r,a,o,i,s,c,l,u,d;return Np().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.payload,n=t.eventName,r=t.meta,n!==Fu){p.next=10;break}return p.next=4,(0,QS.select)(dl);case 4:if(!1!==p.sent.isLoadingVenture){p.next=8;break}return p.abrupt("return");case 8:return p.next=10,(0,QS.put)(Ro());case 10:return p.next=12,(0,QS.select)(dl);case 12:if(a=p.sent,o=a.isFirstBeacon,a.isPerfEndTracked&&n!==ju&&n!==Fu){p.next=31;break}return p.next=18,(0,QS.select)(Rc);case 18:return i=p.sent,s=i.featureFlags,c=i.ffEnabledForPerf,p.next=23,(0,QS.select)(jc);case 23:return l=p.sent,u=l.firstLaunchBeaconSuffix,d={meta:r},s[c]&&(d.feature=c),p.next=29,(0,QS.call)(wv.endEvent,lA(n,o,u),d);case 29:return p.next=31,(0,QS.put)(Uo());case 31:case"end":return p.stop()}}),dA)}function vA(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.call)(wv.clearAllMarks);case 2:case"end":return e.stop()}}),pA)}function yA(e){var t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.bbConfig.debug.timeoutBeforeLog,n=void 0===t?2e4:t,a.next=3,(0,QS.delay)(n);case 3:return a.next=5,(0,QS.select)(ll);case 5:if(!a.sent.uploadedAssetsFetched){a.next=9;break}return a.abrupt("return");case 9:return a.next=11,(0,QS.select)(kS);case 11:return r=a.sent,a.next=14,(0,QS.put)(Jo({message:"Media Lib is in indefinite spin state",meta:r}));case 14:case"end":return a.stop()}}),fA)}function EA(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.takeEvery)(nn.IM_OPEN_MODAL,yA,e);case 2:return t.next=4,(0,QS.takeEvery)(nn.IM_PERF_TRACK_BEGIN,hA);case 4:return t.next=6,(0,QS.takeEvery)(nn.IM_PERF_TRACK_END,gA);case 6:return t.next=8,(0,QS.takeLatest)(nn.IM_MODAL_HIDE,vA);case 8:case"end":return t.stop()}}),mA)}var bA=Np().mark(OA),_A=Np().mark(IA);function OA(e){var t,n,r,a,o,i,s;return Np().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.products,c.next=3,(0,QS.select)(Rc);case 3:return n=c.sent,r=n.rootDomain,a=n.websiteId,c.next=8,(0,QS.select)(Nc);case 8:return o=c.sent,i=o.api,c.next=12,(0,QS.all)(t.map((function(e){var t=e.id;return(0,QS.call)(Sw,i.products.fetch,{rootDomain:r,websiteId:a,id:t},af)})));case 12:return s=c.sent,c.next=15,(0,QS.put)(io({selectedItems:s.map((function(e){return e.data}))}));case 15:case"end":return c.stop()}}),bA)}function IA(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.takeEvery)(nn.IM_INSERT_PRODUCTS,OA);case 2:case"end":return e.stop()}}),_A)}var SA=Np().mark(LA),wA=Np().mark(PA);function TA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TA(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CA=nn.IM_LOGGER_WARN,AA=nn.IM_LOGGER_ERROR,xA=nn.IM_LOGGER_INFO;function LA(e,t){var n,r,a,o,i,s,c=arguments;return Np().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=(c.length>2&&void 0!==c[2]?c[2]:{}).payload,r=void 0===n?{}:n,"function"==typeof e){l.next=3;break}return l.abrupt("return");case 3:return a=r.message,o=r.error,i=r.meta,l.next=6,(0,QS.select)(Rc);case 6:return s=l.sent,l.next=9,(0,QS.call)(Vd,{level:t,message:a,error:o,meta:i,props:kA({postLog:e},s)});case 9:case"end":return l.stop()}}),SA)}function PA(e){var t;return Np().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.postLog,n.next=3,(0,QS.takeEvery)(xA,LA,t,mu);case 3:return n.next=5,(0,QS.takeEvery)(CA,LA,t,hu);case 5:return n.next=7,(0,QS.takeEvery)(AA,LA,t,gu);case 7:case"end":return n.stop()}}),wA)}var DA=Np().mark(jA),MA=Np().mark(FA);function NA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NA(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var UA=nn.IM_UPDATE_COVER_IMAGE;function jA(e,t){var n,r,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_;return Np().wrap((function(O){for(;;)switch(O.prev=O.next){case 0:if(n=t.payload.image){O.next=3;break}return O.abrupt("return");case 3:if(!ue.includes(n.sourceType)){O.next=7;break}return O.next=6,(0,QS.call)(Mk,e,{payload:{images:[n],type:n.sourceType}});case 6:n=O.sent[0];case 7:return r=n.imageUrl,O.next=10,(0,QS.select)(Uc);case 10:return o=O.sent,i=o.headerWidget,O.next=14,(0,QS.select)(Rc);case 14:return s=O.sent,c=s.rootDomain,l=s.websiteId,d={},p=[],O.prev=18,O.next=21,(0,QS.all)([(0,QS.call)(pt().get,"".concat(r,"/:/$info")),(0,QS.call)(pt().get,"".concat(r,"/:/$colors=mc:10,mn:false,cc:4"))]);case 21:u=O.sent,f=a(u,2),d=f[0].data.info,p=f[1].data.colors,O.next=30;break;case 28:O.prev=28,O.t0=O.catch(18);case 30:return m=i.data.background,h=i.id,g=i.pageId,v=(0,T.pick)(m,["filter","overlayAlpha","shrinkFit","treatmentLayout","useFixedHeight"]),y=RA(RA({},v),{},{image:r,alt:"",coordinates:{x:0,y:0},editedAspectRatio:"",height:"",left:"",position:"center",rotation:"",top:"",video:"",width:""}),(0,T.isEmpty)(d)||(y.oWidth=d.width,y.oHeight=d.height),(0,T.isEmpty)(p)||(y.colors=p.map((function(e){return{hex:e.hex,rgb:e.rgb,hsluv:e.hsluv}}))),E={id:l,pages:[{id:g,websiteId:l,widgets:[{data:{background:y},id:h,pageId:g}]}]},O.next=38,(0,QS.select)(Nc);case 38:return b=O.sent,_=b.api,O.next=42,(0,QS.call)(Sw,_.vnext.updateHeaderWidget,{rootDomain:c,websiteId:l,data:E});case 42:return O.next=44,(0,QS.put)(io({selectedItems:[n],placement:H}));case 44:case"end":return O.stop()}}),DA,null,[[18,28]])}function FA(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.takeEvery)(UA,jA,e);case 2:case"end":return t.stop()}}),MA)}var GA=Np().mark(KA),VA=Np().mark(zA),BA=Np().mark(WA),HA=nn.IM_OPEN_MODAL;function KA(){var e,t,n,r,a,o,i,s,c,l,u;return Np().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,QS.select)(pl);case 2:if(e=d.sent,t=e.ventureId,n=e.businessName,!t||!n){d.next=7;break}return d.abrupt("return");case 7:return d.next=9,(0,QS.select)(Nc);case 9:return r=d.sent,a=r.api,d.next=13,(0,QS.select)(Rc);case 13:return o=d.sent,i=o.rootDomain,s=o.websiteId,c=o.ventureId,l=o.accountId,u=c||s||l,d.next=21,(0,QS.call)(Sw,a.venture.getVentureById,{rootDomain:i,id:u});case 21:case"end":return d.stop()}}),GA)}function zA(){var e,t,n,r,a,o,i,s,c;return Np().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,QS.select)(Rc);case 2:return e=l.sent,t=e.containerId,n=e.ventureId,r=e.rootDomain,a=e.skipLoadVenture,o=e.skipLoadOtherMedia,l.next=10,(0,QS.select)(Nc);case 10:if(i=l.sent,s=i.api,a){l.next=17;break}return c=[(0,QS.call)(KA)],t!==n&&c.push((0,QS.call)(Sw,s.user.get,{rootDomain:r,containerId:t})),l.next=17,(0,QS.all)(c);case 17:if(o){l.next=20;break}return l.next=20,(0,QS.put)(gi());case 20:case"end":return l.stop()}}),VA)}function WA(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.takeEvery)(HA,zA);case 2:case"end":return e.stop()}}),BA)}var qA=Np().mark(ZA),YA=Np().mark(JA),$A=Np().mark(ex),XA=nn.IM_INSERT_ITEMS,QA=nn.IM_VENTURE_INFERRED_DATA_GET;function ZA(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(t=e.payload,n=t.selectedItems,r=t.silentInsert,a=void 0!==r&&r,n&&1===n.length){g.next=3;break}return g.abrupt("return");case 3:if(!a){g.next=5;break}return g.abrupt("return");case 5:return g.next=7,(0,QS.select)(Rc);case 7:return o=g.sent,i=o.placement,s=o.rootDomain,g.next=12,(0,QS.select)(pl);case 12:if(c=g.sent,l=c.ventureId,"LOGO"===i&&l){g.next=16;break}return g.abrupt("return");case 16:return g.next=18,(0,QS.select)(Nc);case 18:return u=g.sent,d=u.api,g.next=22,(0,QS.select)(Uc);case 22:return p=g.sent,f=p.appName,m=n[0],h=m.imageUrl,g.next=28,(0,QS.call)(Sw,d.venture.updateVentureLogoUrl,{rootDomain:s,id:l,overwrite:f===ee,logoUrl:h});case 28:case"end":return g.stop()}}),qA)}function JA(e){var t,n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.ventureId,i.next=3,(0,QS.select)(Rc);case 3:return n=i.sent,r=n.rootDomain,i.next=7,(0,QS.select)(Nc);case 7:return a=i.sent,o=a.api,i.next=11,(0,QS.call)(Sw,o.venture.getVentureById,{rootDomain:r,id:t,includeInferred:!0});case 11:case"end":return i.stop()}}),YA)}function ex(){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,QS.takeEvery)(XA,ZA);case 2:return e.next=4,(0,QS.takeEvery)(QA,JA);case 4:case"end":return e.stop()}}),$A)}var tx=Np().mark(ax),nx=nn.IM_OPEN_MODAL;function rx(e){var t=e.bbConfig,n=t.featureFlags.enablePDF,r=t.pdfLibVersion;if(!1!==n&&!window.pdfjsLib){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2.3.200";return["https://img1.wsimg.com/isteam/ip/static/pdf.js/".concat(e,"/pdf.min.js"),"https://img1.wsimg.com/isteam/ip/static/pdf.js/".concat(e,"/pdf.worker.min.js")]}(r),i=a(o,2),s=i[0],c=i[1],l=document.createElement("script");l.src=s,l.type="text/javascript",l.async=!0,l.crossOrigin="anonymous",l.onload=function(){window.pdfjsLib.GlobalWorkerOptions.workerSrc=c},document.head.appendChild(l)}}function ax(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.takeLatest)(nx,rx,e);case 2:case"end":return t.stop()}}),tx)}function ox(e){if(e&&!e.isStockMedia&&e.sourceType!==$)return(0,T.pick)(e,["altText","references","dify"])}function ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ix(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ix(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const cx=function(e){var t,n=$t(e).spaq;return sx(sx({},n),{},{launchSuccessful:!!(null===(t=n.client.traces[Vu])||void 0===t?void 0:t.end)})};var lx=Np().mark(mx),ux=Np().mark(hx),dx=Np().mark(gx),px=Np().mark(vx),fx=Np().mark(yx);function mx(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.select)(cx);case 2:if(!t.sent.client.enabled){t.next=7;break}return t.next=7,(0,QS.put)(bi(e));case 7:case"end":return t.stop()}}),lx)}function hx(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.select)(cx);case 2:if(!t.sent.client.enabled){t.next=7;break}return t.next=7,(0,QS.put)(_i(e));case 7:case"end":return t.stop()}}),ux)}function gx(){var e,t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,QS.select)(cx);case 2:if(e=a.sent,t=e.logged,n=ft(e,["logged"]),t){a.next=15;break}if(r={spaq:n},n.launchSuccessful){a.next=11;break}return a.next=10,(0,QS.select)(kS);case 10:r.debug=a.sent;case 11:return a.next=13,(0,QS.put)(Zo({message:"[spaq]: perf traces",meta:r}));case 13:return a.next=15,(0,QS.put)(Ei());case 15:case"end":return a.stop()}}),dx)}function vx(e){return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,QS.delay)(e);case 2:return t.next=4,(0,QS.call)(gx);case 4:case"end":return t.stop()}}),px)}function yx(e){var t,n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(t=e.bbConfig.spaq)){i.next=4;break}return i.next=4,(0,QS.put)(vi(t));case 4:if(n=t.client,r=n.enabled,a=n.timeout,o=void 0===a?1e4:a,!r){i.next=10;break}return i.next=8,(0,QS.spawn)(vx,o);case 8:return i.next=10,(0,QS.takeEvery)(nn.IM_SPAQ_LOG,gx);case 10:case"end":return i.stop()}}),fx)}var Ex=Np().mark(Ox);function bx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bx(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ox(t){var n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O,I,S,w,k,C,A,x,L,P,D,M,N,R,U,j,F;return Np().wrap((function(G){for(;;)switch(G.prev=G.next){case 0:return n=t.getState,r=t.dispatch,G.next=3,(0,QS.call)(mx,{name:Bu});case 3:return a=!1,G.prev=4,G.next=7,(0,QS.select)(Rc);case 7:return o=G.sent,i=o.urls,s=i.assetBaseUrl,c=i.assetBaseDataUrl,l=o.featureFlags.enableLocalStorage,u=o.rootDomain,d=void 0===u?"":u,p=o.containerId,f=void 0===p?"":p,m=o.skipLoadImages,h=void 0!==m&&m,g=[st,ct,lt,ut].join("|"),v={rootDomain:d,containerId:f},G.next=22,(0,QS.select)(Nc);case 22:if(y=G.sent,E=y.api,b=y.localDataStore,_=y.assetContainerId,l){G.next=40;break}return G.next=29,(0,QS.put)(ti("calling api to retrieve images when local storage is not enabled"));case 29:return G.next=31,(0,QS.call)(mx,{name:zu});case 31:return G.next=33,(0,QS.call)(Sw,E.images.load,_x(_x({},v),{},{folders:g}),Xp);case 33:return O=G.sent,I=O.data,S=void 0===I?[]:I,G.next=38,(0,QS.call)(hx,{name:zu,assetsCount:S.length});case 38:case 82:G.next=92;break;case 40:return G.next=42,(0,QS.put)(ti("calling ls getUploadedImagesFromLS"));case 42:return G.next=44,(0,QS.call)(mx,{name:Hu});case 44:if(!h){G.next=56;break}return G.next=47,(0,QS.put)(ti("skip loading images"));case 47:return G.next=49,(0,QS.call)(Bw,E.images.load.key,b.getUploadedImagesDiffAndSyncLS,_x(_x({},v),{},{folders:g,assetBaseUrl:s,assetBaseDataUrl:c,images:[],lastSyncedAt:0,skipLoadImages:h}),{getState:n,dispatch:r});case 49:return(w=G.sent).error&&(a=!0),G.next=53,(0,QS.put)(ti({message:"getUploadedImagesDiffAndSyncLS completed",upsertListLength:(0,T.get)(w,"data.upsertList.length"),deleteListLength:(0,T.get)(w,"data.deleteList.length")}));case 53:return G.next=55,(0,QS.call)(gk,{uploadedImages:[]});case 55:return G.abrupt("return");case 56:return G.next=58,(0,QS.call)(Bw,E.images.load.key,b.getUploadedImagesFromLS,_x(_x({},v),{},{assetBaseUrl:s,assetBaseDataUrl:c}));case 58:return k=G.sent,C=k.data,A=(C=void 0===C?{}:C).images,x=C.lastSyncedAt,L=k.error,G.next=64,(0,QS.call)(hx,{name:Hu});case 64:if(L){G.next=84;break}return G.next=67,(0,QS.put)(ti({message:"calling ls getUploadedImagesDiffAndSyncLS",imagesFromLSLength:A.length,lastSyncedAt:x}));case 67:return G.next=69,(0,QS.call)(mx,{name:Ku});case 69:return G.next=71,(0,QS.call)(Bw,E.images.load.key,b.getUploadedImagesDiffAndSyncLS,_x(_x({},v),{},{folders:g,assetBaseUrl:s,assetBaseDataUrl:c,images:A,lastSyncedAt:x}),{getState:n,dispatch:r});case 71:return(P=G.sent).error&&(a=!0),G.next=75,(0,QS.put)(ti({message:"getUploadedImagesDiffAndSyncLS completed",upsertListLength:(0,T.get)(P,"data.upsertList.length"),deleteListLength:(0,T.get)(P,"data.deleteList.length")}));case 75:if(_){G.next=80;break}if(!(D=(0,T.get)(P,"data.assetContainerId"))){G.next=80;break}return G.next=80,(0,QS.put)(fi(D));case 80:return G.next=82,(0,QS.call)(hx,{name:Ku});case 84:return G.next=86,(0,QS.put)(ti({message:"get error on fetching images from LS, switch to api instead",error:L}));case 86:return G.next=88,(0,QS.call)(mx,{name:zu});case 88:return G.next=90,(0,QS.call)(Sw,E.images.load,_x(_x({},v),{},{folders:g}),Xp);case 90:return G.next=92,(0,QS.call)(hx,{name:zu});case 92:return G.next=94,(0,QS.select)(Kc);case 94:return M=G.sent,N=M.uploadedImages,G.next=98,(0,QS.put)(ti("calling backfillDimensions"));case 98:return G.next=100,(0,QS.call)(gk,N);case 100:return G.next=102,(0,QS.select)(TS);case 102:if(R=G.sent,U=R.startedAt,j=R.timeout,F=Date.now()-U,a||!(F>=j)){G.next=123;break}return G.t0=QS.put,G.t1=e,G.t2=_x,G.t3=_x,G.t4={},G.next=114,(0,QS.select)(kS);case 114:return G.t5=G.sent,G.t6=(0,G.t3)(G.t4,G.t5),G.t7={},G.t8={loadAssetElapsedTime:F},G.t9=(0,G.t2)(G.t6,G.t7,G.t8),G.t10={message:"load assets successfully",meta:G.t9},G.t11=G.t1.logWarning.call(G.t1,G.t10),G.next=123,(0,G.t0)(G.t11);case 123:G.next=137;break;case 125:return G.prev=125,G.t12=G.catch(4),G.t13=QS.put,G.t14=e,G.t15=G.t12,G.next=132,(0,QS.select)(kS);case 132:return G.t16=G.sent,G.t17={error:G.t15,message:"Hit error on loading images in saga",meta:G.t16},G.t18=G.t14.logError.call(G.t14,G.t17),G.next=137,(0,G.t13)(G.t18);case 137:return G.next=139,(0,QS.call)(hx,{name:Bu});case 139:case"end":return G.stop()}}),Ex,null,[[4,125]])}function Ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ix(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ix(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wx=Np().mark(xx),Tx=Np().mark(Lx),kx=Np().mark(Px);function Cx(e){return Ax.apply(this,arguments)}function Ax(){return Ax=Up(Np().mark((function e(t){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.map(function(){var e=Up(Np().mark((function e(t){return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("img1.wsimg.com"!==new URL(t).hostname){e.next=4;break}return e.next=4,fetch("".concat(t,"/:/$info"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])}))),Ax.apply(this,arguments)}function xx(e){var t,n,r,a,o,i,s,c,l,u=arguments;return Np().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:function(){},n=u.length>2&&void 0!==u[2]?u[2]:"INSERT",d.next=4,(0,QS.select)(Nc);case 4:return r=d.sent,a=r.api,d.next=8,(0,QS.select)(Rc);case 8:return o=d.sent,i=o.rootDomain,d.next=12,(0,QS.put)(ii(n));case 12:return d.next=14,(0,QS.call)(Sw,a.stockImages.fetchGettyImageUrls,{rootDomain:i,images:e});case 14:return s=d.sent,c=s.data,l=c.map((function(e){return e.url})),d.next=19,(0,QS.call)(Cx,l);case 19:return d.next=21,(0,QS.put)(si());case 21:return t(l),d.abrupt("return",l);case 23:case"end":return d.stop()}}),wx)}function Lx(e){var t;return Np().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,QS.call)(xx,e);case 2:return t=n.sent,n.abrupt("return",e.map((function(e,n){return Sx(Sx({},e),{},{imageUrl:t[n]})})));case 4:case"end":return n.stop()}}),Tx)}function Px(e){var t,n,r,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=a(e.payload,3),n=t[0],r=t[1],o=t[2],i.next=3,(0,QS.call)(xx,n,r,o);case 3:case"end":return i.stop()}}),kx)}function Dx(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mx(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mx(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Mx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nx(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ux=Np().mark(IL),jx=Np().mark(SL),Fx=Np().mark(wL),Gx=Np().mark(TL),Vx=Np().mark(kL),Bx=Np().mark(CL),Hx=Np().mark(AL),Kx=Np().mark(xL),zx=Np().mark(LL),Wx=Np().mark(PL),qx=Np().mark(DL),Yx=Np().mark(ML),$x=Np().mark(NL),Xx=Np().mark(RL),Qx=Np().mark(UL),Zx=Np().mark(jL),Jx=Np().mark(FL),eL=Np().mark(GL),tL=Np().mark(VL),nL=Np().mark(BL),rL=Np().mark(HL),aL=Np().mark(KL),oL=jo,iL=Vo,sL=nn.IM_OPEN_MODAL,cL=nn.IM_STOCK_VIDEOS_SEARCH,lL=nn.IM_STOCK_VIDEOS_RESET,uL=nn.IM_IMAGES_UPLOAD,dL=nn.IM_IMAGES_LOAD,pL=nn.IM_FILES_DELETE,fL=nn.IM_FILES_UPLOAD,mL=nn.IM_FILES_EXTERNALLY_UPLOADED,hL=nn.IM_IMAGE_METADATA_UPDATED,gL=nn.IM_INSERT_ITEMS,vL=nn.IM_PRE_INSERT_ITEMS,yL=nn.IM_DRAG_DROP_FILES_REJECTED,EL=nn.IM_MIXED_ASSET_NEXT_PAGE,bL=nn.IM_STOCK_IMAGES_FETCH_GETTY_URLS;function _L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rootDomain,n=void 0===t?"":t,r=e.containerId;return{rootDomain:n,containerId:void 0===r?"":r}}function OL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rootDomain,n=e.containerId;return t&&n}function IL(){var e,t,n,r,a;return Np().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,QS.select)(Rc);case 2:if(e=o.sent,t=e.market,n=e.businessCategory,r=e.rootDomain,a=e.pageSize,!e.showStockVideos){o.next=11;break}return o.next=11,(0,QS.call)(SL,{payload:{market:t,businessCategory:n,rootDomain:r,pageSize:a}});case 11:case"end":return o.stop()}}),Ux)}function SL(e){var t,n,r,a,o,i,s,c,l,u,d,p,f;return Np().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(t=e.payload,n=t.market,r=t.businessCategory,a=t.rootDomain,n&&r&&a){m.next=3;break}return m.abrupt("return");case 3:return m.next=5,(0,QS.select)(rl);case 5:if(o=m.sent,i=o.categoryStockVideos,s=Fp({market:n,businessCategory:r}),c=i[s],(0,T.isEmpty)(c)){m.next=13;break}return m.next=12,(0,QS.put)(oo(c));case 12:return m.abrupt("return",m.sent);case 13:return m.next=15,(0,QS.select)(Nc);case 15:return l=m.sent,u=l.api,m.next=19,(0,QS.call)(Sw,u.stockVideos.load,{market:n,businessCategory:r,rootDomain:a,fixedResults:!1},Yp);case 19:return d=m.sent,p=d.data,f=(p=void 0===p?{}:p).result,m.next=25,(0,QS.call)(gk,f);case 25:case"end":return m.stop()}}),jx)}function wL(e){var t,n,r,a,o,i,s,c,l,u;return Np().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload.query,d.next=3,(0,QS.select)(Rc);case 3:if(n=d.sent,r=n.market,a=n.rootDomain,o=n.pageSize,r&&a){d.next=9;break}return d.abrupt("return");case 9:return d.next=11,(0,QS.select)(Nc);case 11:return i=d.sent,s=i.api,d.next=15,(0,QS.call)(Sw,s.stockVideos.search,{market:r,rootDomain:a,query:t,pageSize:o},Yp);case 15:return c=d.sent,l=c.data,u=(l=void 0===l?{}:l).result,d.next=21,(0,QS.call)(gk,u);case 21:case"end":return d.stop()}}),Fx)}function TL(e){var t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.event,n=e.requestId,t.total){a.next=3;break}return a.abrupt("return");case 3:return r=Math.round(t.loaded/t.total*100)||1,a.next=6,(0,QS.put)(Xa({requestId:n,uploadProgress:r}));case 6:case"end":return a.stop()}}),Gx)}function kL(e){var t,n,r;return Np().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.data,n=e.requestId,t[0].mediaType!==De){a.next=6;break}return r=Ws(t[0].imageUrl),a.next=6,(0,QS.call)(Ql,{imageUrl:r});case 6:return a.next=8,(0,QS.put)(oL({newImages:t,requestId:n}));case 8:case"end":return a.stop()}}),Vx)}function CL(e){var t,n,r,a,o,i,s,c,u,d,f,m,h,g,v,y,E,b,_,O,I,S,w,k,C,A,x,L,P,D,M,N,R,U,j,F,G,V,B,H,K;return Np().wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return t=e.rootDomain,n=e.containerId,r=e.requestId,a=e.file,o=e.numberOfImages,i=e.totalFileSize,s=e.enableLocalStorage,c=e.appName,u=e.basePath,d=e.metadata,f=e.i18nContent,m=e.experiments,h=e.contentType,g=e.mediaType,z.next=3,(0,QS.call)(_y.channel);case 3:return v=z.sent,z.next=6,(0,QS.select)(Nc);case 6:return y=z.sent,E=y.api,b=y.localDataStore,z.next=11,(0,QS.takeEvery)(v,TL);case 11:if(_={onUploadProgress:function(e){v.put({event:e,requestId:r})}},O=new(gw()),"ols"===c&&O.append("metadata",JSON.stringify({appName:c})),(0,T.isEmpty)(d)||O.append("mlMetadata",JSON.stringify({metadata:d})),I=a.name||"",O.append("file",a,I),S={rootDomain:t,containerId:n,data:O,requestId:r,opts:_,originalFilename:I,numberOfImages:o,totalFileSize:i,appName:c,basePath:u,experiments:m,contentType:h,mediaType:g},C=!1,s){z.next=27;break}return z.next=22,(0,QS.call)(Sw,E.images.upload,S,Xp);case 22:A=z.sent,(w=A.data)||(C=!0),z.next=34;break;case 27:return z.next=29,(0,QS.call)(Bw,E.images.upload.key,b.addUploadedImages,S);case 29:x=z.sent,L=x.data,P=x.error,w=L,P&&(k=P,C=!0);case 34:if(!C){z.next=56;break}return H=function(){return l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_UPLOAD_FAILED",values:{filename:a.name}})},(null===(D=k)||void 0===D||null===(M=D.data)||void 0===M?void 0:M.message)&&(null===(N=k)||void 0===N||null===(R=N.data)||void 0===R?void 0:R.code)?(B=5e3,V=l().createElement("div",{style:{whiteSpace:"pre-wrap",overflowWrap:"break-word"}},H(),l().createElement("br",null),l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_UPLOAD_FAILED_TYPE_CHECK"}))):V=H(),z.next=39,(0,QS.call)(zw,f,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),V,B);case 39:return z.next=41,(0,QS.put)(ti(k));case 41:return z.t0=QS.put,z.t1=ei,z.t2=(null===(U=k)||void 0===U||null===(j=U.data)||void 0===j?void 0:j.code)||"upload failed",z.t3=(null===(F=k)||void 0===F||null===(G=F.data)||void 0===G?void 0:G.message)||"failed to upload image: ".concat(a.name),z.t4=Rx,z.t5={},z.next=49,(0,QS.select)(kS);case 49:return z.t6=z.sent,z.t7=(0,z.t4)(z.t5,z.t6),z.t8={error:z.t2,message:z.t3,meta:z.t7},z.t9=(0,z.t1)(z.t8),z.next=55,(0,z.t0)(z.t9);case 55:return z.abrupt("return");case 56:if((K=w[0]).originalFilename===a.name&&K.size===a.size){z.next=60;break}return z.next=60,(0,QS.call)(Mw,{payload:{eventName:"IM_TRACK_INCORRECT_FILE_UPLOADED"}});case 60:return z.next=62,(0,QS.spawn)(kL,{data:w,requestId:r});case 62:return z.next=64,v.put(_y.END);case 64:case"end":return z.stop()}}),Bx)}function AL(e){var t,n,r,a,o,i,s,c,l;return Np().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.payload,n=t.placement,(r=t.selectedItems)&&0!==r.length){u.next=3;break}return u.abrupt("return");case 3:return u.next=5,(0,QS.select)(Rc);case 5:if(a=u.sent,(o=n||a.placement)&&[G,H,J].includes(o.toLowerCase())){u.next=9;break}return u.abrupt("return");case 9:i=Dx(r),u.prev=10,i.s();case 12:if((s=i.n()).done){u.next=23;break}if(c=s.value,!(l=ox(c))){u.next=21;break}return l.references=(d=l.references,p=o.toLowerCase(),d?p?d.includes(p)?d:d.concat([p]):d:[p]),u.next=19,(0,QS.call)(xL,{payload:{image:c,metadata:l}});case 19:return u.next=21,(0,QS.put)(iL({image:c,metadata:l}));case 21:u.next=12;break;case 23:u.next=28;break;case 25:u.prev=25,u.t0=u.catch(10),i.e(u.t0);case 28:return u.prev=28,i.f(),u.finish(28);case 31:case"end":return u.stop()}var d,p}),Hx,null,[[10,25,28,31]])}function xL(e){var t,n,r,a,o,i,s,c,l,u,d,p;return Np().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.payload,n=t.image,r=t.metadata,n.id){f.next=3;break}return f.abrupt("return");case 3:return f.next=5,(0,QS.select)(Rc);case 5:return a=f.sent,f.next=8,(0,QS.select)(Nc);case 8:if(o=f.sent,i=o.api,s=o.localDataStore,c=a.featureFlags.enableLocalStorage,l=a.urls,u=(l=void 0===l?{}:l).assetBaseDataUrl,d=OS(n.dataUrl,u),p=Rx(Rx({},_L(a)),{},{extractedAssetContainerId:d,assetId:n.id,update:{metadata:(0,T.merge)(n.metadata,r)}}),!c){f.next=21;break}return f.next=19,(0,QS.call)(Bw,i.images.update.key,s.updateUploadedImage,p);case 19:f.next=23;break;case 21:return f.next=23,(0,QS.call)(Sw,i.images.update,p);case 23:case"end":return f.stop()}}),Kx)}function LL(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return Np().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.selectedItems,r=t.fromPostLogo,a=void 0!==r&&r,o=t.silentInsert,i=void 0!==o&&o,g.next=3,(0,QS.select)(Rc);case 3:if(s=g.sent,c=s.rootDomain,l=s.websiteId,u=s.placement,!s.featureFlags.enablePreInsert||"social"!==u.toLowerCase()||n[0].mediaType!==Me||[LI,PI].includes(n[0].privacy.view)){g.next=15;break}return d=n[0].id,g.next=9,(0,QS.select)(Nc);case 9:return p=g.sent,f=p.api,g.next=13,(0,QS.call)(Sw,f.videos.updatePrivacy,{rootDomain:c,websiteId:l,videoId:d});case 13:g.next=23;break;case 15:if(m=n,n[0].gdSource!==oe){g.next=20;break}return g.next=19,(0,QS.call)(Lx,n);case 19:m=g.sent;case 20:return h={selectedItems:m,fromPostLogo:a,silentInsert:i},g.next=23,(0,QS.put)({type:gL,payload:h});case 23:case"end":return g.stop()}}),zx)}function PL(e,t,n){var r,a,o,i,s;return Np().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r=n.uploads,a=r.validMimeTypesRegex,o=r.maxFileSizeMegabytes,i=new RegExp(a),t.type.match(i)){c.next=6;break}return c.next=5,(0,QS.call)(zw,e,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_ONLY_FILES",values:{filename:t.name}}));case 5:case 10:return c.abrupt("return",!1);case 6:if(s=1024*o*1024,!((t&&t.size||0)>s)){c.next=11;break}return c.next=10,(0,QS.call)(zw,e,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_TOO_LARGE",values:{filename:t.name,maxSizeInMb:o}}));case 11:return c.abrupt("return",!0);case 12:case"end":return c.stop()}}),Wx)}function DL(e,t){var n,r,a;return Np().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=t.payload,r=0;case 2:if(!(r<n.length)){o.next=9;break}return a=n[r],o.next=6,(0,QS.call)(zw,e,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_ONLY_FILES",values:{filename:a.name}}));case 6:r++,o.next=2;break;case 9:case"end":return o.stop()}}),qx)}function ML(e,t){var n,r,a,o,i,s,c,l;return Np().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:n=t.totalFileSize,r=t.appName,a=t.basePath,o=t.metadata,i=t.i18nContent,s=t.experiments,c=0;case 2:if(!(c<e.length)){u.next=9;break}return l=e[c],u.next=6,(0,QS.fork)(CL,Rx(Rx({},l),{},{totalFileSize:n,numberOfImages:e.length,appName:r,basePath:a,metadata:o,i18nContent:i,experiments:s,contentType:l.file.type,mediaType:l.file.mediaType}));case 6:c++,u.next=2;break;case 9:case"end":return u.stop()}}),Yx)}function NL(){var e,t,n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,QS.select)(Rc);case 2:return e=i.sent,t=e.uploads,n=(t=void 0===t?{}:t).timeLimit,r=t.percentageThreshold,i.next=8,(0,QS.delay)(n);case 8:return i.next=10,(0,QS.select)(cl);case 10:if(a=i.sent,!((o=a.uploadProgress)<r)){i.next=17;break}return i.next=15,(0,QS.put)(ai());case 15:return i.next=17,(0,QS.call)(Mw,{payload:{eventName:"IM_TRACK_SLOW_UPLOAD_NOTIFICATION_OPEN",data:{uploadProgress:o}}});case 17:case"end":return i.stop()}}),$x)}function RL(e,t){var n,r,a,o,i,s,c,u,d,f,m,h,g,v,y,E,b,_,O,I,S,T,k,C,A,x,L,P,D;return Np().wrap((function(M){for(;;)switch(M.prev=M.next){case 0:return n=t.payload,M.next=3,(0,QS.select)(Rc);case 3:return r=M.sent,M.next=6,(0,QS.select)(Bc);case 6:return a=M.sent,o=a.selectedCollection,i=r.uploads,s=i.maxFileCount,c=i.maxFileCountDify,u=r.appMetadata,M.next=11,(0,QS.select)(rd);case 11:if(d=M.sent,f=d.isDifyAgent,m=f?c:s,!(n.length>m)){M.next=18;break}return M.next=17,(0,QS.call)(zw,e,l().createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l().createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_MAX_FILES",values:{maxFilesCount:m}}));case 17:return M.abrupt("return");case 18:if(h=r.featureFlags,g=h.enableLocalStorage,v=h.enableOnDemandMalwareScanning,OL(r)){M.next=21;break}return M.abrupt("return");case 21:return y={},E=[],M.next=25,(0,QS.select)(Uc);case 25:b=M.sent,_=b.appName,O=b.placement,I="ols"===_?ct:st,T={},(S="LOGO"===O||o===Se?[G]:null)&&(T.references=S),u&&(u.altText&&(T.altText=u.altText),u.dify&&(T.dify=u.dify),u.references&&(T.references=[].concat(ys(T.references||[]),ys(u.references)))),k=0;case 34:if(!(k<n.length)){M.next=43;break}return C=n[k],M.next=38,(0,QS.call)(PL,e,C,r);case 38:M.sent&&(A=(0,w.v4)(),y[A]={filename:C.name,uploadProgress:0},E.push(Rx(Rx({},_L(r)),{},{requestId:A,file:C,enableLocalStorage:g})));case 40:k++,M.next=34;break;case 43:if(!Object.keys(y).length){M.next=46;break}return M.next=46,(0,QS.put)(La(y));case 46:if(!E.length){M.next=68;break}return M.next=49,(0,QS.select)(fl);case 49:if(!(x=M.sent)){M.next=53;break}return M.next=53,(0,QS.cancel)(x);case 53:return M.next=55,(0,QS.fork)(NL);case 55:return L=M.sent,M.next=58,(0,QS.put)(Ii(L));case 58:return P=E.reduce((function(e,t){var n=t.file;return e+(n&&n.size||0)}),0),D=(0,w.v4)(),M.next=62,(0,QS.put)(Do(ju,{beaconId:D}));case 62:return M.next=64,(0,QS.call)(ML,E,{totalFileSize:P,appName:_,basePath:I,metadata:T,i18nContent:e,experiments:{enableOnDemandMalwareScanning:v}});case 64:return M.next=66,(0,QS.cancel)(L);case 66:return M.next=68,(0,QS.put)(Mo(ju,{beaconId:D,totalSize:P,fileCount:E.length}));case 68:case"end":return M.stop()}}),Xx)}function UL(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return Np().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,h.next=3,(0,QS.select)(Rc);case 3:if(n=h.sent,r=n.featureFlags.enableLocalStorage,a=n.urls.assetBaseDataUrl,OL(n)){h.next=7;break}return h.abrupt("return");case 7:return h.next=9,(0,QS.select)(Uc);case 9:return o=h.sent,i=o.appName,s=t.filter((function(e){return e.mediaType!==Me})),c=t.filter((function(e){return e.mediaType===Me})),l=_L(n),h.next=16,(0,QS.select)(Nc);case 16:if(u=h.sent,d=u.api,p=u.localDataStore,!(c.length>0)){h.next=22;break}return h.next=22,(0,QS.all)(c.map((function(e){return(0,QS.put)(Ja(e.id))})));case 22:if(!(s.length>0)){h.next=31;break}if(f=s.reduce((function(e,t){var n=t.dataUrl,r=t.filename,o=OS(n,a);return e[o]||(e[o]={imageFileNames:[],docs:[]}),e[o].imageFileNames.push(r),e[o].docs.push(t),e}),{}),m=Object.keys(f),r){h.next=29;break}return h.next=28,(0,QS.all)(m.map((function(e){var t=f[e],n=t.imageFileNames,r=t.docs;return(0,QS.call)(Sw,d.images.delete,Rx(Rx({},l),{},{extractedAssetContainerId:e,images:n,appName:i}),(function(e){return Rx(Rx({},e),{},{docs:r})}))})));case 28:return h.abrupt("return");case 29:return h.next=31,(0,QS.all)(m.map((function(e){var t=f[e],n=t.imageFileNames,r=t.docs;return(0,QS.call)(Bw,d.images.delete.key,p.deleteUploadedImages,Rx(Rx({},l),{},{extractedAssetContainerId:e,images:n,docs:r,appName:i}))})));case 31:case"end":return h.stop()}}),Qx)}function jL(e){var t,n,r,a,o,i,s;return Np().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.rootDomain,c.next=3,(0,QS.select)(Rc);case 3:if(n=c.sent,(r=void 0===(r=n.hivemind)?{}:r).cohorts){c.next=18;break}return c.next=10,(0,QS.select)(Uc);case 10:return a=c.sent,o=a.placement,c.next=14,(0,QS.select)(Nc);case 14:return i=c.sent,s=i.api,c.next=18,(0,QS.call)(Sw,s.experiments.load,Rx({rootDomain:t},o&&{placement:o}));case 18:case"end":return c.stop()}}),Zx)}function FL(){var e,t,n,r,a,o=arguments;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=(o.length>0&&void 0!==o[0]?o[0]:{}).selectedCollection,t=void 0===e?ge:e,i.next=3,(0,QS.select)(Jt);case 3:if(n=i.sent,1!==(r=n.activeCollections).length){i.next=10;break}return i.next=8,(0,QS.put)(ci(r[0]));case 8:i.next=13;break;case 10:return a=r.includes(t)?t:ge,i.next=13,(0,QS.put)(ci(a));case 13:case"end":return i.stop()}}),Jx)}function GL(e,t){var n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,y,E,b,_,O,I,S,w;return Np().wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return n=e.getState,r=e.dispatch,a=t.payload,o=a.rootDomain,i=a.market,s=a.businessCategory,c=a.showStockVideos,k.next=4,(0,QS.select)(Rc);case 4:return l=k.sent,k.next=7,(0,QS.select)(Nc);case 7:if(u=k.sent,d=u.api,p=l.renderMode,f=l.inWebsiteContext,m=l.featureFlags,h=m.enableVimeo,g=m.enableHivemind,v=l.mediaTypes,y=l.websiteId,E=l.skipLoadVideos,b=l.skipLoadImages,!g){k.next=13;break}return k.next=13,(0,QS.spawn)(jL,{payload:{rootDomain:o}});case 13:if(!(_=v.includes(Me)&&h&&!E)){k.next=17;break}return k.next=17,(0,QS.spawn)(zT);case 17:if(!v.includes(Me)||p===ic||!c||E){k.next=20;break}return k.next=20,(0,QS.spawn)(SL,{payload:{market:i,businessCategory:s,rootDomain:o}});case 20:if(zt(v,Me)||zt(v,Fe)||b){k.next=34;break}if(!f||p!==ic){k.next=25;break}return k.next=25,(0,QS.spawn)(Sw,d.vnext.getSharedWidgets,{rootDomain:o,websiteId:y});case 25:return k.next=27,(0,QS.select)(jc);case 27:if(O=k.sent,I=O.uploaded,!(0,T.isEmpty)(I)){k.next=32;break}return k.next=32,(0,QS.call)(Ox,{getState:n,dispatch:r});case 32:k.next=42;break;case 34:if(!b){k.next=42;break}return k.next=37,(0,QS.select)(jc);case 37:if(S=k.sent,w=S.uploaded,!(0,T.isEmpty)(w)){k.next=42;break}return k.next=42,(0,QS.call)(Ox,{getState:n,dispatch:r});case 42:if(!_){k.next=47;break}return k.next=45,(0,QS.call)(Mw,{payload:{eventName:"IM_TRACK_VIDEO_START"}});case 45:k.next=50;break;case 47:if(zt(v,Fe)){k.next=50;break}return k.next=50,(0,QS.call)(Nw);case 50:case"end":return k.stop()}}),eL)}function VL(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return Np().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=(t=void 0===t?{}:t).pageId,r=void 0===n?1:n,h.next=5,(0,QS.select)(Rc);case 5:return a=h.sent,o=a.pageSize,h.next=9,(0,QS.select)(tl);case 9:return i=h.sent,s=i.uploadedAssets,h.next=13,(0,QS.select)(Jc);case 13:return c=h.sent,l=c.uploadedVideos,u=c.totalVideosInAccount,h.next=18,(0,QS.select)(Kc);case 18:if(d=h.sent,p=d.uploadedImages,f=s.slice(0,o*r).reduce((function(e,t){return t.mediaType===Me?e.videoCount++:e.imageCount++,e}),{videoCount:0,imageCount:0}),!(l.length<u&&l.length-f.videoCount<o)){h.next=25;break}return h.next=25,(0,QS.put)(ui());case 25:return m=p.slice(f.imageCount,o+f.imageCount),h.next=28,(0,QS.put)(Ho(m));case 28:case"end":return h.stop()}}),tL)}function BL(e){var t,n,r,a,o,i,s,c,l,u=arguments;return Np().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=(u.length>1&&void 0!==u[1]?u[1]:{}).payload,n=t.videos,r=void 0===n?[]:n,a=t.images,o=void 0===a?[]:a,d.next=4,(0,QS.select)(Rc);case 4:return i=d.sent,s=i.mediaTypes,d.next=8,(0,QS.put)(Ma());case 8:return d.next=10,(0,QS.put)(Ha());case 10:if(!r.length||!Wt(s)){d.next=23;break}return d.next=13,(0,QS.select)(Xc);case 13:if(c=d.sent,(l=gg({files:r,vimeoUser:c,totalVideosInAccount:c.totalVideosInAccount}))===wl){d.next=23;break}if(!o||!o.length){d.next=20;break}return d.next=20,(0,QS.call)(RL,e,{payload:o});case 20:return d.next=22,(0,QS.put)(Wa({modalType:l}));case 22:return d.abrupt("return");case 23:if(!o.length){d.next=26;break}return d.next=26,(0,QS.put)(Pa(o));case 26:if(!r.length){d.next=29;break}return d.next=29,(0,QS.put)(Ua(r));case 29:case"end":return d.stop()}}),nL)}function HL(e){var t;return Np().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,(0,QS.spawn)(kL,{data:Xp(t),requestId:""});case 3:case"end":return n.stop()}}),rL)}function KL(e,t){var n,r,a,o;return Np().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.getState,r=t.dispatch,a=e.i18nContent,o=e.postLog,i.next=4,(0,QS.takeEvery)(sL,FL,e);case 4:return i.next=6,(0,QS.takeEvery)(sL,GL,{getState:n,dispatch:r});case 6:return i.next=8,(0,QS.takeLatest)(cL,wL);case 8:return i.next=10,(0,QS.takeLatest)(lL,IL);case 10:return i.next=12,(0,QS.takeEvery)(uL,RL,a);case 12:return i.next=14,(0,QS.takeEvery)(dL,Ox,{getState:n,dispatch:r});case 14:return i.next=16,(0,QS.takeEvery)(pL,UL);case 16:return i.next=18,(0,QS.takeEvery)(gL,AL);case 18:return i.next=20,(0,QS.takeEvery)(vL,LL);case 20:return i.next=22,(0,QS.takeEvery)(hL,xL);case 22:return i.next=24,(0,QS.takeEvery)(yL,DL,a);case 24:return i.next=26,(0,QS.takeEvery)(EL,VL);case 26:return i.next=28,(0,QS.takeEvery)(fL,BL,a);case 28:return i.next=30,(0,QS.takeEvery)(mL,HL);case 30:return i.next=32,(0,QS.takeLatest)(bL,Px);case 32:return i.next=34,(0,QS.spawn)(WA);case 34:return i.next=36,(0,QS.spawn)(jw,e);case 36:return i.next=38,(0,QS.spawn)(jk,a);case 38:return i.next=40,(0,QS.spawn)(RC);case 40:return i.next=42,(0,QS.spawn)(FA,a);case 42:return i.next=44,(0,QS.spawn)(VC);case 44:return i.next=46,(0,QS.spawn)(YC);case 46:return i.next=48,(0,QS.spawn)(EA,e);case 48:return i.next=50,(0,QS.spawn)(vk);case 50:return i.next=52,(0,QS.spawn)(PA,{postLog:o});case 52:return i.next=54,(0,QS.spawn)(cA,e);case 54:return i.next=56,(0,QS.spawn)(ok,a);case 56:return i.next=58,(0,QS.spawn)(IA);case 58:return i.next=60,(0,QS.spawn)(rw,{getState:n,dispatch:r});case 60:return i.next=62,(0,QS.spawn)(ex);case 62:return i.next=64,(0,QS.spawn)(yx,e);case 64:return i.next=66,(0,QS.spawn)(ax,e);case 66:case"end":return i.stop()}}),aL)}var zL=nn.IM_INSERT_ITEMS,WL=nn.IM_MODAL_HIDE,qL=nn.IM_API_STATUS_CHANGE,YL=nn.IM_IMAGES_UPLOAD,$L=nn.IM_COLLECTION_VIEW_SET_CURRENT,XL=nn.IM_FILES_DELETE,QL=mg.VENTURE_IMAGES_LOAD,ZL=mg.GC_SITE_IMAGES_LOAD;const JL=function(e){return function(t){return function(n){var r=e.getState()[Yt],a=_d({ImageManager:r}),o=r.appOptions,i=o.appName,s=o.appNameSubdomainMappings,c=r.config,l=c.rootDomain,u=c.enableTagBuilder,d=c.callbacks,p=d.onItemsSelected,f=d.onModalClose,m=d.onImagesUpload,h=d.onApiAuthError,g=d.onCollectionViewChange,v=d.onFilesDelete;switch(n.type){case zL:if((0,T.isFunction)(p)){var y=n.payload,E=y.selectedItems,b=y.fromPostLogo,_=y.silentInsert;void 0!==_&&_||p(E.map((function(e){return u&&e.mediaType===Me?new Tu(e):e.sourceType===$?(e.imageUrl=DI(e.thumbnails,e.height,e.width).link,e.videoUrl=e.link,(0,T.pick)(e,["altText","filename","imageUrl","videoUrl","mediaType","id","urlHash","width","height"])):"facebook_video"===e.sourceType?(0,T.pick)(e,["videoId","videoUrl"]):e.mediaType===Fe?(0,T.pick)(e,["productName","url","images","price","description","descriptionRaw","salePrice"]):(0,T.pick)(e,["gdSource","altText","filename","imageUrl","videoUrl","mediaType","contentType","size","dimensions","thumbnailUrl"])}))),a&&b||e.dispatch(ro())}break;case WL:(0,T.isFunction)(f)&&f(n.payload);break;case qL:var O=n.payload,I=O.key,S=O.status,w=O.payload,k=w&&401===w.status;if(!k||I.startsWith("SSO")||S!==fg.FAIL)break;if(k&&[ZL,QL].includes(I))break;if(I.includes("GOOGLE"))break;if((0,T.isFunction)(h))h();else{var C=encodeURIComponent(window.location.pathname),A=s[i];window.location.href="https://sso.".concat(l,"/?app=").concat(A,"&path=").concat(C)}break;case YL:(0,T.isFunction)(m)&&m(n.payload);break;case XL:(0,T.isFunction)(v)&&v(n.payload);break;case $L:(0,T.isFunction)(g)&&g(n.payload)}t(n)}}};var eP;function tP(e){if(eP)return eP;var t,n=Oy()({onError:function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).sagaStack,r={level:gu,message:"saga error: ".concat(t.message),error:t,props:e};n&&(r.meta={sagaStack:n}),Vd(r)}}),r=(0,by.combineReducers)(s({},Yt,fw[Yt]));return eP=(0,by.createStore)(r,(0,by.applyMiddleware)(n,JL)),t=e.bbConfig,Hs=t,(0,T.isEmpty)(Hs)||(Ks=Promise.resolve(Hs)),n.run(KL,e,eP),eP}var nP="VIDEO_CTA",rP="MEDIA_MANAGER";function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aP(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iP(e){var n=oP({},e),r=a((0,c.useState)(e.modalType),2),o=r[0],i=r[1],s=a((0,c.useState)(e.bbConfig),2),u=s[0],d=s[1],h=(0,c.useCallback)((function(){i(rP)}),[i]);(0,c.useEffect)((function(){C(8166)})),(0,c.useEffect)((function(){var t;(0,T.isEmpty)(u)&&(t=e.rootDomain,Ks||(Ks=Ot({url:"".concat(xt(t),"v1/config")}).then((function(e){var t=e.data;return Hs=t})))).then((function(e){d(e)}))}),[u]);var g=o===nP||e.placement===m?Ey:dy;return n.i18nContent||(n.i18nContent=e.intlConfig),(0,T.isEmpty)(u)?e.customLoader||null:l().createElement("div",{"data-testid":"im-root-container"},l().createElement(p.IntlProvider,n.i18nContent,l().createElement(f.Provider,{store:tP(oP(oP({},n),{},{bbConfig:u}))},l().createElement(g,t({},n,{bbConfig:u,id:"im-root",onOpenMediaManager:h})))))}iP.propTypes={modalType:d().oneOf([rP,nP])},iP.defaultProps={modalType:rP};const sP=iP;var cP=nn.IM_SOCIAL_ACCESS_TOKEN_GET;const lP="\n    <script>\n      try {\n        if(window.opener) {\n          window.opener.postMessage('".concat(cP,"', window.location.origin);\n        }\n        window.close();\n      }\n       catch(e) {}\n    <\/script>\n")})(),A})()));